<?php
/**
 * Generated by Haxe 4.2.2
 */

namespace nMorph\framework\orm\client;

use \nMorph\framework\orm\lang\SQL;
use \nMorph\framework\orm\common\enums\ObjectSourceTypeEnum;
use \nMorph\framework\orm\interfaces\ISentence;
use \nMorph\framework\orm\common\sentences\Val;
use \php\Boot;
use \nMorph\framework\orm\interfaces\ISource;
use \nMorph\framework\orm\common\conditions\Condition;
use \nMorph\framework\orm\common\sentences\FieldSentence;
use \nMorph\framework\orm\common\sentences\Assign;
use \nMorph\framework\orm\common\enums\ObjectEditTypeEnum;
use \nMorph\framework\orm\interfaces\IModelObject;

class ModelObject implements IModelObject {
	/**
	 * @var ISentence[]|\Array_hx
	 */
	static public $AllColumns;
	/**
	 * @var string
	 */
	static public $__rtti = "<class path=\"nMorph.framework.orm.client.ModelObject\" params=\"\">\x0A\x09<implements path=\"nMorph.framework.orm.interfaces.IModelObject\"/>\x0A\x09<AllColumns public=\"1\" expr=\"[]\" line=\"22\" static=\"1\">\x0A\x09\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.interfaces.ISentence\"/></c>\x0A\x09\x09<meta><m n=\":value\"><e>[]</e></m></meta>\x0A\x09</AllColumns>\x0A\x09<TrackChanges public=\"1\" get=\"accessor\" set=\"accessor\">\x0A\x09\x09<x path=\"Bool\"/>\x0A\x09\x09<meta><m n=\":isVar\"/></meta>\x0A\x09</TrackChanges>\x0A\x09<ChangeList public=\"1\" get=\"accessor\" set=\"accessor\">\x0A\x09\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.ChangeItem\"/></c>\x0A\x09\x09<meta><m n=\":isVar\"/></meta>\x0A\x09</ChangeList>\x0A\x09<ObjectEditType public=\"1\" get=\"accessor\" set=\"accessor\">\x0A\x09\x09<e path=\"nMorph.framework.orm.common.enums.ObjectEditTypeEnum\"/>\x0A\x09\x09<meta><m n=\":isVar\"/></meta>\x0A\x09</ObjectEditType>\x0A\x09<ObjectSource public=\"1\" get=\"accessor\" set=\"accessor\">\x0A\x09\x09<e path=\"nMorph.framework.orm.common.enums.ObjectSourceTypeEnum\"/>\x0A\x09\x09<meta><m n=\":isVar\"/></meta>\x0A\x09</ObjectSource>\x0A\x09<get_Source public=\"1\" set=\"method\" line=\"40\"><f a=\"\"><c path=\"nMorph.framework.orm.interfaces.ISource\"/></f></get_Source>\x0A\x09<get_Name public=\"1\" set=\"method\" line=\"44\"><f a=\"\"><c path=\"String\"/></f></get_Name>\x0A\x09<get_Field public=\"1\" set=\"method\" line=\"48\"><f a=\"FieldName\">\x0A\x09<c path=\"String\"/>\x0A\x09<c path=\"nMorph.framework.orm.common.sentences.FieldSentence\"/>\x0A</f></get_Field>\x0A\x09<set_Field public=\"1\" set=\"method\" line=\"52\"><f a=\"FieldName:FieldValue\">\x0A\x09<c path=\"String\"/>\x0A\x09<d/>\x0A\x09<x path=\"Void\"/>\x0A</f></set_Field>\x0A\x09<get_PkCondition public=\"1\" set=\"method\" line=\"55\"><f a=\"\"><c path=\"nMorph.framework.orm.common.conditions.Condition\"/></f></get_PkCondition>\x0A\x09<set_TrackChanges set=\"method\" line=\"59\"><f a=\"value\">\x0A\x09<x path=\"Bool\"/>\x0A\x09<x path=\"Bool\"/>\x0A</f></set_TrackChanges>\x0A\x09<get_TrackChanges set=\"method\" line=\"63\"><f a=\"\"><x path=\"Bool\"/></f></get_TrackChanges>\x0A\x09<get_ChangeList set=\"method\" line=\"67\"><f a=\"\"><c path=\"Array\"><c path=\"nMorph.framework.orm.client.ChangeItem\"/></c></f></get_ChangeList>\x0A\x09<set_ChangeList set=\"method\" line=\"71\"><f a=\"value\">\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.ChangeItem\"/></c>\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.ChangeItem\"/></c>\x0A</f></set_ChangeList>\x0A\x09<get_ObjectEditType set=\"method\" line=\"75\"><f a=\"\"><e path=\"nMorph.framework.orm.common.enums.ObjectEditTypeEnum\"/></f></get_ObjectEditType>\x0A\x09<set_ObjectEditType set=\"method\" line=\"79\"><f a=\"value\">\x0A\x09<e path=\"nMorph.framework.orm.common.enums.ObjectEditTypeEnum\"/>\x0A\x09<e path=\"nMorph.framework.orm.common.enums.ObjectEditTypeEnum\"/>\x0A</f></set_ObjectEditType>\x0A\x09<get_ObjectSource set=\"method\" line=\"83\"><f a=\"\"><e path=\"nMorph.framework.orm.common.enums.ObjectSourceTypeEnum\"/></f></get_ObjectSource>\x0A\x09<set_ObjectSource set=\"method\" line=\"87\"><f a=\"value\">\x0A\x09<e path=\"nMorph.framework.orm.common.enums.ObjectSourceTypeEnum\"/>\x0A\x09<e path=\"nMorph.framework.orm.common.enums.ObjectSourceTypeEnum\"/>\x0A</f></set_ObjectSource>\x0A\x09<AddChange set=\"method\" line=\"93\"><f a=\"item\">\x0A\x09<c path=\"nMorph.framework.orm.client.ChangeItem\"/>\x0A\x09<x path=\"Void\"/>\x0A</f></AddChange>\x0A\x09<Save public=\"1\" set=\"method\" line=\"120\"><f a=\"queue\">\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.QueueItem\"/></c>\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.QueueItem\"/></c>\x0A</f></Save>\x0A\x09<SaveInner public=\"1\" set=\"method\" line=\"183\"><f a=\"queue\">\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.QueueItem\"/></c>\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.QueueItem\"/></c>\x0A</f></SaveInner>\x0A\x09<Clear public=\"1\" set=\"method\" line=\"187\"><f a=\"\"><x path=\"Void\"/></f></Clear>\x0A\x09<ClearInner public=\"1\" set=\"method\" line=\"197\"><f a=\"\"><x path=\"Void\"/></f></ClearInner>\x0A\x09<new public=\"1\" set=\"method\" line=\"33\"><f a=\"\"><x path=\"Void\"/></f></new>\x0A\x09<meta>\x0A\x09\x09<m n=\":directlyUsed\"/>\x0A\x09\x09<m n=\":keepSub\"/>\x0A\x09\x09<m n=\":rtti\"/>\x0A\x09</meta>\x0A</class>";

	/**
	 * @var ChangeItem[]|\Array_hx
	 */
	public $ChangeList;
	/**
	 * @var ObjectEditTypeEnum
	 */
	public $ObjectEditType;
	/**
	 * @var ObjectSourceTypeEnum
	 */
	public $ObjectSource;
	/**
	 * @var bool
	 */
	public $TrackChanges;

	/**
	 * @return void
	 */
	public function __construct () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:34: characters 9-50
		$this->set_ChangeList(new \Array_hx());
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:35: characters 9-56
		$this->set_ObjectEditType(ObjectEditTypeEnum::CREATE());
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:36: characters 9-55
		$this->set_ObjectSource(ObjectSourceTypeEnum::LOGIC());
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:37: characters 9-33
		$this->set_TrackChanges(true);
	}

	/**
	 * @param ChangeItem $item
	 * 
	 * @return void
	 */
	public function AddChange ($item) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:98: lines 98-103
		$_g = 0;
		$_g1 = $this->get_ChangeList();
		while ($_g < $_g1->length) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:98: characters 14-15
			$i = ($_g1->arr[$_g] ?? null);
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:98: lines 98-103
			++$_g;
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:99: lines 99-102
			if ($i->get_Field() === $item->get_Field()) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:100: characters 17-43
				$i->set_NewValue($item->get_NewValue());
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:101: characters 17-23
				return;
			}
		}
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:107: characters 17-31
		$__hx__switch = ($this->get_ObjectEditType()->index);
		if ($__hx__switch === 0) {
		} else if ($__hx__switch === 1) {
		} else if ($__hx__switch === 2) {
		} else if ($__hx__switch === 3) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:109: characters 17-57
			$this->set_ObjectEditType(ObjectEditTypeEnum::EDIT());
		}
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:117: characters 9-30
		$_this = $this->get_ChangeList();
		$_this->arr[$_this->length++] = $item;
	}

	/**
	 * @return void
	 */
	public function Clear () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:189: characters 9-50
		$this->set_ChangeList(new \Array_hx());
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:190: characters 9-58
		$this->set_ObjectEditType(ObjectEditTypeEnum::NOCHANGE());
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:191: characters 9-52
		$this->set_ObjectSource(ObjectSourceTypeEnum::DB());
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:194: characters 9-21
		$this->ClearInner();
	}

	/**
	 * @return void
	 */
	public function ClearInner () {
	}

	/**
	 * @param QueueItem[]|\Array_hx $queue
	 * 
	 * @return QueueItem[]|\Array_hx
	 */
	public function Save ($queue) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:122: characters 9-50
		$sets = new \Array_hx();
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:124: lines 124-165
		$_g = 0;
		$_g1 = $this->get_ChangeList();
		while ($_g < $_g1->length) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:124: characters 14-20
			$change = ($_g1->arr[$_g] ?? null);
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:124: lines 124-165
			++$_g;
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:125: characters 13-46
			$valSentence = null;
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:127: characters 20-39
			$__hx__switch = ($change->get_Field()->get_DBType()->index);
			if ($__hx__switch === 0) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:155: characters 21-59
				$valSentence = Val::int($change->get_NewValue());
			} else if ($__hx__switch === 1) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:145: characters 21-59
				$valSentence = Val::int($change->get_NewValue());
			} else if ($__hx__switch === 2) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:129: characters 21-61
				$valSentence = Val::int64($change->get_NewValue());
			} else if ($__hx__switch === 3) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:143: characters 21-61
				$valSentence = Val::float($change->get_NewValue());
			} else if ($__hx__switch === 4) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:153: characters 21-61
				$valSentence = Val::float($change->get_NewValue());
			} else if ($__hx__switch === 5) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:141: characters 21-61
				$valSentence = Val::float($change->get_NewValue());
			} else if ($__hx__switch === 6) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:137: characters 21-59
				$valSentence = Val::str($change->get_NewValue());
			} else if ($__hx__switch === 7) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:157: characters 21-59
				$valSentence = Val::str($change->get_NewValue());
			} else if ($__hx__switch === 8) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:131: characters 21-59
				$valSentence = Val::str($change->get_NewValue());
			} else if ($__hx__switch === 9) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:149: characters 21-59
				$valSentence = Val::str($change->get_NewValue());
			} else if ($__hx__switch === 10) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:151: characters 21-59
				$valSentence = Val::str($change->get_NewValue());
			} else if ($__hx__switch === 11) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:147: characters 21-59
				$valSentence = Val::str($change->get_NewValue());
			} else if ($__hx__switch === 12) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:133: characters 21-61
				$valSentence = Val::bytes($change->get_NewValue());
			} else if ($__hx__switch === 13) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:139: characters 21-60
				$valSentence = Val::date($change->get_NewValue());
			} else if ($__hx__switch === 14) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:135: characters 21-60
				$valSentence = Val::bool($change->get_NewValue());
			} else if ($__hx__switch === 15) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:159: characters 21-60
				$valSentence = Val::uuid($change->get_NewValue());
			}
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:162: lines 162-164
			if ($valSentence !== null) {
				#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:163: characters 17-65
				$x = Assign::SET($change->get_Field(), $valSentence);
				$sets->arr[$sets->length++] = $x;
			}
		}
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:167: lines 167-177
		if ($this->get_ObjectEditType() === ObjectEditTypeEnum::CREATE()) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:168: characters 13-68
			return SQL::INSERT($this->get_Source())->SETS($sets)->Queue($queue);
		} else if ($this->get_ObjectEditType() === ObjectEditTypeEnum::EDIT()) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:171: characters 13-92
			return SQL::UPDATE($this->get_Source())->SET($sets)->WHERE($this->get_PkCondition())->Queue($queue);
		} else if ($this->get_ObjectEditType() === ObjectEditTypeEnum::DELETE()) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:176: characters 13-89
			return SQL::DELETE()->FROM($this->get_Source())->WHERE($this->get_PkCondition())->Queue($queue);
		}
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:179: characters 9-33
		$queue = $this->SaveInner($queue);
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:180: characters 9-21
		return $queue;
	}

	/**
	 * @param QueueItem[]|\Array_hx $queue
	 * 
	 * @return QueueItem[]|\Array_hx
	 */
	public function SaveInner ($queue) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:184: characters 9-21
		return $queue;
	}

	/**
	 * @return ChangeItem[]|\Array_hx
	 */
	public function get_ChangeList () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:68: characters 9-26
		return $this->ChangeList;
	}

	/**
	 * @param string $FieldName
	 * 
	 * @return FieldSentence
	 */
	public function get_Field ($FieldName) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:49: characters 9-20
		return null;
	}

	/**
	 * @return string
	 */
	public function get_Name () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:45: characters 9-18
		return "";
	}

	/**
	 * @return ObjectEditTypeEnum
	 */
	public function get_ObjectEditType () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:76: characters 9-30
		return $this->ObjectEditType;
	}

	/**
	 * @return ObjectSourceTypeEnum
	 */
	public function get_ObjectSource () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:84: characters 9-28
		return $this->ObjectSource;
	}

	/**
	 * @return Condition
	 */
	public function get_PkCondition () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:56: characters 9-20
		return null;
	}

	/**
	 * @return ISource
	 */
	public function get_Source () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:41: characters 9-20
		return null;
	}

	/**
	 * @return bool
	 */
	public function get_TrackChanges () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:64: characters 9-28
		return $this->TrackChanges;
	}

	/**
	 * @param ChangeItem[]|\Array_hx $value
	 * 
	 * @return ChangeItem[]|\Array_hx
	 */
	public function set_ChangeList ($value) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:72: characters 9-39
		return $this->ChangeList = $value;
	}

	/**
	 * @param string $FieldName
	 * @param mixed $FieldValue
	 * 
	 * @return void
	 */
	public function set_Field ($FieldName, $FieldValue) {
	}

	/**
	 * @param ObjectEditTypeEnum $value
	 * 
	 * @return ObjectEditTypeEnum
	 */
	public function set_ObjectEditType ($value) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:80: characters 9-43
		return $this->ObjectEditType = $value;
	}

	/**
	 * @param ObjectSourceTypeEnum $value
	 * 
	 * @return ObjectSourceTypeEnum
	 */
	public function set_ObjectSource ($value) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:88: characters 9-41
		return $this->ObjectSource = $value;
	}

	/**
	 * @param bool $value
	 * 
	 * @return bool
	 */
	public function set_TrackChanges ($value) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelObject.hx:60: characters 9-41
		return $this->TrackChanges = $value;
	}

	/**
	 * @internal
	 * @access private
	 */
	static public function __hx__init ()
	{
		static $called = false;
		if ($called) return;
		$called = true;


		self::$AllColumns = new \Array_hx();
	}
}

Boot::registerClass(ModelObject::class, 'nMorph.framework.orm.client.ModelObject');
Boot::registerGetters('nMorph\\framework\\orm\\client\\ModelObject', [
	'ObjectSource' => true,
	'ObjectEditType' => true,
	'ChangeList' => true,
	'TrackChanges' => true
]);
Boot::registerSetters('nMorph\\framework\\orm\\client\\ModelObject', [
	'ObjectSource' => true,
	'ObjectEditType' => true,
	'ChangeList' => true,
	'TrackChanges' => true
]);
ModelObject::__hx__init();
