var ui;(function(n){class t{static Init(){head.load("config.js?v="+(new Date).getTime().toString(),function(){head.load("lib/jquery/jquery-3.7.0.min.js","lib/jsviews/jsviews-1.0.11.min.js","assets/css/main.min.css?v="+current_version,"assets/js/web.js?v="+current_version,"assets/js/Base.js?v="+current_version,"assets/js/proxy.js?v="+current_version,"category.css?v="+current_version,"category.js?v="+current_version,function(){t.Load()})})}static Load(){var i=sessionStorage.getItem("p");i==null&&window.location.assign("index.html");t.LoggedUser=nMorph.core.proxy.tools.Packager.Unserialize(i);t.LoggedUser.Role==1&&window.location.assign("task.html");$(document).on("click",".close",function(){t.closeModal()});$(window).on("click",function(n){const i=$("#editModal");n.target==i[0]&&t.closeModal()});$(document).on("click",".editButton",function(){const n=$(this).data("categoryid"),i=t.getCategoryById(n,n=>{t.openModal(n)})});$("#btn_Save").click(function(i){i.preventDefault();const f=$("#categoryId").val(),r=$("#categoryName").val();if(r==null||r=="")return alert("Category name is required.");var u=new nMorph.core.db.sw_todolist.Category;u.CategoryId=f==""?nMorph.framework.common.datatypes.UUID.newUUID():nMorph.framework.common.datatypes.UUID.fromString(f);u.CategoryName=r;n.assets.js.Proxy.Category_Save(u,function(){t.showNotification("Saved");t.closeModal();t.fetchCategories()})});$("#btn_Delete").click(function(i){if(i.preventDefault(),window.confirm("Are you sure to delete this record?")){const i=$("#categoryId").val(),r=$("#categoryName").val();n.assets.js.Proxy.Category_Delete(nMorph.framework.common.datatypes.UUID.fromString(i),()=>{t.showNotification("Deleted!"),t.closeModal(),t.fetchCategories()})}});$("#searchButton").click(function(){const n=$("#searchInput").val();t.searchCategories(n)});$("#clearButton").click(function(){$("#searchInput").val("");t.searchCategories("")});$("#newButton").click(function(){t.openModal(null)});t.fetchCategories()}static showCategories(n){const t=$("#categoriesContainer");t.empty();n.forEach(n=>{const i=$('<div class="dataItem">');i.html(`
                            <label>Category Name:</label> <span>${n.CategoryName}</span>
                            <button data-categoryid="${n.CategoryId}" class="editButton">Edit</button>
                          `);t.append(i)})}static openModal(n){const r=$("#editModal"),t=$("#categoryId"),i=$("#categoryName");n!=null?(t.val(n.CategoryId.toString().toString()),i.val(n.CategoryName)):(t.val(""),i.val(""));r.show()}static closeModal(){const n=$("#editModal");n.hide()}static fetchCategories(){n.assets.js.Proxy.Category_Search("",function(n){t.showCategories(n)})}static searchCategories(i){n.assets.js.Proxy.Category_Search(i,function(n){t.showCategories(n)})}static getCategoryById(t,i){n.assets.js.Proxy.Category_GetByID(nMorph.framework.common.datatypes.UUID.fromString(t),n=>{i&&i(n)})}static showNotification(n){const t=document.getElementById("notificationContainer"),i=document.getElementById("notificationMessage");t&&i&&(i.innerText=n,t.classList.remove("hidden"),setTimeout(()=>{t.classList.add("hidden")},5e3))}static CloseSession(){sessionStorage.clear();window.location.assign("index.html")}}n.Category=t})(ui||(ui={}));ui.Category.Init();