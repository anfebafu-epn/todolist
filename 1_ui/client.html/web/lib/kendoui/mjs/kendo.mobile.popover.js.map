{"version":3,"file":"kendo.mobile.popover.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","kendo","window","ui","mobile","HIDE","OPEN","CLOSE","Widget","DIRECTIONS","down","origin","position","up","left","collision","right","ANIMATION","animation","open","effects","duration","close","DIMENSIONS","horizontal","offset","size","vertical","REVERSE","Popup","extend","init","element","options","popupOptions","axis","that","this","containerPopup","closest","viewport","children","first","container","document","body","copyAnchorStyles","autosize","overlay","show","activate","_activate","bind","deactivate","hide","_apiCall","trigger","fn","call","wrap","addClass","direction","match","dimensions","wrapper","parent","css","width","height","arrow","prependTo","appendTo","className","popup","events","target","anchor","destroy","remove","anchorOffset","elementOffset","cssClass","flipped","min","max","offsetAmount","removeClass","PopOver","initialOpen","on","e","preventDefault","pane","Pane","$angular","notify","view","_invokeNgController","navigateToInitial","navigate","_position","openFor","plugin","jQuery"],"sources":["kendo.mobile.popover.js"],"mappings":"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","sourcesContent":["import './kendo.popup.js';\nimport './kendo.mobile.pane.js';\n\nvar __meta__ = {\n    id: \"mobile.popover\",\n    name: \"PopOver\",\n    category: \"mobile\",\n    description: \"The mobile PopOver widget represents a transient view which is displayed when the user taps on a navigational widget or area on the screen. \",\n    depends: [ \"popup\", \"mobile.pane\" ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        ui = mobile.ui,\n        HIDE = \"hide\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        WRAPPER = '<div class=\"km-popup-wrapper\"></div>',\n        ARROW = '<div class=\"km-popup-arrow\"></div>',\n        OVERLAY = '<div class=\"km-popup-overlay\"></div>',\n        DIRECTION_CLASSES = \"km-up km-down km-left km-right\",\n        Widget = ui.Widget,\n        DIRECTIONS = {\n            \"down\": {\n                origin: \"bottom center\",\n                position: \"top center\"\n            },\n            \"up\": {\n                origin: \"top center\",\n                position: \"bottom center\"\n            },\n            \"left\": {\n                origin: \"center left\",\n                position: \"center right\",\n                collision: \"fit flip\"\n            },\n            \"right\": {\n                origin: \"center right\",\n                position: \"center left\",\n                collision: \"fit flip\"\n            }\n        },\n\n        ANIMATION = {\n            animation: {\n                open: {\n                    effects: \"fade:in\",\n                    duration: 0\n                },\n                close: {\n                    effects: \"fade:out\",\n                    duration: 400\n                }\n            }\n        },\n        DIMENSIONS = {\n            \"horizontal\": { offset: \"top\", size: \"height\" },\n            \"vertical\": { offset: \"left\", size: \"width\" }\n        },\n\n        REVERSE = {\n            \"up\": \"down\",\n            \"down\": \"up\",\n            \"left\": \"right\",\n            \"right\": \"left\"\n        };\n\n    var Popup = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                containerPopup = element.closest(\".km-modalview-wrapper\"),\n                viewport = element.closest(\".km-root\").children('.km-pane').first(),\n                container = containerPopup[0] ? containerPopup : viewport,\n                popupOptions,\n                axis;\n\n            if (options.viewport) {\n                viewport = options.viewport;\n            } else if (!viewport[0]) {\n                viewport = window;\n            }\n\n            if (options.container) {\n                container = options.container;\n            } else if (!container[0]) {\n                container = document.body;\n            }\n\n            popupOptions = {\n                viewport: viewport,\n                copyAnchorStyles: false,\n                autosize: true,\n                open: function() {\n                    that.overlay.show();\n                },\n\n                activate: that._activate.bind(that),\n\n                deactivate: function() {\n                    that.overlay.hide();\n                    if (!that._apiCall) {\n                        that.trigger(HIDE);\n                    }\n\n                    that._apiCall = false;\n                }\n            };\n\n            Widget.fn.init.call(that, element, options);\n\n            element = that.element;\n            options = that.options;\n\n            element.wrap(WRAPPER).addClass(\"km-popup\").show();\n\n            axis = that.options.direction.match(/left|right/) ? \"horizontal\" : \"vertical\";\n\n            that.dimensions = DIMENSIONS[axis];\n\n            that.wrapper = element.parent().css({\n                width: options.width,\n                height: options.height\n            }).addClass(\"km-popup-wrapper km-\" + options.direction).hide();\n\n            that.arrow = $(ARROW).prependTo(that.wrapper).hide();\n\n            that.overlay = $(OVERLAY).appendTo(container).hide();\n            popupOptions.appendTo = that.overlay;\n\n            if (options.className) {\n                that.overlay.addClass(options.className);\n            }\n\n            that.popup = new kendo.ui.Popup(that.wrapper, $.extend(true, popupOptions, ANIMATION, DIRECTIONS[options.direction]));\n        },\n\n        options: {\n            name: \"Popup\",\n            width: 240,\n            height: \"\",\n            direction: \"down\",\n            container: null,\n            viewport: null\n        },\n\n        events: [\n            HIDE\n        ],\n\n        show: function(target) {\n            this.popup.options.anchor = $(target);\n            this.popup.open();\n        },\n\n        hide: function() {\n            this._apiCall = true;\n            this.popup.close();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.popup.destroy();\n            this.overlay.remove();\n        },\n\n        target: function() {\n            return this.popup.options.anchor;\n        },\n\n        _activate: function() {\n            var that = this,\n                direction = that.options.direction,\n                dimensions = that.dimensions,\n                offset = dimensions.offset,\n                popup = that.popup,\n                anchor = popup.options.anchor,\n                anchorOffset = $(anchor).offset(),\n                elementOffset = $(popup.element).offset(),\n                cssClass = popup.flipped ? REVERSE[direction] : direction,\n                min = that.arrow[dimensions.size]() * 2,\n                max = that.element[dimensions.size]() - that.arrow[dimensions.size](),\n                size = $(anchor)[dimensions.size](),\n                offsetAmount = anchorOffset[offset] - elementOffset[offset] + (size / 2);\n\n            if (offsetAmount < min) {\n                offsetAmount = min;\n            }\n\n            if (offsetAmount > max) {\n                offsetAmount = max;\n            }\n\n            that.wrapper.removeClass(DIRECTION_CLASSES).addClass(\"km-\" + cssClass);\n            that.arrow.css(offset, offsetAmount).show();\n        }\n    });\n\n    var PopOver = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                popupOptions;\n\n            that.initialOpen = false;\n\n            Widget.fn.init.call(that, element, options);\n\n            popupOptions = $.extend({\n                className: \"km-popover-root\",\n                hide: function() { that.trigger(CLOSE); }\n            }, this.options.popup);\n\n            that.popup = new Popup(that.element, popupOptions);\n            that.popup.overlay.on(\"move\", function(e) {\n                if (e.target == that.popup.overlay[0]) {\n                    e.preventDefault();\n                }\n            });\n\n            that.pane = new ui.Pane(that.element, $.extend(this.options.pane, { $angular: this.options.$angular }));\n\n            kendo.notify(that, ui);\n        },\n\n        options: {\n            name: \"PopOver\",\n            popup: { },\n            pane: { }\n        },\n\n        events: [\n            OPEN,\n            CLOSE\n        ],\n\n        open: function(target) {\n            this.popup.show(target);\n\n            if (!this.initialOpen) {\n                if (!this.pane.navigateToInitial()) {\n                    this.pane.navigate(\"\");\n                }\n\n                this.popup.popup._position();\n                this.initialOpen = true;\n            } else {\n                this.pane.view()._invokeNgController();\n            }\n        },\n\n        openFor: function(target) {\n            this.open(target);\n            this.trigger(OPEN, { target: this.popup.target() });\n        },\n\n        close: function() {\n            this.popup.hide();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.pane.destroy();\n            this.popup.destroy();\n\n            kendo.destroy(this.element);\n        }\n    });\n\n    ui.plugin(Popup);\n    ui.plugin(PopOver);\n})(window.kendo.jQuery);\n"]}