{"version":3,"file":"kendo.gantt.timeline.js","names":["__meta__","id","name","category","description","depends","hidden","$","Widget","kendo","ui","kendoDomElement","dom","element","kendoTextElement","text","kendoHtmlElement","html","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","isRtl","keys","Query","data","NS","CLICK","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","DOT","DAY_HEADER_TEMPLATE","start","toString","WEEK_HEADER_TEMPLATE","end","date","addDays","MONTH_HEADER_TEMPLATE","RESIZE_TOOLTIP_TEMPLATE","styles","messages","format","tooltipWrapper","tooltipContent","TASK_TOOLTIP_TEMPLATE","task","htmlEncode","taskDetails","title","taskDetailsPercent","percentComplete","reset","defaultViews","day","type","week","month","year","blurActiveElement","activeElement","_activeElement","nodeName","toLowerCase","trigger","GanttView","init","options","fn","call","this","header","find","gridHeader","content","gridContent","contentWidth","width","_workDays","workDays","dayIndex","workWeekStart","push","workWeekEnd","getWorkDays","_headerTree","headerTree","_taskTree","taskTree","_taskTemplate","taskTemplate","template","Template","templateSettings","_dependencyTree","dependencyTree","_taskCoordinates","_currentTime","destroy","clearTimeout","_tooltipTimeout","headerRow","_dragHint","_resizeHint","_resizeTooltip","_taskTooltip","_percentCompleteResizeTooltip","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","hourSpan","slotSize","currentTimeMarker","updateInterval","renderLayout","_slots","_createSlots","_tableWidth","_calculateTableWidth","createLayout","_layout","_slotDimensions","_adjustHeight","dependenciesWrapper","height","rows","headers","_headers","colgroup","_colgroup","tree","className","tbody","table","headerTable","style","role","render","first","last","slot","children","slots","_timeSlots","i","length","offsetLeft","offsetWidth","tasks","contentTable","totalHeight","taskCount","rowsTable","_rowsTable","columnsTable","_columnsTable","tasksTable","_tasksTable","calculatedSize","row","_contentHeight","_rowHeight","undefined","_renderCurrentTime","rowCount","attributes","tableRow","alt","tableCell","_createTable","slotSpan","cells","slotsCount","totalSpan","span","colspan","isNonWorking","nonWorking","cell","position","plannedPosition","resourcesPosition","resourceStyle","rowIndex","taskLeft","taskRight","coordinates","size","_calculateMilestoneWidth","milestoneWidth","Math","round","resourcesField","resource","resourceAlt","resourcesMargin","_calculateResourcesMargin","taskBorderWidth","_calculateTaskBorderWidth","showPlannedTasks","l","_taskPosition","_taskPositionPlanned","borderWidth","_renderTask","left","max","clientWidth","resourcesWrap","_renderResources","isMilestone","cols","currentSpan","maxSpan","boundingClientRect","taskMilestone","milestone","append","getBoundingClientRect","right","remove","margin","wrapper","parseInt","css","computedStyle","taskSingle","getComputedStyles","parseFloat","taskWrapper","taskElement","progressHandleOffset","plannedElement","endTaskDotLeft","taskOffsetWrap","offsetElement","editable","wrapClassName","taskWrap","dragHandleStyle","taskWrapAttr","endTaskDotRight","taskFullWidth","_renderPlannedMilestone","_renderPlannedSingleTask","summary","_renderSummary","taskSummaryWrap","_renderMilestone","taskMilestoneWrap","_renderSingleTask","plannedStart","plannedEnd","taskOffset","resize","update","taskActions","link","taskDelete","href","icon","iconDelete","taskResizeHandle","taskResizeHandleWest","taskResizeHandleEast","taskInnerWrap","dependencyCreate","taskDot","taskDotStart","taskDotEnd","dragPercentComplete","taskDragHandle","progressWidth","taskContent","taskChildren","classes","widthExceptDelay","taskDelayed","taskAdvanced","taskComplete","uid","taskSummary","taskSummaryProgress","taskSummaryComplete","taskPlannedMoment","taskPlannedMomentLeft","taskPlannedDuration","taskPlanned","resources","color","get","reverse","startLeft","_offset","slotOffset","_slotIndex","field","value","middle","startIdx","endIdx","slice","ceil","_timeByPosition","x","snap","snapToEnd","_slotByPosition","offset","duration","getTime","slotIndex","_renderDependencies","dependencies","elements","apply","_renderDependency","dependency","predecessor","predecessorId","successor","successorId","attr","_renderFF","from","to","lines","_dependencyFF","_arrow","_renderSS","_renderFS","_dependencyFS","_renderSF","delta","that","top","dir","rowHeight","fromTop","floor","toTop","addHorizontal","_line","line","lineHorizontal","addVertical","lineVertical","abs","minLineHeight","direction","arrowWest","arrowEast","count","j","_createDragHint","clone","addClass","dragHint","cursor","visibility","closest","_updateDragHint","_removeDragHint","_createResizeHint","tooltipTop","taskTop","marquee","marqueeColor","RESIZE_HINT","views","resizeTooltipFormat","_resizeTooltipWidth","_resizeTooltipTop","_updateResizeHint","resizeStart","tooltipLeft","tablesWidth","support","scrollbar","tooltipWidth","tableOffset","tasksWrapper","appendTo","_removeResizeHint","_updatePercentCompleteTooltip","_removePercentCompleteTooltip","tooltip","tooltipCallout","PERCENT_RESIZE_TOOLTIP_TEMPLATE","tooltipMiddle","arrow","callout","arrowHeight","_updateDependencyDragHint","_removeDependencyDragHint","_creteDependencyDragHint","deltaX","deltaY","y","sqrt","angle","atan","PI","dependencyHint","transform","_createTaskTooltip","mouseLeft","contentOffset","contentScrollLeft","scrollLeft","parents","rowOffset","scrollTop","_adjustTooltipDimensions","_removeTaskTooltip","_createOffsetTooltip","hours","_offsetTooltip","offsetValue","plannedTasksMessages","plannedTasks","minutes","offsetText","days","offsetTooltipDelay","offsetPrefix","OFFSET_TOOLTIP_TEMPLATE","_removeOffsetTooltip","_createPlannedTooltip","_plannedTooltip","plannedTooltip","editorMessages","editor","startDate","endDate","PLANNED_TOOLTIP_TEMPLATE","_removePlannedTooltip","_scrollTo","elementLeft","elementWidth","elementRight","rowTop","rowBottom","contentTop","contentBottom","contentLeft","contentRight","scrollbarWidth","_scrollToDate","viewStart","viewEnd","columnLevels","level","column","headerText","levelIndex","levelCount","columnIndex","columnCount","_hours","slotEnd","isWorkHour","getHours","setHours","_days","isWorkDay","nextDay","_isWorkDay","_weeks","daySlots","firstDay","calendarInfo","dayOfWeek","_months","endMonth","firstDayOfMonth","setMonth","getMonth","_years","monthSpan","_slotHeaders","columns","getDay","getCulture","calendars","standard","currentTime","_getCurrentTime","timeOffset","viewStyles","tablesWrap","markerOptions","_currentTimeUpdateTimer","setInterval","bind","gridHeaderWrap","offsetTooltipAdvanced","GanttDayView","timeHeaderTemplate","dayHeaderTemplate","range","optionsRange","getDate","getMilliseconds","daySlot","hourSlots","GanttWeekView","weekHeaderTemplate","endDay","rangeEnd","setDate","GanttMonthView","monthHeaderTemplate","lastDayOfMonth","GanttYearView","yearHeaderTemplate","monthSlots","each","index","GanttTimeline","_wrapper","_domTrees","_views","_selectable","_draggable","_resizable","_percentResizeDraggable","_createDependencyDraggable","_attachEvents","_tooltip","selectable","clearInterval","_unbindView","_selectedView","_moveDraggable","_resizeDraggable","_percentDraggable","_dependencyDraggable","touch","off","calculatedRowHeight","calculatedCellHeight","gridContentWrap","_calculatedSize","Tree","view","isSettings","defaultView","selected","_selectedViewName","_selectView","action","_initializeView","_viewByIndex","getter","window","Error","newRange","newDate","prefix","_range","sort","toArray","_render","_tasks","_taskByUid","currentStart","startOffset","cleanUp","dragInProgress","move","Draggable","distance","filter","holdToDrag","mobileOS","ignore","e","currentTarget","parent","preventDefault","location","throttle","updateHintDate","userEvents","currentEnd","hasClass","taskElementOffset","timelineOffset","originalPercentWidth","maxPercentWidth","currentPercentComplete","updateElement","siblings","initialDelta","currentWidth","min","originalHandle","startX","startY","hoveredHandle","hoveredTask","removeClass","hovered","origin","toggleHandles","toggleClass","elementOffset","tablesOffset","target","elementUnderCursor","currentX","currentY","fromStart","toStart","predecessorElement","successorElement","on","stopPropagation","ctrlKey","document","elementFromPoint","clientX","clientY","click","selectDependency","clearSelection","select","taskWrapActive","_tabindex","selectedDependency","keyCode","DELETE","dependencyDestroy","kendoTouch","doubletap","currentMousePosition","tooltipOptions","mouseMoveHandler","visible","relatedTarget","currentPosition","client","setTimeout","_offsetTooltipTimeout","_plannedTooltipTimeout","_setPlanned","jQuery"],"sources":["kendo.gantt.timeline.js"],"mappings":"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","sourcesContent":["import './kendo.dom.js';\nimport './kendo.touch.js';\nimport './kendo.draganddrop.js';\nimport './kendo.icons.js';\n\nvar __meta__ = {\n    id: \"gantt.timeline\",\n    name: \"Gantt Timeline\",\n    category: \"web\",\n    description: \"The Gantt Timeline\",\n    depends: [ \"dom\", \"touch\", \"draganddrop\", \"icons\" ],\n    hidden: true\n};\n\n(function($) {\n\n    var Widget = kendo.ui.Widget;\n    var kendoDomElement = kendo.dom.element;\n    var kendoTextElement = kendo.dom.text;\n    var kendoHtmlElement = kendo.dom.html;\n    var isPlainObject = $.isPlainObject;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var extend = $.extend;\n    var isRtl = false;\n    var keys = kendo.keys;\n    var Query = kendo.data.Query;\n    var STRING = \"string\";\n    var NS = \".kendoGanttTimeline\";\n    var CLICK = \"click\";\n    var DBLCLICK = \"dblclick\";\n    var MOUSEMOVE = \"mousemove\";\n    var MOUSEENTER = \"mouseenter\";\n    var MOUSELEAVE = \"mouseleave\";\n    var KEYDOWN = \"keydown\";\n    var DOT = \".\";\n    var TIME_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 't');\n    var DAY_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 'ddd M/dd');\n    var WEEK_HEADER_TEMPLATE = ({ start, end }) => `${kendo.toString(start, 'ddd M/dd')} - ${kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')}`;\n    var MONTH_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 'MMM');\n    var YEAR_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 'yyyy');\n    var RESIZE_HINT = ({ styles }) => `<div class=\"${styles.marquee}\">` +\n                           `<div class=\"${styles.marqueeColor}\"></div>` +\n                       '</div>';\n    var RESIZE_TOOLTIP_TEMPLATE = ({ styles, messages, start, end, format }) => `<div style=\"z-index: 100002;\" class=\"${styles.tooltipWrapper} k-gantt-resize-hint\">` +\n                                   `<div class=\"${styles.tooltipContent}\">` +\n                                        `<div>${messages.start}: ${kendo.toString(start, format)}</div>` +\n                                        `<div>${messages.end}: ${kendo.toString(end, format)}</div>` +\n                                   '</div>' +\n                              '</div>';\n    var PERCENT_RESIZE_TOOLTIP_TEMPLATE = ({ styles, text }) => `<div style=\"z-index: 100002;\" class=\"${styles.tooltipWrapper}\" >` +\n                                   `<div class=\"${styles.tooltipContent}\">${text}%</div>` +\n                                   `<div class=\"${styles.tooltipCallout}\" style=\"left:13px;\"></div>` +\n                              '</div>';\n    var TASK_TOOLTIP_TEMPLATE = ({ styles, task, messages }) => `<div class=\"${kendo.htmlEncode(styles.taskDetails)}\">` +\n                                    `<strong>${kendo.htmlEncode(task.title)}</strong>` +\n                                    `<div class=\"${styles.taskDetailsPercent}\">${kendo.toString(task.percentComplete, \"p0\")}</div>` +\n                                    `<ul class=\"${styles.reset}\">` +\n                                        `<li>${messages.start}: ${kendo.toString(task.start, \"h:mm tt ddd, MMM d\")}</li>` +\n                                        `<li>${messages.end}: ${kendo.toString(task.end, \"h:mm tt ddd, MMM d\")}</li>` +\n                                    '</ul>' +\n                                '</div>';\n    var OFFSET_TOOLTIP_TEMPLATE = ({ offsetPrefix, offsetText }) => `<span>${offsetPrefix}: ${offsetText}</span>`;\n    var PLANNED_TOOLTIP_TEMPLATE = ({ plannedStart, plannedEnd, startDate, endDate }) => '<div class=\"k-task-content\">' +\n            `<div>${plannedStart}: ${startDate}</div>` +\n            `<div>${plannedEnd}: ${endDate}</div>` +\n        '</div>';\n    var SIZE_CALCULATION_TEMPLATE = \"<table style='visibility: hidden;'>\" +\n        \"<tbody>\" +\n            \"<tr style='height:{0}'>\" +\n                \"<td>&nbsp;</td>\" +\n            \"</tr>\" +\n        \"</tbody>\" +\n    \"</table>\";\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.GanttDayView\"\n        },\n        week: {\n            type: \"kendo.ui.GanttWeekView\"\n        },\n        month: {\n            type: \"kendo.ui.GanttMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.GanttYearView\"\n        }\n    };\n\n    function trimOptions(options) {\n        delete options.name;\n        delete options.prefix;\n        delete options.views;\n\n        return options;\n    }\n\n    function getWorkDays(options) {\n        var workDays = [];\n        var dayIndex = options.workWeekStart;\n\n        workDays.push(dayIndex);\n\n        while (options.workWeekEnd != dayIndex) {\n            if (dayIndex > 6) {\n                dayIndex -= 7;\n            } else {\n                dayIndex++;\n            }\n            workDays.push(dayIndex);\n        }\n        return workDays;\n    }\n\n    function blurActiveElement() {\n        var activeElement = kendo._activeElement();\n\n        if (activeElement && activeElement.nodeName.toLowerCase() !== \"body\") {\n            $(activeElement).trigger(\"blur\");\n        }\n    }\n\n    var viewStyles = {\n        alt: \"k-alt k-table-row k-table-alt-row\",\n        reset: \"k-reset\",\n        nonWorking: \"k-nonwork-hour\",\n        header: \"k-header k-table-td\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        rowsTable: \"k-gantt-rows\",\n        columnsTable: \"k-gantt-columns\",\n        tasksTable: \"k-gantt-tasks\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        resource: \"k-resource\",\n        resourceAlt: \"k-resource k-alt\",\n        headerTable: \"k-grid-header-table k-table k-table-md\",\n        table: \"k-table k-table-md\",\n        tbody: \"k-table-tbody\",\n        tableRow: \"k-table-row\",\n        tableCell: \"k-table-td\",\n        task: \"k-task\",\n        taskSingle: \"k-task-single\",\n        taskMilestone: \"k-task-milestone\",\n        taskSummary: \"k-task-summary\",\n        taskWrap: \"k-task-wrap\",\n        taskMilestoneWrap: \"k-milestone-wrap\",\n        taskSummaryWrap: \"k-summary-wrap\",\n        taskPlanned: \"k-task-planned\",\n        taskPlannedMoment: \"k-task-moment\",\n        taskPlannedDuration: \"k-task-duration\",\n        taskPlannedMomentLeft: \"k-moment-left\",\n        taskAdvanced: \"k-task-advanced\",\n        taskDelayed: \"k-task-delayed\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskInnerWrap: \"k-task-inner-wrap\",\n        resourcesWrap: \"k-resources-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskContent: \"k-task-content\",\n        taskTemplate: \"k-task-template\",\n        taskActions: \"k-task-actions\",\n        taskDelete: \"k-task-delete\",\n        taskComplete: \"k-task-complete\",\n        taskDetails: \"k-task-details\",\n        taskDetailsPercent: \"k-task-pct\",\n        link: \"k-link\",\n        iconDelete: \"x\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskResizeHandleEast: \"k-resize-e\",\n        taskSummaryProgress: \"k-task-summary-progress\",\n        taskSummaryComplete: \"k-task-summary-complete\",\n        line: \"k-gantt-line\",\n        lineHorizontal: \"k-gantt-line-h\",\n        lineVertical: \"k-gantt-line-v\",\n        arrowWest: \"k-arrow-w\",\n        arrowEast: \"k-arrow-e\",\n        dragHint: \"k-drag-hint\",\n        dependencyHint: \"k-gantt-dependency-hint\",\n        tooltipWrapper: \"k-tooltip\",\n        tooltipContent: \"k-tooltip-content\",\n        tooltipCallout: \"k-callout k-callout-s\",\n        callout: \"k-callout\",\n        marquee: \"k-marquee k-gantt-marquee\",\n        marqueeColor: \"k-marquee-color\",\n        offsetTooltipAdvanced: \"k-offset-tooltip-advanced\",\n        offsetTooltipDelay: \"k-offset-tooltip-delayed\",\n        plannedTooltip: \"k-planned-tooltip\"\n    };\n\n    var GanttView = kendo.ui.GanttView = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.title = this.options.title || this.options.name;\n\n            this.header = this.element.find(DOT + GanttView.styles.gridHeader);\n\n            this.content = this.element.find(DOT + GanttView.styles.gridContent);\n\n            this.contentWidth = this.content.width();\n\n            this._workDays = getWorkDays(this.options);\n\n            this._headerTree = options.headerTree;\n\n            this._taskTree = options.taskTree;\n\n            this._taskTemplate = options.taskTemplate ?\n                kendo.template(options.taskTemplate, extend({}, kendo.Template, options.templateSettings)) :\n                null;\n\n            this._dependencyTree = options.dependencyTree;\n\n            this._taskCoordinates = {};\n\n            this._currentTime();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            this.headerRow = null;\n            this.header = null;\n            this.content = null;\n\n            this._dragHint = null;\n            this._resizeHint = null;\n            this._resizeTooltip = null;\n            this._taskTooltip = null;\n            this._percentCompleteResizeTooltip = null;\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n        },\n\n        options: {\n            showWorkHours: false,\n            showWorkDays: false,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            hourSpan: 1,\n            slotSize: 100,\n            currentTimeMarker: {\n                updateInterval: 10000\n            }\n        },\n\n        renderLayout: function() {\n            this._slots = this._createSlots();\n\n            this._tableWidth = this._calculateTableWidth();\n\n            this.createLayout(this._layout());\n\n            this._slotDimensions();\n\n            this._adjustHeight();\n\n            this.content.find(DOT + GanttView.styles.dependenciesWrapper).width(this._tableWidth);\n        },\n\n        _adjustHeight: function() {\n            if (this.content) {\n                this.content.height(this.element.height() - outerHeight(this.header));\n            }\n        },\n\n        createLayout: function(rows) {\n            var headers = this._headers(rows);\n            var colgroup = this._colgroup();\n            var tree = this._headerTree;\n            var header = kendoDomElement(\"tbody\", { className: GanttView.styles.tbody }, headers);\n            var table = kendoDomElement(\"table\", { className: GanttView.styles.headerTable, style: { width: this._tableWidth + \"px\" }, role: \"presentation\" }, [colgroup, header]);\n\n            tree.render([table]);\n\n            this.headerRow = this.header.find(\"table\").first().find(\"tr\").last();\n        },\n\n        _slotDimensions: function() {\n            var headers = this.headerRow[0].children;\n            var slots = this._timeSlots();\n            var slot;\n            var header;\n\n            for (var i = 0, length = headers.length; i < length; i++) {\n                header = headers[i];\n                slot = slots[i];\n\n                slot.offsetLeft = header.offsetLeft;\n                slot.offsetWidth = header.offsetWidth;\n            }\n        },\n\n        render: function(tasks) {\n            var taskCount = tasks.length;\n            var styles = GanttView.styles;\n            var contentTable;\n            var rowsTable = this._rowsTable(taskCount);\n            var columnsTable = this._columnsTable(taskCount);\n            var tasksTable = this._tasksTable(tasks);\n            var currentTimeMarker = this.options.currentTimeMarker;\n            var calculatedSize = this.options.calculatedSize;\n            var totalHeight;\n\n            this._taskTree.render([rowsTable, columnsTable, tasksTable]);\n\n            contentTable = this.content.find(DOT + styles.rowsTable);\n\n            if (calculatedSize) {\n                totalHeight = calculatedSize.row * tasks.length;\n                this.content.find(DOT + styles.tasksTable).height(totalHeight);\n                contentTable.height(totalHeight);\n            }\n\n            this._contentHeight = contentTable.height();\n            this._rowHeight = calculatedSize ? calculatedSize.row : this._contentHeight / contentTable.find(\"tr\").length;\n\n            this.content.find(DOT + styles.columnsTable).height(this._contentHeight);\n\n            if (currentTimeMarker !== false && currentTimeMarker.updateInterval !== undefined) {\n                this._renderCurrentTime();\n            }\n        },\n\n        _rowsTable: function(rowCount) {\n            var rows = [];\n            var row;\n            var styles = GanttView.styles;\n            var attributes = [{ className: styles.tableRow }, { className: styles.alt }];\n\n            for (var i = 0; i < rowCount; i++) {\n                row = kendoDomElement(\"tr\", attributes[i % 2], [\n                    kendoDomElement(\"td\", { className: styles.tableCell }, [\n                        kendoTextElement(\"\\u00a0\")\n                    ])\n                ]);\n\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: styles.rowsTable + \" k-grid-table \" + styles.table });\n        },\n\n        _columnsTable: function() {\n            var cells = [];\n            var row;\n            var styles = GanttView.styles;\n            var slots = this._timeSlots();\n            var slotsCount = slots.length;\n            var slot;\n            var slotSpan;\n            var totalSpan = 0;\n            var attributes;\n\n            for (var i = 0; i < slotsCount; i++) {\n                slot = slots[i];\n\n                attributes = { className: styles.tableCell };\n\n                slotSpan = slot.span;\n\n                totalSpan += slotSpan;\n\n                if (slotSpan !== 1) {\n                    attributes.colspan = slotSpan;\n                }\n\n                if (slot.isNonWorking) {\n                    attributes.className += \" \" + styles.nonWorking;\n                }\n\n                cells.push(kendoDomElement(\"td\", attributes, [\n                    kendoTextElement(\"\\u00a0\")\n                ]));\n            }\n\n            row = kendoDomElement(\"tr\", { className: styles.tableRow }, cells);\n\n            return this._createTable(totalSpan, [row], { className: styles.columnsTable + \" \" + styles.table });\n        },\n\n        _tasksTable: function(tasks) {\n            var rows = [];\n            var row;\n            var cell;\n            var position;\n            var plannedPosition;\n            var task;\n            var styles = GanttView.styles;\n            var coordinates = this._taskCoordinates = {};\n            var size = this._calculateMilestoneWidth();\n            var milestoneWidth = Math.round(size.width);\n            var resourcesField = this.options.resourcesField;\n            var className = [styles.resource, styles.resourceAlt];\n            var calculatedSize = this.options.calculatedSize;\n            var resourcesPosition;\n            var resourcesMargin = this._calculateResourcesMargin();\n            var taskBorderWidth = this._calculateTaskBorderWidth();\n            var resourceStyle;\n            var showPlannedTasks = this.options.showPlannedTasks;\n            var attributes = [{ className: styles.tableRow }, { className: styles.alt }];\n\n            var addCoordinates = function(rowIndex) {\n                var taskLeft;\n                var taskRight;\n\n                taskLeft = position.left;\n                taskRight = taskLeft + position.width;\n\n                if (task.isMilestone()) {\n                    taskLeft -= milestoneWidth / 2;\n                    taskRight = taskLeft + milestoneWidth;\n                }\n\n                coordinates[task.id] = {\n                    start: taskLeft,\n                    end: taskRight,\n                    rowIndex: rowIndex\n                };\n            };\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                task = tasks[i];\n\n                position = this._taskPosition(task);\n\n                if (showPlannedTasks) {\n                    plannedPosition = this._taskPositionPlanned(task);\n                    plannedPosition.borderWidth = taskBorderWidth;\n                }\n                position.borderWidth = taskBorderWidth;\n\n                row = kendoDomElement(\"tr\", attributes[i % 2]);\n                cell = kendoDomElement(\"td\", { className: styles.tableCell });\n\n                if (task.start <= this.end && task.end >= this.start) {\n                    cell.children.push(this._renderTask(tasks[i], position, plannedPosition));\n\n                    if (task[resourcesField] && task[resourcesField].length) {\n                        if (isRtl) {\n                            resourcesPosition = this._tableWidth - position.left;\n                        } else {\n                            resourcesPosition = Math.max((position.width || size.clientWidth), 0) + position.left;\n                        }\n\n                        resourceStyle = {\n                            width: (this._tableWidth - (resourcesPosition + resourcesMargin)) + \"px\"\n                        };\n\n                        resourceStyle[isRtl ? \"right\" : \"left\"] = resourcesPosition + \"px\";\n\n                        if (calculatedSize) {\n                            resourceStyle.height = calculatedSize.cell + \"px\";\n                        }\n\n                        cell.children.push(kendoDomElement(\"div\",\n                            {\n                                className: styles.resourcesWrap,\n                                style: resourceStyle\n                            },\n                            this._renderResources(task[resourcesField], className[i % 2]))\n                        );\n                    }\n\n                    addCoordinates(i);\n                }\n                row.children.push(cell);\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: GanttView.styles.tasksTable + \" \" + styles.table });\n        },\n\n        _createTable: function(colspan, rows, styles) {\n            var cols = [];\n            var colgroup;\n            var tbody;\n\n            for (var i = 0; i < colspan; i++) {\n                cols.push(kendoDomElement(\"col\"));\n            }\n\n            colgroup = kendoDomElement(\"colgroup\", null, cols);\n\n            tbody = kendoDomElement(\"tbody\", { className: GanttView.styles.tbody }, rows);\n\n            if (!styles.style) {\n                styles.style = {};\n            }\n\n            styles.style.width = this._tableWidth + \"px\";\n            styles.role = \"presentation\";\n\n            return kendoDomElement(\"table\", styles, [colgroup, tbody]);\n        },\n\n        _calculateTableWidth: function() {\n            var slots = this._timeSlots();\n            var maxSpan = 0;\n            var totalSpan = 0;\n            var currentSpan;\n            var tableWidth;\n\n            for (var i = 0, length = slots.length; i < length; i++) {\n                currentSpan = slots[i].span;\n\n                totalSpan += currentSpan;\n\n                if (currentSpan > maxSpan) {\n                    maxSpan = currentSpan;\n                }\n            }\n\n            tableWidth = Math.round((totalSpan * this.options.slotSize) / maxSpan);\n\n            return tableWidth;\n        },\n\n        _calculateMilestoneWidth: function() {\n            var size;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskMilestone;\n            var milestone = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var boundingClientRect;\n\n            this.content.append(milestone);\n\n            boundingClientRect = milestone[0].getBoundingClientRect();\n\n            size = {\n                \"width\": boundingClientRect.right - boundingClientRect.left,\n                \"clientWidth\": milestone[0].clientWidth\n            };\n\n            milestone.remove();\n\n            return size;\n        },\n\n        _calculateResourcesMargin: function() {\n            var margin;\n            var wrapper = $(\"<div class='\" + GanttView.styles.resourcesWrap + \"' style='visibility: hidden; position: absolute'>\");\n\n            this.content.append(wrapper);\n\n            margin = parseInt(wrapper.css(isRtl ? \"margin-right\" : \"margin-left\"), 10);\n\n            wrapper.remove();\n\n            return margin;\n        },\n\n        _calculateTaskBorderWidth: function() {\n            var width;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskSingle;\n            var task = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var computedStyle;\n\n            this.content.append(task);\n\n            computedStyle = kendo.getComputedStyles(task[0], [\"border-left-width\"]);\n\n            width = parseFloat(computedStyle[\"border-left-width\"], 10);\n\n            task.remove();\n\n            return width;\n        },\n\n        _renderTask: function(task, position, plannedPosition) {\n            var editable = this.options.editable;\n            var taskLeft = position.left;\n            var styles = GanttView.styles;\n            var wrapClassName = styles.taskWrap;\n            var calculatedSize = this.options.calculatedSize;\n            var dragHandleStyle = {};\n            var taskWrapAttr = {\n                className: wrapClassName,\n                style: { left: taskLeft + \"px\" }\n            };\n            var children = [];\n            var endTaskDotRight = 0;\n            var taskFullWidth = position.width;\n            var taskWrapper, taskElement, progressHandleOffset, plannedElement;\n            var endTaskDotLeft, taskOffsetWrap, offsetElement, offsetWidth;\n\n            if (calculatedSize) {\n                taskWrapAttr.style.height = calculatedSize.cell + \"px\";\n            }\n\n            if (plannedPosition) {\n                if (task.isMilestone()) {\n                    plannedElement = this._renderPlannedMilestone(position, plannedPosition);\n                } else {\n                    plannedElement = this._renderPlannedSingleTask(position, plannedPosition, task);\n                }\n\n                children.push(plannedElement);\n\n                if (isRtl && plannedPosition.left <= position.left) {\n                    taskWrapAttr.style.left = plannedPosition.left + \"px\";\n                }\n            }\n\n            if (task.summary) {\n                taskElement = this._renderSummary(task, position, plannedPosition);\n                taskWrapAttr.className += \" \" + styles.taskSummaryWrap;\n            } else if (task.isMilestone()) {\n                taskElement = this._renderMilestone(task, position);\n                taskWrapAttr.className += \" \" + styles.taskMilestoneWrap;\n            } else {\n                taskElement = this._renderSingleTask(task, position, plannedPosition);\n            }\n\n            if (plannedPosition && !task.isMilestone() && task.plannedStart < task.end && task.plannedEnd > task.start && task.plannedEnd < task.end) {\n                if (isRtl) {\n                    taskFullWidth = position.left + position.width - plannedPosition.left;\n                } else {\n                    taskFullWidth = plannedPosition.left + plannedPosition.width - position.left;\n                }\n\n                if (isRtl) {\n                    offsetWidth = plannedPosition.left - position.left;\n                } else {\n                    offsetWidth = position.left + position.width - (plannedPosition.left + plannedPosition.width);\n                }\n\n                offsetElement = kendoDomElement(\"div\", {\n                    className: styles.taskOffset,\n                    style: { width: offsetWidth - 2 * plannedPosition.borderWidth + \"px\" }\n                });\n\n                if (editable && editable.resize !== false && editable.update !== false && !task.summary) {\n                    if (editable.destroy !== false) {\n                        offsetElement.children.push(kendoDomElement(\"span\", { className: styles.taskActions, \"aria-hidden\": \"true\" }, [\n                            kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                kendoDomElement($(kendo.ui.icon(styles.iconDelete))[0])\n                            ])\n                        ]));\n                    }\n\n                    if (isRtl) {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest,\n                            style: {\n                                right: position.width - 5 + \"px\"\n                            }\n                        }));\n                    } else {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                        }));\n                    }\n                }\n\n                taskOffsetWrap = kendoDomElement(\"div\", {\n                    className: styles.taskOffsetWrap + \" \" + styles.taskInnerWrap\n                }, [ taskElement, offsetElement ]);\n\n                children.push(taskOffsetWrap);\n            } else if (plannedPosition) {\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskInnerWrap\n                }, [ taskElement ]));\n            } else {\n                children.push(taskElement);\n            }\n\n            taskWrapper = kendoDomElement(\"div\", taskWrapAttr, children);\n\n            if (editable && editable.dependencyCreate !== false) {\n                if (plannedPosition && task.plannedEnd > task.end) {\n                    endTaskDotRight = plannedPosition.left + plannedPosition.width - position.left - position.width - 3 + \"px\";\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotStart\n                }));\n\n                if (isRtl) {\n                    endTaskDotRight = \"auto\";\n                    if (plannedPosition && task.plannedEnd > task.end) {\n                        endTaskDotLeft = position.left - plannedPosition.left + \"px\";\n                    }\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotEnd,\n                    style: { right: endTaskDotRight, left: endTaskDotLeft }\n                }));\n            }\n\n            if (!task.summary && !task.isMilestone() && editable && editable.dragPercentComplete !== false && editable.update !== false && this._taskTemplate === null) {\n                progressHandleOffset = Math.round(taskFullWidth * task.percentComplete);\n\n                dragHandleStyle[isRtl ? \"right\" : \"left\"] = progressHandleOffset + \"px\";\n                taskWrapper.children.push(kendoDomElement(\"div\", { className: styles.taskDragHandle, style: dragHandleStyle }));\n            }\n\n            return taskWrapper;\n        },\n\n        _renderSingleTask: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var progressWidth;\n            var taskChildren = [];\n            var taskContent;\n            var editable = this.options.editable;\n            var classes = styles.task + \" \" + styles.taskSingle;\n            var widthExceptDelay = position.width;\n\n            if (plannedPosition) {\n                if (task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                    if (!isRtl) {\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            if (this._taskTemplate !== null) {\n                taskContent = kendoHtmlElement(this._taskTemplate(task));\n            } else {\n                taskContent = kendoTextElement(task.title);\n                taskChildren.push(kendoDomElement(\"div\", { className: styles.taskComplete, style: { width: progressWidth + \"px\" }, \"aria-hidden\": \"true\" }));\n            }\n\n            var content = kendoDomElement(\"div\", { className: styles.taskContent }, [\n                kendoDomElement(\"div\", { className: styles.taskTemplate }, [\n                    taskContent\n                ])\n            ]);\n\n            taskChildren.push(content);\n\n            if (editable) {\n                if (editable.destroy !== false && (!plannedPosition || !task.plannedEnd || (task.end <= task.plannedEnd || task.start >= task.plannedEnd))) {\n                    content.children.push(kendoDomElement(\"span\", { className: styles.taskActions, \"aria-hidden\": \"true\" }, [\n                        kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                            kendoDomElement($(kendo.ui.icon(styles.iconDelete))[0])\n                        ])\n                    ]));\n                }\n\n                if (editable.resize !== false && editable.update !== false) {\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest\n                    }));\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                    }));\n                }\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: classes, \"data-uid\": task.uid, role: \"treeitem\", style:\n                    { width: Math.max((widthExceptDelay - position.borderWidth * 2), 0) + \"px\" }\n            }, taskChildren);\n\n            return element;\n        },\n\n        _renderMilestone: function(task) {\n            var styles = GanttView.styles;\n            var classes = styles.task + \" \" + styles.taskMilestone;\n            var showPlanned = this.options.showPlannedTasks;\n\n            if (showPlanned && task.plannedEnd && task.plannedEnd < task.start) {\n                classes += \" \" + styles.taskDelayed;\n            } else if (task.plannedStart && task.plannedStart > task.end) {\n                classes += \" \" + styles.taskAdvanced;\n            }\n\n            return kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, role: \"treeitem\", \"aria-label\": task.title });\n        },\n\n        _renderSummary: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var widthExceptDelay = position.width;\n            var progressWidth;\n            var classes = styles.task + \" \" + styles.taskSummary;\n\n            if (plannedPosition) {\n                if (task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                    if (!isRtl) {\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            var element = kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, role: \"treeitem\", \"aria-label\": task.title, style: { width: widthExceptDelay + \"px\" } }, [\n                kendoDomElement(\"div\", { className: styles.taskSummaryProgress, style: { width: progressWidth + \"px\" } }, [\n                    kendoDomElement(\"div\", { className: styles.taskSummaryComplete, style: { width: position.width + \"px\" } })\n                ])\n            ]);\n\n            return element;\n        },\n\n        _renderPlannedSingleTask: function(position, plannedPosition, task) {\n            var styles = GanttView.styles;\n            var children = [];\n            var style = {};\n\n            if (task.plannedStart && task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskPlannedDuration, style:\n                        { width: Math.max((plannedPosition.width - plannedPosition.borderWidth * 2 - 16), 0) + \"px\" }\n                }));\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment }));\n            } else if (task.plannedStart) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n            } else if (task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment, style: { \"margin-left\": Math.max(plannedPosition.width - 5, 0) + \"px\" } }));\n            }\n\n            if (isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + position.width - plannedPosition.width + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, children);\n\n            return element;\n        },\n\n        _renderPlannedMilestone: function(position, plannedPosition) {\n            var styles = GanttView.styles;\n            var style = {};\n            var element;\n\n            if (isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, [\n                kendoDomElement(\"div\", { className: styles.taskPlannedMoment })\n            ]);\n\n            return element;\n        },\n\n        _renderResources: function(resources, className) {\n            var children = [];\n            var resource;\n\n            for (var i = 0, length = resources.length; i < length; i++) {\n                resource = resources[i];\n                children.push(kendoDomElement(\"span\", {\n                    className: className,\n                    style: {\n                        \"color\": resource.get(\"color\")\n                    }\n                }, [kendoTextElement(resource.get(\"name\"))]));\n            }\n\n            if (isRtl) {\n                children.reverse();\n            }\n\n            return children;\n        },\n\n        _taskPosition: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.end : task.start));\n            var endLeft = round(this._offset(isRtl ? task.start : task.end));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _taskPositionPlanned: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.plannedEnd : task.plannedStart));\n            var endLeft = round(this._offset(isRtl ? task.plannedStart : task.plannedEnd));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _offset: function(date) {\n            var slots = this._timeSlots();\n            var slot;\n            var startOffset;\n            var slotDuration;\n            var slotOffset = 0;\n            var startIndex;\n\n            if (!slots.length) {\n                return 0;\n            }\n\n            startIndex = this._slotIndex(\"start\", date);\n\n            slot = slots[startIndex];\n\n            if (slot.end < date) {\n                slotOffset = slot.offsetWidth;\n            } else if (slot.start <= date) {\n                startOffset = date - slot.start;\n                slotDuration = slot.end - slot.start;\n                slotOffset = (startOffset / slotDuration) * slot.offsetWidth;\n            }\n\n            if (isRtl) {\n                slotOffset = (slot.offsetWidth + 1) - slotOffset; // Add one pixel for border\n            }\n\n            return slot.offsetLeft + slotOffset;\n        },\n\n        _slotIndex: function(field, value, reverse) {\n            var slots = this._timeSlots();\n            var startIdx = 0;\n            var endIdx = slots.length - 1;\n            var middle;\n\n            if (reverse) {\n                slots = [].slice.call(slots).reverse();\n            }\n\n            do {\n                middle = Math.ceil((endIdx + startIdx) / 2);\n\n                if (slots[middle][field] < value) {\n                    startIdx = middle;\n                } else {\n                    if (middle === endIdx) {\n                        middle--;\n                    }\n\n                    endIdx = middle;\n                }\n            } while (startIdx !== endIdx);\n\n            if (reverse) {\n                startIdx = (slots.length - 1) - startIdx;\n            }\n\n            return startIdx;\n        },\n\n        _timeByPosition: function(x, snap, snapToEnd) {\n            var slot = this._slotByPosition(x);\n\n            if (snap) {\n                return snapToEnd ? slot.end : slot.start;\n            }\n\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var duration = slot.end - slot.start;\n            var slotOffset = offsetLeft - slot.offsetLeft;\n\n            if (isRtl) {\n                slotOffset = slot.offsetWidth - slotOffset;\n            }\n\n            return new Date(slot.start.getTime() + (duration * (slotOffset / slot.offsetWidth)));\n        },\n\n        _slotByPosition: function(x) {\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var slotIndex = this._slotIndex(\"offsetLeft\", offsetLeft, isRtl);\n\n            return this._timeSlots()[slotIndex];\n        },\n\n        _renderDependencies: function(dependencies) {\n            var elements = [];\n            var tree = this._dependencyTree;\n\n            for (var i = 0, l = dependencies.length; i < l; i++) {\n                elements.push.apply(elements, this._renderDependency(dependencies[i]));\n            }\n\n            tree.render(elements);\n        },\n\n        _renderDependency: function(dependency) {\n            var predecessor = this._taskCoordinates[dependency.predecessorId];\n            var successor = this._taskCoordinates[dependency.successorId];\n            var elements;\n            var method;\n\n            if (!predecessor || !successor) {\n                return [];\n            }\n\n            method = \"_render\" + [\"FF\", \"FS\", \"SF\", \"SS\"][isRtl ? 3 - dependency.type : dependency.type];\n\n            elements = this[method](predecessor, successor);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].attr[\"data-uid\"] = dependency.uid;\n            }\n\n            return elements;\n        },\n\n        _renderFF: function(from, to) {\n            var lines = this._dependencyFF(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(true);\n\n            return lines;\n        },\n\n        _renderSS: function(from, to) {\n            var lines = this._dependencyFF(to, from, true);\n\n            lines[0].children[0] = this._arrow(false);\n\n            return lines.reverse();\n        },\n\n        _renderFS: function(from, to) {\n            var lines = this._dependencyFS(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(false);\n\n            return lines;\n        },\n\n        _renderSF: function(from, to) {\n            var lines = this._dependencyFS(to, from, true);\n\n            lines[0].children[0] = this._arrow(true);\n\n            return lines.reverse();\n        },\n\n        _dependencyFF: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var dir = reverse ? \"start\" : \"end\";\n            var delta;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var rowHeight = this._rowHeight;\n            var minLineWidth = 10;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from[dir];\n            top = fromTop;\n            width = minLineWidth;\n\n            delta = to[dir] - from[dir];\n\n            if ((delta) > 0 !== reverse) {\n                width = Math.abs(delta) + minLineWidth;\n            }\n\n            if (reverse) {\n                left -= width;\n                width -= arrowOverlap;\n                addHorizontal();\n            } else {\n                addHorizontal();\n                left += width - overlap;\n            }\n\n            if (toTop < top) {\n                height = top - toTop;\n                height += overlap;\n                top = toTop;\n                addVertical();\n            } else {\n                height = toTop - top;\n                height += overlap;\n                addVertical();\n                top += (height - overlap);\n            }\n\n            width = Math.abs(left - to[dir]);\n\n            if (!reverse) {\n                width -= arrowOverlap;\n                left -= width;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _dependencyFS: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var rowHeight = this._rowHeight;\n            var minLineHeight = Math.floor(rowHeight / 2);\n            var minLineWidth = 10;\n            var minDistance = 2 * minLineWidth;\n            var delta = to.start - from.end;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from.end;\n            top = fromTop;\n            width = minLineWidth;\n\n            if (reverse) {\n                left += arrowOverlap;\n\n                if (delta > minDistance) {\n                    width = delta - (minLineWidth - overlap);\n                }\n\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n            left += width - overlap;\n\n            if ((delta) <= minDistance) {\n                height = reverse ? Math.abs(toTop - fromTop) - minLineHeight : minLineHeight;\n\n                if (toTop < fromTop) {\n                    top -= height;\n\n                    height += overlap;\n\n                    addVertical();\n                } else {\n                    addVertical();\n                    top += height;\n                }\n\n                width = (from.end - to.start) + minDistance;\n\n                if (width < minLineWidth) {\n                    width = minLineWidth;\n                }\n\n                left -= width - overlap;\n\n                addHorizontal();\n            }\n\n            if (toTop < fromTop) {\n                height = top - toTop;\n                top = toTop;\n\n                height += overlap;\n\n                addVertical();\n            } else {\n                height = toTop - top;\n                addVertical();\n                top += height;\n            }\n\n            width = to.start - left;\n\n            if (!reverse) {\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _line: function(className, styles) {\n            return kendoDomElement(\"div\", { className: className, style: styles });\n        },\n\n        _arrow: function(direction) {\n            return kendoDomElement(\"span\", { className: direction ? GanttView.styles.arrowWest : GanttView.styles.arrowEast });\n        },\n\n        _colgroup: function() {\n            var slots = this._timeSlots();\n            var count = slots.length;\n            var cols = [];\n\n            for (var i = 0; i < count; i++) {\n                for (var j = 0, length = slots[i].span; j < length; j++) {\n                    cols.push(kendoDomElement(\"col\"));\n                }\n            }\n\n            return kendoDomElement(\"colgroup\", null, cols);\n        },\n\n        _createDragHint: function(element) {\n            var styles = GanttView.styles;\n            var plannedElement;\n\n            this._dragHint = element\n                .clone()\n                .addClass(styles.dragHint)\n                .css({\n                    \"cursor\": \"move\"\n                });\n\n            plannedElement = this._dragHint.find(DOT + styles.taskPlanned);\n\n            plannedElement.css({\n                \"visibility\": \"hidden\"\n            });\n\n            if (isRtl && element.find(DOT + styles.taskAdvanced).length > 0) {\n                plannedElement.css({\n                    \"margin-right\": \"auto\",\n                    \"width\": 0\n                });\n\n                this._dragHint.find(DOT + styles.taskDotEnd).css({\n                    \"left\": 0\n                });\n            }\n\n            element\n                .closest(\"td\")\n                .append(this._dragHint);\n        },\n\n        _updateDragHint: function(start) {\n            var left = this._offset(start);\n            this._dragHint\n                .css({\n                    \"left\": left\n                });\n        },\n\n        _removeDragHint: function() {\n            this._dragHint.remove();\n            this._dragHint = null;\n        },\n\n        _createResizeHint: function(task) {\n            var styles = GanttView.styles;\n            var taskTop = this._taskCoordinates[task.id].rowIndex * this._rowHeight;\n            var tooltipHeight;\n            var tooltipTop;\n            var options = this.options;\n            var messages = options.messages;\n\n            this._resizeHint = $(RESIZE_HINT({ styles: styles })).css({\n                \"top\": 0,\n                \"height\": this._contentHeight\n            });\n\n            this.content.append(this._resizeHint);\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: styles,\n                start: task.start,\n                end: task.end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": 0,\n                \"left\": 0\n            });\n\n            this.content.append(this._resizeTooltip);\n\n            this._resizeTooltipWidth = outerWidth(this._resizeTooltip);\n            tooltipHeight = outerHeight(this._resizeTooltip);\n\n            tooltipTop = taskTop - tooltipHeight;\n\n            if (tooltipTop < 0) {\n                tooltipTop = taskTop + this._rowHeight;\n            }\n\n            this._resizeTooltipTop = tooltipTop;\n        },\n\n        _updateResizeHint: function(start, end, resizeStart) {\n            var left = this._offset(isRtl ? end : start);\n            var right = this._offset(isRtl ? start : end);\n            var width = right - left;\n            var tooltipLeft = (resizeStart !== isRtl) ? left : right;\n            var tablesWidth = this._tableWidth - kendo.support.scrollbar();\n            var tooltipWidth = this._resizeTooltipWidth;\n            var options = this.options;\n            var messages = options.messages;\n            var tableOffset = this.element.find(DOT + GanttView.styles.tasksTable).offset().left - this.element.find(DOT + GanttView.styles.tasksWrapper).offset().left;\n\n            if (isRtl) {\n                left += tableOffset;\n            }\n\n            this._resizeHint\n                .css({\n                    \"left\": left,\n                    \"width\": width\n                });\n\n            if (this._resizeTooltip) {\n                this._resizeTooltip.remove();\n            }\n\n            tooltipLeft -= Math.round(tooltipWidth / 2);\n\n            if (tooltipLeft < 0) {\n                tooltipLeft = 0;\n            } else if (tooltipLeft + tooltipWidth > tablesWidth) {\n                tooltipLeft = tablesWidth - tooltipWidth;\n            }\n\n            if (isRtl) {\n                tooltipLeft += tableOffset;\n            }\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: GanttView.styles,\n                start: start,\n                end: end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": this._resizeTooltipTop,\n                \"left\": tooltipLeft,\n                \"min-width\": tooltipWidth\n            })\n            .appendTo(this.content);\n        },\n\n        _removeResizeHint: function() {\n            this._resizeHint.remove();\n            this._resizeHint = null;\n\n            this._resizeTooltip.remove();\n            this._resizeTooltip = null;\n        },\n\n        _updatePercentCompleteTooltip: function(top, left, text) {\n            this._removePercentCompleteTooltip();\n\n            var tooltip = this._percentCompleteResizeTooltip = $(PERCENT_RESIZE_TOOLTIP_TEMPLATE({ styles: GanttView.styles, text: text }))\n                .appendTo(this.element);\n\n            var tooltipMiddle = Math.round(outerWidth(tooltip) / 2);\n            var arrow = tooltip.find(DOT + GanttView.styles.callout);\n            var arrowHeight = Math.round(outerWidth(arrow) / 2);\n\n            tooltip.css({\n                \"top\": top - (outerHeight(tooltip) + arrowHeight),\n                \"left\": left - tooltipMiddle\n            });\n\n            arrow.css(\"left\", tooltipMiddle - arrowHeight);\n        },\n\n        _removePercentCompleteTooltip: function() {\n            if (this._percentCompleteResizeTooltip) {\n                this._percentCompleteResizeTooltip.remove();\n            }\n\n            this._percentCompleteResizeTooltip = null;\n        },\n\n        _updateDependencyDragHint: function(from, to) {\n            this._removeDependencyDragHint();\n\n            this._creteDependencyDragHint(from, to);\n        },\n\n        _creteDependencyDragHint: function(from, to) {\n            var styles = GanttView.styles;\n\n            var deltaX = to.x - from.x;\n            var deltaY = to.y - from.y;\n\n            var width = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n            var angle = Math.atan(deltaY / deltaX);\n\n            if (deltaX < 0) {\n                angle += Math.PI;\n            }\n\n            $(\"<div class='\" + styles.line + \" \" + styles.lineHorizontal + \" \" + styles.dependencyHint + \"'></div>\")\n                .css({\n                    \"top\": from.y,\n                    \"left\": from.x,\n                    \"width\": width,\n                    \"transform-origin\": \"0% 0\",\n                    \"-ms-transform-origin\": \"0% 0\",\n                    \"-webkit-transform-origin\": \"0% 0\",\n                    \"transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-ms-transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-webkit-transform\": \"rotate(\" + angle + \"rad)\"\n                })\n                .appendTo(this.content);\n        },\n\n        _removeDependencyDragHint: function() {\n            this.content.find(DOT + GanttView.styles.dependencyHint).remove();\n        },\n\n        _createTaskTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var options = this.options;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = $(element).parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var template = (options.tooltip && options.tooltip.template) ? kendo.template(options.tooltip.template) : TASK_TOOLTIP_TEMPLATE;\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._taskTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" >' +\n                                   '<div class=\"' + styles.taskContent + '\"></div></div>');\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .find(DOT + styles.taskContent)\n                .append(template({\n                    styles: styles,\n                    task: task,\n                    messages: options.messages.views\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeTaskTooltip: function() {\n            if (this._taskTooltip) {\n                this._taskTooltip.remove();\n            }\n\n            this._taskTooltip = null;\n        },\n\n        _createOffsetTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._offsetTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" ></div>');\n            var offsetValue = Math.round((task.end.getTime() - task.plannedEnd.getTime()) / 60000);\n            var plannedTasksMessages = this.options.messages.plannedTasks;\n            var minutes = offsetValue % 60;\n            var offsetText = minutes + \" \" + plannedTasksMessages.minutes;\n            var hours, days;\n\n            if (offsetValue >= 60) {\n                hours = offsetValue = Math.floor(offsetValue / 60);\n\n                offsetText = hours + \" \" + plannedTasksMessages.hours;\n\n                if (minutes !== 0) {\n                    offsetText += (\" \" + minutes + \" \" + plannedTasksMessages.minutes);\n                }\n\n                if (offsetValue >= 24) {\n                    hours = offsetValue % 24;\n                    days = offsetValue = Math.floor(offsetValue / 24);\n\n                    offsetText = days + \" \" + plannedTasksMessages.days;\n\n                    if (hours !== 0) {\n                        offsetText += (\" \" + hours + \" \" + plannedTasksMessages.hours);\n                    }\n                }\n            }\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .addClass(styles.offsetTooltipDelay)\n                .appendTo(content)\n                .append(OFFSET_TOOLTIP_TEMPLATE({\n                    offsetPrefix: plannedTasksMessages.offsetTooltipDelay,\n                    offsetText: offsetText\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeOffsetTooltip: function() {\n            if (this._offsetTooltip) {\n                this._offsetTooltip.remove();\n            }\n\n            this._offsetTooltip = null;\n        },\n\n        _createPlannedTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._plannedTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + ' ' + styles.plannedTooltip + '\" ></div>');\n            var editorMessages = this.options.messages.editor;\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .append(PLANNED_TOOLTIP_TEMPLATE({\n                    plannedStart: editorMessages.plannedStart,\n                    startDate: kendo.toString(task.plannedStart, \"H:mm tt ddd, MMM dd\"),\n                    plannedEnd: editorMessages.plannedEnd,\n                    endDate: kendo.toString(task.plannedEnd, \"H:mm tt ddd, MMM dd\")\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removePlannedTooltip: function() {\n            if (this._plannedTooltip) {\n                this._plannedTooltip.remove();\n            }\n\n            this._plannedTooltip = null;\n        },\n\n        _adjustTooltipDimensions: function(tooltip, rowOffset, contentOffset, left, contentScrollLeft) {\n            var content = this.content;\n            var contentWidth = content.width();\n            var tooltipWidth;\n\n            if (outerHeight(tooltip) < rowOffset.top - contentOffset.top) {\n                tooltip.css(\"top\", ((rowOffset.top - contentOffset.top) - outerHeight(tooltip)) + content.scrollTop());\n            }\n\n            tooltipWidth = outerWidth(tooltip);\n\n            if ((tooltipWidth + left) - contentScrollLeft > contentWidth) {\n                left -= tooltipWidth;\n\n                if (left < contentScrollLeft) {\n                    left = (contentScrollLeft + contentWidth) - (tooltipWidth + 17);\n                }\n\n                tooltip.css(\"left\", left);\n            }\n        },\n\n        _scrollTo: function(element) {\n            var elementLeft = element.offset().left;\n            var elementWidth = element.width();\n            var elementRight = elementLeft + elementWidth;\n\n            var row = element.closest(\"tr\");\n            var rowTop = row.offset().top;\n            var rowHeight = row.height();\n            var rowBottom = rowTop + rowHeight;\n\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentTop = contentOffset.top;\n            var contentHeight = content.height();\n            var contentBottom = contentTop + contentHeight;\n            var contentLeft = contentOffset.left;\n            var contentWidth = content.width();\n            var contentRight = contentLeft + contentWidth;\n\n            var scrollbarWidth = kendo.support.scrollbar();\n\n            if (rowTop < contentTop) {\n                content.scrollTop(content.scrollTop() + (rowTop - contentTop));\n            } else if (rowBottom > contentBottom) {\n                content.scrollTop(content.scrollTop() + (rowBottom + scrollbarWidth - contentBottom));\n            }\n\n            if (elementLeft < contentLeft && elementWidth > contentWidth && elementRight < contentRight ||\n                elementRight > contentRight && elementWidth < contentWidth) {\n                    kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementRight + scrollbarWidth - contentRight));\n            } else if (elementRight > contentRight && elementWidth > contentWidth && elementLeft > contentLeft ||\n                elementLeft < contentLeft && elementWidth < contentWidth) {\n            kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementLeft - contentLeft));\n            }\n        },\n\n        _scrollToDate: function(date) {\n            var viewStart = this.start;\n            var viewEnd = this.end;\n            var offset;\n\n            if (date >= viewStart && date < viewEnd) {\n                offset = this._offset(date);\n\n                if (kendo.support.isRtl(this.element)) {\n                    offset = this._tableWidth - offset;\n                }\n\n                kendo.scrollLeft(this.content, offset);\n            }\n        },\n\n        _timeSlots: function() {\n            if (!this._slots || !this._slots.length) {\n                return [];\n            }\n\n            return this._slots[this._slots.length - 1];\n        },\n\n        _headers: function(columnLevels) {\n            var rows = [];\n            var level;\n            var headers;\n            var column;\n            var headerText;\n            var styles = GanttView.styles;\n\n            for (var levelIndex = 0, levelCount = columnLevels.length; levelIndex < levelCount; levelIndex++) {\n                level = columnLevels[levelIndex];\n                headers = [];\n\n                for (var columnIndex = 0, columnCount = level.length; columnIndex < columnCount; columnIndex++) {\n                    column = level[columnIndex];\n\n                    headerText = kendoHtmlElement(column.text);\n                    headers.push(kendoDomElement(\"td\", { colspan: column.span, className: styles.header + (column.isNonWorking ? (\" \" + styles.nonWorking) : \"\") }, [headerText]));\n                }\n\n                rows.push(kendoDomElement(\"tr\", { className: styles.tableRow }, headers));\n            }\n\n            return rows;\n        },\n\n        _hours: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var options = this.options;\n            var workDayStart = options.workDayStart.getHours();\n            var workDayEnd = options.workDayEnd.getHours();\n            var isWorkHour;\n            var hours;\n            var hourSpan = options.hourSpan;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            if (options.showWorkHours) {\n                start.setHours(workDayStart);\n            }\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                hours = slotEnd.getHours();\n\n                isWorkHour = hours >= workDayStart && hours < workDayEnd;\n\n                slotEnd.setHours(slotEnd.getHours() + hourSpan);\n\n                if (hours == slotEnd.getHours()) {\n                    // Chrome DTS Fix\n                    slotEnd.setHours(slotEnd.getHours() + 2 * hourSpan);\n                }\n\n                if (!options.showWorkHours || isWorkHour) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkHour,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _days: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var isWorkDay;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = end < kendo.date.nextDay(start) ? end : kendo.date.nextDay(start);\n\n                isWorkDay = this._isWorkDay(start);\n\n                if (!this.options.showWorkDays || isWorkDay) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkDay,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _weeks: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var firstDay = this.calendarInfo().firstDay;\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = kendo.date.dayOfWeek(kendo.date.addDays(start, 1), firstDay, 1);\n\n                if (slotEnd > end) {\n                    slotEnd = end;\n                }\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _months: function(start, end) {\n            var slotEnd;\n            var endMonth;\n            var slots = [];\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                endMonth = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(slotEnd.getMonth() + 1)));\n                slotEnd = end < endMonth ? end : endMonth;\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _years: function(start, end) {\n            var slotEnd;\n            var monthSpan;\n            var endMonth;\n            var slots = [];\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                slotEnd = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(12)));\n\n                if (slotEnd >= end) {\n                    slotEnd = end;\n                }\n\n                endMonth = slotEnd.getMonth() || 12;\n                monthSpan = endMonth - start.getMonth();\n\n                slots.push({\n                    start: start,\n                    end: slotEnd,\n                    span: monthSpan\n                });\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _slotHeaders: function(slots, template) {\n            var columns = [];\n            var slot;\n\n            for (var i = 0, l = slots.length; i < l; i++) {\n                slot = slots[i];\n\n                columns.push({\n                    text: template(slot),\n                    isNonWorking: !!slot.isNonWorking,\n                    span: slot.span\n                });\n            }\n\n            return columns;\n        },\n\n        _isWorkDay: function(date) {\n            var day = date.getDay();\n            var workDays = this._workDays;\n\n            for (var i = 0, l = workDays.length; i < l; i++) {\n                if (workDays[i] === day) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        calendarInfo: function() {\n            return kendo.getCulture().calendars.standard;\n        },\n\n        _renderCurrentTime: function() {\n            var currentTime = this._getCurrentTime();\n            var timeOffset = this._offset(currentTime);\n            var element = $(\"<div class='k-current-time'></div>\");\n            var viewStyles = GanttView.styles;\n            var tablesWrap = this.element.find(DOT + viewStyles.tasksWrapper);\n            var tasksTable = this.element.find(DOT + viewStyles.tasksTable);\n            var slot;\n\n            if (!this.content || !this._timeSlots().length) {\n                return;\n            }\n\n            this.content.find(\".k-current-time\").remove();\n\n            slot = this._timeSlots()[this._slotIndex(\"start\", currentTime)];\n\n            if (currentTime < slot.start || currentTime > slot.end) {\n                return;\n            }\n\n            if (tablesWrap.length && tasksTable.length) {\n                timeOffset += tasksTable.offset().left - tablesWrap.offset().left;\n            }\n\n            element.css({\n                left: timeOffset + \"px\",\n                top: \"0px\",\n                width: \"1px\",\n                height: this._contentHeight + \"px\"\n            })\n            .appendTo(this.content);\n        },\n\n        _getCurrentTime: function() {\n            // Introduced for testing purposes\n            return new Date();\n        },\n\n        _currentTime: function() {\n            var markerOptions = this.options.currentTimeMarker;\n\n            if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                this._renderCurrentTime();\n                this._currentTimeUpdateTimer = setInterval(this._renderCurrentTime.bind(this), markerOptions.updateInterval);\n            }\n        }\n    });\n\n    extend(true, GanttView, { styles: viewStyles });\n\n    kendo.ui.GanttDayView = GanttView.extend({\n        name: \"day\",\n\n        options: {\n            timeHeaderTemplate: TIME_HEADER_TEMPLATE,\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            this.start = kendo.date.getDate(range.start);\n            this.end = kendo.date.getDate(range.end);\n\n            if (kendo.date.getMilliseconds(range.end) > 0 || this.end.getTime() === this.start.getTime()) {\n                this.end = kendo.date.addDays(this.end, 1);\n            }\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n                this.start.setHours(optionsRange.start.getHours());\n            }\n\n            if (optionsRange && optionsRange.end) {\n                this.end = kendo.date.getDate(optionsRange.end);\n                this.end.setHours(optionsRange.end.getHours());\n            }\n        },\n\n        _createSlots: function() {\n            var daySlots;\n            var daySlot;\n            var hourSlots;\n            var hours;\n            var slots = [];\n\n            daySlots = this._days(this.start, this.end);\n            hourSlots = [];\n\n            for (var i = 0, l = daySlots.length; i < l; i++) {\n                daySlot = daySlots[i];\n                hours = this._hours(daySlot.start, daySlot.end);\n\n                daySlot.span = hours.length;\n\n                hourSlots.push.apply(hourSlots, hours);\n            }\n\n            slots.push(daySlots);\n            slots.push(hourSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.dayHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.timeHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttWeekView = GanttView.extend({\n        name: \"week\",\n\n        options: {\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var calendarInfo = this.calendarInfo();\n            var firstDay = calendarInfo.firstDay;\n            var rangeEnd = range.end;\n            var endDay;\n\n            if (firstDay === rangeEnd.getDay()) {\n                rangeEnd.setDate(rangeEnd.getDate() + 7);\n            }\n\n            this.start = kendo.date.getDate(kendo.date.dayOfWeek(range.start, firstDay, -1));\n            this.end = kendo.date.getDate(kendo.date.dayOfWeek(rangeEnd, firstDay, 1));\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._weeks(this.start, this.end));\n            slots.push(this._days(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.weekHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.dayHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttMonthView = GanttView.extend({\n        name: \"month\",\n\n        options: {\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var endDay;\n            this.start = kendo.date.firstDayOfMonth(range.start);\n            this.end = kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(range.end)), 1);\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._months(this.start, this.end));\n            slots.push(this._weeks(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.monthHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.weekHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttYearView = GanttView.extend({\n        name: \"year\",\n\n        options: {\n            yearHeaderTemplate: YEAR_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var firstDayOfMonth;\n            this.start = kendo.date.firstDayOfMonth(new Date(range.start.setMonth(0)));\n            this.end = kendo.date.firstDayOfMonth(new Date(range.end.setMonth(12))); //set month to first month of next year\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.firstDayOfMonth(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                firstDayOfMonth = kendo.date.firstDayOfMonth(optionsRange.end);\n\n                this.end = kendo.date.getDate(new Date(firstDayOfMonth.setMonth(firstDayOfMonth.getMonth() + 1)));\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n            var monthSlots = this._months(this.start, this.end);\n\n            $(monthSlots).each(function(index, slot) {\n                slot.span = 1;\n            });\n\n            slots.push(this._years(this.start, this.end));\n            slots.push(monthSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.yearHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.monthHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    var timelineStyles = {\n        wrapper: \"k-timeline k-grid\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        gridContentWrap: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        task: \"k-task\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskPlanned: \"k-task-planned\",\n        line: \"k-gantt-line\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskComplete: \"k-task-complete\",\n        taskDelete: \"k-task-delete\",\n        taskWrapActive: \"k-task-wrap-active\",\n        taskWrap: \"k-task-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        hovered: \"k-hover\",\n        selected: \"k-selected\",\n        origin: \"k-origin\"\n    };\n\n    var GanttTimeline = kendo.ui.GanttTimeline = Widget.extend({\n        init: function(element, options) {\n\n            Widget.fn.init.call(this, element, options);\n\n            if (!this.options.views || !this.options.views.length) {\n                this.options.views = [\"day\", \"week\", \"month\"];\n            }\n\n            isRtl = kendo.support.isRtl(element);\n\n            this._wrapper();\n\n            this._domTrees();\n\n            this._views();\n\n            this._selectable();\n\n            this._draggable();\n\n            this._resizable();\n\n            this._percentResizeDraggable();\n\n            this._createDependencyDraggable();\n\n            this._attachEvents();\n\n            this._tooltip();\n        },\n\n        options: {\n            name: \"GanttTimeline\",\n            messages: {\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    month: \"Month\",\n                    year: \"Year\",\n                    start: \"Start\",\n                    end: \"End\"\n                }\n            },\n            snap: true,\n            selectable: true,\n            editable: true\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            if (this._currentTimeUpdateTimer) {\n                clearInterval(this._currentTimeUpdateTimer);\n            }\n\n            this._unbindView(this._selectedView);\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            if (this._percentDraggable) {\n                this._percentDraggable.destroy();\n            }\n\n            if (this._dependencyDraggable) {\n                this._dependencyDraggable.destroy();\n            }\n\n            if (this.touch) {\n                this.touch.destroy();\n            }\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n\n            this.wrapper.off(NS);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _wrapper: function() {\n            var styles = GanttTimeline.styles;\n            var that = this;\n            var options = this.options;\n            var calculateSize = function() {\n                var rowHeight = typeof options.rowHeight === STRING ? options.rowHeight :\n                    options.rowHeight + \"px\";\n                var table = $(kendo.format(SIZE_CALCULATION_TEMPLATE, rowHeight));\n                var calculatedRowHeight;\n                var calculatedCellHeight;\n                var content = that.wrapper.find(DOT + styles.tasksWrapper);\n\n                content.append(table);\n\n                calculatedRowHeight = outerHeight(table.find(\"tr\"));\n                calculatedCellHeight = table.find(\"td\").height();\n\n                table.remove();\n\n                return {\n                    \"row\": calculatedRowHeight,\n                    \"cell\": calculatedCellHeight\n                };\n            };\n\n            this.wrapper = this.element\n                .addClass(styles.wrapper)\n                .append(\"<div class='\" + styles.gridHeader + \"'><div class='\" + styles.gridHeaderWrap + \"'></div></div>\")\n                .append(\"<div role='tree' class='\" + styles.gridContentWrap + \"'><div class='\" + styles.tasksWrapper + \"'></div><div class='\" + styles.dependenciesWrapper + \"'></div></div>\");\n\n            if (options.rowHeight) {\n                this._calculatedSize = calculateSize();\n            }\n        },\n\n        _domTrees: function() {\n            var styles = GanttTimeline.styles;\n            var tree = kendo.dom.Tree;\n            var wrapper = this.wrapper;\n\n            this._headerTree = new tree(wrapper.find(DOT + styles.gridHeaderWrap)[0]);\n\n            this._taskTree = new tree(wrapper.find(DOT + styles.tasksWrapper)[0]);\n\n            this._dependencyTree = new tree(wrapper.find(DOT + styles.dependenciesWrapper)[0]);\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var isSettings;\n            var name;\n            var defaultView;\n            var selected;\n\n            this.views = {};\n\n            for (var i = 0, l = views.length; i < l; i++) {\n                view = views[i];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings && view.selectable === false) {\n                    continue;\n                }\n\n                name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                defaultView = defaultViews[name];\n\n                if (defaultView) {\n                    if (isSettings) {\n                        view.type = defaultView.type;\n                    }\n\n                    defaultView.title = this.options.messages.views[name];\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected;\n            }\n        },\n\n        view: function(name) {\n            if (name) {\n                this._selectView(name);\n\n                this.trigger(\"navigate\", { view: name, action: \"changeView\" });\n            }\n\n            return this._selectedView;\n        },\n\n        _selectView: function(name) {\n            if (name && this.views[name]) {\n                if (this._selectedView) {\n                    this._unbindView(this._selectedView);\n                }\n\n                this._selectedView = this._initializeView(name);\n                this._selectedViewName = name;\n            }\n        },\n\n        _viewByIndex: function(index) {\n            var view;\n            var views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var type = view.type;\n\n                if (typeof type === \"string\") {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (type) {\n                    var newRange = {};\n                    extend(newRange, this.options.range, view.range);\n\n                    var newDate = view.date || this.options.date;\n\n                    view = new type(this.wrapper, trimOptions(extend(true, {\n                        headerTree: this._headerTree,\n                        taskTree: this._taskTree,\n                        dependencyTree: this._dependencyTree,\n                        calculatedSize: this._calculatedSize\n                    }, view, this.options, {\n                        date: newDate,\n                        range: newRange\n                    })));\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _unbindView: function(view) {\n            if (view) {\n                view.destroy();\n            }\n        },\n\n        _range: function(tasks) {\n            var startOrder = {\n                field: \"start\",\n                dir: \"asc\"\n            };\n            var endOrder = {\n                field: \"end\",\n                dir: \"desc\"\n            };\n\n            if (!tasks || !tasks.length) {\n                return { start: new Date(), end: new Date() };\n            }\n\n            var start = new Query(tasks).sort(startOrder).toArray()[0].start || new Date();\n            var end = new Query(tasks).sort(endOrder).toArray()[0].end || new Date();\n\n            return {\n                start: new Date(start),\n                end: new Date(end)\n            };\n        },\n\n        _render: function(tasks) {\n            var view = this.view();\n            var range = this._range(tasks);\n            var date = view.options.date;\n\n            this._tasks = tasks;\n\n            view.range(range);\n\n            view.renderLayout();\n\n            view.render(tasks);\n\n            if (date) {\n                view._scrollToDate(date);\n            }\n        },\n\n        _renderDependencies: function(dependencies) {\n            this.view()._renderDependencies(dependencies);\n        },\n\n        _taskByUid: function(uid) {\n            var tasks = this._tasks;\n            var length = tasks.length;\n            var task;\n\n            for (var i = 0; i < length; i++) {\n                task = tasks[i];\n\n                if (task.uid === uid) {\n                    return task;\n                }\n            }\n        },\n\n        _draggable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var startOffset;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeDragHint();\n\n                if (element) {\n                    element.css(\"opacity\", 1);\n                }\n\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.move === false || editable.update === false) {\n                return;\n            }\n\n            this._moveDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                holdToDrag: kendo.support.mobileOS,\n                ignore: DOT + styles.taskResizeHandle\n            });\n\n            this._moveDraggable\n                .bind(\"dragstart\", function(e) {\n                    var view = that.view();\n                    element = e.currentTarget.closest(DOT + styles.taskWrap);\n                    task = that._taskByUid(e.currentTarget.parent().find(DOT + styles.task).attr(\"data-uid\"));\n\n                    if (that.trigger(\"moveStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    startOffset = view._timeByPosition(e.x.location, snap) - currentStart;\n\n                    view._createDragHint(element);\n\n                    element.css(\"opacity\", 0.5);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = new Date(view._timeByPosition(e.x.location, snap) - startOffset);\n                    var updateHintDate = date;\n\n                    if (!that.trigger(\"move\", { task: task, start: date })) {\n                        currentStart = date;\n\n                        if (isRtl) {\n                            updateHintDate = new Date(currentStart.getTime() + task.duration());\n                        }\n\n                        view._updateDragHint(updateHintDate);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"moveEnd\", { task: task, start: currentStart });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _resizable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var currentEnd;\n            var resizeStart;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeResizeHint();\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.resize === false || editable.update === false) {\n                return;\n            }\n\n            this._resizeDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskResizeHandle,\n                holdToDrag: false\n            });\n\n            this._resizeDraggable\n                .bind(\"dragstart\", function(e) {\n                    resizeStart = e.currentTarget.hasClass(styles.taskResizeHandleWest);\n\n                    if (isRtl) {\n                        resizeStart = !resizeStart;\n                    }\n\n                    element = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n\n                    task = that._taskByUid(element.attr(\"data-uid\"));\n\n                    if (that.trigger(\"resizeStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    currentEnd = task.end;\n\n                    that.view()._createResizeHint(task);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = view._timeByPosition(e.x.location, snap, !resizeStart);\n\n                    if (resizeStart) {\n                        if (date < currentEnd) {\n                            currentStart = date;\n                        } else {\n                            currentStart = currentEnd;\n                        }\n                    } else {\n                        if (date > currentStart) {\n                            currentEnd = date;\n                        } else {\n                            currentEnd = currentStart;\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", { task: task, start: currentStart, end: currentEnd })) {\n                        view._updateResizeHint(currentStart, currentEnd, resizeStart);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"resizeEnd\", { task: task, resizeStart: resizeStart, start: currentStart, end: currentEnd });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _percentResizeDraggable: function() {\n            var that = this;\n            var task;\n            var taskElement;\n            var taskElementOffset;\n            var timelineOffset;\n            var originalPercentWidth;\n            var maxPercentWidth;\n            var currentPercentComplete;\n            var tooltipTop;\n            var tooltipLeft;\n            var styles = GanttTimeline.styles;\n            var delta;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removePercentCompleteTooltip();\n                taskElement = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            var updateElement = function(width) {\n                var taskDragHandle = taskElement.siblings(DOT + styles.taskDragHandle);\n\n                if (!taskDragHandle.length) {\n                    taskDragHandle = taskElement.closest(DOT + styles.taskWrap).find(DOT + styles.taskDragHandle);\n                }\n\n                taskDragHandle.css(isRtl ? \"right\" : \"left\", width);\n\n                taskElement\n                    .find(DOT + styles.taskComplete)\n                    .width(width);\n            };\n\n            if (!editable || editable.dragPercentComplete === false || editable.update === false) {\n                return;\n            }\n\n            this._percentDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDragHandle,\n                holdToDrag: false\n            });\n\n            this._percentDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"percentResizeStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    taskElement = e.currentTarget.siblings(DOT + styles.task);\n\n                    if (!taskElement.length) {\n                        taskElement = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                    }\n\n                    task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                    currentPercentComplete = task.percentComplete;\n\n                    taskElementOffset = taskElement.offset();\n                    timelineOffset = this.element.offset();\n\n                    originalPercentWidth = taskElement.find(DOT + styles.taskComplete).width();\n                    maxPercentWidth = outerWidth(taskElement);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    delta = isRtl ? -e.x.initialDelta : e.x.initialDelta;\n\n                    var currentWidth = Math.max(0, Math.min(maxPercentWidth, originalPercentWidth + delta));\n\n                    currentPercentComplete = Math.round((currentWidth / maxPercentWidth) * 100);\n\n                    updateElement(currentWidth);\n\n                    tooltipTop = taskElementOffset.top - timelineOffset.top;\n                    tooltipLeft = taskElementOffset.left + currentWidth - timelineOffset.left;\n\n                    if (isRtl) {\n                        tooltipLeft += (maxPercentWidth - 2 * currentWidth);\n                    }\n\n                    that.view()._updatePercentCompleteTooltip(tooltipTop, tooltipLeft, currentPercentComplete);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"percentResizeEnd\", { task: task, percentComplete: currentPercentComplete / 100 });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    updateElement(originalPercentWidth);\n\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _createDependencyDraggable: function() {\n            var that = this;\n            var originalHandle;\n            var hoveredHandle = $();\n            var hoveredTask = $();\n            var startX;\n            var startY;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                originalHandle\n                    .css(\"display\", \"\")\n                    .removeClass(styles.hovered);\n\n                originalHandle.parent().removeClass(styles.origin);\n                originalHandle = null;\n\n                toggleHandles(false);\n\n                hoveredTask = $();\n                hoveredHandle = $();\n\n                that.view()._removeDependencyDragHint();\n\n                that.dragInProgress = false;\n            };\n\n            var toggleHandles = function(value) {\n                if (!hoveredTask.hasClass(styles.origin)) {\n                    hoveredTask.find(DOT + styles.taskDot).css(\"display\", value ? \"block\" : \"\");\n                    hoveredHandle.toggleClass(styles.hovered, value);\n                }\n            };\n\n            if (!editable || editable.dependencyCreate === false) {\n                return;\n            }\n\n            this._dependencyDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDot,\n                holdToDrag: false\n            });\n\n            this._dependencyDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"dependencyDragStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    originalHandle = e.currentTarget\n                        .css(\"display\", \"block\")\n                        .addClass(styles.hovered);\n\n                    originalHandle.parent().addClass(styles.origin);\n\n                    var elementOffset = originalHandle.offset();\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n\n                    startX = Math.round(elementOffset.left - tablesOffset.left + (outerHeight(originalHandle) / 2));\n                    startY = Math.round(elementOffset.top - tablesOffset.top + (outerWidth(originalHandle) / 2));\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    that.view()._removeDependencyDragHint();\n\n                    var target = $(kendo.elementUnderCursor(e));\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n                    var currentX = e.x.location - tablesOffset.left;\n                    var currentY = e.y.location - tablesOffset.top;\n\n                    that.view()._updateDependencyDragHint({ x: startX, y: startY }, { x: currentX, y: currentY });\n\n                    toggleHandles(false);\n\n                    hoveredHandle = (target.hasClass(styles.taskDot)) ? target : $();\n                    hoveredTask = target.closest(DOT + styles.taskWrap);\n\n                    toggleHandles(true);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    if (hoveredHandle.length) {\n                        var fromStart = originalHandle.hasClass(styles.taskDotStart);\n                        var toStart = hoveredHandle.hasClass(styles.taskDotStart);\n\n                        var type = fromStart ? (toStart ? 3 : 2) : (toStart ? 1 : 0);\n\n                        var predecessorElement = originalHandle.siblings(DOT + styles.task);\n                        if (!predecessorElement.length) {\n                            predecessorElement = originalHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var predecessor = that._taskByUid(predecessorElement.attr(\"data-uid\"));\n\n                        var successorElement = hoveredHandle.siblings(DOT + styles.task);\n                        if (!successorElement.length) {\n                            successorElement = hoveredHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var successor = that._taskByUid(successorElement.attr(\"data-uid\"));\n\n                        if (predecessor !== successor) {\n                            that.trigger(\"dependencyDragEnd\", { type: type, predecessor: predecessor, successor: successor });\n                        }\n                    }\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n\n            if (this.options.selectable) {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                        e.stopPropagation();\n\n                        var uid = $(this).attr(\"data-uid\");\n\n                        if (!uid) {\n                            uid = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).data(\"uid\");\n                        }\n\n                        if (!e.ctrlKey) {\n                            that.trigger(\"select\", { uid: uid });\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.taskWrap, function(e) {\n                        e.stopPropagation();\n\n                        // Decrease z-index of wrap so the we can get to the\n                        // dependency line underneath, if there is any\n                        $(this).css(\"z-index\", \"0\");\n\n                        var target = $(document.elementFromPoint(e.clientX, e.clientY));\n\n                        if (target.hasClass(styles.line)) {\n                            target.click();\n                        }\n\n                        $(this).css(\"z-index\", \"\");\n                    })\n                    .on(CLICK + NS, DOT + styles.tasksWrapper, function() {\n                        if (that.selectDependency().length > 0) {\n                            that.clearSelection();\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.line, function(e) {\n                        e.stopPropagation();\n\n                        that.selectDependency(this);\n                    });\n            }\n        },\n\n        select: function(value) {\n            var element = this.wrapper.find(value);\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n\n                element.addClass(styles.selected);\n\n                if (kendo.support.mobileOS) {\n                    element.parent().addClass(styles.taskWrapActive);\n                }\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.task + DOT + styles.selected);\n        },\n\n        selectDependency: function(value) {\n            var element = this.wrapper.find(value);\n            var uid;\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n                this.trigger(\"clear\");\n\n                uid = $(element).attr(\"data-uid\");\n\n                this.wrapper.find(DOT + styles.line + \"[data-uid='\" + uid + \"']\").addClass(styles.selected);\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.line + DOT + styles.selected);\n        },\n\n        clearSelection: function() {\n            var styles = GanttTimeline.styles;\n\n            this.wrapper\n                .find(DOT + styles.selected)\n                .removeClass(styles.selected);\n\n            if (kendo.support.mobileOS) {\n                this.wrapper\n                    .find(DOT + styles.taskWrapActive)\n                    .removeClass(styles.taskWrapActive);\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            if (editable) {\n                this._tabindex();\n\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        that.trigger(\"removeTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                        e.stopPropagation();\n                        e.preventDefault();\n                    })\n                    .on(KEYDOWN + NS, function(e) {\n                        var selectedDependency;\n                        var editable = that.options.editable;\n\n                        if (e.keyCode === keys.DELETE && editable && editable.dependencyDestroy !== false) {\n                            selectedDependency = that.selectDependency();\n\n                            if (selectedDependency.length) {\n                                that.trigger(\"removeDependency\", { uid: selectedDependency.attr(\"data-uid\") });\n                                that.clearSelection();\n                            }\n                        }\n                    });\n\n                if (!kendo.support.mobileOS) {\n                    this.wrapper\n                        .on(DBLCLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                            if (that.options.editable.update !== false) {\n                                that.trigger(\"editTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n\n                                e.stopPropagation();\n                                e.preventDefault();\n                            }\n                        });\n                } else {\n                    this.touch = this.wrapper\n                        .kendoTouch({\n                            filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                            doubletap: function(e) {\n                                if (that.options.editable.update !== false) {\n                                    that.trigger(\"editTask\", { uid: $(e.touch.currentTarget).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                                }\n                            }\n                        }).data(\"kendoTouch\");\n                }\n            }\n        },\n\n        _tooltip: function() {\n            var that = this;\n            var tooltipOptions = this.options.tooltip;\n            var styles = GanttTimeline.styles;\n            var currentMousePosition;\n            var mouseMoveHandler = function(e) {\n                currentMousePosition = e.clientX;\n            };\n\n            if (tooltipOptions && tooltipOptions.visible === false) {\n                return;\n            }\n\n            if (!kendo.support.mobileOS) {\n                this.wrapper\n                        .on(MOUSEENTER + NS, DOT + styles.task, function() {\n                            var element = this;\n                            var task = that._taskByUid($(this).attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._tooltipTimeout = setTimeout(function() {\n                                that.view()._createTaskTooltip(task, element, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.task, function() {\n                            clearTimeout(that._tooltipTimeout);\n\n                            that.view()._removeTaskTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskOffset, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._offsetTooltipTimeout = setTimeout(function() {\n                                that.view()._createOffsetTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function() {\n                            clearTimeout(that._offsetTooltipTimeout);\n\n                            that.view()._removeOffsetTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskPlanned, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            that._plannedTooltipTimeout = setTimeout(function() {\n                                that.view()._createPlannedTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function() {\n                            clearTimeout(that._plannedTooltipTimeout);\n\n                            that.view()._removePlannedTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        });\n            } else {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        e.stopPropagation();\n                        that.view()._removeTaskTooltip();\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.task, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeTaskTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeOffsetTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removePlannedTooltip();\n                        }\n                    });\n\n                if (this.touch) {\n                    this.touch\n                        .bind(\"tap\", function(e) {\n                            var element = $(e.touch.target);\n                            var currentPosition = e.touch.x.client;\n                            var task;\n\n                            if (!element.hasClass(styles.task)) {\n                                task = that._taskByUid(element.closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\"));\n                                if (that.view()._offsetTooltip) {\n                                    that.view()._removeOffsetTooltip();\n                                }\n\n                                that.view()._createOffsetTooltip(task, element, currentPosition);\n                            } else {\n                                task = that._taskByUid(element.attr(\"data-uid\"));\n                                if (that.view()._taskTooltip) {\n                                    that.view()._removeTaskTooltip();\n                                }\n\n                                that.view()._createTaskTooltip(task, element, currentPosition);\n                            }\n                        })\n                        .bind(\"doubletap\", function() {\n                            that.view()._removeTaskTooltip();\n                            that.view()._removeOffsetTooltip();\n                        });\n                }\n            }\n        },\n        _setPlanned: function(value) {\n            this.options.showPlannedTasks = value;\n            this.view().options.showPlannedTasks = value;\n        }\n    });\n\n    extend(true, GanttTimeline, { styles: timelineStyles });\n\n})(window.kendo.jQuery);\n"]}