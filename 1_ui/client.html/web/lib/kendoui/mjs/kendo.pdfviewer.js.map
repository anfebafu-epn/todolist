{"version":3,"file":"kendo.pdfviewer.js","names":["extend","window","kendo","jQuery","pdfviewer","pdfjs","lib","pdfjsLib","isLoaded","console","error","__meta__$2","id","name","category","depends","$","undefined$1","PDFJS","Class","atob","PDFJSProcessor","init","options","viewer","this","file","fetchDocument","that","deferred","Deferred","messages","errorMessages","_isBase64Data","data","getDocument","promise","then","pdf","pageSizes","pagePromises","_downloadData","getData","blob","Blob","type","resolve","i","numPages","push","getPage","Promise","all","map","pagePromise","viewport","getViewport","scale","width","height","total","pages","catch","e","_triggerError","message","parseError","notFoundError","includes","alertMessage","notFound","_renderBlankPage","fetchPageData","number","downloadFile","fileName","ui","progress","pageContainer","done","result","reader","FileReader","readAsDataURL","onload","saveAs","dataURI","proxyURL","_updateDocument","loadingTask","destroy","equalSign","length","test","indexOf","renderTextLayer","params","processor","__meta__$1","DPLProcessor","read","upload","download","ajax","url","dataType","success","stringify","JSON","parse","xhr","responseText","page","document","pageField","geometries","location","fromJSON","json","_clearPages","_renderPages","resize","activatePage","dpl","noop","drawing","Group","Surface","RENDER","geometryTypes","Path","MultiPath","Rect","Image","Text","Page","pageNumber","element","attr","_updatePageSize","ratio","pageElement","Math","min","size","render","DPLPage","draw","group","surface","_drawGeometries","trigger","load","loaded","_initSurface","surfaceOptions","view","kGeometry","geometry","_drawPath","_drawRect","_drawImage","_drawText","append","rectGeo","point","transform","_getMatrix","fill","fillOptions","stroke","strokeOptions","imageRect","src","font","content","path","paths","subPath","segments","moveTo","apply","j","segment","points","lineTo","curveTo","closed","close","matrix","Object","create","Matrix","prototype","PDFJSPage","canvas","get","fn","call","defaultScale","force","_scale","_page","_renderPromise","dpr","devicePixelRatio","context","getContext","_dpr","_renderTask","cancel","canvasContext","_renderTextLayer","textLayer","remove","getTextContent","normalizeWhitespace","textContent","css","html","container","textDivs","enhanceTextSelection","isArray","Array","SearchDOM","processDom","highlightClass","charClass","targets","target","textNodes","charIndex","text","forEach","traverseToTextNode","processTextNode","node","nodeType","childNodes","span","wrap","parent","empty","splitChars","children","unwrap","newHtml","innerHTML","search","value","matchCase","match","expression","RegExp","matches","resetMark","resetHighlight","resetMatchIndex","exec","startOffset","index","endOffset","highlightAll","mark","start","end","highlight","matchIndex","find","addClass","removeClass","removeAttr","currentIndex","wrapInner","contents","nextMatch","previousMatch","getMarkedIndex","getFirstMarked","eq","each","item","encode","htmlEncode","EXTENSIONS","keys","ErrorDialog","actions","dialogs","okText","_dialog","kendoDialog","getKendoDialog","open","center","ExportAsDialog","fileFormats","description","exportAsDialog","png","extension","svg","title","_initializeDialog","autoFocus","resizable","modal","preventScroll","maxWidth","template","labels","saveAsType","save","_updateModel","pagesCount","viewModel","set","dialogMessages","dialog","kendoWindow","getKendoWindow","observable","defaultFileName","bind","SearchDialog","dragHandle","icon","iconClass","inputLabel","of","previous","next","dialogElm","dialogOffset","top","position","left","Window","minHeight","draggable","activate","ev","sender","searchModel","boundValue","searchText","matchCaseClick","prev","onKeyup","key","keyCode","navigationFn","shiftKey","ENTER","preventDefault","onInput","parseJSON","Command","OpenCommand","_upload","_initUpload","click","uploadOptions","select","_onSelect","_onSuccess","_onError","complete","_onComplete","showFileList","multiple","validation","allowedExtensions","async","saveUrl","autoUpload","saveField","kendoUpload","getKendoUpload","response","isPlainObject","XMLHttpRequest","notSupported","fileToUpload","files","toLowerCase","fromFile","onerror","readAsArrayBuffer","rawFile","PageChangeCommand","current","targetPage","isNaN","_pageNum","Number","DownloadCommand","info","ExportCommand","_saveDialog","_initDialog","exportImage","exportSVG","EnableSelectionCommand","_toggleSelection","EnablePanCommand","OpenSearchCommand","searchDialog","offset","_open","_next","_prev","_close","changeHandler","_change","zoomStartHandler","_closeDialog","openFileHandler","_searchDOM","_initSearchDOM","searchEngine","unbind","_updateSearchModel","toolbar","field","model","_scrollToMark","marked","scroller","_scroller","scrollElement","scrollTo","scrollLeft","ZoomCommand","loadedPagesHeight","containerHeight","clientHeight","updatedVisiblePagesCount","renderTasks","processingLib","_calculateZoom","updateViewer","scrollingStarted","_scrollingStarted","scrollTop","scrollHeight","_resize","zoomScale","pageHeight","_visiblePages","_visiblePagesCount","_loadVisiblePages","_triggerZoomEnd","preventZoom","viewerOptions","visibleCanvas","calculatedDpr","scaleValue","_allowResize","_autoFit","zoomIn","zoomRate","zoomOut","_autoZoomScale","toString","parseInt","replace","zoomMin","zoomMax","updateComboBox","_updateZoomComboBox","PrintCommand","_renderPrintContainer","_loadAllPages","processAfterRender","printContainer","loadPromises","renderPromises","getRenderPromise","_originalScale","zoom","_renderPrintPages","setTimeout","_printDocument","_renderPrintImage","div","img","toDataURL","myWindow","browser","support","write","focus","print","chrome","chromiumEdge","on","popupBlocked","__meta__","NS","PLUS","MINUS","ZERO","NUMPAD_ZERO","Widget","ERROR","KEYDOWN","MOUSEWHEEL","UPDATE","ZOOM_SCALE","PAGE_CHANGE","ZOOMCOMMAND","PROCESSORS","styles","PREDEFINED_ZOOM_VALUES","PDFViewer","deepExtend","_processMessages","_wrapper","_renderToolbar","_initProcessor","_renderPageContainer","_loadDocument","notify","events","pdfjsProcessing","dplProcessing","loadOnDemand","items","defaultPageSize","zoomLevel","actualWidth","autoWidth","fitToWidth","fitToPage","exportAs","pager","first","last","toggleSelection","togglePan","defaultTools","command","spacer","zoomInOut","fillMode","attributes","class","buttons","showText","overflow","component","componentOptions","enable","dataTextField","dataValueField","valuePrimitive","clearOnEscape","commandOn","togglable","selected","spacer2","exportAsTool","pagerTools","rounded","wrapper","_keydown","_resizeHandler","onResize","plusShortcuts","NUMPAD_PLUS","minusShortcuts","NUMPAD_MINUS","zeroShortcuts","shouldExecute","args","ctrlKey","_blankPage","execute","processingOptions","toolbarOptions","tools","_processTools","parentMessages","toolbarElement","appendTo","ToolBar","_toolbarClick","update","_updateToolbar","flatMap","t","zoomLevels","percent","comboOptions","concat","dataSource","p","b","isRtl","direction","rtlDirection","pageOptions","toolbarEl","zoomCombo","toFocus","_getAllItems","isBlank","action","_updatePager","_updateOnBlank","_resetTabIndex","textBox","totalPagesSpan","_togglePagerDisabledClass","prevFirst","closest","nextLast","isPredefined","round","val","_initErrorDialog","_errorDialog","dialogInstance","pagesData","viewerPage","pageData","_attachContainerEvents","_getVisiblePagesCount","clearTimeout","_resizePages","containerWidth","clientWidth","currentRatio","max","_wheel","throttle","activeElement","mobile","Scroller","elastic","_scroll","currentPage","currentPageTop","currentPageHeight","previousPage","prevPageTop","prevPageHeight","containerScrollHeight","containerScrollTop","containerOffsetTop","pageNum","pageIndex","pageToLoadNum","scrollDirection","_prevScrollTop","_preventScroll","abs","floor","originalEvent","wheelDelta","detail","preventComboBoxChange","commandOptions","loadPage","scrollerTopPosition","scrollerTopOffset","pageTopOffset","pageMargin","minVisiblePageNum","maxVisiblePageNum","slice","promises","rootGroup","background","fromRect","color","forceProxy","proxyTarget","setOptions","unbindResize","off","reset","userEvents","_shouldNotMove","toggleClass","_getTextLayers","plugin"],"sources":["kendo.pdfviewer.js"],"mappings":"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","sourcesContent":["import './kendo.mobile.scroller.js';\nimport './kendo.toolbar.js';\nimport './kendo.combobox.js';\nimport './kendo.textbox.js';\nimport './kendo.core.js';\nimport './kendo.drawing.js';\nimport './kendo.dialog.js';\nimport './kendo.window.js';\nimport './kendo.binder.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.icons.js';\nimport './kendo.upload.js';\n\n(function($, undefined$1) {\n    var extend = $.extend;\n    var isLoaded = function() {\n        if (!window.pdfjsLib)\n        {\n            var console = window.console;\n\n            if (console && console.error) {\n                console.error(\"PDF.JS required.\");\n            }\n\n            return false;\n        }\n\n        kendo.pdfviewer.pdfjs.lib = window.pdfjsLib;\n\n        return true;\n    };\n\n    extend(kendo, {\n        pdfviewer: {\n            pdfjs: {\n                lib: window.pdfjsLib,\n                isLoaded: isLoaded\n            }\n        }\n    });\n})(window.kendo.jQuery);\n\nvar __meta__$2 = {\n    id: \"pdfjs-processor\",\n    name: \"PDFJS-Processor\",\n    category: \"framework\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        atob = window.atob,\n        PDFJS;\n\n    var PDFJSProcessor = Class.extend({\n        init: function(options, viewer) {\n            var that = this;\n\n            if (kendo.pdfviewer.pdfjs.isLoaded()) {\n                PDFJS = kendo.pdfviewer.pdfjs.lib;\n            }\n\n            that.file = options.file;\n            that.viewer = viewer;\n        },\n        fetchDocument: function() {\n            var that = this,\n                deferred = $.Deferred(),\n                messages = that.viewer.options.messages.errorMessages;\n\n            if (!that.file) {\n                return deferred.resolve();\n            }\n\n            if (that._isBase64Data() && atob)\n            {\n                that.file.data = atob(that.file.data);\n            }\n\n            PDFJS.getDocument(this.file).promise.then(function(pdf) {\n                var pageSizes = [];\n                that.pdf = pdf;\n                that.pagePromises = [];\n                that._downloadData = $.Deferred();\n\n                pdf.getData().then(function(data) {\n                    var blob = new Blob([data], { type: 'application/pdf' });\n                    that._downloadData.resolve({\n                        file: blob\n                    });\n                });\n\n                for (var i = 1; i <= pdf.numPages; i++) {\n                    that.pagePromises.push(pdf.getPage(i));\n                }\n\n                Promise.all(that.pagePromises).then(function(pagePromises) {\n                    pageSizes = pagePromises.map(function(pagePromise) {\n                        var viewport = pagePromise.getViewport({ scale: 4 / 3 });\n                        return {\n                            width: viewport.width,\n                            height: viewport.height\n                        };\n                    });\n\n                    deferred.resolve({\n                        total: pdf.numPages,\n                        pages: pageSizes\n                    });\n                }).catch(function(e) {\n                    that.viewer._triggerError({\n                        error: e.message,\n                        message: messages.parseError\n                    });\n                });\n\n            }).catch(function(e) {\n                var notFoundError = e.name.includes(\"Missing\");\n                var alertMessage = notFoundError ? messages.notFound : messages.parseError;\n                that.viewer._triggerError({\n                    error: e.message,\n                    message: alertMessage\n                });\n                if (notFoundError) {\n                    that.viewer._renderBlankPage();\n                }\n            });\n\n            return deferred;\n        },\n        fetchPageData: function(number) {\n            return this.pagePromises[number - 1];\n        },\n        downloadFile: function(fileName) {\n            var that = this;\n            kendo.ui.progress(that.viewer.pageContainer, true);\n\n            that._downloadData.done(function(result) {\n                kendo.ui.progress(that.viewer.pageContainer, false);\n\n                var reader = new FileReader();\n                reader.readAsDataURL(result.file);\n\n                reader.onload = function() {\n                    kendo.saveAs({\n                        dataURI: reader.result,\n                        fileName: fileName + \".pdf\",\n                        proxyURL: function() {\n                            return reader.result;\n                        }\n                    });\n                };\n            });\n        },\n        _updateDocument: function(file) {\n            if (this.pdf && this.pdf.loadingTask) {\n                this.pdf.loadingTask.destroy();\n            }\n\n            this.file = file;\n        },\n        _isBase64Data: function() {\n            var data = this.file.data,\n                notBase64 = /[^A-Z0-9+\\/=]/i,\n                length = data && data.length,\n                equalSign;\n\n            if (!length || length % 4 !== 0 || notBase64.test(data)) {\n                return false;\n            }\n\n            equalSign = data.indexOf('=');\n\n            return equalSign === -1 ||\n                equalSign === length - 1 ||\n                (equalSign === length - 2 && data[length - 1] === '=');\n        },\n        renderTextLayer: function(params) {\n            PDFJS.renderTextLayer(params);\n        }\n    });\n\n    extend(kendo.pdfviewer.pdfjs, {\n        processor: PDFJSProcessor\n    });\n})(window.kendo.jQuery);\n\nvar __meta__$1 = {\n    id: \"dpl-processor\",\n    name: \"DPL-Processor\",\n    category: \"framework\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var DPLProcessor = Class.extend({\n        init: function(options, viewer) {\n            var that = this;\n\n            that.options = options;\n            that.read = options.read;\n            that.upload = options.upload;\n            that.download = options.download;\n\n            that.viewer = viewer;\n        },\n        fetchDocument: function() {\n            var that = this,\n                deferred = $.Deferred(),\n                errorMessages = that.viewer.options.messages.errorMessages;\n\n            if (!that.read) {\n                return deferred.resolve();\n            }\n\n            $.ajax({\n                type: that.read.type,\n                url: that.read.url,\n                dataType: that.read.dataType,\n                success: function(data) {\n                    if (typeof data != \"string\") {\n                        data = kendo.stringify(data);\n                    }\n                    deferred.resolve(JSON.parse(data));\n                },\n                error: function(xhr) {\n                    that.viewer._triggerError({\n                        error: xhr.responseText,\n                        message: errorMessages.parseError\n                    });\n                }\n            });\n\n            return deferred;\n        },\n        fetchPageData: function(number) {\n            var that = this;\n            var deferred = $.Deferred();\n            var page = that.viewer.document.pages[number - 1];\n            var data = {};\n            data[that.read.pageField] = number;\n\n            if (!page.geometries.length) {\n                $.ajax({\n                    type: that.read.type,\n                    url: that.read.url,\n                    data: data,\n                    success: function(data) {\n                        deferred.resolve(JSON.parse(data));\n                    },\n                    error: function(xhr) {\n                        that.viewer._triggerError({\n                            error: xhr.responseText,\n                            message: that.viewer.options.messages.errorMessages.parseError\n                        });\n                    }\n                });\n            } else {\n                deferred.resolve(page);\n            }\n\n            return deferred;\n        },\n        downloadFile: function(fileName) {\n            window.location = this.download.url + \"?file=\" + fileName;\n        },\n\n        fromJSON: function(json)\n        {\n            var viewer = this.viewer;\n            viewer._clearPages();\n\n            viewer.document = json;\n            viewer.document.total = viewer.document.pages.length;\n\n            viewer._renderPages();\n            viewer.resize(true);\n\n            viewer.activatePage(1);\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        dpl: {\n            processor: DPLProcessor\n        }\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var extend = $.extend,\n        noop = $.noop,\n        drawing = kendo.drawing,\n        Group = drawing.Group,\n        Surface = drawing.Surface,\n        RENDER = \"render\",\n        Class = kendo.Class,\n\n        DEFAULT_DPR = 2;\n\n    var geometryTypes = {\n        Path: \"path\",\n        MultiPath: \"multipath\",\n        Rect: \"rect\",\n        Image: \"image\",\n        Text: \"text\"\n    };\n\n    var Page = Class.extend({\n        init: function(options, viewer) {\n            this.viewer = viewer;\n            this.processor = options.processor;\n            this.options = options;\n            this.pageNumber = options.number;\n\n            this.element = $(\"<div class='k-page' />\");\n            this.element.attr(kendo.attr(\"number\"), this.pageNumber);\n\n            this._updatePageSize(options);\n            this.width = options.width;\n            this.height = options.height;\n        },\n        resize: function(ratio) {\n            var pageElement = this.element;\n\n            this._updatePageSize({\n                width: Math.min(pageElement.width() * ratio, this.width),\n                height: Math.min(pageElement.height() * ratio, this.height)\n            });\n        },\n        _updatePageSize: function(size) {\n            this.element\n                    .width(size.width)\n                    .height(size.height);\n        },\n        destroy: function() {\n            kendo.destroy(this.element);\n        },\n        render: noop\n    });\n\n    var DPLPage = Page.extend({\n        draw: function() {\n            var that = this,\n                geometries = that.options.geometries;\n\n            that.group = new Group();\n            that.surface.draw(that.group);\n\n            that._drawGeometries(geometries);\n\n            that.viewer.trigger(RENDER, { page: this });\n            kendo.ui.progress(that.element, false);\n        },\n        load: function() {\n            var that = this;\n\n            if (that.loaded || !that.processor)\n            {\n                return;\n            }\n\n            that.processor.fetchPageData(that.pageNumber).then(function(data) {\n                that.options = data;\n                that._initSurface();\n                that.draw();\n            });\n\n            that.loaded = true;\n        },\n        _initSurface: function() {\n            var size = {\n                width: this.element.width(),\n                height: this.element.height()\n            };\n            var surfaceOptions = extend({ width: this.width, height: this.height }, this.viewer.options.view);\n            this.surface = new Surface(this.element, surfaceOptions);\n            this._updatePageSize(size);\n        },\n        _drawGeometries: function(geometries) {\n            var that = this,\n                kGeometry;\n\n            if (!geometries) {\n                return;\n            }\n\n            for (var i = 0; i <= geometries.length; i++) {\n                var geometry = geometries[i];\n\n                if (!geometry) {\n                    continue;\n                }\n\n                switch (geometry.type) {\n                    case geometryTypes.Path:\n                    case geometryTypes.MultiPath:\n                        kGeometry = that._drawPath(geometry);\n                        break;\n                    case geometryTypes.Rect:\n                        kGeometry = that._drawRect(geometry);\n                        break;\n                    case geometryTypes.Image:\n                        kGeometry = that._drawImage(geometry);\n                        break;\n                    case geometryTypes.Text:\n                        kGeometry = that._drawText(geometry);\n                        break;\n                    default:\n                        kGeometry = null;\n                        break;\n                }\n\n                if (kGeometry)\n                {\n                    that.group.append(kGeometry);\n                }\n            }\n        },\n        _drawRect: function(geometry)\n        {\n            var rectGeo = new kendo.geometry.Rect(geometry.point, geometry.size);\n\n            return new drawing.Rect(rectGeo, {\n                transform: this._getMatrix(geometry.transform),\n                fill: geometry.fillOptions,\n                stroke: geometry.strokeOptions\n            });\n        },\n\n        _drawImage: function(geometry)\n        {\n            var imageRect = new kendo.geometry.Rect(geometry.point, geometry.size);\n            return new drawing.Image(geometry.src, imageRect, {\n                transform: this._getMatrix(geometry.transform)\n            });\n        },\n\n        _drawText: function(geometry)\n        {\n            var options = {\n                transform: this._getMatrix(geometry.transform),\n                stroke: geometry.strokeOptions,\n                fill: geometry.fillOptions,\n                font: geometry.font\n            };\n            return new kendo.drawing.Text(geometry.content, geometry.point, options);\n        },\n\n        _drawPath: function(geometry)\n        {\n            var options = {\n                transform: this._getMatrix(geometry.transform),\n                stroke: geometry.strokeOptions,\n                fill: geometry.fillOptions\n            };\n            var path = new drawing.MultiPath(options);\n\n            for (var i = 0; i < geometry.paths.length; i++) {\n                var subPath = geometry.paths[i];\n\n                if (!subPath.segments)\n                {\n                    return;\n                }\n\n                path.moveTo.apply(path, subPath.point);\n\n                for (var j = 0; j < subPath.segments.length; j++) {\n                    var segment = subPath.segments[j];\n                    var drawAction = segment.points.length === 1 ? path.lineTo : path.curveTo;\n                    drawAction.apply(path, segment.points);\n                }\n\n                if (subPath.closed) {\n                    path.close();\n                }\n            }\n\n            return path;\n        },\n\n        _getMatrix: function(transform) {\n            var matrix = Object.create(kendo.geometry.Matrix.prototype);\n            kendo.geometry.Matrix.apply(matrix, transform);\n            return matrix;\n        }\n    });\n\n    var PDFJSPage = Page.extend({\n        init: function(options, viewer) {\n            var that = this,\n                canvas;\n\n            canvas = $(\"<canvas style='width: 100%; height: 100%;' />\");\n            that.canvas = canvas.get(0);\n\n            Page.fn.init.call(that, options, viewer);\n            that.canvas.width = that.width;\n            that.canvas.height = that.height;\n\n            that.element.append(canvas);\n        },\n        load: function(defaultScale, force) {\n            var that = this,\n                promise = $.Deferred();\n\n            if (that._scale === defaultScale && !force)\n            {\n                return;\n            } else if (that._scale && that._scale !== defaultScale && !force)\n            {\n                that._scale = defaultScale;\n                that.render(defaultScale);\n                return promise.resolve(that);\n            }\n\n            if (that.processor) {\n                that.processor.fetchPageData(that.pageNumber).then(function(page) {\n                    that._page = page;\n                    that._renderPromise = that.render(defaultScale).then(function() {\n                        that.viewer.trigger(RENDER, { page: that });\n                    });\n                    promise.resolve(that);\n                });\n            }\n\n            that._scale = defaultScale;\n            that.loaded = true;\n            return promise;\n        },\n        render: function(scale) {\n            var that = this;\n            var dpr = window.devicePixelRatio >= DEFAULT_DPR ? window.devicePixelRatio : DEFAULT_DPR;\n            var context = this.canvas.getContext('2d'),\n                viewport = this._page.getViewport({\n                    scale: scale\n                });\n\n            this.canvas.width = viewport.width * dpr;\n            this.canvas.height = viewport.height * dpr;\n            context.scale(dpr, dpr);\n\n            this._scale = scale;\n            this._dpr = dpr;\n\n            if (this._renderTask)\n            {\n                this._renderTask.cancel();\n                this._renderTask = null;\n            }\n\n            this._updatePageSize({\n                width: viewport.width,\n                height: viewport.height\n            });\n\n            this._renderTask = this._page.render({\n                canvasContext: context,\n                viewport: viewport\n            });\n\n            this._renderTextLayer(viewport);\n\n            return this._renderTask.promise.then(function() {\n                that._renderTask = null;\n\n            }).catch(function() {});\n        },\n        _renderTextLayer: function(viewport) {\n            var that = this;\n            var page = that._page;\n\n            if (that.textLayer) {\n                that.textLayer.remove();\n             }\n\n            that.textLayer = $(\"<div class='k-text-layer'></div>\").get(0);\n            that.element.append(that.textLayer);\n\n            page.getTextContent({\n                normalizeWhitespace: true\n            }).then(function(textContent) {\n                $(that.textLayer).css({\n                  height: viewport.height,\n                  width: viewport.width\n                }).html(\"\"); // Clear content to make sure that refreshing the page will not cause duplication of the text content.\n\n                var params = {\n                    textContent: textContent,\n                    container: that.textLayer,\n                    viewport: viewport,\n                    textDivs: [],\n                    enhanceTextSelection: true\n                };\n\n                that.processor.renderTextLayer(params);\n            });\n        }\n    });\n\n    extend(kendo.pdfviewer.dpl, {\n        geometryTypes: geometryTypes,\n        Page: DPLPage\n    });\n    extend(kendo.pdfviewer.pdfjs, {\n        Page: PDFJSPage\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var Class = kendo.Class,\n        extend = $.extend,\n        isArray = Array.isArray;\n\n    var SearchDOM = Class.extend({\n        init: function(options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.processDom();\n        },\n\n        options: {\n            highlightClass: \"k-search-highlight\",\n            charClass: \"k-text-char\"\n        },\n\n        processDom: function() {\n            var that = this;\n\n            that.targets = isArray(that.options.target) ? that.options.target : [that.options.target];\n            that.textNodes = [];\n            that.charIndex = 0;\n            that.text = \"\";\n\n            that.targets.forEach(function(target) {\n                that.traverseToTextNode(target);\n            });\n\n            for (var i = 0; i < that.textNodes.length; i++) {\n                that.processTextNode(that.textNodes[i]);\n            }\n        },\n\n        traverseToTextNode: function(node) {\n            var that = this;\n\n            if (node.nodeType === 3) {\n                that.textNodes.push(node);\n            } else {\n                for (var i = 0; i < node.childNodes.length; i++) {\n                    that.traverseToTextNode(node.childNodes[i]);\n                }\n            }\n        },\n\n        processTextNode: function(node) {\n            var that = this;\n            var text = node.textContent;\n            var span;\n\n            that.text = that.text + text;\n\n            if (text.length > 0) {\n                span = $(node).wrap(\"<span>\").parent();\n                span.empty();\n                that.splitChars(span.get(0), text);\n                span.children().unwrap();\n            }\n        },\n\n        splitChars: function(span, text) {\n            var that = this;\n            var newHtml = \"\";\n\n            for (var i = 0; i < text.length; i++) {\n                newHtml = newHtml + \"<span class='\" + that.options.charClass + \"' \" + kendo.attr(\"char-index\") + \"=\" + that.charIndex + \">\" + text[i] + \"</span>\";\n                that.charIndex++;\n            }\n\n            span.innerHTML = newHtml;\n        },\n\n        search: function(value, matchCase) {\n            var that = this;\n            var expression = new RegExp(value, !matchCase ? \"gi\" : \"g\");\n            var match;\n\n            that.matches = [];\n\n            that.resetMark();\n            that.resetHighlight();\n            that.resetMatchIndex();\n\n            if (value === \"\") {\n                return;\n            }\n\n            match = expression.exec(that.text);\n\n            while (match) {\n                that.matches.push({\n                    startOffset: match.index,\n                    endOffset: match.index + match[0].length\n                });\n\n                match = expression.exec(that.text);\n            }\n\n            that.highlightAll();\n            that.mark();\n        },\n\n        highlightAll: function() {\n            var that = this;\n\n            that.matches.forEach(function(match, index) {\n                var start = match.startOffset;\n                var end = match.endOffset;\n\n                that.highlight(start, end, index + 1);\n            });\n        },\n\n        highlight: function(start, end, matchIndex) {\n            var that = this;\n\n            for (var i = start; i < end; i++) {\n                $(that.targets)\n                    .find(\".\" + that.options.charClass + \"[\" + kendo.attr(\"char-index\") + \"=\" + i + \"]\")\n                    .addClass(that.options.highlightClass)\n                    .attr(kendo.attr(\"match-index\"), matchIndex);\n            }\n        },\n\n        resetHighlight: function() {\n            var that = this;\n\n            $(that.targets)\n                .find(\".\" + that.options.highlightClass)\n                .removeClass(that.options.highlightClass);\n        },\n\n        resetMatchIndex: function() {\n            var that = this;\n\n            $(that.targets)\n                .find(\".\" + that.options.charClass + \"[\" + kendo.attr(\"match-index\") + \"]\")\n                .removeAttr(kendo.attr(\"match-index\"));\n        },\n\n        mark: function() {\n            var that = this;\n\n            if (!that.currentIndex && that.currentIndex !== 0) {\n                that.currentIndex = 0;\n            } else if (that.currentIndex > that.matches.length) {\n                that.currentIndex = that.matches.length;\n            } else {\n                that.resetMark();\n            }\n\n            $(that.targets)\n                .find(\".\" + that.options.charClass + \"[\" + kendo.attr(\"match-index\") + \"=\" + that.currentIndex + \"]\")\n                .wrapInner(\"<mark>\");\n        },\n\n        resetMark: function() {\n            var that = this;\n            $(that.targets).find(\"mark\").contents().unwrap();\n        },\n\n        nextMatch: function() {\n            var that = this;\n\n            that.currentIndex++;\n\n            if (that.currentIndex > that.matches.length) {\n                that.currentIndex = 1;\n            }\n\n            that.mark();\n        },\n\n        previousMatch: function() {\n            var that = this;\n\n            that.currentIndex--;\n\n            if (that.currentIndex < 1) {\n                that.currentIndex = that.matches.length;\n            }\n\n            that.mark();\n        },\n\n        getMarkedIndex: function() {\n            return this.matches.length ? this.currentIndex : 0;\n        },\n\n        getFirstMarked: function() {\n            return $(this.targets).find(\"mark\").eq(0);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.resetMark();\n            $(that.targets).children(\"span:not(.\" + that.options.charClass + \")\").each(function(i, item) {\n                $(item).text($(item).text());\n            });\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        SearchDOM: SearchDOM\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        extend = $.extend,\n        Class = kendo.Class,\n        EXTENSIONS = {\n            svg: \".svg\",\n            png: \".png\"\n        },\n        keys = kendo.keys;\n\n    var ErrorDialog = Class.extend({\n        init: function(options) {\n            this.options = extend(options, {\n                actions: [{\n                    text: options.messages.dialogs.okText\n                }]\n            });\n            this._dialog = $(\"<div />\")\n                    .kendoDialog(this.options)\n                    .getKendoDialog();\n        },\n        open: function() {\n            this._dialog.center().open();\n        }\n    });\n\n    var ExportAsDialog = Class.extend({\n        init: function(options) {\n            this.options = extend(options, this.options, {\n                fileFormats: [{\n                    description: options.messages.dialogs.exportAsDialog.png,\n                    extension: EXTENSIONS.png\n                }, {\n                    description: options.messages.dialogs.exportAsDialog.svg,\n                    extension: EXTENSIONS.svg\n                }],\n                title: options.messages.dialogs.exportAsDialog.title,\n                open: function() {\n                    this.center();\n                }\n            });\n            this._initializeDialog();\n            return this;\n        },\n        options: {\n            extension: EXTENSIONS.png,\n            autoFocus: true,\n            resizable: false,\n            modal: {\n                preventScroll: true\n            },\n            width: \"90%\",\n            maxWidth: 520,\n            template: ({ messages, total }) =>\n                `<div class='k-edit-label'><label>${encode(messages.exportAsDialog.labels.fileName)}:</label></div>` +\n                \"<div class='k-edit-field'>\" +\n                    \"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input class='k-input-inner' data-bind='value: name' /></span>\" +\n                \"</div>\" +\n                \"<div>\" +\n                    `<div class='k-edit-label'><label>${encode(messages.exportAsDialog.labels.saveAsType)}:</label></div>` +\n                    \"<div class='k-edit-field'>\" +\n                    \"<select data-role='dropdownlist' class='k-file-format' \" +\n                        \"data-text-field='description' \" +\n                        \"data-value-field='extension' \" +\n                        \"data-bind='value: extension, source: fileFormats'></select>\" +\n                    \"</div>\" +\n                \"</div>\" +\n                `<div class='k-edit-label'><label>${encode(messages.exportAsDialog.labels.page)}:</label></div>` +\n                \"<div class='k-edit-field'>\" +\n                    `<input data-role='numerictextbox' data-format='n0' data-min='1' data-max='${encode(total)}' data-bind='value: page' />` +\n                \"</div>\" +\n                \"<div class='k-actions'>\" +\n                    `<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary' data-bind='click: apply'><span class='k-button-text'>${encode(messages.save)}</span></button>` +\n                    `<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base' data-bind='click: close'><span class='k-button-text'>${encode(messages.cancel)}</span></button>` +\n                \"</div>\"\n        },\n        _updateModel: function(options) {\n            if (options.pagesCount) {\n                this.viewModel.set(\"pagesCount\", options.pagesCount);\n            }\n            if (options.page) {\n                this.viewModel.set(\"page\", options.page);\n            }\n        },\n        _initializeDialog: function() {\n            var that = this;\n            var options = that.options;\n            var dialogMessages = options.messages.dialogs;\n            var dialog = $(\"<div class='k-pdf-viewer-window k-action-window k-popup-edit-form' />\")\n                    .append(kendo.template(options.template)({\n                        total: options.pagesCount,\n                        messages: dialogMessages\n                    }))\n                    .kendoWindow(options)\n                    .getKendoWindow();\n\n            that.viewModel = kendo.observable({\n                title: dialogMessages.exportAsDialog.title,\n                name: dialogMessages.exportAsDialog.defaultFileName,\n                extension: options.extension,\n                fileFormats: options.fileFormats,\n                pagesCount: options.pagesCount,\n                page: 1,\n                apply: that.apply.bind(this),\n                close: function() {\n                    dialog.close();\n                }\n            });\n\n            that._dialog = dialog;\n\n            kendo.bind(dialog.element, that.viewModel);\n            return dialog;\n        },\n        open: function() {\n            this._dialog.center().open();\n        },\n        apply: function() {\n            this._dialog.close();\n            this.options.apply({\n                fileName: this.viewModel.name + this.viewModel.extension,\n                extension: this.viewModel.extension,\n                page: this.viewModel.page\n            });\n        }\n    });\n\n    var SearchDialog = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, options, that.options);\n        },\n        options: {\n            resizable: false,\n            template: ({ messages }) => \"<div class='k-search-container'>\" +\n                          `<button aria-label='${encode(messages.dragHandle)}' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-search-dialog-draghandle'>${kendo.ui.icon({ icon: \"handle-drag\", iconClass: \"k-button-icon\" })}</button>` +\n                          \"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'>\" +\n                              `<input class='k-search-dialog-input k-input-inner' data-bind='value: boundValue, events: { keyup: onKeyup, input: onInput }' aria-label='${encode( messages.inputLabel)}' title='${encode(messages.inputLabel)}' />` +\n                              `<span class='k-input-suffix'><button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-match-case-button k-match-case-button' data-bind='css: {k-selected: matchCase}, click: matchCaseClick' aria-label='${encode(messages.matchCase)}' title='${encode(messages.matchCase)}'>${kendo.ui.icon({ icon: \"convert-lowercase\", iconClass: \"k-button-icon\" })}</button></span>` +\n                          \"</span>\" +\n                          `<span class='k-search-matches'><span data-bind='text: matchIndex'></span> ${encode(messages.of)} <span data-bind='text: matches'></span></span>` +\n                          `<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: prev' aria-label='${encode(messages.previous)}' title='${encode(messages.previous)}'>${kendo.ui.icon({ icon: \"arrow-up\", iconClass: \"k-button-icon\" })}</button>` +\n                          `<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: next' aria-label='${encode(messages.next)}' title='${encode(messages.next)}'>${kendo.ui.icon({ icon: \"arrow-down\", iconClass: \"k-button-icon\" })}</button>` +\n                          `<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: close' aria-label='${encode(messages.close)}' title='${encode(messages.close)}'>${kendo.ui.icon({ icon: \"x\", iconClass: \"k-button-icon\" })}</button>` +\n                      \"</div>\"\n        },\n        open: function() {\n            var that = this;\n\n            if (!that.dialog) {\n                that._initializeDialog();\n            }\n\n            that.dialog.open();\n        },\n        _initializeDialog: function() {\n            var that = this;\n            var template = kendo.template(that.options.template);\n            var dialogElm = $(\"<div class='k-pdf-viewer-search-dialog'></div>\").append(template({\n                messages: that.options.messages\n            }));\n            var dialogOffset = {\n                top: that.options.position.top + 16,\n                left: that.options.position.left + 16\n            };\n\n            that.dialog = new kendo.ui.Window(dialogElm, extend({}, that.options, {\n                autoFocus: false,\n                title: false,\n                position: { top: dialogOffset.top, left: dialogOffset.left },\n                minHeight: 30,\n                draggable: {\n                    dragHandle: \".k-search-dialog-draghandle\"\n                },\n                activate: function(ev) {\n                    ev.sender.element.find(\".k-search-dialog-input\").trigger(\"focus\");\n                }\n            }));\n\n            that.searchModel = kendo.observable({\n                boundValue: \"\",\n                searchText: \"\",\n                matchCase: false,\n                matchIndex: 0,\n                matches: 0,\n                matchCaseClick: function() {\n                    this.set(\"matchCase\", !this.matchCase);\n                },\n                next: that.options.next,\n                prev: that.options.prev,\n                close: function() {\n                    this.set(\"boundValue\", \"\");\n                    that.dialog.close();\n                },\n                onKeyup: function(ev) {\n                    var key = ev.keyCode;\n                    var navigationFn = ev.shiftKey ? this.prev : this.next;\n\n                    if (key === keys.ENTER) {\n                        navigationFn();\n                        ev.preventDefault();\n                    }\n                },\n                onInput: function(ev) {\n                    this.set(\"searchText\", ev.target.value);\n                }\n            });\n\n            kendo.bind(that.dialog.element, that.searchModel);\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        dialogs: {\n            ErrorDialog: ErrorDialog,\n            ExportAsDialog: ExportAsDialog,\n            SearchDialog: SearchDialog\n        }\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        parseJSON = JSON.parse,\n        progress = kendo.ui.progress,\n        Class = kendo.Class,\n        OPEN = \"open\",\n        ZOOMSTART = \"zoomStart\",\n        ZOOMEND = \"zoomEnd\";\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.viewer = options.viewer;\n            this.errorMessages = this.viewer.options.messages.errorMessages;\n        }\n    });\n\n    var OpenCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n            this.upload = this.viewer.processor.upload;\n        },\n        exec: function() {\n            (this.viewer._upload || this._initUpload()).element.click();\n        },\n        _initUpload: function() {\n            var uploadOptions = {\n                select: this._onSelect.bind(this),\n                success: this._onSuccess.bind(this),\n                error: this._onError.bind(this),\n                complete: this._onComplete.bind(this),\n                showFileList: false,\n                multiple: false,\n                validation: {\n                    allowedExtensions: [\".pdf\"]\n                }\n            };\n\n            if (this.upload) {\n                extend(uploadOptions, {\n                    async: {\n                        saveUrl: this.upload.url,\n                        autoUpload: true,\n                        saveField: this.upload.saveField\n                    }\n                });\n            }\n\n            var upload = $('<input name=\"files\" accept=\".pdf\" type=\"file\" />').kendoUpload(uploadOptions).getKendoUpload();\n            this.viewer._upload = upload;\n\n            return upload;\n        },\n        _onComplete: function() {\n            progress(this.viewer.pageContainer, false);\n        },\n        _onSuccess: function(e) {\n            var json = parseJSON(e.response);\n\n            if ($.isPlainObject(json)) {\n                this.viewer.processor.fromJSON(json);\n            }\n            else {\n                this.viewer._triggerError({\n                    error: json,\n                    message: this.errorMessages.parseError\n                });\n            }\n        },\n        _onError: function(e) {\n            this.viewer._triggerError({\n                error: e.XMLHttpRequest.responseText,\n                message: this.errorMessages.notSupported\n            });\n        },\n        _onSelect: function(e) {\n            var that = this;\n            var fileToUpload = e.files[0];\n\n            progress(that.viewer.pageContainer, true);\n\n            if (that.viewer.trigger(OPEN, { file: fileToUpload }) || that.upload) {\n                return;\n            } else if (fileToUpload.extension.toLowerCase() !== \".pdf\") {\n                that.viewer._triggerError({\n                    error: fileToUpload,\n                    message: that.errorMessages.notSupported\n                });\n                return;\n            }\n\n            var reader = new FileReader();\n            reader.onload = function(e) {\n                var document = e.target.result;\n                that.viewer.fromFile(document);\n            };\n            reader.onerror = function() {\n                that.viewer._triggerError({\n                    error: fileToUpload,\n                    message: that.errorMessages.parseError\n                });\n            };\n\n            reader.readAsArrayBuffer(fileToUpload.rawFile);\n        }\n    });\n\n    var PageChangeCommand = Command.extend({\n        exec: function() {\n            var targetPage = this.options.value,\n                viewer = this.viewer,\n                current, total;\n\n            if (isNaN(targetPage)) {\n                current = viewer._pageNum;\n                total = viewer.document.total;\n\n                switch (targetPage) {\n                    case \"first\": targetPage = 1;\n                        break;\n                    case \"prev\": targetPage = current > 1 ? current - 1 : 1;\n                        break;\n                    case \"next\": targetPage = current < total ? current + 1 : total;\n                        break;\n                    case \"last\": targetPage = total;\n                        break;\n                }\n            } else {\n                targetPage = Number(targetPage);\n            }\n\n            viewer.activatePage(targetPage);\n        }\n    });\n\n    var DownloadCommand = Command.extend({\n        exec: function() {\n            if (!this.viewer.document) {\n                this.viewer._triggerError({\n                    message: this.errorMessages.notFound\n                });\n                return;\n            }\n\n            var fileName = (this.viewer.document.info && this.viewer.document.info.title) ||\n                            this.viewer.options.messages.defaultFileName;\n\n            this.viewer.processor.downloadFile(fileName);\n        }\n    });\n\n    var ExportCommand = Command.extend({\n        init: function(options) {\n            options = $.extend(options, this.options);\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var dialog = (this.viewer._saveDialog || this._initDialog());\n\n            dialog._updateModel({\n                pagesCount: (this.viewer.document && this.viewer.document.total) || 1,\n                page: this.viewer.options.page\n            });\n\n            dialog.open();\n        },\n        apply: function(viewModel) {\n            var extension = viewModel.extension;\n\n            if (extension === \".png\") {\n                this.viewer.exportImage(viewModel);\n            } else if (extension === \".svg\") {\n                this.viewer.exportSVG(viewModel);\n            }\n        },\n        _initDialog: function() {\n            this.viewer._saveDialog = new kendo.pdfviewer.dialogs.ExportAsDialog({\n                apply: this.apply.bind(this),\n                pagesCount: (this.viewer.document && this.viewer.document.total) || 1,\n                messages: this.viewer.options.messages\n            });\n            return this.viewer._saveDialog;\n        }\n    });\n\n    var EnableSelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                viewer = that.viewer;\n\n                viewer._toggleSelection(true);\n        }\n    });\n\n    var EnablePanCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                viewer = that.viewer;\n\n                viewer._toggleSelection(false);\n        }\n    });\n\n    var OpenSearchCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n\n            that.viewer = options.viewer;\n\n            if (!that.viewer.searchDialog) {\n                that.viewer.searchDialog = new kendo.pdfviewer.dialogs.SearchDialog({\n                    position: {\n                        top: that.viewer.pageContainer.offset().top,\n                        left: that.viewer.pageContainer.offset().left\n                    },\n                    messages: that.viewer.options.messages.dialogs.search,\n                    open: that._open.bind(that),\n                    next: that._next.bind(that),\n                    prev: that._prev.bind(that),\n                    close: that._close.bind(that)\n                });\n            }\n\n            Command.fn.init.call(that, options);\n        },\n        exec: function() {\n            var that = this;\n\n            that.viewer.searchDialog.open();\n        },\n        _open: function() {\n            var that = this;\n\n            that.changeHandler = that._change.bind(that);\n            that.zoomStartHandler = that._closeDialog.bind(that);\n            that.openFileHandler = that._closeDialog.bind(that);\n\n            if (!that.viewer._searchDOM) {\n                that.viewer._initSearchDOM();\n                that.viewer.searchDialog.searchModel.bind(\"change\", that.changeHandler);\n                that.viewer.bind(\"zoomStart\", that.zoomStartHandler);\n                that.viewer.bind(\"open\", that.openFileHandler);\n            }\n        },\n        _close: function() {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n\n            that.viewer.searchDialog.searchModel.unbind(\"change\", that.changeHandler);\n            that.viewer.unbind(\"zoomStart\", that.zoomStartHandler);\n            that.viewer.unbind(\"open\", that.openFileHandler);\n            searchEngine.destroy();\n            delete that.viewer._searchDOM;\n            that._updateSearchModel();\n            that.viewer.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n        },\n        _change: function(ev) {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n            var field = ev.field;\n            var model = that.viewer.searchDialog.searchModel;\n            var value = model[field];\n\n            if (!searchEngine) {\n                return;\n            }\n\n            switch (field) {\n                case \"searchText\":\n                    searchEngine.search(value, model.matchCase);\n                    that._updateSearchModel();\n                    break;\n                case \"matchCase\":\n                    searchEngine.search(model.searchText, value);\n                    that._updateSearchModel();\n                    break;\n                default:\n                    break;\n            }\n        },\n        _next: function() {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n\n            if (searchEngine.matches && searchEngine.matches.length) {\n                searchEngine.nextMatch();\n                that._updateSearchModel();\n            }\n        },\n        _prev: function() {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n\n            if (searchEngine.matches && searchEngine.matches.length) {\n                searchEngine.previousMatch();\n                that._updateSearchModel();\n            }\n        },\n        _updateSearchModel: function() {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n            var model = that.viewer.searchDialog.searchModel;\n\n            if (searchEngine) {\n                model.set(\"matches\", searchEngine.matches.length);\n                model.set(\"matchIndex\", searchEngine.getMarkedIndex());\n                that._scrollToMark();\n            } else {\n                model.set(\"searchText\", \"\");\n                model.set(\"matches\", 0);\n                model.set(\"matchIndex\", 0);\n                model.set(\"matchCase\", false);\n            }\n        },\n        _scrollToMark: function() {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n            var marked = searchEngine.getFirstMarked();\n            var scroller = that.viewer._scroller;\n            var position;\n\n            if (!marked.length) {\n                return;\n            }\n\n            position = marked.offset().top - scroller.scrollElement.offset().top - 100;\n\n            scroller.scrollTo(scroller.scrollLeft, position * -1);\n        },\n        _closeDialog: function() {\n            var that = this;\n            that.viewer.searchDialog.dialog.close();\n        }\n    });\n\n    var ZoomCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                options = that.options,\n                viewer = that.viewer,\n                scale = options.value || options.scale,\n                loadedPagesHeight = 0,\n                page = that.viewer._pageNum,\n                containerHeight = viewer.pageContainer[0].clientHeight,\n                updatedVisiblePagesCount = 1,\n                renderTasks = [];\n\n            if (viewer.processingLib === \"dpl\") {\n                return;\n            }\n\n            scale = that._calculateZoom();\n\n            var updateViewer = function() {\n                var scroller = that.viewer._scroller,\n                    scrollingStarted = viewer._scrollingStarted;\n\n                if (scroller && scroller.scrollTop > scroller.scrollHeight()) {\n                    scroller._resize();\n                }\n\n                if (!scrollingStarted)\n                {\n                    viewer.activatePage(page);\n                    viewer._scrollingStarted = false;\n                }\n            };\n\n            if (!scale) {\n                return;\n            }\n\n            viewer.zoomScale = scale;\n            viewer._scrollingStarted = false;\n\n            if (viewer.pages) {\n                viewer.pages.forEach(function(page) {\n                    var pageHeight;\n\n                    if (viewer._visiblePages.indexOf(page) !== -1 && page.loaded) {\n                        renderTasks.push(page.render(scale));\n\n                        pageHeight = page._page.getViewport({\n                            scale: scale\n                        }).height;\n                    }\n                    else {\n                        page.resize(scale);\n                        pageHeight = page.element.height();\n                    }\n\n                    loadedPagesHeight += pageHeight;\n\n                    if (loadedPagesHeight <= containerHeight) {\n                        updatedVisiblePagesCount++;\n                    }\n                });\n\n\n                if (viewer._visiblePagesCount != updatedVisiblePagesCount) {\n\n                    viewer._visiblePagesCount = updatedVisiblePagesCount;\n                    viewer._loadVisiblePages();\n                }\n            }\n\n            Promise.all(renderTasks).then(function() {\n                updateViewer();\n                that._triggerZoomEnd(scale);\n            }).catch(function() {\n                updateViewer();\n                that._triggerZoomEnd(scale);\n            });\n        },\n\n        _calculateZoom: function() {\n            var options = this.options,\n                viewer = this.viewer,\n                viewerOptions = viewer.options,\n                pageContainer = viewer.pageContainer,\n                visibleCanvas = viewer._visiblePages && viewer._visiblePages[0].canvas,\n                calculatedDpr = (viewer._visiblePages && viewer._visiblePages[0]._dpr) || 2,\n                scale = options.value || options.scale,\n                scaleValue = scale,\n                preventZoom;\n\n            viewer._allowResize = false;\n            viewer._autoFit = false;\n\n            if (options.zoomIn) {\n                scaleValue = scale = viewer.zoomScale + viewerOptions.zoomRate;\n            } else if (options.zoomOut) {\n                scaleValue = scale = viewer.zoomScale - viewerOptions.zoomRate;\n            } else if (scale === \"auto\") {\n                viewer._allowResize = true;\n                scaleValue = viewer._autoZoomScale;\n            } else if (scale === \"actual\") {\n                scaleValue = 1;\n            } else if (scale === \"fitToWidth\") {\n                viewer._allowResize = true;\n                viewer._autoFit = \"fitToWidth\";\n                scaleValue = (pageContainer.width() / ((visibleCanvas.width / calculatedDpr) / viewer.zoomScale));\n            } else if (scale === \"fitToPage\") {\n                viewer._allowResize = true;\n                viewer._autoFit = \"fitToPage\";\n                scaleValue = (pageContainer.height() / ((visibleCanvas.height / calculatedDpr) / viewer.zoomScale));\n            } else if (scale && scale.toString().match(/^[0-9]+%?$/)) {\n                scale = parseInt(scale.replace('%', ''), 10) / 100;\n                scaleValue = scale;\n            } else {\n                preventZoom = isNaN(scale);\n            }\n\n            if (!preventZoom) {\n                preventZoom = scale < viewerOptions.zoomMin || scale > viewerOptions.zoomMax;\n            }\n\n            if (preventZoom || viewer.trigger(ZOOMSTART, { scale: scale })) {\n                return;\n            }\n\n            if (options.updateComboBox && viewer.toolbar)\n            {\n                viewer._updateZoomComboBox(scale);\n            }\n\n            return scaleValue;\n        },\n\n        _triggerZoomEnd: function(scale) {\n            var that = this,\n                viewer = that.viewer;\n\n            viewer.trigger(ZOOMEND, { scale: scale });\n        }\n    });\n\n    var PrintCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var that = this;\n\n             if (!that.viewer.document) {\n                that.viewer._triggerError({\n                    message: this.errorMessages.notFound\n                });\n                return;\n            }\n\n            progress(that.viewer.pageContainer, true);\n            that._renderPrintContainer();\n            that._loadAllPages().then(that.processAfterRender.bind(that));\n        },\n        _renderPrintContainer: function() {\n            this.printContainer = $(\"<div></div>\");\n        },\n        _loadAllPages: function() {\n            var that = this;\n            var pages = that.viewer.pages;\n            var loadPromises = [];\n            var renderPromises = [];\n            var promise = $.Deferred();\n\n            that._originalScale = that.viewer.zoom();\n\n            function getRenderPromise(page) {\n                renderPromises.push(page._renderPromise);\n            }\n\n            for (var i = 0; i < pages.length; i++) {\n                loadPromises.push(pages[i].load(3, true).then(getRenderPromise));\n            }\n\n            Promise.all(loadPromises).then(function() {\n                promise.resolve(renderPromises);\n            });\n\n            return promise;\n        },\n        processAfterRender: function(renderPromises) {\n            var that = this;\n\n            Promise.all(renderPromises).then(function() {\n                that._renderPrintPages();\n                setTimeout(function() {\n                    that._printDocument();\n                    that.viewer.zoom(that._originalScale);\n                    progress(that.viewer.pageContainer, false);\n                    delete that._originalScale;\n                }, 0);\n            });\n        },\n        _renderPrintPages: function() {\n            var pages = this.viewer.pages;\n\n            for (var i = 0; i < pages.length; i++) {\n                this._renderPrintImage(pages[i]);\n            }\n         },\n        _renderPrintImage: function(page) {\n            var canvas = page.canvas;\n            var div = $(\"<div></div>\");\n\n            var img = \"<img src='\" + canvas.toDataURL() + \"' width='\" + page.width + \"px' height='\" + page.height + \"px' />\";\n\n            div.append(img);\n\n            this.printContainer.append(div);\n        },\n        _printDocument: function() {\n            var that = this;\n            var pages = that.viewer.pages;\n            var width = pages[0].width;\n            var height = pages[0].height;\n            var myWindow = window.open('','','innerWidth=' + width + ',innerHeight=' + height + 'location=no,titlebar=no,toolbar=no');\n            var browser = kendo.support.browser;\n\n            if (!myWindow) {\n                that.viewer._triggerError({\n                    message: that.errorMessages.popupBlocked\n                });\n                return;\n            }\n\n            myWindow.document.write(that.printContainer.html());\n            myWindow.document.close();\n            myWindow.focus();\n            myWindow.print();\n\n            if (!browser.chrome || browser.chromiumEdge) {\n                myWindow.close();\n            } else {\n                $(myWindow.document).find(\"body\").on(\"mousemove\", function() {\n                    myWindow.close();\n                });\n            }\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        OpenCommand: OpenCommand,\n        PageChangeCommand: PageChangeCommand,\n        DownloadCommand: DownloadCommand,\n        EnableSelectionCommand: EnableSelectionCommand,\n        EnablePanCommand: EnablePanCommand,\n        ExportCommand: ExportCommand,\n        PrintCommand: PrintCommand,\n        OpenSearchCommand: OpenSearchCommand,\n        ZoomCommand: ZoomCommand\n    });\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"pdfviewer\",\n    name: \"PDFViewer\",\n    category: \"web\",\n    description: \"PDFViewer to display pdfs in the browser\",\n    depends: [\"core\", \"window\", \"dialog\", \"toolbar\", \"mobile.scroller\", \"upload\", \"combobox\", \"drawing\", \"binder\", \"dropdownlist\", \"numerictextbox\", \"textbox\"]\n};\n\n(function($, undefined$1) {\n    var NS = \".kendoPDFViewer\",\n        kendo = window.kendo,\n        ui = kendo.ui,\n        extend = $.extend,\n        drawing = kendo.drawing,\n        keys = $.extend({ PLUS: 187, MINUS: 189, ZERO: 48, NUMPAD_ZERO: 96 }, kendo.keys),\n        Page,\n        Widget = ui.Widget,\n        progress = kendo.ui.progress,\n        SCROLL = \"scroll\",\n        RENDER = \"render\",\n        OPEN = \"open\",\n        ERROR = \"error\",\n        KEYDOWN = \"keydown\" + NS,\n        MOUSEWHEEL = \"DOMMouseScroll\" + NS + \" mousewheel\" + NS,\n        UPDATE = \"update\",\n        ZOOM_SCALE = 1.25,\n        PAGE_CHANGE = \"pagechange\",\n        ZOOMSTART = \"zoomStart\",\n        ZOOMEND = \"zoomEnd\",\n        ZOOMCOMMAND = \"ZoomCommand\",\n        WHITECOLOR = \"#ffffff\",\n        TABINDEX = \"tabindex\",\n        CLICK = \"click\",\n        CHANGE = \"change\",\n        TOGGLE = \"toggle\",\n        PROCESSORS = {\n            pdfjs: \"pdfjs\",\n            dpl: \"dpl\"\n        },\n        styles = {\n            viewer: \"k-pdf-viewer k-widget\",\n            scroller: \"k-canvas k-list-scroller\",\n            enableTextSelection: \"k-enable-text-select\",\n            enablePanning: \"k-enable-panning\",\n            highlightClass: \"k-search-highlight\",\n            charClass: \"k-text-char\"\n        },\n        PREDEFINED_ZOOM_VALUES = {\n            auto: \"auto\",\n            actual: \"actual\",\n            fitToWidth: \"fitToWidth\",\n            fitToPage: \"fitToPage\"\n        };\n\n    var PDFViewer = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, kendo.deepExtend({}, this.options, options));\n\n            that._processMessages();\n\n            that._wrapper();\n\n            if (that.options.toolbar) {\n                that._renderToolbar();\n            }\n\n            that._initProcessor(options || {});\n            that._renderPageContainer();\n            that._loadDocument();\n\n            kendo.notify(that, kendo.ui);\n        },\n\n        events: [\n            RENDER,\n            OPEN,\n            ERROR,\n            ZOOMSTART,\n            ZOOMEND\n        ],\n\n        options: {\n            name: \"PDFViewer\",\n            view: {\n                type: \"canvas\"\n            },\n            pdfjsProcessing: {\n                file: null\n            },\n            dplProcessing: {\n                read: {\n                    url: null,\n                    type: \"GET\",\n                    dataType: \"json\",\n                    pageField: \"pageNumber\"\n                },\n                upload: {\n                    url: null,\n                    saveField: \"file\"\n                },\n                download: {\n                    url: null\n                },\n                loadOnDemand: false\n            },\n            toolbar: {\n                items: []\n            },\n            width: 1000,\n            height: 1200,\n            page: 1,\n            defaultPageSize: {\n                width: 794,\n                height: 1123\n            },\n            scale: null,\n            zoomMin: 0.5,\n            zoomMax: 4,\n            zoomRate: 0.25,\n            messages: {\n                defaultFileName: \"Document\",\n                toolbar: {\n                    zoom: {\n                        zoomLevel: \"zoom level\",\n                        zoomOut: \"Zoom Out\",\n                        zoomIn: \"Zoom In\",\n                        actualWidth: \"Actual Width\",\n                        autoWidth: \"Automatic Width\",\n                        fitToWidth: \"Fit to Width\",\n                        fitToPage: \"Fit to Page\"\n                    },\n                    open: \"Open\",\n                    exportAs: \"Export\",\n                    download: \"Download\",\n                    pager: {\n                        first: \"Go to the first page\",\n                        previous: \"Go to the previous page\",\n                        next: \"Go to the next page\",\n                        last: \"Go to the last page\",\n                        of: \"of\",\n                        page: \"page\",\n                        pages: \"pages\"\n                    },\n                    print: \"Print\",\n                    toggleSelection: \"Enable Selection\",\n                    togglePan: \"Enable Panning\",\n                    search: \"Search\"\n                },\n                errorMessages: {\n                    notSupported: \"Only pdf files allowed.\",\n                    parseError: \"PDF file fails to process.\",\n                    notFound: \"File is not found.\",\n                    popupBlocked: \"Popup is blocked.\"\n                },\n                dialogs: {\n                    exportAsDialog: {\n                        title: \"Export...\",\n                        defaultFileName: \"Document\",\n                        pdf: \"Portable Document Format (.pdf)\",\n                        png: \"Portable Network Graphics (.png)\",\n                        svg: \"Scalable Vector Graphics (.svg)\",\n                        labels: {\n                            fileName: \"File name\",\n                            saveAsType: \"Save as\",\n                            page: \"Page\"\n                        }\n                    },\n                    okText: \"OK\",\n                    save: \"Save\",\n                    cancel: \"Cancel\",\n                    search: {\n                        inputLabel: \"Search Text\",\n                        matchCase: \"Match Case\",\n                        next: \"Next Match\",\n                        previous: \"Previous Match\",\n                        close: \"Close\",\n                        of: \"of\",\n                        dragHandle: \"Drag search\"\n                    }\n                }\n            }\n        },\n\n        defaultTools: {\n            pager: {\n                name: \"pager\",\n                command: \"PageChangeCommand\"\n            },\n            spacer: { type: \"spacer\" },\n            zoomInOut: {\n                type: \"buttonGroup\",\n                fillMode: \"flat\",\n                attributes: { \"class\": \"k-zoom-in-out-group\" },\n                buttons: [\n                    { type: \"button\", icon: \"zoom-out\", name: \"zoomOut\", command: \"ZoomCommand\", showText: \"overflow\", options: \"{ \\\"zoomOut\\\": true, \\\"updateComboBox\\\": true }\", fillMode: \"flat\" },\n                    { type: \"button\", icon: \"zoom-in\", name: \"zoomIn\", command: \"ZoomCommand\", showText: \"overflow\", options: \"{ \\\"zoomIn\\\": true, \\\"updateComboBox\\\": true }\", fillMode: \"flat\" },\n                ]\n            },\n            zoom: {\n                type: \"component\",\n                name: \"zoom\",\n                command: \"ZoomCommand\",\n                overflow: \"never\",\n                component: \"ComboBox\",\n                data: [50, 100, 150, 200, 300, 400],\n                componentOptions: {\n                    enable: false,\n                    dataTextField: \"text\",\n                    dataValueField: \"percent\",\n                    valuePrimitive: true,\n                    clearOnEscape: false,\n                    commandOn: \"change\"\n                }\n            },\n            toggleSelection: {\n                type: \"buttonGroup\",\n                fillMode: \"flat\",\n                attributes: { \"class\": \"k-toggle-selection-group\" },\n                buttons: [\n                    {\n                        togglable: true,\n                        command: \"EnableSelectionCommand\",\n                        icon: \"pointer\",\n                        showText: \"overflow\",\n                        name: \"toggleSelection\",\n                        group: \"toggle-pan\",\n                        fillMode: \"flat\"\n                    }, {\n                        togglable: true,\n                        command: \"EnablePanCommand\",\n                        icon: \"hand\",\n                        showText: \"overflow\",\n                        name: \"togglePan\",\n                        group: \"toggle-pan\",\n                        selected: true,\n                        fillMode: \"flat\"\n                    }\n                ]\n            },\n            spacer2: { type: \"spacer\" },\n            search: {\n                type: \"button\",\n                command: \"OpenSearchCommand\",\n                icon: \"search\",\n                name: \"search\",\n                showText: \"overflow\",\n                enable: false,\n                fillMode: \"flat\"\n            },\n            open: {\n                type: \"button\",\n                showText: \"overflow\",\n                name: \"open\",\n                icon: \"folder-open\",\n                command: \"OpenCommand\",\n                fillMode: \"flat\"\n            },\n            download: {\n                type: \"button\",\n                showText: \"overflow\",\n                name: \"download\",\n                icon: \"download\",\n                command: \"DownloadCommand\",\n                enable: false,\n                fillMode: \"flat\"\n            },\n            print: {\n                type: \"button\",\n                showText: \"overflow\",\n                name: \"print\",\n                icon: \"print\",\n                command: \"PrintCommand\",\n                enable: false,\n                fillMode: \"flat\"\n            }\n        },\n\n        exportAsTool: {\n            exportAs: { type: \"button\", showText: \"overflow\", name: \"exportAs\", icon: \"image-export\", command: \"ExportCommand\", fillMode: \"flat\" }\n        },\n\n        pagerTools: [\n            {\n                type: \"buttonGroup\",\n                fillMode: \"flat\",\n                buttons: [\n                    { type: \"button\", icon: \"caret-alt-to-left\", name: \"first\", showText: \"overflow\", options: \"{ \\\"value\\\": \\\"first\\\" }\", attributes: { class: \"k-first-link\" } },\n                    { type: \"button\", icon: \"caret-alt-left\", name: \"previous\", showText: \"overflow\", options: \"{ \\\"value\\\": \\\"prev\\\" }\", attributes: { class: \"k-prev-link\" }, rounded: \"none\" },\n                ]\n            },\n            {\n                type: \"component\",\n                component: \"TextBox\",\n                name: \"page\",\n                attributes: { class: \"k-viewer-pager-input\" },\n                element: \"<input id='page-input'/>\",\n                overflow: \"never\",\n                componentOptions: {\n                    commandOn: \"change\"\n                }\n            },\n            {\n                overflow: \"never\",\n                template: function(data) {\n                    return \"<label for='page-input'>\" + data.componentOptions.messages.of + \" <span id='total-page'></span> \" + data.componentOptions.messages.pages + \"</label>\";\n                },\n                componentOptions: {\n                    messages: {\n                        of: \"of\",\n                        pages: \"pages\"\n                    }\n                }\n            },\n            {\n                type: \"buttonGroup\",\n                fillMode: \"flat\",\n                buttons: [\n                    { type: \"button\", icon: \"caret-alt-right\", name: \"next\", showText: \"overflow\", options: \"{ \\\"value\\\": \\\"next\\\" }\", fillMode: \"flat\", attributes: { class: \"k-next-link\" }, rounded: \"none\" },\n                    { type: \"button\", icon: \"caret-alt-to-right\", name: \"last\", showText: \"overflow\", options: \"{ \\\"value\\\": \\\"last\\\" }\", fillMode: \"flat\", attributes: { class: \"k-last-link\" } }\n                ]\n            },\n        ],\n\n        _processMessages: function() {\n            var messages = this.options.messages.toolbar,\n                zoom = messages.zoom,\n                pager = messages.pager;\n\n            if ($.isPlainObject(zoom)) {\n                this.options.messages.toolbar = $.extend({}, this.options.messages.toolbar, zoom);\n                this.options.messages.toolbar.zoom = zoom.zoomLevel || this.options.messages.toolbar.zoom;\n            }\n\n            if ($.isPlainObject(pager)) {\n                this.options.messages.toolbar = $.extend({}, this.options.messages.toolbar, pager);\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                options = that.options;\n\n            that.wrapper = that.element;\n\n            that.wrapper\n                    .width(options.width)\n                    .height(options.height)\n                    .addClass(styles.viewer)\n                    .on(KEYDOWN, that._keydown.bind(that));\n\n            that._allowResize = that.options.scale === null;\n            that._autoZoomScale = ZOOM_SCALE;\n            that.zoomScale = that.options.scale || that._autoZoomScale;\n\n            that._resizeHandler = kendo.onResize(function() {\n                that.resize();\n            });\n\n            that._pageNum = that.options.page;\n        },\n\n        _keydown: function(e) {\n            var plusShortcuts = [keys.PLUS, keys.NUMPAD_PLUS],\n                minusShortcuts = [keys.MINUS, keys.NUMPAD_MINUS],\n                zeroShortcuts = [keys.ZERO, keys.NUMPAD_ZERO],\n                shouldExecute = false,\n                args = {\n                    command: ZOOMCOMMAND,\n                    options: { updateComboBox: true }\n                };\n\n            if (!e.ctrlKey || this._blankPage || this.processingLib === PROCESSORS.dpl) {\n                return;\n            }\n\n            if (plusShortcuts.includes(e.keyCode)) {\n                args.options.zoomIn = true;\n                shouldExecute = true;\n            } else if (minusShortcuts.includes(e.keyCode)) {\n                args.options.zoomOut = true;\n                shouldExecute = true;\n            } else if (zeroShortcuts.includes(e.keyCode)) {\n                args.options.value = ZOOM_SCALE;\n                shouldExecute = true;\n            }\n\n            if (shouldExecute) {\n                this.execute(args);\n                e.preventDefault();\n            }\n        },\n\n        _initProcessor: function(options) {\n            var that = this,\n                processingOptions;\n\n            processingOptions = options.dplProcessing ? that.options.dplProcessing : that.options.pdfjsProcessing;\n            that.processingLib = options.dplProcessing ? PROCESSORS.dpl : PROCESSORS.pdfjs;\n\n            that.processor = new kendo.pdfviewer[that.processingLib].processor(processingOptions, that);\n            Page = kendo.pdfviewer[that.processingLib].Page;\n        },\n\n        _renderToolbar: function() {\n            var that = this,\n                options = that.options,\n                toolbarOptions = extend({}, options.toolbar),\n                tools = toolbarOptions.items && toolbarOptions.items.length ? toolbarOptions.items : Object.keys(that.defaultTools);\n\n            tools = that._processTools(tools);\n\n            toolbarOptions = {\n                defaultTools: $.extend({}, that.defaultTools, that.exportAsTool),\n                parentMessages: options.messages.toolbar,\n                tools: tools,\n                resizable: true\n            };\n\n            var toolbarElement = $(\"<div />\");\n            toolbarElement.appendTo(that.element);\n            that.toolbar = new kendo.ui.ToolBar(toolbarElement, toolbarOptions);\n            that.options.toolbar = that.toolbar.options;\n\n            that.toolbar.bind(TOGGLE, that._toolbarClick.bind(that));\n            that.toolbar.bind(CLICK, that._toolbarClick.bind(that));\n            that.toolbar.bind(CHANGE, that._toolbarClick.bind(that));\n\n            that.bind({\n                update: that._updateToolbar.bind(that)\n            });\n\n            return that.toolbar;\n        },\n\n        _processTools: function(tools) {\n            var that = this,\n                messages = that.options.messages.toolbar;\n\n            tools = tools.flatMap(t => {\n                if (t === \"zoom\") {\n                    t = that.defaultTools.zoom;\n                } else if (t === \"pager\") {\n                    t = that.defaultTools.pager;\n                }\n\n                if (t.name === \"zoom\") {\n                    t = $.extend({}, that.defaultTools.zoom, t);\n\n                    var zoomLevels = [{\n                        percent: PREDEFINED_ZOOM_VALUES.auto,\n                        text: messages.autoWidth\n                    }, {\n                        percent: PREDEFINED_ZOOM_VALUES.actual,\n                        text: messages.actualWidth\n                    }, {\n                        percent: PREDEFINED_ZOOM_VALUES.fitToWidth,\n                        text: messages.fitToWidth\n                    }, {\n                        percent: PREDEFINED_ZOOM_VALUES.fitToPage,\n                        text: messages.fitToPage\n                    }];\n\n                    // eslint-disable-next-line\n                    var comboOptions = t.data.map(i => { return { percent: i, text: i + \"%\" } });\n                    var value = that.options.scale ? that.options.scale * 100 + \"%\" : \"auto\";\n\n                    zoomLevels = zoomLevels.concat(comboOptions);\n                    t.componentOptions.dataSource = zoomLevels;\n                    t.componentOptions.value = value;\n                } else if (t.name === \"pager\") {\n                    t = $.extend({}, that.defaultTools.pager, t);\n\n                    var pagerTools = that.pagerTools;\n\n                    that.pager = true;\n\n                    t = pagerTools.map(p => {\n                        var compMessages;\n\n                        if (p.componentOptions && p.componentOptions.messages) {\n                            compMessages = p.componentOptions.messages;\n                            Object.keys(messages).forEach(key => {\n                                p.componentOptions.messages[key] = messages.pager[key];\n                            });\n                        }\n\n                        if (p.buttons) {\n                            p.buttons = p.buttons.map((b) => {\n                                if (b.icon && b.icon.indexOf(\"caret-alt\") > -1 && kendo.support.isRtl(that.element)) {\n                                    var direction = b.icon.indexOf(\"left\") > -1 ? \"left\" : \"right\";\n                                    var rtlDirection = b.icon.indexOf(\"left\") > -1 ? \"right\" : \"left\";\n                                    b.icon = b.icon.replace(direction, rtlDirection);\n                                }\n                                b.command = t.command;\n                                return b;\n                            });\n                        } else {\n                            p.command = t.command;\n                        }\n\n                        return p;\n                    });\n                }\n\n                return t;\n            });\n\n            return tools;\n        },\n\n        _updateToolbar: function(e) {\n            var pageOptions = {\n                    page: e.page || 1,\n                    total: e.total || 1\n                },\n                toolbar = this.toolbar,\n                toolbarEl = toolbar.element,\n                zoomCombo = toolbarEl.find(\"[data-command=ZoomCommand][data-role=combobox]\").data(\"kendoComboBox\"),\n                toFocus = toolbarEl.find(\".k-focus\");\n\n            if (toFocus.length === 0) {\n                toFocus = toolbarEl.find(\"[tabindex=0]\").first();\n\n                if (toFocus.length === 0) {\n                    toFocus = toolbar._getAllItems().first();\n                }\n            }\n\n            if (zoomCombo) {\n                zoomCombo.enable(!e.isBlank);\n                if (e.action === \"zoom\") {\n                    this._updateZoomComboBox(e.zoom);\n                }\n            }\n\n            if ((e.action === \"pagechange\" || e.isBlank) && this.pager) {\n                this._updatePager(pageOptions);\n            }\n\n            this._updateOnBlank(e.isBlank);\n\n            toolbar._resetTabIndex(toFocus);\n        },\n\n        _updateOnBlank: function(isBlank) {\n            var toolbar = this.toolbar,\n                toolbarEl = toolbar.element;\n\n            toolbar.enable(toolbarEl.find(\".k-toggle-selection-group\"), !isBlank);\n            toolbar.enable(toolbarEl.find(\".k-zoom-in-out-group\"), !isBlank);\n\n            toolbar.enable(toolbarEl.find(\"[data-command='OpenSearchCommand']\"), !isBlank);\n            toolbar.enable(toolbarEl.find(\"[data-command='DownloadCommand']\"), !isBlank);\n            toolbar.enable(toolbarEl.find(\"[data-command='PrintCommand']\"), !isBlank);\n        },\n\n        _updatePager: function(options) {\n            var toolbarEl = this.toolbar.element,\n                textBox = toolbarEl.find(\"#page-input\").data(\"kendoTextBox\"),\n                totalPagesSpan = toolbarEl.find(\"#total-page\");\n\n            if (textBox && options.page) {\n                textBox.value(options.page);\n            }\n\n            if (totalPagesSpan.length && options.total) {\n                totalPagesSpan.text(options.total);\n            }\n\n            this._togglePagerDisabledClass(options);\n        },\n\n        _togglePagerDisabledClass: function(options) {\n            var toolbar = this.toolbar,\n                toolbarEl = toolbar.element,\n                total = !options.total,\n                prevFirst = toolbarEl.find(\".k-prev-link\").closest(\".k-button-group\"),\n                nextLast = toolbarEl.find(\".k-next-link\").closest(\".k-button-group\"),\n                textBox = toolbarEl.find(\"#page-input\").data(\"kendoTextBox\");\n\n            if (prevFirst.length) {\n                toolbar.enable(prevFirst, total || options.page !== 1);\n            }\n            if (nextLast.length) {\n                toolbar.enable(nextLast, total || options.page !== options.total);\n            }\n\n            if (textBox) {\n                textBox.enable(options.total > 1);\n            }\n        },\n\n        _updateZoomComboBox: function(value) {\n            var isPredefined = value === PREDEFINED_ZOOM_VALUES.auto ||\n                value === PREDEFINED_ZOOM_VALUES.actual ||\n                value === PREDEFINED_ZOOM_VALUES.fitToPage ||\n                value === PREDEFINED_ZOOM_VALUES.fitToWidth,\n                zoomCombo = this.toolbar.element.find(\"[data-command=ZoomCommand][data-role=combobox]\").data(\"kendoComboBox\");\n\n            if (!isPredefined) {\n                value = Math.round(value * 100) + '%';\n            }\n\n            if (zoomCombo) {\n                zoomCombo.value(value);\n            }\n        },\n\n        _toolbarClick: function(ev) {\n            var command = $(ev.target).data(\"command\"),\n                options = $(ev.target).data(\"options\");\n\n            options = extend({}, { value: $(ev.target).val() }, options);\n\n            if (!command) {\n                return;\n            }\n\n            this.execute({\n                command: command,\n                options: options\n            });\n        },\n\n        _initErrorDialog: function(options) {\n            var that = this;\n\n            if (!that._errorDialog) {\n                options = extend(options, {\n                    messages: that.options.messages\n                });\n                var dialogInstance = new kendo.pdfviewer.dialogs.ErrorDialog(options);\n                that._errorDialog = dialogInstance._dialog;\n            }\n            return that._errorDialog;\n        },\n\n        _renderPageContainer: function() {\n            var that = this;\n\n            if (!that.pageContainer) {\n                that.pageContainer = $(\"<div />\");\n                that.pageContainer.addClass(styles.scroller);\n                that.pageContainer.attr(TABINDEX, 0);\n                that.wrapper.append(that.pageContainer);\n            }\n        },\n\n        _triggerError: function(options) {\n            var dialog = this._initErrorDialog();\n            extend(options, {\n                dialog: dialog\n            });\n            if (this.pageContainer) {\n                progress(this.pageContainer, false);\n            }\n\n            if (this.trigger(ERROR, options))\n            {\n                return;\n            }\n\n            dialog.open().content(options.message);\n        },\n\n        _renderPages: function() {\n            var that = this,\n                document = that.document,\n                pagesData;\n\n            that.pages = [];\n\n            if (!document || !document.total) {\n                that._renderBlankPage();\n                return;\n            }\n\n            pagesData = document.pages;\n\n            for (var i = 1; i <= document.total; i++) {\n                var viewerPage,\n                    pageData = {\n                        processor: that.processor,\n                        number: i\n                    };\n\n                if (pagesData && pagesData.length) {\n                    pageData = extend(pageData, pagesData[i - 1]);\n                }\n\n                viewerPage = new Page(pageData, that);\n                that.pages.push(viewerPage);\n                that.pageContainer.append(viewerPage.element);\n            }\n\n            that._attachContainerEvents();\n            that._getVisiblePagesCount();\n        },\n\n        _renderBlankPage: function() {\n            this._blankPage = new Page(this.options.defaultPageSize, this);\n\n            this.pageContainer.append(this._blankPage.element);\n\n            this.trigger(UPDATE, { isBlank: true });\n        },\n\n        _resize: function() {\n            var that = this,\n                containerWidth,\n                ratio;\n\n            if (!that._allowResize) {\n                return;\n            }\n\n            if (!that.pages || !that.pages.length) {\n                if (that._blankPage) {\n                    ratio = containerWidth / that._blankPage.element.width();\n                    that._blankPage.resize(ratio);\n                }\n                return;\n            }\n\n            if (that.toolbar) {\n                that.toolbar.resize(true);\n            }\n\n            if (that._resizeHandler) {\n                clearTimeout(that._resizeHandler);\n            }\n            that._resizeHandler = setTimeout(that._resizePages.bind(that), 100);\n        },\n\n        _resizePages: function() {\n            var that = this,\n                containerWidth = that.pageContainer[0].clientWidth,\n                ratio = 0;\n\n            that.pages.forEach(function(page) {\n                var currentRatio = containerWidth / page.element.width();\n\n                if (currentRatio > ratio) {\n                    ratio = currentRatio;\n                }\n            });\n\n            if (that._autoFit) {\n                that.zoom(that._autoFit, true);\n                return;\n            }\n\n            ratio = Math.min(Math.max(ratio, that.options.zoomMin), ZOOM_SCALE);\n            if (ratio != that.zoomScale) {\n                that.zoom(ratio, true);\n                that.zoomScale = ratio;\n                that._allowResize = true;\n            }\n        },\n\n        _attachContainerEvents: function() {\n            var that = this;\n\n            that._wheel = kendo.throttle(\n                that._wheel.bind(that),\n                300\n            );\n\n            if (that.processingLib !== PROCESSORS.dpl) {\n                that.pageContainer.on(MOUSEWHEEL, function(e) {\n                    if (!e.ctrlKey) {\n                        return;\n                    }\n\n                    if (document.activeElement !== that.pageContainer[0]) {\n                        that.pageContainer.trigger(\"focus\");\n                    }\n\n                    that._wheel(e);\n                    e.preventDefault();\n                });\n            }\n\n            that._scroller = new kendo.mobile.ui.Scroller(that.pageContainer, {\n                zoom: false,\n                elastic: true\n            });\n\n            that._scroller.scrollElement.addClass(styles.enablePanning);\n            that._scroller.bind(SCROLL, that._scroll.bind(this));\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                containerScrollHeight = that.pageContainer[0].scrollHeight,\n                containerHeight = that.pageContainer.height(),\n                containerScrollTop = e.scrollTop,\n                containerOffsetTop = that.pageContainer.offset().top,\n                total = that.pages.length,\n                pageNum = that._pageNum,\n                pageIndex = pageNum - 1,\n                pageToLoadNum = pageNum,\n                pageToLoad,\n                currentPage, currentPageTop, currentPageHeight,\n                previousPage, prevPageTop, prevPageHeight,\n                scrollDirection = containerScrollTop - that._prevScrollTop > 0 ? 1 : -1;\n\n                if (that._preventScroll || !total) {\n                    that._preventScroll = false;\n                    return;\n                }\n\n                that._scrollingStarted = true;\n\n                currentPage = that.pages[pageIndex];\n                currentPageTop = currentPage.element.offset().top - containerOffsetTop;\n                currentPageHeight = currentPage.element.height();\n\n                if (scrollDirection == -1 && that.pages[pageIndex + scrollDirection]) {\n                    previousPage = that.pages[pageIndex - that._visiblePagesCount] || that.pages[pageIndex + scrollDirection];\n                    prevPageTop = previousPage.element.offset().top - containerOffsetTop;\n                    prevPageHeight = previousPage.element.height();\n                }\n\n                if (Math.abs(containerScrollTop - (that._prevScrollTop || 0)) > containerHeight * that.zoomScale) {\n                    pageToLoadNum = Math.floor(containerScrollTop * (1 / (containerScrollHeight / total))) + 1;\n                } else if (currentPageTop < 0 && Math.abs(currentPageTop) >= currentPageHeight / 2 && scrollDirection === 1) {\n                    pageToLoadNum++;\n                } else if (previousPage && Math.abs(prevPageTop) <= prevPageHeight / 2) {\n                    pageToLoadNum--;\n                }\n\n                if (pageNum !== pageToLoadNum && pageToLoadNum >= 1 && pageToLoadNum <= total) {\n                    pageToLoad = that.pages[pageToLoadNum - 1].element;\n\n                    if (pageToLoad.offset().top > containerHeight) {\n                        return;\n                    }\n\n                    that._pageNum = pageToLoadNum;\n                    that._loadVisiblePages();\n\n                    that.trigger(UPDATE, { action: PAGE_CHANGE, page: pageToLoadNum, total: total });\n                }\n\n                that._prevScrollTop = containerScrollTop;\n        },\n\n        _wheel: function(e) {\n            var originalEvent = e.originalEvent,\n                delta = originalEvent.wheelDelta ? -originalEvent.wheelDelta : originalEvent.detail,\n                zoomIn = delta < 0;\n\n            this.execute({\n                command: ZOOMCOMMAND,\n                options: {\n                    zoomIn: zoomIn,\n                    zoomOut: !zoomIn,\n                    updateComboBox: true\n                }\n            });\n\n            e.preventDefault();\n        },\n\n        zoom: function(scale, preventComboBoxChange) {\n            var that = this;\n            if (!scale) {\n                return that.zoomScale;\n            }\n\n            return that.execute({\n                command: ZOOMCOMMAND,\n                options: {\n                    value: scale,\n                    updateComboBox: !preventComboBoxChange\n                }\n            });\n        },\n\n        execute: function(options) {\n            var commandOptions = extend({ viewer: this }, options.options);\n            var command = new kendo.pdfviewer[options.command](commandOptions);\n            return command.exec();\n        },\n\n        _loadDocument: function() {\n            var that = this;\n            var page = that.options.page;\n\n            progress(that.pageContainer, true);\n            that.processor.fetchDocument().done(function(document) {\n                that._clearPages();\n                that.document = document;\n\n                that._renderPages();\n                that.resize(true);\n\n                if (document) {\n                    page = page >= 1 && page <= document.total ? page : 1;\n                    that.activatePage(page);\n                }\n\n                progress(that.pageContainer, false);\n            });\n        },\n\n        loadPage: function(number) {\n            var page = this.pages && this.pages[number - 1];\n\n            if (page) {\n                return page.load(this.zoomScale);\n            }\n        },\n\n        activatePage: function(number) {\n            var page = this.pages && this.pages[number - 1],\n                scroller = this._scroller,\n                scrollerTopPosition,\n                scrollerTopOffset,\n                pageTopOffset,\n                pageMargin;\n\n            if (!page) {\n                return;\n            }\n\n            scrollerTopPosition = scroller.scrollTop;\n            scrollerTopOffset = scroller.element.offset().top;\n            pageTopOffset = page.element.offset().top;\n            pageMargin = !this._autoFit ? parseInt(page.element.css(\"marginTop\"), 10) : 0;\n\n            this._pageNum = number;\n            this._loadVisiblePages();\n\n            this._preventScroll = true;\n\n            this._scroller.scrollTo(0, -scrollerTopPosition - pageTopOffset + scrollerTopOffset + pageMargin);\n            this.trigger(UPDATE, { action: PAGE_CHANGE, page: number, total: this.pages.length });\n        },\n\n        _getVisiblePagesCount: function() {\n            var that = this,\n                loadedPagesHeight = 0,\n                updatedVisiblePagesCount = 0,\n                containerHeight = that.pageContainer[0].clientHeight,\n                index = 0;\n\n            while (loadedPagesHeight <= containerHeight && index < that.pages.length)\n            {\n                loadedPagesHeight += that.pages[index].element.height();\n                updatedVisiblePagesCount++;\n                index++;\n            }\n\n            that._visiblePagesCount = updatedVisiblePagesCount;\n        },\n\n        _loadVisiblePages: function() {\n            var pagesCount = this.pages && this.pages.length,\n                minVisiblePageNum = Math.max(this._pageNum - this._visiblePagesCount, 1),\n                maxVisiblePageNum = Math.min(this._pageNum + this._visiblePagesCount, pagesCount);\n\n            this._visiblePages = this.pages.slice(minVisiblePageNum - 1, maxVisiblePageNum);\n\n            for (var i = minVisiblePageNum; i <= maxVisiblePageNum; i++)\n            {\n                this.loadPage(i);\n            }\n        },\n\n        _loadAllPages: function() {\n            var pagesCount = this.pages && this.pages.length;\n            var promises = [];\n\n            for (var i = 0; i <= pagesCount; i++)\n            {\n                promises.push(this.loadPage(i));\n            }\n\n            return promises;\n        },\n\n        fromFile: function(file) {\n            this.zoomScale = this.options.scale || ZOOM_SCALE;\n            this.zoom(this.zoomScale, true);\n            this.trigger(UPDATE, { action: \"zoom\", zoom: this.options.scale || \"auto\" });\n\n            this.processor._updateDocument(file);\n            this._loadDocument();\n        },\n\n        exportImage: function(options) {\n            var that = this;\n            var pageNumber = options.page;\n            var page = that.pages[pageNumber - 1] || that._blankPage;\n            var rootGroup = new drawing.Group();\n\n            page.load();\n\n            var background = kendo.drawing.Path.fromRect(new kendo.geometry.Rect([0, 0], [page.width, page.height]), {\n                fill: {\n                    color: WHITECOLOR\n                },\n                stroke: null\n            });\n\n            progress(that.pageContainer, true);\n            rootGroup.append(background, page.group);\n\n            drawing.exportImage(rootGroup).done(function(data) {\n                progress(that.pageContainer, false);\n                kendo.saveAs({\n                    dataURI: data,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL || \"\",\n                    forceProxy: options.forceProxy,\n                    proxyTarget: options.proxyTarget\n                });\n            });\n        },\n\n        exportSVG: function(options) {\n            var that = this;\n            var pageNumber = options.page;\n            var page = that.pages[pageNumber - 1] || that._blankPage;\n\n            progress(that.pageContainer, true);\n\n            page.load();\n\n            drawing.exportSVG(page.group).done(function(data) {\n                progress(that.pageContainer, false);\n                kendo.saveAs({\n                    dataURI: data,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL || \"\",\n                    forceProxy: options.forceProxy,\n                    proxyTarget: options.proxyTarget\n                });\n            });\n        },\n\n        setOptions: function(options)\n        {\n            var that = this;\n\n            if (options.pdfjsProcessing || options.dplProcessing) {\n                that._initProcessor(options || {});\n            }\n\n            options = $.extend(that.options, options);\n\n            Widget.fn.setOptions.call(that, options);\n\n            if (options.page) {\n                that._pageNum = options.page;\n                that.activatePage(options.page);\n            }\n\n            if (options.width) {\n                that.element.width(options.width);\n            }\n\n            if (options.height) {\n                that.element.height(options.height);\n            }\n        },\n\n        destroy: function()\n        {\n            if (this._resizeHandler)\n            {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            //destroy nested components\n            if (this._errorDialog) {\n                this._errorDialog.destroy();\n            }\n\n            if (this._saveDialog) {\n                this._saveDialog.destroy();\n            }\n\n            if (this._upload) {\n                this._upload.destroy();\n            }\n\n            if (this.toolbar) {\n                this.toolbar.unbind();\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n\n            if (this.pages && this.pages.length) {\n                this.pages.forEach(function(page) {\n                    page.destroy();\n                });\n                this.pages = [];\n            }\n\n            if (this._scroller) {\n                this._scroller.unbind();\n                this._scroller.destroy();\n            }\n            this.pageContainer.off(NS);\n\n            Widget.fn.destroy.call(this);\n        },\n\n        _clearPages: function() {\n            this.pages = [];\n            this.document = null;\n            this._pageNum = 1;\n\n            this.pageContainer.off(NS);\n            this.pageContainer.empty();\n\n            if (this._scroller)\n            {\n                this._scroller.reset();\n                this._scroller.unbind();\n                this._scroller.destroy();\n            }\n        },\n\n        _toggleSelection: function(enable) {\n            var that = this;\n\n            if (enable === undefined$1) {\n                enable = true;\n            }\n\n            that._scroller.userEvents._shouldNotMove = enable;\n\n            that._scroller.scrollElement.toggleClass(styles.enableTextSelection, enable);\n            that._scroller.scrollElement.toggleClass(styles.enablePanning, !enable);\n        },\n\n\n        _initSearchDOM: function() {\n            var that = this;\n            var promise = new Promise(function(resolve) {\n                Promise.all(that._loadAllPages()).then(function() {\n                    that._searchDOM = new kendo.pdfviewer.SearchDOM({\n                        target: that._getTextLayers(),\n                        highlightClass: styles.highlightClass,\n                        charClass: styles.charClass\n                    });\n\n                    resolve();\n                });\n            });\n\n            return promise;\n        },\n\n        _getTextLayers: function() {\n            return this.pages.map(function(page) {\n                return page.textLayer;\n            });\n        }\n    });\n\n    ui.plugin(PDFViewer);\n})(window.kendo.jQuery);\n"]}