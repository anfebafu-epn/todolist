{"version":3,"file":"kendo.mobile.pane.js","names":["__meta__","id","name","category","description","depends","hidden","$","undefined$1","kendo","window","mobile","roleSelector","ui","Widget","ViewEngine","View","Loader","EXTERNAL","HREF","NAVIGATE","VIEW_SHOW","SAME_VIEW_REQUESTED","OS","support","mobileOS","SKIP_TRANSITION_ON_BACK_BUTTON","ios","appMode","flatVersion","WIDGET_RELS","attrValue","Pane","extend","init","element","options","that","this","fn","call","addClass","collapsible","history","historyCallback","url","params","backButtonPressed","transition","viewEngine","showView","_historyNavigate","length","pop","push","parseQueryStringParams","_historyReplace","loader","loading","container","modelScope","rootNeeded","initial","serverNavigation","remoteViewURLPrefix","root","layout","$angular","showStart","closeActiveDialogs","after","transitionDone","viewShow","e","trigger","loadStart","show","loadComplete","hide","sameViewRequested","viewTypeDetermined","remote","_setPortraitWidth","onResize","_setupAppLinks","find","filter","each","widgetInstance","close","navigateToInitial","navigate","portraitWidth","events","append","html","destroy","userEvents","replace","bindToRouter","router","bind","attrUrl","pushState","rootView","attr","preventDefault","hideLoading","showLoading","changeLoadingMessage","message","changeMessage","view","width","application","is","css","pressedButtonSelector","ns","buttonSelectors","map","role","join","handler","on","UserEvents","fastTap","tap","event","currentTarget","touch","_mouseup","_appLinkClick","href","which","isDefaultPrevented","pane","link","rel","target","delayedTouchEnd","offsetHeight","setTimeout","match","openFor","stopPropagation","data","wrap","parent","paneContainer","plugin","jQuery"],"sources":["kendo.mobile.pane.js"],"mappings":"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","sourcesContent":["import './kendo.mobile.view.js';\nimport './kendo.mobile.loader.js';\n\nvar __meta__ = {\n    id: \"mobile.pane\",\n    name: \"Pane\",\n    category: \"mobile\",\n    description: \"Mobile Pane\",\n    depends: [ \"mobile.view\", \"mobile.loader\" ],\n    hidden: true\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        roleSelector = kendo.roleSelector,\n        ui = mobile.ui,\n        Widget = ui.Widget,\n        ViewEngine = mobile.ViewEngine,\n        View = ui.View,\n        Loader = mobile.ui.Loader,\n\n        EXTERNAL = \"external\",\n        HREF = \"href\",\n        DUMMY_HREF = \"#!\",\n\n        NAVIGATE = \"navigate\",\n        VIEW_SHOW = \"viewShow\",\n        SAME_VIEW_REQUESTED = \"sameViewRequested\",\n        OS = kendo.support.mobileOS,\n        SKIP_TRANSITION_ON_BACK_BUTTON = OS.ios && !OS.appMode && OS.flatVersion >= 700,\n        WIDGET_RELS = /popover|actionsheet|modalview|drawer/,\n        BACK = \"#:back\",\n\n        attrValue = kendo.attrValue;\n\n    var Pane = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n            element = that.element;\n\n            element.addClass(\"km-pane\");\n\n            if (that.options.collapsible) {\n                element.addClass(\"km-collapsible-pane\");\n            }\n\n            this.history = [];\n\n            this.historyCallback = function(url, params, backButtonPressed) {\n                var transition = that.transition;\n                that.transition = null;\n\n                // swiping back in iOS leaves the app in a very broken state if we perform a transition\n                if (SKIP_TRANSITION_ON_BACK_BUTTON && backButtonPressed) {\n                    transition = \"none\";\n                }\n\n                return that.viewEngine.showView(url, transition, params);\n            };\n\n            this._historyNavigate = function(url) {\n                if (url === BACK) {\n                    if (that.history.length === 1) {\n                        return;\n                    }\n\n                    that.history.pop();\n                    url = that.history[that.history.length - 1];\n                } else {\n                    that.history.push(url);\n                }\n\n                that.historyCallback(url, kendo.parseQueryStringParams(url));\n            };\n\n            this._historyReplace = function(url) {\n                var params = kendo.parseQueryStringParams(url);\n                that.history[that.history.length - 1] = url;\n                that.historyCallback(url, params);\n            };\n\n            that.loader = new Loader(element, {\n                loading: that.options.loading\n            });\n\n            that.viewEngine = new ViewEngine({\n                container: element,\n                transition: options.transition,\n                modelScope: options.modelScope,\n                rootNeeded: !options.initial,\n                serverNavigation: options.serverNavigation,\n                remoteViewURLPrefix: options.root || \"\",\n                layout: options.layout,\n                $angular: options.$angular,\n                loader: that.loader,\n\n                showStart: function() {\n                    that.loader.transition();\n                    that.closeActiveDialogs();\n                },\n\n                after: function() {\n                    that.loader.transitionDone();\n                },\n\n                viewShow: function(e) {\n                    that.trigger(VIEW_SHOW, e);\n                },\n\n                loadStart: function() {\n                    that.loader.show();\n                },\n\n                loadComplete: function() {\n                    that.loader.hide();\n                },\n\n                sameViewRequested: function() {\n                    that.trigger(SAME_VIEW_REQUESTED);\n                },\n\n                viewTypeDetermined: function(e) {\n                    if (!e.remote || !that.options.serverNavigation) {\n                        that.trigger(NAVIGATE, { url: e.url });\n                    }\n                }\n            });\n\n\n            this._setPortraitWidth();\n\n            kendo.onResize(function() {\n                that._setPortraitWidth();\n            });\n\n            that._setupAppLinks();\n        },\n\n        closeActiveDialogs: function() {\n            var dialogs = this.element.find(roleSelector(\"actionsheet popover modalview\")).filter(\":visible\");\n            dialogs.each(function() {\n                kendo.widgetInstance($(this), ui).close();\n            });\n        },\n\n        navigateToInitial: function() {\n            var initial = this.options.initial;\n\n            if (initial) {\n                this.navigate(initial);\n            }\n\n            return initial;\n        },\n\n        options: {\n            name: \"Pane\",\n            portraitWidth: \"\",\n            transition: \"\",\n            layout: \"\",\n            collapsible: false,\n            initial: null,\n            modelScope: window,\n            loading: \"<h1>Loading...</h1>\"\n        },\n\n        events: [\n            NAVIGATE,\n            VIEW_SHOW,\n            SAME_VIEW_REQUESTED\n        ],\n\n        append: function(html) {\n            return this.viewEngine.append(html);\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.viewEngine.destroy();\n            this.userEvents.destroy();\n        },\n\n        navigate: function(url, transition) {\n            if (url instanceof View) {\n                url = url.id;\n            }\n\n            this.transition = transition;\n\n            this._historyNavigate(url);\n        },\n\n        replace: function(url, transition) {\n            if (url instanceof View) {\n                url = url.id;\n            }\n\n            this.transition = transition;\n\n            this._historyReplace(url);\n        },\n\n        bindToRouter: function(router) {\n            var that = this,\n                history = this.history,\n                viewEngine = this.viewEngine;\n\n            router.bind(\"init\", function(e) {\n                var url = e.url,\n                    attrUrl = router.pushState ? url : \"/\";\n\n                viewEngine.rootView.attr(kendo.attr(\"url\"), attrUrl);\n\n                // if current is set, then this means that the pane has navigated to a given view - we need to update the router accordingly.\n                var length = history.length;\n\n                if (url === \"/\" && length) {\n                    router.navigate(history[length - 1], true);\n                    e.preventDefault(); // prevents from executing routeMissing, by default\n                }\n            });\n\n            router.bind(\"routeMissing\", function(e) {\n                if (!that.historyCallback(e.url, e.params, e.backButtonPressed)) {\n                    e.preventDefault();\n                }\n            });\n\n            router.bind(\"same\", function() {\n                that.trigger(SAME_VIEW_REQUESTED);\n            });\n\n            that._historyNavigate = function(url) {\n                router.navigate(url);\n            };\n\n            that._historyReplace = function(url) {\n                router.replace(url);\n            };\n        },\n\n        hideLoading: function() {\n            this.loader.hide();\n        },\n\n        showLoading: function() {\n            this.loader.show();\n        },\n\n        changeLoadingMessage: function(message) {\n            this.loader.changeMessage(message);\n        },\n\n        view: function() {\n            return this.viewEngine.view();\n        },\n\n        _setPortraitWidth: function() {\n            var width,\n                portraitWidth = this.options.portraitWidth;\n\n            if (portraitWidth) {\n                width = kendo.mobile.application.element.is(\".km-vertical\") ? portraitWidth : \"auto\";\n                this.element.css(\"width\", width);\n            }\n        },\n\n        _setupAppLinks: function() {\n            var that = this,\n                linkRoles = \"tab\",\n                pressedButtonSelector = \"[data-\" + kendo.ns + \"navigate-on-press]\",\n\n                buttonSelectors = $.map([\"button\", \"backbutton\", \"detailbutton\", \"listview-link\"] , function(role) {\n                    return roleSelector(role) + \":not(\" + pressedButtonSelector + \")\";\n                }).join(\",\");\n\n            this.element.handler(this)\n                .on(\"down\", roleSelector(linkRoles) + \",\" + pressedButtonSelector, \"_mouseup\")\n                .on(\"click\", roleSelector(linkRoles) + \",\" + buttonSelectors + \",\" + pressedButtonSelector, \"_appLinkClick\");\n\n            this.userEvents = new kendo.UserEvents(this.element, {\n                fastTap: true,\n                filter: buttonSelectors,\n                tap: function(e) {\n                    e.event.currentTarget = e.touch.currentTarget;\n                    that._mouseup(e.event);\n                }\n            });\n\n            // remove the ms-touch-action added by the user events, breaks native scrolling in WP8\n            this.element.css('-ms-touch-action', '');\n        },\n\n        _appLinkClick: function(e) {\n            var href = $(e.currentTarget).attr(\"href\");\n            var remote = href && href[0] !== \"#\" && this.options.serverNavigation;\n\n            if (!remote && attrValue($(e.currentTarget), \"rel\") != EXTERNAL) {\n                e.preventDefault();\n            }\n        },\n\n        _mouseup: function(e) {\n            if (e.which > 1 || e.isDefaultPrevented()) {\n                return;\n            }\n\n            var pane = this,\n                link = $(e.currentTarget),\n                transition = attrValue(link, \"transition\"),\n                rel = attrValue(link, \"rel\") || \"\",\n                target = attrValue(link, \"target\"),\n                href = link.attr(HREF),\n                delayedTouchEnd = SKIP_TRANSITION_ON_BACK_BUTTON && link[0].offsetHeight === 0,\n                remote = href && href[0] !== \"#\" && this.options.serverNavigation;\n\n            if (delayedTouchEnd || remote || rel === EXTERNAL || (typeof href === \"undefined\") || href === DUMMY_HREF) {\n                return;\n            }\n\n            // Prevent iOS address bar progress display for in app navigation\n            link.attr(HREF, DUMMY_HREF);\n            setTimeout(function() { link.attr(HREF, href); });\n\n            if (rel.match(WIDGET_RELS)) {\n                kendo.widgetInstance($(href), ui).openFor(link);\n                // if propagation is not stopped and actionsheet is opened from tabstrip,\n                // the actionsheet is closed immediately.\n                if (rel === \"actionsheet\" || rel === \"drawer\") {\n                    e.stopPropagation();\n                }\n            } else {\n                if (target === \"_top\") {\n                    pane = mobile.application.pane;\n                }\n                else if (target) {\n                    pane = $(\"#\" + target).data(\"kendoMobilePane\");\n                }\n\n                pane.navigate(href, transition);\n            }\n\n            e.preventDefault();\n        }\n    });\n\n    Pane.wrap = function(element) {\n        if (!element.is(roleSelector(\"view\"))) {\n            element = element.wrap('<div data-' + kendo.ns + 'role=\"view\" data-stretch=\"true\"></div>').parent();\n        }\n\n        var paneContainer = element.wrap('<div class=\"km-pane-wrapper\"><div></div></div>').parent(),\n            pane = new Pane(paneContainer);\n\n        pane.navigate(\"\");\n\n        return pane;\n    };\n    ui.plugin(Pane);\n})(window.kendo.jQuery);\n"]}