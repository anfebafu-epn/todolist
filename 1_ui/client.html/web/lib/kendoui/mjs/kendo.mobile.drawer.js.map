{"version":3,"file":"kendo.mobile.drawer.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","kendo","window","mobile","os","support","mobileOS","Transition","effects","roleSelector","AXIS","ui","SWIPE_TO_OPEN","ios","majorVersion","appMode","BEFORE_SHOW","INIT","SHOW","HIDE","AFTER_HIDE","NULL_VIEW","enable","noop","Drawer","View","extend","init","element","options","parent","prepend","Widget","fn","call","this","$angular","_layout","_scroller","_model","userEvents","pane","closest","data","bind","e","drawer","_viewShow","hide","UserEvents","fastTap","filter","allowSelection","currentView","container","Error","_attachTransition","visible","preventDefault","swipeToOpen","transition","cancel","_start","_update","_end","leftPositioned","position","addClass","trigger","views","swipeToOpenViews","title","events","show","_activate","_show","current","_moveViewTo","view","openFor","destroy","_currentViewIncludedIn","_setAsCurrent","_invokeNgController","length","inArray","replace","attr","offset","width","last","moveTo","location","duration","ease","easeOutExpo","that","movable","currentOffset","x","moveAxis","Movable","axis","onEnd","style","cssText","animationFrame","removeClass","sender","Math","abs","velocity","y","triggeredByInput","event","canMoveLeft","canMoveRight","leftSwipe","capture","limitedPosition","newPosition","delta","min","max","stopPropagation","pastHalf","velocityThreshold","plugin","jQuery"],"sources":["kendo.mobile.drawer.js"],"mappings":"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","sourcesContent":["import './kendo.mobile.view.js';\nimport './kendo.userevents.js';\n\nvar __meta__ = {\n    id: \"mobile.drawer\",\n    name: \"Drawer\",\n    category: \"mobile\",\n    description: \"The Kendo Mobile Drawer widget provides slide to reveal global application toolbox\",\n    depends: [ \"mobile.view\", \"userevents\" ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        os = kendo.support.mobileOS,\n        Transition = kendo.effects.Transition,\n        roleSelector = kendo.roleSelector,\n        AXIS = \"x\",\n        ui = mobile.ui,\n        SWIPE_TO_OPEN = !(os.ios && os.majorVersion == 7 && !os.appMode),\n        BEFORE_SHOW = \"beforeShow\",\n        INIT = \"init\",\n        SHOW = \"show\",\n        HIDE = \"hide\",\n        AFTER_HIDE = \"afterHide\",\n        NULL_VIEW = { enable: $.noop };\n\n    var Drawer = ui.View.extend({\n        init: function(element, options) {\n            // move the drawer to the top, in order to hide it\n            $(element).parent().prepend(element);\n\n            mobile.ui.Widget.fn.init.call(this, element, options);\n\n            if (!this.options.$angular) {\n                this._layout();\n                this._scroller();\n            }\n\n            this._model();\n\n            var pane = this.element.closest(roleSelector(\"pane\")).data(\"kendoMobilePane\"),\n                userEvents;\n\n            if (pane) {\n                this.pane = pane;\n                this.pane.bind(\"viewShow\", function(e) {\n                    drawer._viewShow(e);\n                });\n\n                this.pane.bind(\"sameViewRequested\", function() {\n                    drawer.hide();\n                });\n\n                userEvents = this.userEvents = new kendo.UserEvents(pane.element, {\n                    fastTap: true,\n                    filter: roleSelector(\"view splitview\"),\n                    allowSelection: true\n                });\n\n            } else {\n                this.currentView = NULL_VIEW;\n                var container = $(this.options.container);\n\n                if (!container) {\n                    throw new Error(\"The drawer needs a container configuration option set.\");\n                }\n\n                userEvents = this.userEvents = new kendo.UserEvents(container, { fastTap: true, allowSelection: true });\n                this._attachTransition(container);\n            }\n\n            var drawer = this;\n\n            var hide = function(e) {\n                if (drawer.visible) {\n                    drawer.hide();\n                    e.preventDefault();\n                }\n            };\n\n            if (this.options.swipeToOpen && SWIPE_TO_OPEN) {\n                userEvents.bind(\"press\", function() { drawer.transition.cancel(); });\n                userEvents.bind(\"start\", function(e) { drawer._start(e); });\n                userEvents.bind(\"move\", function(e) { drawer._update(e); });\n                userEvents.bind(\"end\", function(e) { drawer._end(e); });\n                userEvents.bind(\"tap\", hide);\n            } else {\n                userEvents.bind(\"press\", hide);\n            }\n\n            this.leftPositioned = this.options.position === \"left\";\n\n            this.visible = false;\n\n            this.element.hide().addClass(\"km-drawer\").addClass(this.leftPositioned ? \"km-left-drawer\" : \"km-right-drawer\");\n            this.trigger(INIT);\n        },\n\n        options: {\n            name: \"Drawer\",\n            position: \"left\",\n            views: [],\n            swipeToOpenViews: [],\n            swipeToOpen: true,\n            title: \"\",\n            container: null\n        },\n\n        events: [\n            BEFORE_SHOW,\n            HIDE,\n            AFTER_HIDE,\n            INIT,\n            SHOW\n        ],\n\n        show: function() {\n            if (this._activate()) {\n                this._show();\n            }\n        },\n\n        hide: function() {\n            if (!this.currentView) {\n                return;\n            }\n\n            this.currentView.enable();\n\n            Drawer.current = null;\n            this._moveViewTo(0);\n            this.trigger(HIDE, { view: this });\n        },\n\n        // Alias in order to support popover/modalview etc. interface\n        openFor: function() {\n            if (this.visible) {\n                this.hide();\n            } else {\n                this.show();\n            }\n        },\n\n        destroy: function() {\n            ui.View.fn.destroy.call(this);\n            this.userEvents.destroy();\n        },\n\n        _activate: function() {\n            if (this.visible) {\n                return true;\n            }\n\n            var visibleOnCurrentView = this._currentViewIncludedIn(this.options.views);\n\n            if (!visibleOnCurrentView || this.trigger(BEFORE_SHOW, { view: this })) {\n                return false;\n            }\n\n            this._setAsCurrent();\n            this.element.show();\n\n            this.trigger(SHOW, { view: this });\n            this._invokeNgController();\n            return true;\n        },\n\n        _currentViewIncludedIn: function(views) {\n            if (!this.pane || !views.length) {\n                return true;\n            }\n\n            var view = this.pane.view();\n            return $.inArray(view.id.replace('#', ''), views) > -1 || $.inArray(view.element.attr(\"id\"), views) > -1;\n        },\n\n        _show: function() {\n            this.currentView.enable(false);\n\n            this.visible = true;\n            var offset = this.element.width();\n\n            if (!this.leftPositioned) {\n                offset = -offset;\n            }\n\n            this._moveViewTo(offset);\n        },\n\n        _setAsCurrent: function() {\n            if (Drawer.last !== this) {\n                if (Drawer.last) {\n                    Drawer.last.element.hide();\n                }\n                this.element.show();\n            }\n\n            Drawer.last = this;\n            Drawer.current = this;\n        },\n\n        _moveViewTo: function(offset) {\n            this.userEvents.cancel();\n            this.transition.moveTo({ location: offset, duration: 400, ease: Transition.easeOutExpo });\n        },\n\n        _viewShow: function(e) {\n            if (this.currentView) {\n                this.currentView.enable();\n            }\n\n            if (this.currentView === e.view) {\n                this.hide();\n                return;\n            }\n\n            this.currentView = e.view;\n            this._attachTransition(e.view.element);\n        },\n\n        _attachTransition: function(element) {\n            var that = this,\n                movable = this.movable,\n                currentOffset = movable && movable.x;\n\n\n            if (this.transition) {\n                this.transition.cancel();\n                this.movable.moveAxis(\"x\", 0);\n            }\n\n            movable = this.movable = new kendo.ui.Movable(element);\n\n            this.transition = new Transition({\n                axis: AXIS,\n                movable: this.movable,\n                onEnd: function() {\n                    if (movable[AXIS] === 0) {\n                        element[0].style.cssText = \"\";\n                        that.element.hide();\n                        that.trigger(AFTER_HIDE);\n                        that.visible = false;\n                    }\n                }\n            });\n\n            if (currentOffset) {\n                element.addClass(\"k-fx-hidden\");\n                kendo.animationFrame(function() {\n                    element.removeClass(\"k-fx-hidden\");\n                    that.movable.moveAxis(AXIS, currentOffset);\n                    that.hide();\n                });\n            }\n        },\n\n        _start: function(e) {\n            var userEvents = e.sender;\n\n            // ignore non-horizontal swipes\n            if (Math.abs(e.x.velocity) < Math.abs(e.y.velocity) || kendo.triggeredByInput(e.event) || !this._currentViewIncludedIn(this.options.swipeToOpenViews)) {\n                userEvents.cancel();\n                return;\n            }\n\n            var leftPositioned = this.leftPositioned,\n                visible = this.visible,\n                canMoveLeft = leftPositioned && visible || !leftPositioned && !Drawer.current,\n                canMoveRight = !leftPositioned && visible || leftPositioned && !Drawer.current,\n                leftSwipe = e.x.velocity < 0;\n\n            if ((canMoveLeft && leftSwipe) || (canMoveRight && !leftSwipe)) {\n                if (this._activate()) {\n                    userEvents.capture();\n                    return;\n                }\n            }\n\n            userEvents.cancel();\n        },\n\n        _update: function(e) {\n            var movable = this.movable,\n                newPosition = movable.x + e.x.delta,\n                limitedPosition;\n\n            if (this.leftPositioned) {\n                limitedPosition = Math.min(Math.max(0, newPosition), this.element.width());\n            } else {\n                limitedPosition = Math.max(Math.min(0, newPosition), -this.element.width());\n            }\n\n            this.movable.moveAxis(AXIS, limitedPosition);\n            e.event.preventDefault();\n            e.event.stopPropagation();\n        },\n\n        _end: function(e) {\n            var velocity = e.x.velocity,\n                pastHalf = Math.abs(this.movable.x) > this.element.width() / 2,\n                velocityThreshold = 0.8,\n                shouldShow;\n\n            if (this.leftPositioned) {\n                shouldShow = velocity > -velocityThreshold && (velocity > velocityThreshold || pastHalf);\n            } else {\n                shouldShow = velocity < velocityThreshold && (velocity < -velocityThreshold || pastHalf);\n            }\n\n            if (shouldShow) {\n                this._show();\n            } else {\n                this.hide();\n            }\n        }\n    });\n\n    ui.plugin(Drawer);\n})(window.kendo.jQuery);\n"]}