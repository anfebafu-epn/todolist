{"version":3,"file":"kendo.grid.js","names":["__meta__","id","name","category","description","depends","features","$","undefined$1","GroupsPager","kendo","window","ui","DataSource","data","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","keys","isPlainObject","extend","map","grep","isArray","Array","inArray","push","prototype","isFunction","encode","htmlEncode","isEmptyObject","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","attr","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","SVG_ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","whitespaceRegExp","leftRegExp","RegExp","rightRegExp","nonDataCellsRegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","text","SELECTCOLUMNTMPL","size","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","icon","SORTHEADERTMPL","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","Pager","init","element","options","fn","call","this","dataSource","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","that","_refreshHandler","refresh","bind","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","events","destroy","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","global","allowSelection","start","e","sender","capture","move","scrollTop","y","delta","scrollLeft","x","preventDefault","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","trigger","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","index","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","idx","html","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","action","cancel","page","attrEquals","attrName","attrValue","groupCells","count","join","stringifyAttributes","attributes","defaultCommands","create","iconClass","save","edit","themeColor","update","canceledit","excel","pdf","search","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","filter","find","attachCustomCommandEvent","commands","length","command","commandName","click","replace","normalizeColumns","columns","encoded","hide","locked","parentIds","column","hidden","field","isVisible","addHiddenStyle","footerAttributes","headerAttributes","uid","guid","headers","columnParent","parents","columnParents","inserted","splice","setColumnVisibility","visible","setVisibility","show","method","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","i","minScreenWidth","Error","concat","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","target","leafs","destination","groups","sourcesDepth","depth","targetDepth","rows","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","cell","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","classes","match","cssClasses","split","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","indexOf","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","childColumns","visibleChildColumns","editField","title","format","editor","editorOptions","label","leafDataCells","indexAttr","sort","a","b","indexA","indexB","parentColumnsCells","closest","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","next","appendContent","tbody","table","empty","placeholder","tmp","innerHTML","createElement","addClass","getValidCssClass","firstChild","replaceChild","normalizeCols","hasDetails","colgroup","is","append","prepend","convertToObject","array","item","formatGroupValue","columnValues","groupValue","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","items","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","_resizeHandler","resize","notify","scrollableContent","scrollable","leftMostPosition","groupable","virtualScrollable","navigatable","selectable","toolbar","filterable","sortable","allowCopy","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","messages","cancelDelete","confirmation","confirmDelete","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_angularItems","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","$angular","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","angular","get","each","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","j","current","currentIndex","lockedParent","setAttribute","prev","forEach","type","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","Object","key","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","select","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","change","oldIndex","newIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","Selectable","parseOptions","clone","elm","innerText","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","args","reorderRows","rowsLength","targetItem","dataItem","_rowDropping","pushMove","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","menu","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","_editMode","getByUid","_calculateColumnIndex","virtualOffset","editContainer","_editContainer","_mousedownOnEditCell","tap","isLockedCell","has","end","closeCell","editCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","editRow","_isVirtualInlineEditable","stopPropagation","removeRow","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","_displayCell","ns","state","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","mode","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","angularElements","angularData","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","addRow","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","saveAsExcel","_clickPdf","saveAsPDF","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","getColumnsFields","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_createClickHandler","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","grid","_processItems","kendoToolBar","navigateOnTab","tools","searchText","spriteCssClass","_processAttr","keyValue","replaceAll","attributeClassMatch","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","dragToSelect","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","event","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","stopImmediatePropagation","tableClick","copySelection","areaClipBoard","val","getTSV","copySelectionToClipboard","includeHeaders","_createAreaClipBoard","execCommand","jQuery","Event","metaKey","getSelection","toString","selection","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","_getCellField","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","exportSelectedToExcel","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","curr","isRowSelection","nodeName","columnMapHandler","fieldAttr","_relatedCell","clearSelection","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","_canDrag","dir","link","originalIndex","_currentDataIndex","lockedColumnsCount","tmpIndex","currentRowCells","hiddenColumns","up","step","back","switchRow","isEdited","isIE","_initMobile","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","compare","forceUnique","checkSource","owner","stick","unstick","filtering","componentType","kendoColumnMenu","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","paramName","rowTemplateFunc","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","Function","colSpanAttributes","dirty","dirtyFields","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","f","useWithBlock","fieldValue","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","scrollableNoGridHeightStyles","resultTemplate","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","outerHTML","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","templates","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","expanded","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin"],"sources":["kendo.grid.js"],"mappings":"MAAO,wBACA,gCACA,4BACA,0BACA,8BACA,8BACA,8BACA,6BACA,yBACA,8BACA,4BACA,+BACA,6BACA,yBACA,yBACA,wBACA,+BACA,uBACA,0BACA,0BACA,+BACA,2BACA,wBACA,2BACA,mBAEP,IAAIA,SAAW,CACXC,GAAI,OACJC,KAAM,OACNC,SAAU,MACVC,YAAa,8IACbC,QAAS,CAAE,OAAQ,eAAgB,WAAY,UAAW,cAAe,SACzEC,SAAU,CAAE,CACRL,GAAI,eACJC,KAAM,UACNE,YAAa,6BACbC,QAAS,CAAE,WAAY,SAAU,UAAW,SAC7C,CACCJ,GAAI,iBACJC,KAAM,YACNE,YAAa,+BACbC,QAAS,CAAE,eACZ,CACCJ,GAAI,kBACJC,KAAM,cACNE,YAAa,iCACbC,QAAS,CAAE,eACZ,CACCJ,GAAI,gBACJC,KAAM,WACNE,YAAa,4BACbC,QAAS,CAAE,cACZ,CACCJ,GAAI,kBACJC,KAAM,aACNE,YAAa,oCACbC,QAAS,CAAE,eACZ,CACCJ,GAAI,cACJC,KAAM,SACNE,YAAa,0BACbC,QAAS,CAAE,UACZ,CACCJ,GAAI,iBACJC,KAAM,YACNE,YAAa,4BACbC,QAAS,CAAE,eACZ,CACCJ,GAAI,sBACJC,KAAM,oBACNE,YAAa,gCACbC,QAAS,CAAE,gBACZ,CACCJ,GAAI,qBACJC,KAAM,kBACNE,YAAa,8BACbC,QAAS,CAAE,cACZ,CACCJ,GAAI,cACJC,KAAM,0BACNE,YAAa,iCACbC,QAAS,CAAE,SAAU,OAAQ,WAC9B,CACCJ,GAAI,oBACJC,KAAM,eACNE,YAAa,wCACbC,QAAS,CAAE,UACZ,CACCJ,GAAI,kBACJC,KAAM,aACNE,YAAa,0BACbC,QAAS,CAAE,MAAO,UAAW,mBAKrC,SAAUE,EAAGC,GACT,IAiLIC,EAjLAC,EAAQC,OAAOD,MACfE,EAAKF,EAAME,GACXC,EAAaH,EAAMI,KAAKD,WACxBE,EAAmBL,EAAMI,KAAKC,iBAC9BC,EAAyBN,EAAMO,QAAQC,eACvCC,EAAgBT,EAAMU,eACtBC,EAAST,EAAGS,OACZC,EAAaZ,EAAMa,YACnBC,EAAcd,EAAMe,aACpBC,EAAOhB,EAAMgB,KAEbC,EAAgBpB,EAAEoB,cAClBC,EAASrB,EAAEqB,OACXC,EAAMtB,EAAEsB,IACRC,EAAOvB,EAAEuB,KACTC,EAAUC,MAAMD,QAChBE,EAAU1B,EAAE0B,QACZC,EAAOF,MAAMG,UAAUD,KACvBE,EAAa1B,EAAM0B,WACnBC,EAAS3B,EAAM4B,WACfC,EAAgBhC,EAAEgC,cAClBC,EAAWjC,EAAEiC,SACbC,EAAOC,KAEPC,EAAM,IACNC,EAAW,WACXC,EAAQ,QAERC,EAAY,4BAA8BpC,EAAMqC,KAAK,WAAa,2OAElEC,EAAS,qCACTC,EAAU,yEACVC,EAAU,kGACVC,EAAW,0CACXC,EAAc,wDACdC,EAAiB,gCACjBC,EAAkB,iCAClBC,EAAwBD,EAGxBE,EAAK,aAILC,EAAO,OACPC,EAAa,aACbC,EAAO,OACPC,EAAS,SACTC,EAAa,aACbC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAY,YACZC,EAAS,SACTC,EAAa,aACbC,EAAa,aACbC,EAAc,cACdC,EAAY,YACZC,EAAe,eACfC,GAAiB,iBACjBC,GAAc,aACdC,GAAO,OACPC,GAAS,SACTC,GAAS,SACTC,GAAO,OACPC,GAAa,YACbC,GAAW,UAEXC,GAAU,UACVC,GAAQ,UACRC,GAAS,WACTC,GAAY,kBACZC,GAAW,aACXC,GAAW,aACXC,GAAgB,iDAAmDD,GACnEE,GAAiB,mBACjBC,GAAa,SACbC,GAAa,SACbC,GAAiB,aACjBC,GAAc,eACdC,GAAe,WACfC,GAA2B,qBAC3BC,GAAoB,qBACpBC,GAAoB,mCACpBC,GAAsB,gCACtBC,GAAsB,kCACtBC,GAAgC,wBAGhCC,GAAe,iBACfC,GAAS,SACTC,GAAY,YACZC,GAAe,eACfC,GAAgB,gBAChBC,GAAa,aACbC,GAAe,eACfC,GAAc,cACdC,GAAgB,gBAChBC,GAAa,aACbC,GAAW,WACXC,GAAQ,QACRC,GAAY,YACZC,GAAU,UACVC,GAAa,aACbC,GAAa,aACbC,GAAY,YACZC,GAAa,WACbC,GAAS,SACTC,GAAQ,QACRC,GAAO,OACPC,GAAW,WACXC,GAAW,WACXC,GAAS,SACTC,GAAS,SACTC,GAAgB,gBAChBC,GAAQ,QACRC,GAAQ,QACRC,GAAS,SACTC,GAAS,SAITC,GAAW,WAEXC,GAAO,OACPC,GAAa,aAKbC,GAAW,WACXC,GAAS,SACTC,GAAK,KACLC,GAAK,KACLC,GAAK,KACLC,GAAM,MAENC,GAAa,aACbC,GAAY,YACZC,GAAgB,gBAChBC,GAAgB,gBAEhBC,GAAgB,gBAChBC,GAAgB,gBAChBC,GAAgB,gBAChBC,GAAe,eACfC,GAAwB,wBACxBC,GAAO,OACPC,GAAO,OACPC,GAAM,MACNC,GAAW,WACXC,GAAe,eACfC,GAAW,WAEXC,GAAe,YAEfC,GAAmB,sBACnBC,GAAa,IAAIC,OAAO,+BAAgC,MACxDC,GAAc,IAAID,OAAO,gCAAiC,MAC1DE,GAAqB,IAAIF,OAAO,MAAQF,GAAR,oCAA2EA,GAAmB,OAC9HK,GAAkB,IAAIH,OAAO,MAAQF,GAAR,mBAA0DA,GAAmB,OAC1GM,GAAoB,EAAGC,YAAWnH,OAAMoH,UAAW,gCAAgCD,MAAcnH,KAAQoH,aACzGC,GAAmB,EAAGC,UAAW,iDAAmD/E,GAAW,IAAI+E,qGACnGC,GAAyB,EAAGD,UAAW,iDAAmD/E,GAAW,IAAI+E,0GACzGE,GAAuB,IAAM7J,EAAME,GAAG4J,KAAK,WAC3CC,GAAiB,EAAGN,UAAW,gFAAgFA,yBAC/GO,IAAQ,EACRC,GAAUjK,EAAMO,QAAQ0J,QAExBC,GAASD,GAAQE,MAA4B,KAApBF,GAAQG,QACjCC,GAAQ,SAASC,KAAKC,UAAUC,WAChCC,GACS,YADTA,GAEiB,qBAFjBA,GAGiB,eAIjBvK,EAAGwK,QACH3K,EAAcG,EAAGwK,MAAMxJ,OAAO,CAC1ByJ,KAAM,SAASC,EAASC,GACpB3K,EAAGwK,MAAMI,GAAGH,KAAKI,KAAKC,KAAMJ,EAAS1J,GAAO,EAAM,CAAC,EAAG2J,IACtDG,KAAKC,WAAWJ,QAAQK,WAAY,EACpCF,KAAKC,WAAWE,eAAgB,CACpC,EACAN,QAAS,CACLrL,KAAM,eAGV4L,WAAY,WAGR,OAAOpJ,KAAKqJ,MAFDL,KAEYM,mBAAqB,IAFjCN,KAE4CO,YAAc,GACzE,EACAD,gBAAiB,WACb,IAAIL,EAAaD,KAAKC,WACtB,OAAOA,GAAcA,EAAWO,aAAY,IAAc,CAC9D,KAIR,IAAIC,GAAoB9K,EAAOO,OAAO,CAClCyJ,KAAM,SAASC,EAASC,GACpB,IAAIa,EAAOV,KAEXrK,EAAOmK,GAAGH,KAAKI,KAAKW,EAAMd,EAASC,GACnCa,EAAKC,gBAAkBD,EAAKE,QAAQC,KAAKH,GACzCA,EAAKI,cAAcjB,EAAQI,YAC3BS,EAAKK,MACT,EAEAD,cAAe,SAASb,GACpB,IAAIS,EAAOV,KACPU,EAAKT,YACLS,EAAKT,WAAWe,OAAOvI,EAAQiI,EAAKC,iBAExCD,EAAKT,WAAaA,EAClBS,EAAKT,WAAWY,KAAKpI,EAAQiI,EAAKC,iBAClCD,EAAKT,WAAWJ,QAAQK,WAAY,EACpCQ,EAAKT,WAAWJ,QAAQoB,SAAU,CACtC,EAEApB,QAAS,CACLrL,KAAM,oBACN0M,WAAYrM,EAAEsM,KACdC,UAAU,EACVC,gBAAiB,MAGrBC,OAAQ,CACJpI,GACAD,GACAE,GACAE,GACAC,IAGJiI,QAAS,WACL,IAAIb,EAAOV,KAEXrK,EAAOmK,GAAGyB,QAAQxB,KAAKW,GAEvBA,EAAKT,WAAWe,OAAOvI,EAAQiI,EAAKC,iBACpCD,EAAKc,QAAQC,IAAIf,EAAKgB,mBAAmBC,IAAI7J,GAE7C8J,aAAalB,EAAKmB,UACdnB,EAAKoB,mBACLF,aAAalB,EAAKoB,mBAGlBpB,EAAKqB,OACLrB,EAAKqB,KAAKR,UACVb,EAAKqB,KAAO,MAEhBrB,EAAKc,QAAUd,EAAKd,QAAUc,EAAKgB,kBAAoB,KACvDhB,EAAKC,gBAAkB,IAC3B,EAEAI,KAAM,WACF,IAIIS,EAJAd,EAAOV,KAEPgC,EAAYhN,EAAMO,QAAQyM,YAAc,EACxCpC,EAAUc,EAAKd,QAGnBA,EAAQqC,IAAK,CACTC,MAAOpG,GACPqG,SAAU,WACXF,IAAKjD,GAAQ,eAAiB,gBAAkBgD,GACnDtB,EAAK0B,QAAUxC,EAAQyC,WAAWC,QAClCd,EAAUd,EAAKc,QAAUd,EAAK0B,QAAQrB,KAAK,4CACtBwB,SACAC,GAAG,iBAAmB1K,EAAK,cAAgBA,EAAI4I,EAAK+B,aAAa5B,KAAKH,IAC3FA,EAAKgC,YAED1N,EAAMO,QAAQoN,qBAAuB3N,EAAMO,QAAQqN,SACnDlC,EAAKc,QAAQS,IAAI,eAAgBtE,IACjC+C,EAAKqB,KAAO,IAAI/M,EAAM6N,WAAWnC,EAAKc,QAAS,CAC3CsB,QAAQ,EACRC,gBAAgB,EAChBC,MAAO,SAASC,GACZA,EAAEC,OAAOC,SACb,EACAC,KAAM,SAASH,GACXvC,EAAKgB,kBAAkB2B,UAAU3C,EAAKgB,kBAAkB2B,YAAcJ,EAAEK,EAAEC,OAC1EvO,EAAMwO,WAAWhC,EAASxM,EAAMwO,WAAWhC,GAAWyB,EAAEQ,EAAEF,OAC1DN,EAAES,gBACN,KAIRhD,EAAKgB,kBAAoB7M,EAAE,oDACEoN,IAAI,CACDC,MAAOF,IACR2B,SAAS/D,GACX4C,GAAG,SAAW1K,EAAI4I,EAAKkD,QAAQ/C,KAAKH,GACrE,EAEAgC,SAAU,WAGFxD,KAFOc,KAOFwB,QAAQS,IAAI,CACb,aAAc9I,KARX6G,KAYFJ,QAAQqC,IAAKjD,GAAQ,eAAiB,gBAAkB,GAErE,EAEAyD,aAAc,SAASQ,GACnB,IAAIA,EAAEY,QAAN,CAIA,IAAI7B,EAAYhC,KAAK0B,kBACjB2B,EAAYrB,EAAUqB,YACtBE,EAAQvO,EAAM8O,YAAYb,IAE1BM,GAAWA,EAAQ,GAAmB,IAAdF,GAAsBE,EAAQ,GAAKF,EAAYrB,EAAU,GAAG+B,cAAgB/B,EAAU,GAAGgC,eACjHf,EAAES,iBACF1D,KAAK0B,kBAAkB2B,UAAUA,GAAcE,GARnD,CAUJ,EAEAK,QAAS,SAASX,GACd,IAAIvC,EAAOV,KACPiE,GAAgBvD,EAAKb,QAAQuB,SAC7BiC,EAAYJ,EAAEiB,cAAcb,UAC5BpD,EAAaS,EAAKT,WAClBkE,EAAYzD,EAAKQ,WACjBkD,EAAOnE,EAAWmE,QAAU,EAC5BpB,EAAQtC,EAAK2D,aAAeD,EAC5BE,EAAS5D,EAAKd,QAAQ2E,cACtBC,KAAmB9D,EAAK+D,eAAiB/D,EAAK+D,cAAgBpB,GAC9DqB,EAAiB3N,EAAK4N,IAAI5N,EAAK6N,MAAMvB,EAAYc,GAAY,GAC7DU,EAAiBL,EAAgBzN,EAAKsJ,KAAKiE,EAASH,GAAapN,EAAK6N,MAAMN,EAASH,GACrFW,EAAgB/N,EAAK4N,IAAID,EAAiBG,EAAgB,GAE1DnE,EAAKqE,eACLrE,EAAKqE,gBAAiB,GAG1BrE,EAAKsE,eAAiBtE,EAAKuE,WAC3BvE,EAAKuE,WAAa5B,EAAaL,EAAQmB,EACvCzD,EAAK+D,cAAgBpB,EAErB3C,EAAKwE,WAAajB,EAEbvD,EAAKyE,OAAOT,EAAgBI,EAAeN,KAC5C9D,EAAKc,QAAQ,GAAG6B,UAAY3C,EAAKuE,YAGrCvE,EAAK0E,QAAQjM,IAET8K,IACIvD,EAAKoB,mBACLF,aAAalB,EAAKoB,mBAGtBpB,EAAKoB,kBAAoBuD,YAAW,WAChC3E,EAAKwE,YAAa,EAClBxE,EAAK4E,MAAM5E,EAAK2D,YAAa3D,EAAKT,WAAWsF,OACjD,GAAG,MAEX,EAEAC,YAAa,WACTxF,KAAKyF,UAAU,EACnB,EAEAC,eAAgB,WACZ,IAAI1D,EAAYhC,KAAK0B,kBACrB1B,KAAKyF,UAAUzD,EAAU,GAAGgC,aAAehC,EAAUsC,SACzD,EAEAqB,oBAAqB,WACjB3F,KAAKwB,QAAQ6B,UAAU,EAC3B,EAEAuC,uBAAwB,WACpB5F,KAAKwB,QAAQ6B,UAAUrD,KAAKwB,QAAQ,GAAGwC,aAC3C,EAEA6B,6BAA8B,WAC1B,IAAInF,EAAOV,KACPwB,EAAUxB,KAAKwB,QACfsE,EAAmBtE,EAAQ6B,YAE3B7B,EAAQ,GAAGuE,YAAcvE,EAAQ,GAAGwE,cAC9BtF,EAAKuF,kBAAoBH,GAAqBpF,EAAKwF,yBACrD1E,EAAQ6B,UAAUyC,EAAmB9Q,EAAMO,QAAQyM,aACnDtB,EAAKuE,WAAazD,EAAQ6B,YAC1B3C,EAAKuF,kBAAmB,GAErBvF,EAAKuF,mBACPvF,EAAKyF,+BACN3E,EAAQ6B,UAAUyC,EAAmB9Q,EAAMO,QAAQyM,aACnDtB,EAAKuE,WAAazD,EAAQ6B,aAG9B3C,EAAKuF,kBAAmB,EAEhC,EAEAR,UAAW,SAASpC,GAChB,IAAI3C,EAAOV,KACPgC,EAAYtB,EAAKgB,kBAEjBM,EAAUqB,cAAgBA,IAC1B3C,EAAKqE,gBAAiB,GAG1BrE,EAAKc,QAAQ6B,UAAUA,GACvB3C,EAAKuE,WAAavE,EAAKc,QAAQ6B,YAE/BrB,EAAUqB,UAAUA,GACpB3C,EAAK+D,cAAgBzC,EAAUqB,WACnC,EAEA+C,iBAAkB,WACd,OAA8C,IAAvCpG,KAAK0B,kBAAkB2B,WAClC,EAEA6C,oBAAqB,WACjB,IAAIlE,EAAYhC,KAAK0B,kBACjB2B,EAAYrB,EAAUqB,YAE1B,OAAQA,EAAY,GAAKA,GAAagD,SAASrE,EAAU,GAAGgC,aAAehC,EAAUsC,SAAU,GACnG,EAEA6B,2BAA4B,WACxB,IAAI3E,EAAUxB,KAAKwB,QAEnB,OAAQA,EAAQ6B,aAAegD,SAAS7E,EAAQ,GAAGwC,aAAexC,EAAQ8C,SAAU,GACxF,EAEAgC,UAAW,SAASC,GAGhB,OAFiBvG,KAAKqE,aAAerE,KAAKC,WAAWmE,QAAU,GAE3CmC,CACxB,EAEAC,SAAU,SAASC,GACf,IAEIC,EAFAC,EAAa3G,KAAKqE,aAAerE,KAAKC,WAAWmE,QAAU,EAC3D7D,EAAWP,KAAKC,WAAWM,WAS/B,OALImG,EADAD,EAAQE,EACCF,EAAQE,EAERA,EAAaF,EAAQ,GAGlBlG,EAAWA,EAAWmG,CAC1C,EAEAE,eAAgB,SAASC,GACrB,IAAIC,EAAY9G,KAAKwB,QAAQ,GACzBuF,EAAkBD,EAAU/C,aAC5BiD,EAAmBhH,KAAKkG,sBAAmEY,EAAUzD,UAApDrD,KAAKiF,YAAc6B,EAAUzD,UAC9E4D,EAAgBJ,EAAI,GAAGK,UACvBC,EAAgBN,EAAI,GAAGO,aAEvBJ,EAAkBC,EAClBjH,KAAK0B,kBAAkB,GAAG2B,WAAa0D,EAAkB,EAClDE,EAAgBE,GAAiBH,EAAkBD,IAC1D/G,KAAK0B,kBAAkB,GAAG2B,WAAa0D,EAAkB,EAEjE,EAEA5B,OAAQ,SAAST,EAAgBI,EAAeuC,GAC5C,IAAI3G,EAAOV,KACPC,EAAaS,EAAKT,WAClBiB,EAAaR,EAAKQ,WAClBqE,EAAOtF,EAAWsF,OAClBoB,EAAajG,EAAK2D,aAAepE,EAAWmE,QAAU,EACtDkD,EAAcvQ,EAAK6N,MAAMF,EAAiBa,GAAQA,EAClDgC,GAAW,EAEXvF,EAAYtB,EAAKgB,kBACjB8F,EAAmBvI,GAAQwI,OAAS,EAAI,EACxCC,EAAQzH,EAAW0H,gBAAkB1H,EAAWO,aAAY,GAAQP,EAAWyH,QAmCnF,OAjCIhD,EAAiBiC,GAEjBY,GAAW,EACXZ,EAAa5P,EAAK4N,IAAI,EAAGG,EAAgBS,GACzC7E,EAAKuE,WAAajD,EAAUqB,YAAesD,EAAazF,EACxDR,EAAK4E,MAAMqB,EAAYpB,IAEhBT,GAAiB6B,EAAapB,IAAS8B,GAE9CE,GAAW,EACXZ,EAAa5P,EAAK6Q,IAAIlD,EAAgBgD,EAAQnC,GAG1CvD,EAAUqB,aAAerB,EAAU,GAAGgC,aAAehC,EAAU,GAAGoF,aAAeI,EACjF9G,EAAKuE,WAAavE,EAAKc,QAAQ,GAAGwC,aAAetD,EAAKc,QAAQ,GAAG4F,aAC1D1G,EAAKT,WAAW0H,iBAAmBjD,GAAkBgD,EAAQnC,EACpE7E,EAAKuE,WAAavE,EAAKc,QAAQ,GAAGwC,aAAetD,EAAKc,QAAQ,GAAG4F,cAAgB1G,EAAKuE,WAAavE,EAAKsE,gBAExGtE,EAAKuE,WAAa/D,EAGtBR,EAAK4E,MAAMqB,EAAYpB,KAEf7E,EAAKmH,WAAanH,EAAKb,QAAQuB,WAEnCsD,EAAkB4C,EAAc/B,EA9BvB,IA8B+BA,GAAqBb,EAAiBa,GAC9EtF,EAAWmB,SAASkG,EAAc/B,EAAMA,EAAM1Q,EAAEsM,MAEhD2D,EAAgBwC,EAjCP,IAiCqB/B,GAC9BtF,EAAWmB,SAASkG,EAAc/B,EAAMA,EAAM1Q,EAAEsM,OAIjDoG,CACX,EAEAA,SAAU,WACN,OAAOvH,KAAK6H,SAChB,EAEAvC,MAAO,SAASlB,EAAMmB,EAAMuC,GACxB,IAAIpH,EAAOV,KACPiE,GAAgBvD,EAAKb,QAAQuB,SAC7BnB,EAAaS,EAAKT,WAClB8H,EAAe9H,EAAW0H,gBAC9BG,EAAWpR,EAAWoR,GAAYA,EAAWjT,EAAEsM,KAE3CT,EAAK0E,QAAQlM,GAAQ,CAAEkL,KAAMA,EAAMmB,KAAMA,MAI7C3D,aAAalB,EAAKmB,UAClBnB,EAAKmH,WAAY,EACjBnH,EAAK2D,YAAcD,EAEd2D,GAAgB9H,EAAW+H,kBAAkB5D,EAAMA,EAAOmB,KAAYwC,GAAgB9H,EAAWgI,QAAQ7D,EAAMmB,IAChH7E,EAAK0E,QAAQ/L,IAEb4G,EAAWiI,MAAM9D,EAAMmB,GAAM,WACzB7E,EAAK0E,QAAQ9L,IACbwO,IACApH,EAAK0E,QAAQnM,GACjB,GAAG,UAEEgL,GACDvD,EAAK0E,QAAQ/L,IAGjBqH,EAAKmB,SAAWwD,YAAW,WAClB3E,EAAKwE,aAEFjB,GACAvD,EAAK0E,QAAQ/L,IAGjB4G,EAAWiI,MAAM9D,EAAMmB,GAAM,WACzB7E,EAAK0E,QAAQ9L,IACbwO,IACApH,EAAK0E,QAAQnM,GACjB,IAER,GAAG,MAEX,EAEAkP,iBAAkB,SAASC,GACvB,IAMIC,EACAC,EACApH,EARAR,EAAOV,KACPuI,EAAO,GACPC,EAAY9H,EAAKb,QAAQwB,gBACzBpB,EAAaS,EAAKT,WAClB+B,EAAahN,EAAMO,QAAQoN,oBAAkD,EAA5B3N,EAAMO,QAAQyM,YAC/DyG,EAAiB/H,EAAKc,QAAQ,GAI9BkH,EAAsBhI,EAAKwF,sBAE/BhF,EAAaR,EAAKQ,WAAaR,EAAKb,QAAQqB,cAAgB,EAE5D,IAAIyH,EAAsBF,EAAe1C,YAAc0C,EAAeG,YAAe5G,EAAY,EAIjG,IAFAqG,GAAepI,EAAW0H,gBAAkB1H,EAAWO,aAAY,GAAQP,EAAWyH,SAAWxG,EAAayH,EAEzGL,EAAM,EAAGA,EAAMvR,EAAK6N,MAAMyD,EAAcG,GAAYF,IACrDC,GAAQ,gCAAkCC,EAAY,aAGtDH,EAAcG,IACdD,GAAQ,gCAAmCF,EAAcG,EAAa,cAG1E9H,EAAKgB,kBAAkB6G,KAAKA,IAExBG,GAAwBhI,EAAKwF,uBAA0BxF,EAAKT,WAAW0H,iBACvEjH,EAAKgF,sBAGuB,IAArBhF,EAAe,YAAuB0H,IAC7CK,EAAepF,UAAY3C,EAAKuE,WAChCvE,EAAKmF,+BAEb,EAEAjF,QAAS,SAASqC,GACd,IAAIvC,EAAOV,KACPC,EAAaS,EAAKT,WAClB0G,EAAajG,EAAK2D,YAClBwE,GAAU5F,GAAK,CAAC,GAAG4F,OACnBT,EAAsB1H,EAAKwF,wBAA0B2C,GAAWA,IAAW7P,IAAe6P,IAAW3Q,GAAU2Q,IAAWzP,GAE9HsH,EAAK0E,QAAQ9L,IACbsI,aAAalB,EAAKmB,UAElBnB,EAAKyH,iBAAiBC,GAElB1H,EAAKqB,MACLrB,EAAKqB,KAAK+G,cAGa,IAAjB,GAAiCpI,EAAKmH,cACvCgB,GAAWA,IAAWzP,IAAQyP,IAAW7P,IAA0B,gBAAX6P,KACzDnI,EAAK2D,YAAcpE,EAAWmE,QAGR,IAAtBnE,EAAW8I,QAAkBF,IAAWA,IAAWzP,IAAQyP,IAAW7P,IAA0B,gBAAX6P,GAAuC,kBAAXA,KAEjHnI,EAAKgB,kBAAkB,GAAG2B,UAAY,IAI9C3C,EAAKmH,WAAY,CACrB,IAGJ,SAASmB,GAAWC,EAAUC,GAC1B,MAAO,IAAMlU,EAAMqC,KAAK4R,GAAY,IAAMC,EAAY,GAC1D,CAEA,SAASC,GAAWC,GAChB,OAAO,IAAI9S,MAAM8S,EAAQ,GAAGC,KAAK,kDACrC,CAEA,SAASC,GAAoBC,GACzB,IAAIlS,EACAqP,EAAS,IAEb,GAAI6C,EAAY,CACZ,UAAWA,IAAetN,GACtB,OAAOsN,EAGX,IAAKlS,KAAQkS,EACgB,KAArBA,EAAWlS,KACXqP,GAAUrP,EAAO,KAAOkS,EAAWlS,GAAQ,IAGvD,CACA,OAAOqP,CACX,CAEA,IAAI8C,GAAkB,CAClBC,OAAQ,CACJhL,KAAM,iBACND,UAAW,aACXkL,UAAW,YAEfZ,OAAQ,CACJrK,KAAM,iBACND,UAAW,wBACXkL,UAAW,cAEfC,KAAM,CACFlL,KAAM,eACND,UAAW,sBACXkL,UAAW,aAEfnI,QAAS,CACL9C,KAAM,SACND,UAAW,wBACXkL,UAAW,SAEfE,KAAM,CACFnL,KAAM,OACND,UAAW,sBACXkL,UAAW,aACXG,WAAY,WAEhBC,OAAQ,CACJrL,KAAM,OACND,UAAW,sBACXkL,UAAW,WACXG,WAAY,WAEhBE,WAAY,CACRtL,KAAM,SACND,UAAW,wBACXkL,UAAW,sBAEfM,MAAO,CACHvL,KAAM,kBACND,UAAW,eACXkL,UAAW,kBAEfO,IAAK,CACDxL,KAAM,gBACND,UAAW,aACXkL,UAAW,gBAEfQ,OAAQ,CACJzL,KAAM,YACND,UAAW,kBAInB,SAAS2L,GAAOC,EAASC,GACrBxV,EAAE,yCAA0CuV,GACvC3I,IAAI6I,SAASC,MACbtI,IAAI,SAAUoI,EACvB,CAEA,SAASG,GAAQC,EAAUC,EAAQC,EAAMC,EAAQxB,GAC7C,IAAIyB,EAAcH,EAClBA,EAAS7V,IACTuU,EAAQA,GAAS,EACjB,IAAK,IAAId,EAAM,EAAGA,EAAMc,EAAOd,IAC3BoC,EAASA,EAAOjJ,IAAIgJ,EAASK,GAAGD,EAAcvC,IAG/B,iBAARqC,EACPD,EAAOE,EAAS,eAAiB,eAAeH,EAASK,GAAGH,IAE5DD,EAAO/G,SAASgH,EAExB,CAEA,SAASI,GAASC,EAAe5I,EAAS6I,GACtC,OAAOpW,EAAEmW,GAAevJ,IAAIW,GAAS8I,KAAKD,EAC9C,CAEA,SAASE,GAAyBf,EAAStD,EAAWsE,GAClD,IAAI9C,EACA+C,EACAC,EACAC,EAIJ,IAAKjD,EAAM,EAAG+C,GAFdD,EAAY/U,EAAQ+U,GAAyBA,EAAb,CAACA,IAEDC,OAAQ/C,EAAM+C,EAAQ/C,IAClDgD,EAAUF,EAAS9C,GAEfrS,EAAcqV,IAAYA,EAAQE,QAClCD,EAAcD,EAAQ9W,MAAQ8W,EAAQ7M,KACtCqI,EAAUtE,GAAGnH,GAAQvD,EAAI,YAAcyT,GAAe,IAAIE,QAAQ,MAAO,IAAK,CAAEF,YAAaA,GAAeD,EAAQE,MAAM3K,KAAKuJ,IAG3I,CAEA,SAASsB,GAAiBC,EAASC,EAASC,EAAMC,EAAQC,GACtD,OAAO5V,EAAIwV,GAAS,SAASK,GAGzB,IAAIC,GAFJD,SAAgBA,IAAW/P,GAAS,CAAEiQ,MAAOF,GAAWA,GAGjDD,UAAYA,EAEdI,GAAUH,KAAWH,IACtBG,EAAOzC,WAAa6C,GAAeJ,EAAOzC,YAC1CyC,EAAOK,iBAAmBD,GAAeJ,EAAOK,kBAChDL,EAAOM,iBAAmBF,GAAeJ,EAAOM,kBAChDL,GAAS,GAGb,IAAIM,EAAMvX,EAAMwX,OAgBhB,OAfIV,IAAWE,EAAOF,SAClBE,EAAOF,OAASA,GAGpBE,EAAOM,iBAAmBpW,EAAO,CAAEuW,QAASV,GAAaC,EAAOM,kBAC3DN,EAAOM,iBAAiB/X,GAIzByX,EAAOO,IAAMA,EAAMP,EAAOM,iBAAiB/X,IAH3CyX,EAAOM,iBAAmBpW,EAAO,CAAE3B,GAAIgY,GAAOP,EAAOM,kBACrDN,EAAOO,IAAMA,GAKbP,EAAOL,UACPK,EAAOL,QAAUD,GAAiBM,EAAOL,QAASC,EAASK,EAAQD,EAAOF,OAAQC,EAAaA,EAAY,IAAMQ,EAAOA,IAErHrW,EAAO,CAAE0V,QAASA,EAASK,OAAQA,EAAQH,OAAQA,GAAUE,EACxE,GACJ,CAEA,SAASU,GAAaV,EAAQL,GAC1B,IAAIgB,EAAU,GAEd,OADAC,GAAcZ,EAAQL,EAASgB,GACxBA,EAAQA,EAAQtB,OAAS,EACpC,CAEA,SAASuB,GAAcZ,EAAQL,EAASgB,GACpCA,EAAUA,GAAW,GAErB,IAAK,IAAIrE,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAAO,CAC3C,GAAI0D,IAAWL,EAAQrD,GACnB,OAAO,EACJ,GAAIqD,EAAQrD,GAAKqD,QAAS,CAC7B,IAAIkB,EAAWF,EAAQtB,OAEvB,GADAsB,EAAQnW,KAAKmV,EAAQrD,IAChBsE,GAAcZ,EAAQL,EAAQrD,GAAKqD,QAASgB,GAG7C,OAAO,EAFPA,EAAQG,OAAOD,EAAUF,EAAQtB,OAASwB,EAIlD,CACJ,CACA,OAAO,CACX,CAEA,SAASE,GAAoBf,EAAQgB,GACjCC,GAAcjB,EAAQgB,EAASA,EACnC,CAEA,SAASC,GAAcjB,EAAQgB,EAASE,GACpC,IAAIC,EAASD,EAAOE,GAAoBhB,GACxCJ,EAAOC,QAAUe,EACjBhB,EAAOzC,WAAa4D,EAAOnB,EAAOzC,YAClCyC,EAAOK,iBAAmBc,EAAOnB,EAAOK,kBACxCL,EAAOM,iBAAmBa,EAAOnB,EAAOM,iBAC5C,CAGA,SAASe,GAAyBrB,EAAQgB,GACtCM,GAAsBtB,GAEtBiB,GAAcjB,EAAQgB,EADJhB,EAAOuB,aACoBvB,EAAOwB,aAAeR,EACvE,CAEA,SAASM,GAAsBtB,GAC3BA,EAAOwB,aAAeC,GAAmBzB,EAC7C,CAEA,SAASyB,GAAmBzB,GACxB,OAAOA,IAAW0B,GAAY1B,EAAO2B,SAAYD,GAAY1B,EAAO2B,QAAU3Y,EAAMwY,aAAaxB,EAAO2B,OAC5G,CAEA,SAASC,KACL,OAAO5N,KAAK6N,MAAMC,UAAYnQ,EAClC,CAMA,SAASwO,GAAUH,GACf,OAAO+B,GAAe,CAAC/B,IAASX,OAAS,CAC7C,CAEA,SAAS0C,GAAepC,GACpB,OAAOvV,EAAKuV,GAAS,SAASK,GAC1B,IAAItF,GAAUsF,EAAOC,SAAkC,IAAxBD,EAAOwB,aAKtC,OAHI9G,GAAUsF,EAAOL,UACjBjF,EAASqH,GAAe/B,EAAOL,SAASN,OAAS,GAE9C3E,CACX,GACJ,CAEA,SAASsH,GAAiBrC,GAItB,IAHA,IACIK,EADAtF,EAAS,GAGJuH,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAAK,CAGrC,IAAKP,IAFL1B,EAASL,EAAQsC,IAEON,OAAQ,CAC5B,IAAKD,GAAY1B,EAAOkC,gBACpB,MAAM,IAAIC,MAAM,iFAGpBzH,EAAOlQ,KAAKwV,EAChB,CAEIA,EAAOL,UACPjF,EAASA,EAAO0H,OAAOJ,GAAiBhC,EAAOL,UAEvD,CAEA,OAAOjF,CACX,CAEA,SAASgH,GAAYrD,GACjB,YAAwB,IAAVA,CAClB,CAEA,SAASgE,GAAStD,GACd,OAAOlW,EAAEkW,GAAU5U,KAAI,WAAa,OAAO6J,KAAKsO,SAAW,GAC/D,CAsBA,SAASC,GAAkB5C,EAASO,GAChC,IAAK,IAAI+B,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAChC,GAAItC,EAAQsC,GAAG/B,OAASA,EACpB,OAAOP,EAAQsC,EAG3B,CAEA,SAASO,GAA2BC,EAASC,EAAQC,EAAOhD,EAAS7E,EAAW8H,EAAaC,EAAQhG,GACjG,IAAIiG,EAAeC,GAAMN,GACrBO,EAAcD,GAAM,CAACL,IAEzB,GAAII,EAAeE,EAAa,CAC5B,IAAI7F,EAAa,IAAI7S,MAAMuY,EAAS,GAAGxF,KAAK,wEACxC4F,EAAOL,EAAYvM,SAAS,uBAChCxN,EAAE,IAAIyB,MAAOwY,EAAeE,EAAe,GAAG3F,KAAK,2BAA6BF,EAAa,UAAU+F,YAAYD,EAAKE,OAC5H,EAuRJ,SAAyBrI,EAAWsC,GAGhC,IAFA,IAAIgG,EAAQtI,EAAUoE,KAAK,iEAElB5C,EAAM,EAAGA,EAAM8G,EAAM/D,OAAQ/C,IAClC8G,EAAM9G,GAAK+G,SAAWjG,CAE9B,CA3RIkG,CAAgBV,EAAaE,EAAeE,GAE5CO,GAAUZ,EAAOhD,EAAS7E,EAAW8H,EAAa/F,EACtD,CAEA,SAAS2G,GAAgBC,EAAO9D,EAAS+D,GAGrC,IAAIlJ,EAFJkJ,EAASA,GAAU,EAInB,IAAIC,EAAahE,EACjBA,EAAUiE,GAAYjE,GAUtB,IARA,IAAIyD,EAAQ,CAAC,EACTH,EAAOQ,EAAMvE,KAAK,0BAElBD,EAAS,WACT,IAAI4E,EAAKhb,EAAEmL,MACX,OAAQ6P,EAAGC,SAAS,kBAAoBD,EAAGC,SAAS,mBACxD,EAESxH,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,IAGhD8G,GAFL5I,EAAWuJ,GAAepE,EAAQrD,GAAMqH,IAEpB9I,OAChBuI,EAAM5I,EAASK,KAAOoI,EAAKnE,GAAGtE,EAASK,KAClCqE,KAAK,aACLD,OAAOA,IAGTmE,EAAM5I,EAASK,KAAKiE,GAAGtE,EAASwJ,MAClC3Y,KAAKrC,EAAMqC,KAAK,SAAUqY,EAASpH,GAI5C,OAAOqD,EAAQN,MACnB,CAEA,SAAS0D,GAAMpD,GAIX,IAHA,IACIhH,EAAM,EAED2D,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IACpC,GAAIqD,EAAQrD,GAAKqD,QAAS,CACtB,IAAIsE,EAAOlB,GAAMpD,EAAQrD,GAAKqD,SAC1BsE,EAAOtL,IACPA,EAAMsL,EAEd,CAEJ,OAXa,EAWGtL,CACpB,CAEA,SAAS4K,GAAUZ,EAAOhD,EAAS7E,EAAW8H,EAAa/F,GACvD,IAMIP,EANA4H,EAAiBC,GAAsBxB,EAAM,GAAIhD,GAEjDyE,EAAMtJ,EAAUoE,KAAK,0BAA0BJ,GAAGoF,EAAerJ,KAAKxE,SAAS,eAE/EgO,EAAIxb,IACJgW,EAAcqF,EAAeF,KAGjC,IAAK1H,EAAM,EAAGA,EAAMqG,EAAMtD,OAAQ/C,IAC9B+H,EAAIA,EAAE5O,IAAI2O,EAAItF,GAAGD,EAAcvC,IAGnCsG,EAAY1D,KAAK,0BAA0BJ,GAAGoF,EAAerJ,KAAKgC,GAAQwH,GAE1E,IAAIhO,EAAW,GACf,IAAKiG,EAAM,EAAGA,EAAMqG,EAAMtD,OAAQ/C,IAC1BqG,EAAMrG,GAAKqD,UACXtJ,EAAWA,EAAS+L,OAAOO,EAAMrG,GAAKqD,UAI1CtJ,EAASgJ,QACTkE,GAAUlN,EAAUsJ,EAAS7E,EAAW8H,EAAa/F,EAE7D,CAEA,SAASkH,GAAe/D,EAAQL,EAAS9E,EAAKyJ,GAC1C,IAAI5J,EACA4B,EAMJ,KAHAgI,EAAaA,GAAc,CAAC,GAD5BzJ,EAAMA,GAAO,GAEKyJ,EAAWzJ,IAAQ,EAEhCyB,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAAO,CACxC,GAAIqD,EAAQrD,IAAQ0D,EAAQ,CACvBtF,EAAS,CAAEsJ,KAAMM,EAAWzJ,GAAMA,IAAKA,GACvC,KACL,CAAO,GAAI8E,EAAQrD,GAAKqD,UACpBjF,EAASqJ,GAAe/D,EAAQL,EAAQrD,GAAKqD,QAAS9E,EAAM,EAAGyJ,IAE1D,MAITA,EAAWzJ,IACd,CACA,OAAOH,CACX,CAeA,SAAS6J,GAAsBhI,GAC3B,IAAI3I,EAAU2I,EACViI,EAAU5Q,EAAQ6Q,MAAM,mBAC5B,GAAID,EAAS,CACT,MAAME,EAAaF,EAAQ,GAAGG,MAAM,KAAMC,MAC1ChR,EAAUA,EAAQ6L,QAAQiF,EAAYA,EAAa,cACvD,MACI9Q,EAAUA,EAAQ6L,QAAQ,MAAM,0BAGpC,OAAO7L,CACX,CAEA,SAASiR,GAAkBlF,EAAS+C,EAAQhE,EAAQE,EAAQkG,GACxD,GAAIpC,EAAO/C,QAEP,OADA+C,EAASA,EAAO/C,SACFf,EAAS,EAAI8D,EAAOrD,OAAS,GAE3C,IACI0F,EADAxO,EAASmK,GAAagC,EAAQ/C,GAI9BoF,EADAxO,EACgBA,EAAOoJ,QAEPA,EAGpB,IAAIlF,EAAQlQ,EAAQmY,EAAQqC,GACd,IAAVtK,GAAemE,EACfnE,IACQA,GAASsK,EAAc1F,OAAS,IAAMT,IAAaF,EAAOoB,SAAW4C,EAAO/C,UAAYf,EAChGnE,KACOA,EAAQ,GAAgB,IAAVA,IAAgBmE,IACrCnE,IAIJiI,EAnDR,SAAsC/C,EAASlF,EAAOiE,EAAQsG,GAC1D,IAAItC,EAEAuC,EADAnF,IAAWpB,EAAOoB,OAGtB,GACI4C,EAAS/C,EAAQlF,GACjBA,GAASuK,EAAM,GAAK,EACpBC,IAAiBvC,EAAO5C,aACnB4C,GAAUjI,GAAS,GAAKA,EAAQkF,EAAQN,QAAUqD,GAAUhE,IAAWgE,EAAO/C,SAAWsF,IAAiBnF,GAEnH,OAAO4C,CACX,CAuCiBwC,CAA6BH,EAAetK,EAAOiE,EAD1CnU,EAAQmU,EAAQqG,GACgDtK,GAClF,IAAI0K,EAAc5a,EAAQmY,EAAQoC,GAClC,QAAIpC,EAAO/C,SAAawF,GAAeA,IAAgBJ,EAAc1F,OAAS,IAI1EqD,GAAUA,GAAUhE,GAAUgE,EAAO/C,QAC9BkF,GAAkBlF,EAAS+C,EAAQhE,EAAQE,EAAQkG,GAJnD,IAQnB,CAEA,SAASX,GAAsBnE,EAAQL,EAAS9E,EAAKyJ,GACjD,IAAI5J,EACA4B,EAMJ,KAHAgI,EAAaA,GAAc,CAAC,GAD5BzJ,EAAMA,GAAO,GAEKyJ,EAAWzJ,IAAQ,EAEhCyB,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAAO,CACxC,GAAIqD,EAAQrD,IAAQ0D,EAAQ,CACvBtF,EAAS,CAAEsJ,KAAMM,EAAWzJ,GAAMA,IAAKA,GACvC,KACL,CAAO,GAAI8E,EAAQrD,GAAKqD,UACpBjF,EAASyJ,GAAsBnE,EAAQL,EAAQrD,GAAKqD,QAAS9E,EAAM,EAAGyJ,IAEjE,MAIJ3E,EAAQrD,GAAK2D,QACdqE,EAAWzJ,IAElB,CACA,OAAOH,CACX,CAEA,SAAS0K,GAAsBzF,GAE3B,OADa0F,GAAYC,GAAc3F,IACzByC,OAAOiD,GAAYE,GAAiB5F,IACtD,CAEA,SAAS6F,GAA2BH,EAAa1F,EAASd,EAAasG,GACnE,IAAInF,EAASqF,EAAYxG,GACrB6D,EAAS2C,EAAYF,GAErB5O,EAASmK,GAAaV,EAAQL,GAGlC,OAFAA,EAAUpJ,EAASA,EAAOoJ,QAAUA,EAE7BpV,EAAQmY,EAAQ/C,EAC3B,CAEA,SAAS0F,GAAY1F,GAGjB,IAFA,IAAIjF,EAAS,GACTrE,EAAW,GACNiG,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IACpC5B,EAAOlQ,KAAKmV,EAAQrD,IAChBqD,EAAQrD,GAAKqD,UACbtJ,EAAWA,EAAS+L,OAAOzC,EAAQrD,GAAKqD,UAOhD,OAHItJ,EAASgJ,SACT3E,EAASA,EAAO0H,OAAOiD,GAAYhP,KAEhCqE,CACX,CAEA,SAAS+K,GAAuB9F,GAI5B,IAHA,IACIK,EADA0F,EAAU,EAGLpJ,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,KACpC0D,EAASL,EAAQrD,IAENqD,QACP+F,GAAWD,GAAuBzF,EAAOL,SAClCK,EAAOC,QACdyF,IAGR,OAAOA,CACX,CAEA,SAASC,GAAUC,GAGf,IAFA,IAAI1P,EAAQ,EAEHoG,EAAM,EAAG+C,EAASuG,EAAKvG,OAAQ/C,EAAM+C,EAAQ/C,IAC7CsJ,EAAKtJ,GAAK2D,SACX/J,GAASmE,SAASuL,EAAKtJ,GAAKpG,MAAO,KAI3C,OAAOA,CACX,CAEA,SAAS2P,GAAaD,GAGlB,IAFA,IAAIE,EAAU5P,EAAQ,EAEboG,EAAM,EAAG+C,EAASuG,EAAKvG,OAAQ/C,EAAM+C,EAAQ/C,KAClDwJ,EAAWF,EAAKtJ,GAAKuF,MAAM3L,SACe,GAA1B4P,EAASC,QAAQ,OAC7B7P,GAASmE,SAASyL,EAAU,KAIpC,OAAO5P,CACX,CAsBA,SAAS8P,GAAgBlL,GASrB,IARA,IAAImI,EAAOnI,EAAUoE,KAAK,yBAEtB+G,EAAiBhD,EAAKhE,QAAO,WAC7B,OAAQpW,EAAEmL,MAAMqC,WAAWgJ,MAC/B,IAAG6G,SAAS7G,OAER+D,EAAQH,EAAK/D,KAAK,2CAEb5C,EAAM,EAAGA,EAAM8G,EAAM/D,OAAQ/C,IAC9B8G,EAAM9G,GAAK+G,QAAU,IACrBD,EAAM9G,GAAK+G,SAAW4C,GAG9B,OAAOhD,EAAK5D,OAAS4G,CACzB,CAEA,SAASE,GAAoBxG,EAASyD,EAAOH,EAAM1I,EAAUmJ,GACzD,IAAIpH,EAAKzB,EAAKwE,EAAQhJ,EAAW,GAEjC,IAAKiG,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,KACjDzB,EAAMoI,EAAK1I,IAAa,IACpB/P,KAAK4Y,EAAMtE,GAAG4E,EAASpH,IAC3B2G,EAAK1I,GAAYM,EAEb8E,EAAQrD,GAAKqD,UACbtJ,EAAWA,EAAS+L,OAAOzC,EAAQrD,GAAKqD,UAI5CtJ,EAASgJ,QACT8G,GAAoB9P,EAAU+M,EAAOH,EAAM1I,EAAW,EAAGmJ,EAAS/D,EAAQN,OAElF,CAEA,SAAS+G,GAAsBxS,EAASyS,EAAMC,GAC1C1S,EAAQqC,IAAI,CACRoQ,KAAQA,EACRC,MAASA,GAEjB,CAEA,SAASC,GAAsBvG,EAAQwG,EAAWC,GAC9CzG,EAAOwG,GAAaxG,EAAOwG,IAAc,CAAC,EAC1CxG,EAAOwG,GAAWC,GAAYzG,EAAOwG,GAAWC,IAAa,EACjE,CAEA,SAASC,GAAmB1G,EAAQwG,EAAWC,EAAUpI,GACrDkI,GAAsBvG,EAAQwG,EAAWC,GAEL,KAAhCzG,EAAOwG,GAAWC,GAClBzG,EAAOwG,GAAWC,IAAa,IAAMpI,EAErC2B,EAAOwG,GAAWC,GAAYpI,CAEtC,CAEA,SAASsI,GAAsB3G,EAAQwG,EAAWC,EAAUpI,GACxDkI,GAAsBvG,EAAQwG,EAAWC,GAEzCzG,EAAOwG,GAAWC,GAAYzG,EAAOwG,GAAWC,GAAUhH,QAAQpB,EAAO,GAC7E,CAEA,SAASiH,GAAc3F,GACnB,OAAOvV,EAAKuV,GAAS,SAASK,GAC1B,OAAOA,EAAOF,MAClB,GACJ,CAEA,SAASyF,GAAiB5F,GACtB,OAAOvV,EAAKuV,GAAS,SAASK,GAC1B,OAAQA,EAAOF,MACnB,GACJ,CAEA,SAAS8G,GAAcjH,GACnB,OAAOvV,EAAKuV,GAAS,SAASK,GAC1B,OAAOA,EAAO6G,SAAW7G,EAAOF,MACpC,GACJ,CAQA,SAASgH,GAAwBnH,GAC7B,OAAOvV,EAAKuV,GAAS,SAASK,GAC1B,OAAQA,EAAOF,QAAUK,GAAUH,EACvC,GACJ,CAEA,SAAS+G,GAAqBpH,GAC1B,OAAOvV,EAAKuV,GAAS,SAASK,GAC1B,OAAOA,EAAOF,QAAUK,GAAUH,EACtC,GACJ,CAEA,SAASgH,GAAmBrH,GAGxB,IAFA,IAAIjF,EAAS,GAEJ4B,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAChCqD,EAAQrD,GAAK2D,SAIbN,EAAQrD,GAAKqD,QACbjF,EAASA,EAAO0H,OAAO4E,GAAmBrH,EAAQrD,GAAKqD,UAEvDjF,EAAOlQ,KAAKmV,EAAQrD,KAI5B,OAAO5B,CACX,CAEA,SAASuM,GAAyBtH,GAG9B,IAFA,IAAIjF,EAAS,GAEJ4B,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAChCqD,EAAQrD,GAAK2D,SAIbN,EAAQrD,GAAKqD,QACbjF,EAASA,EAAO0H,OAAO4E,GAAmBrH,EAAQrD,GAAKqD,UAEvDjF,EAAOlQ,KAAK,CACR0V,MAAOP,EAAQrD,GAAK4D,MACpBhK,MAAOyJ,EAAQrD,GAAKpG,MACpBgR,OAAQvH,EAAQrD,GAAK4K,UAKjC,OAAOxM,CACX,CAEA,SAASyM,GAAaxH,GAGlB,IAFA,IAAIjF,EAAS,GAEJ4B,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAChCqD,EAAQrD,GAAKqD,UACbjF,EAASA,EAAO0H,OAAOzC,EAAQrD,GAAKqD,UAI5C,OAAOjF,CACX,CAEA,SAAS0M,GAAoBzH,GACzB,IAAIjF,EAASyM,GAAaxH,GAM1B,OAJAjF,EAASA,EAAOuE,QAAO,SAAShI,GAC5B,OAAQA,EAAEgJ,MACd,GAGJ,CAEA,SAAS2D,GAAYjE,GAGjB,IAFA,IAAIjF,EAAS,GAEJ4B,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAC/BqD,EAAQrD,GAAKqD,QAIlBjF,EAASA,EAAO0H,OAAOwB,GAAYjE,EAAQrD,GAAKqD,UAH5CjF,EAAOlQ,KAAKmV,EAAQrD,IAM5B,OAAO5B,CACX,CAgBA,SAAS2M,GAAUrH,GACf,MAAO,CACHE,MAAOF,EAAOE,MACdoH,MAAOtH,EAAOsH,MACdC,OAAQvH,EAAOuH,OACfC,OAAQxH,EAAOwH,OACfN,OAAQlH,EAAOkH,OACfO,cAAevd,GAAO,EAAM,CAAEqd,OAAQvH,EAAOuH,QAAUvH,EAAOyH,eAC9DC,MAAO1H,EAAOsH,OAAStH,EAAOE,OAAS,GAE/C,CAEA,SAASyH,GAAc7M,GACnB,IAAImI,EAAOnI,EAAUoE,KAAK,0BAEtBD,EAAS,WACT,IAAI4E,EAAKhb,EAAEmL,MACX,OAAQ6P,EAAGC,SAAS,kBAAoBD,EAAGC,SAAS,mBACxD,EAEIV,EAAQva,IACRoa,EAAK5D,OAAS,IACd+D,EAAQH,EAAK/D,KAAK,MACbD,OAAOA,GACPA,QAAO,WAAa,OAAOjL,KAAKqP,QAAU,CAAG,KAGtDD,EAAQA,EAAM3N,IAAIwN,EAAKE,OAAOjE,KAAK,MAAMD,OAAOA,IAEhD,IAAI2I,EAAY5e,EAAMqC,KAAK,SAoB3B,OAnBA+X,EAAMyE,MAAK,SAASC,EAAGC,GACnBD,EAAIjf,EAAEif,GACNC,EAAIlf,EAAEkf,GAEN,IAAIC,EAASF,EAAEzc,KAAKuc,GAChBK,EAASF,EAAE1c,KAAKuc,GAWpB,OATII,IAAWlf,IACXkf,EAASnf,EAAEif,GAAGrN,SAEdwN,IAAWnf,IACXmf,EAASpf,EAAEkf,GAAGtN,UAGlBuN,EAAS3N,SAAS2N,EAAQ,MAC1BC,EAAS5N,SAAS4N,EAAQ,KACD,EAAKD,EAASC,GAAU,EAAI,CACzD,IAEO7E,CACX,CAEA,SAAS8E,GAAmBlE,GACxB,IAAIlJ,EAAYkJ,EAAKmE,QAAQ,SACzBzN,EAAS7R,IAAI4M,IAAIuO,GAEjBnJ,EAAMmJ,EAAKmE,QAAQpX,IACnBqX,EAAatN,EAAUoE,KAAK,yBAC5BmJ,EAAQD,EAAW3N,MAAMI,GAC7B,GAAIwN,EAAQ,EAAG,CAaX,IAZA,IACIC,EADSF,EAAWtJ,GAAGuJ,EAAQ,GACEnJ,KAAK,2CAA2CD,QAAO,WACxF,OAAQpW,EAAEmL,MAAM3I,KAAK,UACzB,IAEIqY,EAAS,EACTjJ,EAAQI,EAAIqE,KAAK,2CAA2CzE,MAAMuJ,GAElEuE,EAAYvE,EAAKwE,QAAQ,yCAAyCvJ,QAAO,WACzE,OAAOjL,KAAKyU,QAAU,CAC1B,IAESnM,EAAM,EAAGA,EAAMiM,EAAUlJ,OAAQ/C,IACtCoH,GAAU6E,EAAUjM,GAAKmM,SAAW,EAMxC,IAHAhO,GAASzP,KAAK2N,IAAI+K,EAAS,EAAG,GAE9BA,EAAS,EACJpH,EAAM,EAAGA,EAAMgM,EAAwBjJ,OAAQ/C,IAAO,CACvD,IAAIoM,EAAaJ,EAAwBxJ,GAAGxC,GAM5C,GALIoM,EAAWrd,KAAK,gBAChBqY,GAAUgF,EAAW,GAAGC,aAAa,gBAErCjF,GAAU,EAEVjJ,GAAS6B,GAAO7B,EAAQiJ,EAAQ,CAChChJ,EAASwN,GAAmBQ,GAAYjT,IAAIiF,GAC5C,KACJ,CACJ,CACJ,CACA,OAAOA,CACX,CAEA,SAASkO,GAAkB5E,GACvB,IAAIlJ,EAAYkJ,EAAKmE,QAAQ,SACzBzN,EAAS7R,IAAI4M,IAAIuO,GAEjBnJ,EAAMmJ,EAAKmE,QAAQpX,IACnBqX,EAAatN,EAAUoE,KAAK,yBAC5BmJ,EAAQD,EAAW3N,MAAMI,GAAOmJ,EAAK,GAAGX,QACxCwF,EAAc7f,EAAMqC,KAAK,WAE7B,GAAIgd,GAASD,EAAW/I,OAAS,EAAG,CAChC,IAGI/C,EAHAwM,EAAQjO,EAAIkO,OACZR,EAAYvE,EAAKwE,QAAQ,yCAI7BD,EAAYA,EAAUtJ,QAAO,WACzB,OAAQjL,KAAKqP,SAA4B,IAAjBrP,KAAKqP,OACjC,IAEA,IAAIK,EAAS,EAEb,IAAKpH,EAAM,EAAGA,EAAMiM,EAAUlJ,OAAQ/C,IAClCoH,GAAUrJ,SAASkO,EAAUzJ,GAAGxC,GAAKjR,KAAKwd,GAAc,KAAO,EAGnE,IAAIzF,EAAQ0F,EAAM5J,KAAK,2CACnBuJ,EAAUpO,SAAS2J,EAAK3Y,KAAKwd,GAAc,KAAO,EAItD,IAFAvM,EAAM,EAECA,EAAMmM,GAAS,CAClBK,EAAQ1F,EAAMtE,GAAGxC,EAAMoH,GACvBhJ,EAASA,EAAOjF,IAAImT,GAAkBE,IACtC,IAAIzK,EAAQhE,SAASyO,EAAMzd,KAAKwd,GAAc,IAC1CxK,EAAQ,IACRoK,GAAWpK,EAAQ,GAEvB/B,GACJ,CACJ,CAEA,OAAO5B,CACX,CAEA,SAASsO,GAAcC,EAAOC,EAAO3M,EAAM4M,EAAOxW,GAC9C,IAAIyW,EACAC,EAAMJ,EAiBV,OAdIE,GACAF,EAAME,QAGN7f,EACA2f,EAAM,GAAGK,UAAY/M,IAErB6M,EAAc9K,SAASiL,cAAcvY,KACzBsY,UAAY,oEAAsE/M,EAAO,mBACrG1T,EAAEugB,GAAalK,KAAK,SAASsK,SAASxgB,EAAMygB,iBAAiB,WAAY,OAAQ9W,IACjFsW,EAAQG,EAAYM,WAAWA,WAC/BR,EAAM,GAAGS,aAAaV,EAAOI,EAAI,IACjCJ,EAAQpgB,EAAEogB,IAEPA,CACX,CAEA,SAAS7I,GAAe/U,GAEpB,IAAIwW,GADJxW,EAAOA,GAAQ,CAAC,GACCwW,MAWjB,OATKA,GAGDA,EAAQA,EAAMpC,QAAQ,iBAAkB,iBAC7BgF,MAAM,eACb5C,EAAQA,EAAMpC,QAAQ,SAAU,oBAJpCoC,EAAQ,eAQL3X,EAAO,CAAC,EAAGmB,EAAM,CAAEwW,MAAOA,GACrC,CASA,SAAST,GAAkB/V,GAEvB,IAAIwW,GADJxW,EAAOA,GAAQ,CAAC,GACCwW,MAMjB,OAJIA,IACAxW,EAAKwW,MAAQA,EAAMpC,QAAQ,+BAAgC,KAGxDpU,CACX,CAEA,SAASue,GAAcV,EAAOnH,EAAgB8H,EAAYhH,GACtD,IACI3M,EADA4T,EAAWZ,EAAMhK,KAAK,aAEtB0G,EAAOzb,EAAI4X,GAAgB,SAAS/B,GAE5B,OADA9J,EAAQ8J,EAAO9J,QACsB,IAAxBmE,SAASnE,EAAO,IAClBlN,EAAMue,OAAO,kCAAmCrR,IAAUjG,GAASiG,EAAQA,EAAQpF,IAGvF,SACX,KAEJ+Y,GAAcC,EAAS5K,KAAK,oBAAoBG,SAChDuG,EAAK9E,OAAO,EAAG,EAAG,mCAGlBgJ,EAASzK,QACTyK,EAAS5D,UAGb4D,EAAWjhB,EAAE,IAAIyB,MAAMuY,EAAS,GAAGxF,KAAK,6BAA+BuI,EAAKvI,KAAK,MACnE0M,GAAG,cACbD,EAAWjhB,EAAE,eAAemhB,OAAOF,IAGvCZ,EAAMe,QAAQH,EAClB,CAgBA,SAASI,GAAgBC,GACrB,IACIC,EACA9N,EACA+C,EAHA3E,EAAS,CAAC,EAKd,IAAK4B,EAAM,EAAG+C,EAAS8K,EAAM9K,OAAQ/C,EAAM+C,EAAQ/C,IAE/C5B,GADA0P,EAAOD,EAAM7N,IACD+B,OAAS+L,EAAK3X,KAG9B,OAAOiI,CACX,CAEA,SAAS2P,GAAiBhM,EAAOkJ,EAAQ+C,EAAc1K,GACnD,IACI2K,EADeD,GAAgBA,EAAajL,QAAUpV,EAAcqgB,EAAa,KAAO,UAAWA,EAAa,GACpFJ,GAAgBI,GAAcjM,GAASA,EAIvE,OAFAkM,EAA2B,MAAdA,EAAqBA,EAAa,GAExChD,EAASve,EAAMue,OAAOA,EAAQgD,IAA2B,IAAZ3K,EAAoB2K,EAAavhB,EAAM4B,WAAW2f,EAC1G,CAEA,SAASC,GAAkBpH,EAAO3I,EAAOuG,GAKrC,IAJA,IAAIyJ,EAAM,EAENzG,EAAOZ,EAAMqH,GAEVzG,GAAM,CAGT,MAFQhD,GAAiBgD,EAAKnC,MAAMC,UAAYnQ,MAElCU,GAAmBiB,KAAK0Q,EAAKxR,cAAgBiI,EAAQ,EAAG,CAClEuJ,EAAKnC,MAAMC,QAAUd,EAAU,GAAKrP,GACpC,KACJ,CAEAqS,EAAOZ,IAAQqH,EACnB,CACJ,CAEA,SAASC,GAAgBzH,EAAM0H,GAK3B,IAJA,IAEI3G,EAAMnJ,EAFNyB,EAAM,EACN+C,EAAS4D,EAAK5D,OAGV/C,EAAM+C,EAAQ/C,GAAO,GACzBzB,EAAMoI,EAAKnE,GAAGxC,IACNyN,GAAG,kCACP/F,EAAOnJ,EAAIxE,SAAS,4CAA4C8M,QAC3D9X,KAAK,UAAWgP,SAAS2J,EAAK3Y,KAAK,WAAY,IAAM,IAEtDwP,EAAIiJ,SAAS,qBAAuBE,EAAOnJ,EAAIxE,SAAS,qBAAqB,OAC7E2N,EAAOnb,EAAEmb,IACJ3Y,KAAK,UAAWgP,SAAS2J,EAAK3Y,KAAK,WAAY,IAAM,GAC1D2Y,EAAK9E,KAAK,OAAOJ,GAAG6L,GAAazE,SACjCrL,EAAMmJ,EAAK9E,KAAKnO,IAAIuF,SAGxBkU,GAAkB3P,EAAI,GAAGuI,MAAOuH,GAAa,GAGzD,CAEA,SAASC,GAAUxhB,GAIf,IAHA,IACIghB,EADA1P,EAAS,GAGJ4B,EAAM,EAAGA,EAAMlT,EAAKiW,SAEnB,UADN+K,EAAOhhB,EAAKkT,KACa,UAAW8N,GAAQ,UAAWA,GAFtB9N,IAMjC5B,EAAOlQ,KAAK4f,GAERA,EAAKS,eACLnQ,EAASA,EAAO0H,OAAOwI,GAAUR,EAAKU,SAI9C,OAAOpQ,CACX,CAEA,SAASqQ,GAAa3hB,GAIlB,IAHA,IACIghB,EADA1P,EAAS,GAGJ4B,EAAM,EAAGA,EAAMlT,EAAKiW,SAEnB,UADN+K,EAAOhhB,EAAKkT,KACa,UAAW8N,GAAQ,UAAWA,GAFtB9N,IAM7B8N,EAAKS,eACLnQ,EAASA,EAAO0H,OAAO2I,GAAaX,EAAKU,SAG7CpQ,EAAOlQ,KAAK4f,EAAKY,YAGrB,OAAOtQ,CACX,CAEA,SAASuQ,GAAgBhI,EAAM0H,GAK3B,IAJA,IAEI3G,EAAMnJ,EAFNyB,EAAM,EACN+C,EAAS4D,EAAK5D,OAGV/C,EAAM+C,EAAQ/C,GAAO,GACzBzB,EAAMoI,EAAKnE,GAAGxC,IACNyN,GAAG,kCACP/F,EAAOnJ,EAAIxE,SAAS,4CAA4C8M,QAC3D9X,KAAK,UAAWgP,SAAS2J,EAAK3Y,KAAK,WAAY,IAAM,IAEtDwP,EAAIiJ,SAAS,qBAAuBE,EAAOnJ,EAAIxE,SAAS,qBAAqB,OAC7E2N,EAAOnb,EAAEmb,IACJ3Y,KAAK,UAAWgP,SAAS2J,EAAK3Y,KAAK,WAAY,IAAM,GAC1Due,GAAc5F,EAAK9E,KAAK,eAAgB6C,GAXrCpC,YAW8D,EAAO,GACxE9E,EAAMmJ,EAAK9E,KAAKnO,IAAIuF,SAGxBkU,GAAkB3P,EAAI,GAAGuI,MAAOuH,GAAa,GAGzD,CAEA,SAASO,GAAcC,EAAOC,EAAUC,GAGpC,IAAIjB,EAAM9N,EAAK+C,EACf,IAHAgM,EAAMA,GAAO,EAGR/O,EAAM,EAAG+C,EAAS8L,EAAM9L,OAAQ/C,EAAM+C,EAAQ/C,KAC/C8N,EAAOe,EAAMrM,GAAGxC,GAAKjG,WAAW8M,QAC3B9X,KAAK,UAAWgP,SAAS+P,EAAK/e,KAAK,WAAY,IAAMggB,IAE1DjB,EAAOgB,EAAStM,GAAGxC,GAAKjG,WAAW8M,QAC9B9X,KAAK,UAAWgP,SAAS+P,EAAK/e,KAAK,WAAY,IAAMggB,EAElE,CAEA,SAASC,GAAWpC,GAChB,IAAI5M,EAAK+C,EAAQnJ,EAAQ,EACrB0P,EAAOsD,EAAMhK,KAAK,iBAEtB,IAAK5C,EAAM,EAAG+C,EAASuG,EAAKvG,OAAQ/C,EAAM+C,EAAQ/C,GAAO,EACrDpG,GAASmE,SAASuL,EAAKtJ,GAAKuF,MAAM3L,MAAO,IAG7C,OAAOA,CACX,CACA,IAAIqV,GAAOviB,EAAME,GAAGsiB,gBAAgBthB,OAAO,CACvCyJ,KAAM,SAASC,EAASC,EAASyB,GAC7B,IAAIZ,EAAOV,KAEXH,EAAUxJ,EAAQwJ,GAAW,CAAEI,WAAYJ,GAAYA,EAEvDlK,EAAOmK,GAAGH,KAAKI,KAAKW,EAAMd,EAASC,GAE/ByB,IACAZ,EAAK+W,QAAUnW,GAGnBtC,GAAQhK,EAAMO,QAAQyJ,MAAMY,GAC5BhI,EAAkBoH,GApvDL,gCAovD8BnH,EAE3C6I,EAAKgX,WAELhX,EAAKiX,UAELjX,EAAKkX,SAAS/iB,EAAEqB,QAAO,EAAM,GAAIwK,EAAKb,QAAQ8L,UAE1CjL,EAAKmX,oBACLhjB,EAAEijB,KAAKC,MAAM,KAAMrX,EAAKmX,qBACnBG,MAAK,WACFtX,EAAKmX,oBAAsB,KAC3BnX,EAAKuX,eACT,IAEJvX,EAAKuX,eAEb,EAEAA,cAAe,WACX,IAAIvX,EAAOV,KAEXU,EAAKwX,cAELxX,EAAKyX,iBAELzX,EAAK0X,SAEL1X,EAAK2X,SAEL3X,EAAK4X,eAEL5X,EAAK6X,aAEL7X,EAAK8X,WAEL9X,EAAK+X,YAEL/X,EAAKgY,oBAELhY,EAAKiY,aAELjY,EAAKkY,eAELlY,EAAKmY,cAELnY,EAAKoY,aAELpY,EAAKqY,WAELrY,EAAKsY,YAELtY,EAAKuY,6BAELvY,EAAKwY,mBAELxY,EAAKyY,oBAEDzY,EAAKb,QAAQuZ,SACb1Y,EAAKT,WAAWoZ,SAEhB3Y,EAAK4Y,OAAS5Y,EAAK6Y,UAAY,EAC/B7Y,EAAK8Y,WAGL9Y,EAAKsK,gBACLtK,EAAKc,QAAQgU,SAAS,wBACtB9U,EAAK+Y,eAAiB,WAClB/Y,EAAKgZ,QACT,EACA7kB,EAAEI,QAAQuN,GAAG,SAAW1K,EAAI4I,EAAK+Y,iBAGrCzkB,EAAM2kB,OAAOjZ,EACjB,EAEAY,OAAQ,CACL7I,EACA,cACA,SACAI,EACAC,EACAC,GACAZ,EACAC,EACAE,EACAD,EACAE,EACAR,EACAC,EACAC,EACAC,EACAU,EACAJ,EACAoC,GACAC,GACAC,GACAnC,EACAD,EACAqC,GACAC,GACAC,GACAC,GACAC,GACAC,GACA,OACA,OACA,SACA,QACA,cACA,gBACA,gBAGH0F,cAAe,SAASb,GACpB,IAEI2Z,EAFAlZ,EAAOV,KACP6Z,EAAanZ,EAAKb,QAAQga,WAG9BnZ,EAAKb,QAAQI,WAAaA,EAE1BS,EAAKwX,cAELxX,EAAK+X,YAEL/X,EAAK2X,SAEL3X,EAAK4X,eAEDuB,IACIA,EAAW5Y,SACX2Y,EAAoBlZ,EAAK0B,QAAQ8I,KAAK,+BACtClW,EAAMwO,WAAWoW,EAAmBE,GAAiBF,EAAmB5a,OAExE4a,EAAoBlZ,EAAKuU,MACzBjgB,EAAMwO,WAAW9C,EAAK0B,QAAS0X,GAAiBF,EAAmB5a,OAIvE0B,EAAKb,QAAQka,WACbrZ,EAAK6X,aAGL7X,EAAKsZ,mBACLtZ,EAAKsZ,kBAAkBlZ,cAAcJ,EAAKb,QAAQI,YAGlDS,EAAKb,QAAQoa,aACbvZ,EAAKkY,eAGLlY,EAAKb,QAAQqa,YACbxZ,EAAKmY,cAGLnY,EAAKb,QAAQuZ,SACb1Y,EAAKT,WAAWoZ,QAEhB3Y,EAAK8Y,SAEb,EAEA3Z,QAAS,CACLrL,KAAM,OACNmX,QAAS,GACTwO,QAAS,KACTf,UAAU,EACVgB,YAAY,EACZP,YAAY,EACZQ,UAAU,EACVH,YAAY,EACZI,WAAW,EACXL,aAAa,EACbM,UAAU,EACVC,kBAAkB,EAClBC,UAAU,EACVC,cAAc,EACdX,WAAW,EACXY,YAAa,GACbC,eAAgB,GAChB1Q,QAAQ,EACR2Q,WAAW,EACX5a,WAAY,CAAC,EACbqE,OAAQ,KACRwW,WAAW,EACXC,aAAa,EACbC,YAAY,EACZC,eAAgB,KAChBC,wBAAyB,EACzBvc,KAAM,SACNwc,OAAQ,GACRC,WAAY,eACZC,SAAU,CACNZ,SAAU,CACNa,aA11DG,SA21DHC,aA91DI,+CA+1DJC,cA71DI,UA+1DRpQ,SAAU,CACN3B,OAAQD,GAAgBC,OAAOhL,KAC/BqK,OAAQU,GAAgBV,OAAOrK,KAC/BkL,KAAMH,GAAgBG,KAAKlL,KAC3B8C,QAASiI,GAAgBjI,QAAQ9C,KACjCmL,KAAMJ,GAAgBI,KAAKnL,KAC3BqL,OAAQN,GAAgBM,OAAOrL,KAC/BsL,WAAYP,GAAgBO,WAAWtL,KACvCuL,MAAOR,GAAgBQ,MAAMvL,KAC7BwL,IAAKT,GAAgBS,IAAIxL,KACzByL,OAAQV,GAAgBU,OAAOzL,MAEnCoc,UA52DI,wBA62DJY,2BAA4B,GAC5BC,YAAa,8BACbC,cAAe,gCACfC,cAAe,iBACfC,gBAAiB,WACjBC,aAAc,eACdC,oBAAqB,uBACrBC,gBAAiB,eAErB9Z,MAAO,MAGXX,QAAS,WACL,IACI3B,EACAqc,EAFAvb,EAAOV,KAIXU,EAAKwb,cAAc,WACnBxb,EAAKyb,4BAELxmB,EAAOmK,GAAGyB,QAAQxB,KAAKW,GAEnBV,KAAKoc,qBACLpc,KAAKoc,mBAAmBza,IAAI7J,GAC5BkI,KAAKoc,mBAAqB,KAC1Bpc,KAAKqc,cAAgB,MAGrB3b,EAAK+Y,gBACL5kB,EAAEI,QAAQ0M,IAAI,SAAW7J,EAAI4I,EAAK+Y,gBAGlC/Y,EAAK4b,OAAS5b,EAAK4b,MAAM1c,SACzBc,EAAK4b,MAAM/a,UAGXb,EAAK6b,OACL3a,aAAalB,EAAK6b,OAGlB7b,EAAK8b,kBACL5a,aAAalB,EAAK8b,kBAGlB9b,EAAK+b,wBACL7a,aAAalB,EAAK+b,wBAGlB/b,EAAKgc,sBACL9a,aAAalB,EAAKgc,sBAGtBhc,EAAK4b,MAAQ,KAEb5b,EAAKic,qBAELV,EAAsBvb,EAAKc,QAAQpM,KAAK,sBAEpC6mB,EAAoB1a,WAGxB0a,EAAsBvb,EAAKuU,MAAQvU,EAAKuU,MAAM7f,KAAK,oBAAsB,OAErE6mB,EAAoB1a,UAGpBb,EAAKwZ,YAAcxZ,EAAKwZ,WAAWta,UACnCc,EAAKwZ,WAAW3Y,UAEhBb,EAAKkc,YACLlc,EAAKmc,aAAe,KAEhBnc,EAAKoc,cACLpc,EAAKc,QAAQG,IAAI,UAAWjB,EAAKoc,aACjCpc,EAAKM,OAAON,EAAKoc,cAEjBpc,EAAKqc,uBACLrc,EAAKM,OAAON,EAAKqc,sBACjBrc,EAAKqc,qBAAuB,MAE5Brc,EAAKsc,kBACLtc,EAAKc,QAAQG,IAAI,QAASjB,EAAKsc,mBAIvCtc,EAAKwZ,WAAa,KAEdxZ,EAAKoa,YACLpa,EAAKoa,UAAUvZ,UAEXb,EAAKuc,oBACDvc,EAAKwc,mCACLroB,EAAEyV,UAAU3I,IAAI,QAASjB,EAAKwc,mCAElCxc,EAAKuc,kBAAkB1b,UACvBb,EAAKuc,kBAAoB,MAE7Bvc,EAAKoa,UAAY,MAGrBpa,EAAKyc,sBAELzc,EAAK0c,4BAED1c,EAAK2c,qBACL3c,EAAK2c,mBAAmB9b,UACxBb,EAAK2c,mBAAqB,MAG1B3c,EAAK4c,2BACL5c,EAAK4c,yBAAyB/b,UAC9Bb,EAAK4c,yBAA2B,MAGpC5c,EAAK6c,mBAED7c,EAAKT,aACLS,EAAKT,WAAWe,OAAOvI,EAAQiI,EAAKC,iBACxBK,OAAO9J,EAAUwJ,EAAK8c,kBACtBxc,OAAO7J,EAAOuJ,EAAK+c,eACnBzc,OAAOvE,GAAMiE,EAAKgd,mBAE9Bhd,EAAKC,gBAAkBD,EAAK8c,iBAAmB9c,EAAK+c,cAAgB/c,EAAKid,aAAe,MAG5F/d,EAAUc,EAAKd,QACV6B,IAAIf,EAAKc,SACTC,IAAIf,EAAKwU,OACTzT,IAAIf,EAAK+O,OACThO,IAAIf,EAAKc,QAAQ0J,KAAK,qBAEvBxK,EAAK0B,UACLxC,EAAUA,EACD6B,IAAIf,EAAK0B,SACTX,IAAIf,EAAK0B,QAAQ8I,KAAK,iCAG/BxK,EAAKkd,cACLld,EAAKmd,0BAGLnd,EAAKod,MACLpd,EAAKod,KAAKvc,UAGVb,EAAKqd,YACLrd,EAAKc,QAAQG,IAAI,gBAAkB7J,GACnC4I,EAAKc,QAAQG,IAAI,cAAgB7J,IAGjC4I,EAAKsd,wBACLnpB,EAAEI,QAAQ0M,IAAI,SAAUjB,EAAKsd,wBAGjCtd,EAAKud,kCAEDvd,EAAKwd,oBAAsBxd,EAAKwd,mBAAmBte,SACnDc,EAAKwd,mBAAmB3c,UAG5Bb,EAAKwd,mBAAqB,KAEtBxd,EAAKyd,wBAA0Bzd,EAAKyd,uBAAuBve,SAC3Dc,EAAKyd,uBAAuB5c,UAGhCb,EAAKyd,uBAAyB,KAE9Bve,EAAQ+B,IAAI7J,GAEZ9C,EAAMuM,QAAQb,EAAKc,SAEnBd,EAAKia,YACLja,EAAKka,eACLla,EAAK0d,kBACL1d,EAAK2d,qBACL3d,EAAKua,eACLva,EAAK4d,eACL5d,EAAK6d,oBACL7d,EAAK8d,0BACL9d,EAAK+d,kBAAoB,KAEzB/d,EAAKge,YACLhe,EAAK+O,MACL/O,EAAKuU,MACLvU,EAAKd,QACLc,EAAKwU,MACLxU,EAAK0B,QACL1B,EAAKie,OACLje,EAAKc,QACLd,EAAKke,YACLle,EAAKsK,cACLtK,EAAKkd,aACLld,EAAKme,aACLne,EAAKoe,uBACLpe,EAAKqe,WACLre,EAAKse,wBAA0B,IACnC,EAEAC,WAAY,WACMjf,KAAKH,QACXI,WAAa,KAErB,IAAIyG,EAASxQ,GAAO,EAAM,CAAC,EAAG8J,KAAKH,SACnC6G,EAAOiF,QAAU3W,EAAMkqB,WAAW,GAAIlf,KAAK2L,SAE3C,IAAI1L,EAAaD,KAAKC,WAElBkf,EAAclf,EAAWJ,QAAQzK,MAAQ6K,EAAWmf,MAyBxD,OAxBAnf,EAAWJ,QAAQzK,KAAO,KAE1BsR,EAAOzG,WAAapL,EAAEqB,QAAO,EAAM,CAAC,EAAG+J,EAAWJ,SAElDI,EAAWJ,QAAQzK,KAAO+pB,EAE1BzY,EAAOzG,WAAW7K,KAAO+pB,EACzBzY,EAAOzG,WAAW8I,KAAO9I,EAAW8I,OACpCrC,EAAOzG,WAAWgL,OAASpW,EAAEqB,QAAO,EAAM,CAAC,EAAG+J,EAAWgL,UACzDvE,EAAOzG,WAAWM,SAAWN,EAAWM,WACxCmG,EAAOzG,WAAW4T,KAAO5T,EAAW4T,OACpCnN,EAAOzG,WAAWof,MAAQpf,EAAWof,QACrC3Y,EAAOzG,WAAWqf,UAAYrf,EAAWqf,YAErC5Y,EAAOzG,WAAWsf,YAClB7Y,EAAOzG,WAAWsf,UAAUtf,WAAa,MAGzCyG,EAAO6T,UAAY7T,EAAO6T,SAASha,WACnCmG,EAAO6T,SAASha,SAAWN,EAAWM,YAG1CmG,EAAO8Y,SAAW1qB,EAEX4R,CACX,EAEA+Y,WAAY,SAAS5f,GACjB,IAAI6f,EAAiB1f,KAAKif,aAC1BjqB,EAAMkqB,WAAWQ,EAAgB7f,GAC5BA,EAAQI,WAGPJ,EAAQI,WAAWgL,SACnByU,EAAezf,WAAWgL,OAASpL,EAAQI,WAAWgL,QAHxDyU,EAAezf,WAAaD,KAAKC,WAMrC,IAAIuB,EAAUxB,KAAKwB,QACfF,EAAStB,KAAKyX,QACd7X,EAAUI,KAAKJ,QAInB,GAFAI,KAAKuB,UACLvB,KAAKH,QAAU,KACXG,KAAK+d,UAAW,CAChB,IAAI4B,EAAgBne,EAAQ2S,QAAQnf,EAAM4qB,aAAa,SAASrd,SAChEod,EAAcE,MAAMre,GACpBme,EAAczN,SACd1Q,EAAQse,YAAY,gBACxB,CACIte,EAAQ,KAAO5B,EAAQ,KACvB4B,EAAQoJ,OAAOhL,GACf4B,EAAQ0Q,UAEZtS,EAAQuV,QAERnV,KAAKL,KAAKC,EAAS8f,EAAgBpe,GACnCtB,KAAK+f,WAAWL,EACpB,EAEA5I,MAAO,WACH,OAAI9W,KAAKgL,cACEhL,KAAKggB,OAAOhgB,KAAKiV,OAAOxT,IAAIzB,KAAKggB,OAAOhgB,KAAK4e,YAAYvc,SAAS,WAElErC,KAAKggB,OAAOhgB,KAAKiV,MAEhC,EAEA+K,OAAQ,SAASlZ,EAAWmZ,GACxB,OAAOnZ,EAAUzE,WAAW4I,QAAO,WAC/B,IAAIiV,EAAKrrB,EAAEmL,MACX,SAAQigB,EAAoBC,EAAGpQ,SAAS,gBAAmBoQ,EAAGpQ,SAASpV,MAAmBwlB,EAAGpQ,SAAS,iBAAoBoQ,EAAGpQ,SAAS,kBAC1I,GACJ,EAEAqQ,UAAW,WACP,IAAIA,EAAYnrB,EAAME,GAAGsiB,gBAAgB1X,GAAGqgB,UAAUpgB,KAAKC,MAC3D,GAAIA,KAAKgL,cAAe,CAEpB,IADA,IAAIoV,EAAID,EAAU9U,OAAQgK,EAAM,IAAI/e,MAAM,EAAI8pB,GACrCnS,EAAImS,IAAKnS,GAAK,GACnBoH,EAAIpH,GAAKoH,EAAIpH,EAAImS,GAAKD,EAAUlS,GAEpCkS,EAAY9K,CAChB,CAEA,OAAO8K,CACX,EAEAhE,0BAA2B,WACvB,IAAIzb,EAAOV,KAEXU,EAAK2f,aAAe,KAEf3f,EAAK+O,QAIVzP,KAAKsgB,QAAQ,WAAW,WACpB,MAAO,CAAEvV,SAAUrK,EAAK+O,MAAM8Q,MAClC,IAEA7f,EAAK+O,MAAMhO,IAAIf,EAAKkd,cAAc1S,KAAK,MAAMsV,MAAK,WAC9C,IAAIC,EAAK5rB,EAAEmL,MACP0gB,EAAaD,EAAGrrB,KAAK,mBACrBilB,EAAWoG,EAAGrrB,KAAK,qBACnB4lB,EAAayF,EAAGrrB,KAAK,mBAErBsrB,GACAA,EAAWnf,UAGX8Y,GACAA,EAAS9Y,UAGTyZ,GACAA,EAAWzZ,SAEnB,IACJ,EAEA0X,2BAA4B,WACxB,IAEI3N,EACAhD,EACA+C,EAJA3K,EAAOV,KACP2L,EAAUiE,GAAYlP,EAAKiL,SAAW,IAK1C,IAAKrD,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,KACjDgD,EAAUK,EAAQrD,GAAKgD,UAGnBH,GAAyBzK,EAAMA,EAAKc,QAAS8J,EAGzD,EAEAqV,MAAO,WACH,IAOIC,EAASC,EAAeC,EAAeC,EAKvCC,EAZAxf,EAAUxB,KAAKwB,QACfyf,EAAWjhB,KAAKkhB,cAAgB,WAAalhB,KAAKH,QAAQoa,YAAc,OAAS,KACjF/E,EAAQlV,KAAKkV,MACbiF,EAAU3Y,EAAQ0J,KAAK,mBACvBiW,EAAiB3f,EAAQ0J,KAAK,sBAC9BkW,EAASlM,EAAM7d,KAAKwF,IACpBwkB,EAAgBnM,EAAM7d,KAAK0E,IAE3BulB,EAAoBthB,KAAKyP,MAAMvE,KAAKnO,IAAIsO,OAASrL,KAAKwB,QAAQ0J,KAAK,gCAAgCG,OACnGkW,EAAkBvhB,KAAKwhB,mBACvBvgB,EAAUjB,KAAKyhB,cACflH,EAAWva,KAAKH,QAAQ0a,SAG5BrF,EAAM7d,KAAK0E,GAAUslB,GAAiB,EAAIA,EAAgB,GAEtDJ,GACA/L,EAAM7d,KAAKqG,GAAMujB,GAGrB/L,EAAMhK,KAAK,uBAAuB7T,KAAKqG,GAAMG,IAC7CqX,EAAMhK,KAAKnO,IAAI1F,KAAKqG,GAAME,IAC1BsX,EAAMhK,KAAK,MAAM7T,KAAKqG,GAAMI,IAC5BoX,EAAMhK,KAAK,MAAM7T,KAAKqG,GAAMK,IAEvBwc,GAAYva,KAAKC,WAAWG,aAAe,GAAOa,GAAWA,EAAQgO,MAElE+R,EADAhhB,KAAKuZ,UAAY,GACJ,EACNvZ,KAAKkhB,cACAI,EAA+C,EAA1BthB,KAAKC,WAAWyH,QAErC4Z,EAAoBthB,KAAKC,WAAWyH,QAGpDwN,EAAM7d,KAAK8F,GAAe6jB,IACnBhhB,KAAKkhB,gBAERF,EADAhhB,KAAKuZ,UAAY,GACJ,EAED+H,EAA+C,EAA1BthB,KAAKC,WAAWyH,QAGrDwN,EAAM7d,KAAK8F,GAAe6jB,IAG1BA,GAAaA,EAAY,GACzBhhB,KAAK0hB,iBAGJzgB,GAAWA,EAAQ0K,UAClBuJ,EAAM7d,KAAK+F,MACR8X,EAAMhK,KAAK,aAAaG,OAAS,GAClC7J,EAAQ0J,KAAK,oCAAoCG,OAAS,MACtD6J,EAAM7d,KAAK+F,GAAemkB,EAAkB3R,GAAY5P,KAAK2L,SAASN,QACtErL,KAAK2hB,oBAGZP,IACDA,EAASpsB,EAAMwX,OACf0I,EAAM7d,KAAKwF,GAAIukB,IAGfphB,KAAKsc,OACLtc,KAAKsc,MAAM1c,QAAQvI,KAxvEX,gBAwvE+B+pB,GAG3CjH,EAAQ9iB,KAAK,CACTuqB,KAAM,UACN,aAAc5hB,KAAKH,QAAQwb,SAASS,aACpC,gBAAiBsF,IAGrBD,EAAe9pB,KAAK,CAChBuqB,KAAM,UACN,aAAc5hB,KAAKH,QAAQwb,SAASU,oBACpC,gBAAiBqF,IAGrBP,EAAgB7gB,KAAK6hB,kBAAkB,SAAU,QAAS,SAAU/jB,IACpEgjB,EAAgB9gB,KAAK6hB,kBAAkB,SAAU,QAAS,KAAM9jB,IAE5DyD,EAAQ0J,KAAK,0BAA0BG,OAAS,GAChDrL,KAAK8hB,sBAGHjB,GAAmBC,KAErBC,EAAa,CAACF,EADdD,EAAU5gB,KAAKiV,MAAM5d,KAAKwF,KAAO7H,EAAMwX,OACDsU,GAAezX,KAAK,KAE1DrJ,KAAKiV,MAAM5d,KAAKwF,GAAI+jB,GACpB1L,EAAM7d,KAAK6F,GAAW6jB,IAGtB/gB,KAAKH,QAAQka,WACb/Z,KAAK+hB,kBAEb,EAEAJ,iBAAkB,WACd,IASIK,EAAe/T,EAAUgU,EAAWC,EATpCX,EAAkBvhB,KAAKwhB,mBACvBW,EAAcniB,KAAKiV,MAAM/J,KAAK,OAAOiE,OAAOjE,KAAK,sBACjDkJ,EAAapU,KAAKyP,MAAMvE,KAAK,OAAOkX,IAAI,iBACxCC,EAAmBriB,KAAKwB,QAAQ0J,KAAK,oCAAoCkX,IAAI,iBAC7EE,EAAaC,OAAOC,UACpBC,EAAY,EACZC,EAAkB,EAClBC,EAAkB,EAClBC,EAAc,EAEdC,EAAiB,SAASC,EAAG9S,GACzB,IAAI+S,EAAU/S,EAAK2E,aAAa,cAC5BqO,EAAeT,OAAOQ,GACtBE,EAAepuB,EAAEmb,GAAMmE,QAAQ,yBAEP,IAAxB8O,EAAa5X,QAAgB2X,EAAeV,IAC5CA,EAAaU,GAGbC,EAAa5X,OAAS,GAAKqX,EAAkBM,IAC7CN,EAAkBM,GAGM,IAAxBC,EAAa5X,QAAgBoX,EAAYO,IACzCP,EAAYO,GAGA,OAAZD,GACA/S,EAAKkT,aAAa7lB,GAAeklB,OAAOS,GAAgB,GACxDhB,EAAgBO,OAAOS,GAAgB,EAAIhT,EAAK2E,aAAa,aAE7D3E,EAAKkT,aAAa7lB,GAAe2kB,EAAgB,GACjDA,GAAgChS,EAAK2E,aAAa,WAE1D,EAWJ,IAT2B,IAAvBwN,EAAY9W,QACZsX,EAAkBJ,OAAOJ,EAAY,GAAGxN,aAAa,YACrDiO,EAAcL,OAAOJ,EAAY,GAAGxN,aAAa,aACnB,IAAvBwN,EAAY9W,QAA8C,IAA9B8W,EAAYgB,OAAO9X,OACtDsX,EAAkBJ,OAAOJ,EAAY,GAAGxN,aAAa,YACvB,IAAvBwN,EAAY9W,QAA8C,IAA9B8W,EAAYgB,OAAO9X,SACtDuX,EAAcL,OAAOJ,EAAY,GAAGxN,aAAa,aAGhD1G,EAAI,EAAGA,EAAIoU,EAAiBhX,OAAQ4C,IACrC+T,EAAgB,EAChBK,EAAiBvX,GAAGmD,GAAG/C,KAAK,MAAMsV,KAAKqC,GAG3C,IAAK5U,EAAI,EAAGA,EAAImG,EAAW/I,OAAQ4C,IAC/B+T,EAAgB,EAChB5N,EAAWtJ,GAAGmD,GAAG/C,KAAK,MAAMsV,KAAKqC,GAGrC,IAAK5U,EAAI,EAAGA,GAAKyU,EAAiBzU,IAC9BgU,EAAYhU,EAAIsT,EACRvhB,KAAKwB,QAAQ0J,KAAK,qDAAuD+C,EAAI,GAAK,KACpF5W,KAAKgG,GAAe4kB,EAAY,GAG1C,IAAKhU,EAAI0U,EAAiB1U,GAAKwU,EAAYH,EAAaM,EAAa3U,IAE7DiU,EADoB,IAApBS,EACa1U,EAAI,EAEJA,EAAI0U,EAAkB,EAGvCV,EAAYK,EAAarU,EAAIsT,EAErBvhB,KAAKiV,MAAM/J,KAAK,uBAAyBgX,EAAa,KACxD7qB,KAAKgG,GAAe4kB,EAAY,EAE9C,EAEAF,iBAAkB,WACd,IAAIrhB,EAAOV,KACP6O,EAASnO,EAAKT,WAAWof,QACzBjP,EAAM1P,EAAKc,QAAQ0J,KAAK,qBAE5BkF,EAAIoQ,MAAK,SAASvS,EAAG4B,GACbA,EAAG8E,aAAa,WAAajU,EAAKb,QAAQwb,SAASM,eAC/C9L,EAAGqT,aAAa,QAASxiB,EAAKb,QAAQwb,SAASK,YAE3D,IAEI7M,GAAUA,EAAOxD,OAAS,GAC1BwD,EAAOuU,SAAQ,SAAS/D,GACpB,IAAInT,EAAQmT,EAAMnT,MACd2D,EAAKO,EAAInF,OAAO,IAAMjW,EAAMqC,KAAK,SAAW,KAAO6U,EAAQ,MAE3D2D,EAAGxY,KAAK,WAAaqJ,EAAKb,QAAQwb,SAASK,aAC3C7L,EAAGxY,KAAK,QAASqJ,EAAKb,QAAQwb,SAASM,cAE/C,GAER,EAEAkG,kBAAmB,SAASwB,EAAMhE,EAAOxP,EAAI+R,GACzC,IAKI0B,EAJA9hB,EADOxB,KACQwB,QACf0T,EAAQ1T,EAAQ0J,KAAK,WAAamY,EAAO,YAAcA,EAAO,eAC9DzE,EAAcpd,EAAQ0J,KAAK,WAAamY,EAAO,YAAcA,EAAO,iBACpEE,EAAU,GAuBd,OApBIrO,EAAM7J,OAAS,IAEfkY,GADAD,EAAWpO,EAAMhK,KAAKmU,EAAQ,YACXhoB,KAAKwF,KAAO7H,EAAMwX,OAErC0I,EAAM7d,KAAKqG,GAAMC,IACjBuX,EAAMhK,KAAKnO,IAAI1F,KAAKqG,GAAME,IAC1BsX,EAAMhK,KAAK2E,GAAIxY,KAAKqG,GAAMkkB,GAC1B0B,EAASjsB,KAAK,CACVuqB,KAAM/jB,GACNtJ,GAAIgvB,KAIR3E,EAAYvT,OAAS,GApBdrL,KAqBFwjB,YAAYH,EAAMhE,EAAOxP,EAAI+R,GAGtChD,EAAY1T,KAAK,MAAM7T,KAAKqG,GAAMK,IAClCmX,EAAMhK,KAAK,MAAM7T,KAAKqG,GAAMK,IAErBwlB,CACX,EAEA5L,QAAS,WACL,IAAIpjB,EAAKyL,KAAKJ,QAAQvI,KAAKwF,KAAO,OAE9BtI,IACAyL,KAAKyjB,QAAUlvB,EAAK,eAE5B,EAEAivB,YAAa,SAASH,EAAMhE,EAAOxP,EAAI+R,GACnC,IAAIlhB,EAAOV,KACPwB,EAAUd,EAAKc,QACf0T,EAAQ1T,EAAQ0J,KAAK,WAAamY,EAAO,YAAcA,EAAO,eAC9DzE,EAAcpd,EAAQ0J,KAAK,WAAamY,EAAO,YAAcA,EAAO,iBACpEpU,EAAOiG,EAAMhK,KAAKnO,IAClB2mB,EAAa9E,EAAY1T,KAAKnO,IAElC6hB,EAAYvnB,KAAKqG,GAAMC,IACvBihB,EAAY1T,KAAKmU,EAAQ,WAAWhoB,KAAKqG,GAAMC,IAC/C+lB,EAAWrsB,KAAKqG,GAAMC,IAEtBihB,EAAY1T,KAAK2E,GAAIxY,KAAKqG,GAAMkkB,GAEhC3S,EAAKuR,MAAK,SAASvS,EAAGpH,GAClB,IAAI8c,EAAa,GAGjBA,GADAA,EAAajjB,EAAKkjB,UAAUF,EAAW5Y,GAAGmD,GAAG/C,KAAK2E,GAAK,UAAYwT,EAAMpV,IACjDG,OAAO1N,EAAKkjB,UAAU/uB,EAAEgS,GAAKqE,KAAK2E,GAAKwT,EAAMpV,IAErEpH,EAAIqc,aAAahmB,GAAWymB,EAAWta,KAAK,KAChD,GACJ,EAEAyY,mBAAoB,WAChB,IAAIphB,EAAOV,KAEP6jB,EADQnjB,EAAKwU,MACKhK,KAAKnO,IACvB6hB,EAAcle,EAAKc,QAAQ0J,KAAK,gCAChCwY,EAAa9E,EAAY1T,KAAKnO,IAElC6hB,EAAYvnB,KAAKqG,GAAMC,IACvBihB,EAAY1T,KAAK,SAAS7T,KAAKqG,GAAMC,IACrC+lB,EAAWrsB,KAAKqG,GAAMC,IACtBihB,EAAY1T,KAAK,MAAM7T,KAAKqG,GAAMK,IAElC8lB,EAAUrD,MAAK,SAASvS,EAAGpH,GACvB,IAAI8c,EAAa,GAGjBA,GADAA,EAAajjB,EAAKkjB,UAAUF,EAAW5Y,GAAGmD,GAAG/C,KAAK,MAAO,kBAAmB+C,IACpDG,OAAO1N,EAAKkjB,UAAU/uB,EAAEgS,GAAKqE,KAAK,MAAO,WAAY+C,IAE7EpH,EAAIqc,aAAahmB,GAAWymB,EAAWta,KAAK,KAChD,GACJ,EAEAya,uBAAwB,WACpB,IAAIrC,EAAgBzhB,KAAKyhB,eAAiB,CAAC,EACvC9V,EAAU3L,KAAK2L,QACfuJ,EAAQlV,KAAKkV,MACb6O,EAAgBnU,GAAYjE,GAASN,OAEpCoW,EAAc9V,SAAYuJ,EAAM7d,KAAK+F,MACtC4C,KAAK2hB,mBAELzM,EAAM7d,KAAK+F,GAAe2mB,GAElC,EAEAC,0BAA2B,WACvB,IAAIvC,EAAgBzhB,KAAKyhB,eAAiB,CAAC,EAEvCsC,EAAgBnU,GADN5P,KAAK2L,SACsBN,OAEpCoW,EAAc9V,SAAYoY,IAAkB/Q,GAAmBhT,KAAK2L,SAASN,SAC9ErL,KAAKwB,QAAQ0J,KAAK,UAAU+Y,WAAW5mB,IAEvC2C,KAAKkV,MAAM+O,WAAW7mB,IAE9B,EAEAskB,cAAe,WACX,IAQIzT,EAAGiW,EARH9P,EAAapU,KAAKyP,MAAMvE,KAAK,OAC7BiZ,EAAqB/P,EAAW/I,OAChC+Y,EAAWpkB,KAAKiV,MAAM/J,KAAK,OAC3BmZ,EAAarkB,KAAKwB,QAAQ0J,KAAK,kCAC/BoZ,EAAqBtkB,KAAKC,WAAWyH,QACrC6c,EAAgBvkB,KAAKC,WAAWmE,QAAU,EAC1C4e,EAAe,EACfwB,GAAiB,EAQrB,IALIxkB,KAAKkhB,gBACLoD,GAA0C,EAC1CC,GAAgC,GAG/BtW,EAAI,EAAGA,EAAIkW,EAAoBlW,IAChCmG,EAAWtJ,GAAGmD,GAAG5W,KAAKiG,GAAe0lB,EAAe/U,GAKxD,IAFA+U,EAAemB,EAAqBI,EAE/BtW,EAAI,EAAGA,EAAImW,EAAS/Y,OAAQ4C,IAC7BiW,EAAaE,EAAStZ,GAAGmD,GAErBjO,KAAKkhB,eAAiBgD,EAAWpU,SAAS,iBAEtCkT,GADAwB,EAC8B,EAEA,EAGlCA,GAAiB,IAEjBxB,GAA8B,EAC9BwB,GAAiB,GAGrBN,EAAW7sB,KAAKiG,GAAe0lB,GAKnC,IAFAA,EAAemB,EAAqBG,EAAqB,EAEpDrW,EAAI,EAAGA,EAAIoW,EAAWhZ,OAAQ4C,IAC/BoW,EAAWvZ,GAAGmD,GAAG5W,KAAKiG,GAAe0lB,EAAe/U,EAE5D,EAEA2V,UAAW,SAAS7Y,EAAU0Z,EAAQxW,GAClC,IAAI0V,EAAa,GAUjB,OARA5Y,EAASyV,MAAK,SAASsC,EAAG9S,GACtB,IAAIzb,EAAKyb,EAAK2E,aAAa9X,KAAO4nB,EAAS,IAAMxW,EAAI,IAAM6U,EAE3D9S,EAAKkT,aAAarmB,GAAItI,GAEtBovB,EAAWntB,KAAKjC,EACpB,IAEOovB,CACX,EAEAnC,iBAAkB,WACd,OAAOxhB,KAAKuZ,WAAavZ,KAAKkhB,cAAgB,EAAI,EACtD,EAEAxJ,SAAU,WACN,IAAIhX,EAAOV,KACPkV,EAAQxU,EAAKd,QAEZsV,EAAMa,GAAG,WAENb,EADAxU,EAAKb,QAAQga,WACLnZ,EAAKd,QAAQsL,KAAK,6BAElBxK,EAAKd,QAAQyC,SAAS,UAGvBgJ,SACP6J,EAAQrgB,EAAE,aAAa8O,SAASjD,EAAKd,UAI7CsV,EAAMM,SAAS,wBACfN,EAAMM,SAASxgB,EAAMygB,iBAAiB,WAAY,OAAQ/U,EAAKb,QAAQlB,OACvE+B,EAAKwU,MAAQA,EAEbxU,EAAKgC,UACT,EAEAgiB,oBAAqB,SAAS5d,EAAW2Z,GACrC,IAMIkE,EACAC,EAGAC,EAEAC,EACAthB,EACA6O,EACA0S,EAfArkB,EAAOV,KACPglB,EAAiBtkB,EAAKb,QAAQqb,wBAC9BrB,EAAanZ,EAAKb,QAAQga,WAC1BwG,EAAe3f,EAAK2f,aACpB4E,EAAqC,EAAjBD,EAAsB,EAC1CE,EAAgB,EAYhB7E,GAAgB3f,EAAKsK,eAAiBqV,EAAajrB,KAAK,MAAM,KAAOqrB,EAAG,KACxEJ,EAAa1e,IAAI7J,GAAIoa,SACrBmO,EAAe,MAGdA,IACDA,EAAe3f,EAAK2f,aAAexrB,EAAE,gFACrCiS,EAAUkP,OAAOqK,IAGrB7c,EAAaxO,EAAMwO,WAAWsD,GAE1B9H,KAAUC,GAAQkmB,SAAYlmB,GAAQwI,QAAUxI,GAAQG,SAAW,MACnEoE,IAA2B,GAG/BshB,EAAkBM,WAAWte,EAAU7E,IAAI,oBAE3CoQ,EAAOoO,EAAG/Q,SAAS2C,KAAO7O,EAAa4hB,WAAW3E,EAAGxe,IAAI,gBAAkB6E,EAAU4I,SAAS2C,KAAOyS,GAEhG9lB,GAGG6a,IACAqL,EAAiB7S,GAAQ7O,EAAayhB,EAAmB,GACzDN,EAAalE,EAAGtM,QAAQ,+CACI,GAAGpO,YAAc4e,EAAW,GAAG/b,YAC3Dic,EAAaO,WAAWT,EAAW1iB,IAAI,eACvC2iB,EAAe3lB,GAAQE,KAAO,EAAInK,EAAMwO,WAAWmhB,GAAcG,EAAkBD,EAAaK,EAAgB,EAIhH7S,IAHoB6S,GACAjmB,GAAQkmB,QAAUL,EAAkBD,EAAaK,EAAgB,GAEtCN,GAXnDvS,GAAQoO,EAAG,GAAG7X,YAelBmc,EAAMtE,EAAG/Q,SAASqV,IAAMK,WAAW3E,EAAGxe,IAAI,eAAiB6E,EAAU4I,SAASqV,IAAMK,WAAWte,EAAU7E,IAAI,oBAE7Goe,EAAape,IAAI,CACb8iB,IAAKA,EACL1S,KAAMA,EAAO4S,EACb3gB,OAAQxO,EAAY2qB,GACpBve,MAAwB,EAAjB8iB,EAAqBE,IAE/B9vB,KAAK,KAAMqrB,GACXvT,OAEDmT,EAAa1e,IAAIhG,GAAa7D,GAAI0K,GAAG7G,GAAa7D,GAAI,WAClD4I,EAAK2kB,mBAAmBhf,SAASoa,EAAGppB,KAAKrC,EAAMqC,KAAK,UAAW,IACnE,GACJ,EAEAiuB,4BAA6B,WACzB,IAAI5kB,EAAOV,KACPulB,EAAa7kB,EAAKkd,aAAeld,EAAKkd,aAAa1S,KAAK,SAAS5I,QAAUzN,IAE/E6L,EAAK+O,MAAMhO,IAAI8jB,GAAY/iB,GAAG9G,GAAY5D,EAAI,8BAA8B,SAASmL,GACjF,IAAIuiB,OAA8B,IAAdviB,EAAEwiB,QAA0BxiB,EAAEwiB,QAAWxiB,EAAEyiB,OAASziB,EAAEuiB,OAEtE/E,EAAK5rB,EAAEmL,MACPygB,EAAG3Q,SAAS,iBAAmB2Q,EAAG3Q,SAAS,0BAIzB,IAAX0V,GAAqC,IAAXA,GAMjC/E,EAAG,GAAGkF,aAAa3wB,EAAMqC,KAjrF3B,aAsrFFqJ,EAAKgkB,oBAAoBjE,EAAGtM,QAAQnX,IAAMyjB,EAC9C,GACJ,EAEAmF,2BAA4B,SAAS3iB,GAC7BpO,EAAEoO,EAAEyL,QAAQyF,QAAQ,oBAAoB9I,SAI5CxW,EAAEyV,UAAU3I,IAAIsB,GAEhBjD,KAAK6lB,2BACL7lB,KAAK8lB,oBACT,EAEAD,yBAA0B,WACtB,IAAIpF,EAECzgB,KAAKqgB,eAIVI,EAAK5rB,EAAEmL,KAAKqgB,cAAcjrB,KAAK,SAG3BqrB,EAAGvV,KAAKjU,EAAM8C,IAAYmR,KAAKjU,EAAM+C,GAAa,IAAM/C,EAAMgD,IAAgBiT,OAC9EuT,EAAGvV,KAAKjU,EAAMiD,IAAagT,OAC3BuT,EAAGvV,KAAKjU,EAAMmD,IAA0B8S,OACxCuT,EAAGvV,KAAKjU,EAAMoD,IAAmB6S,OAEzC,EAEA4Y,kBAAmB,WACX9lB,KAAKqgB,eACLrgB,KAAKqgB,aAAajrB,KAAK,MAClB0qB,YAAY,mBAEb9f,KAAKgL,gBAAkBhL,KAAK+d,WAC5B/d,KAAKqgB,aAAa1e,IAAI7J,GAAIoa,SAC1BlS,KAAKqgB,aAAe,MAEpBrgB,KAAKqgB,aAAaxU,OAG9B,EAEAka,iCAAkC,WAC9B,IAAIrlB,EAAOV,KACPulB,EAAa7kB,EAAKkd,aAAeld,EAAKkd,aAAa1S,KAAK,SAAS5I,QAAUzN,IAE/E6L,EAAKuc,kBAAoB,IAAIjoB,EAAM6N,WAAW0iB,EAAW9jB,IAAIf,EAAK+O,OAAQ,CACtExE,OAAQ,+CACR+a,UAAW,GACXC,QAAS,IACTC,KAAM,SAASjjB,GACX,IAAIwd,EAAK5rB,EAAEoO,EAAEyL,QAEbzL,EAAES,iBAEEhD,EAAK2f,eACL3f,EAAK2f,aAAajrB,KAAK,MAClB0qB,YAAY,mBACjBpf,EAAKmlB,4BAGTpF,EAAGjL,SAAS,mBAEZiL,EAAGvV,KAAKjU,EAAM8C,IAAYmR,KAAKjU,EAAM+C,GAAa,IAAM/C,EAAMgD,IAAgB4R,OAC9E4U,EAAGvV,KAAKjU,EAAMiD,IAAa2R,OAC3B4U,EAAGvV,KAAKjU,EAAMmD,IAA0ByR,OACxC4U,EAAGvV,KAAKjU,EAAMoD,IAAmBwR,OAEjCnL,EAAKgkB,oBAAoBjE,EAAGtM,QAAQnX,IAAMyjB,GAErC/f,EAAKwc,oCACNxc,EAAKwc,kCAAoCxc,EAAKklB,2BAA2B/kB,KAAKH,IAGlF7L,EAAEyV,UAAU9H,GAAG,QAAS9B,EAAKwc,kCACjC,GAER,EAEAiJ,aAAc,SAASna,EAAQoa,GAC3B,IAWIC,EAXA3lB,EAAOV,KACPsmB,IAAata,EAAOF,OACpBya,IAAava,EAAOC,OACpBpM,EAAUG,KAAKH,QACfmC,EAAahN,EAAMO,QAAQixB,SAAuC,EAA5BxxB,EAAMO,QAAQyM,YACpDyE,EAAmBlQ,EAAQyV,EAAnBsa,EAA2BvT,GAAqBC,GAAmBtS,EAAKiL,UAA6BmH,GAAwBE,GAAmBtS,EAAKiL,WAC7J8a,EAAeH,EAAW5lB,EAAKke,YAAcle,EAAKwU,MAClDyJ,EAASje,EAAKie,QAAU9pB,IACxB6xB,EAASJ,EAAW5lB,EAAKkd,aAAa1S,KAAK,SAAWxK,EAAK+O,MAAM0E,QAAQ,SACzEwS,EAAiB3a,EAAO4a,mBAAqB,GAC7CC,EAAuBjxB,EAAX0wB,EAAsBG,EAAavb,KAAK,SAAuBxK,EAAKuU,OAGpF,GAAIsR,EACAva,EAAO9J,MAAQkkB,EAAcO,EAAiBP,EAAcO,MADhE,CAkBA,GAbIjmB,EAAKie,QAAUje,EAAKsK,gBACpB2T,EAAS2H,EAAW5lB,EAAKie,OAAOtc,SAAS,yBAA2B3B,EAAKie,OAAOtc,SAAS,wBAKzFgkB,EAFAxmB,EAAQga,WAEF6M,EAAOxb,KAAK,0CAA0CJ,GAAGrE,GAC1DhF,IAAIglB,EAAapkB,SAAS,YAAY6I,KAAK,+CAA+CJ,GAAGrE,IAC7FhF,IAAIkd,EAAOzT,KAAK,YAAYA,KAAK,+CAA+CJ,GAAGrE,IAElFggB,EAAavb,KAAK,YAAYA,KAAK,+CAA+CJ,GAAGrE,GAG3F5G,EAAQga,WAAY,CACpB,IAAIiN,GAAY,EACZC,EAAarmB,EAAKc,QAAQU,QAAUF,EACpCE,EAAQkkB,EAAcA,EAAcO,EAAiBP,EAAcO,EAEnEL,GAAYO,EAAYT,EAAclkB,EAAQ6kB,KAC9C7kB,EAAQkkB,GAAeW,EAAaF,EAAwB,EAAZ7kB,IACpC,IACRE,EAAQkkB,GAEZU,GAAY,GAGZ5kB,EAAQ,IAAMA,GAASykB,IACvBN,EAAIpkB,IAAI,QAASC,GAEb2kB,IAEI3kB,EADA4kB,EACQC,EAAyB,EAAZ/kB,EAEb6kB,GAAaT,EAAcpa,EAAO9J,OAG9CukB,EACKhlB,IAAIilB,GACJjlB,IAAIkd,GACJ1c,IAAI,QAASC,GAEbokB,IACD5lB,EAAKsmB,aAAe9kB,KAKpCxB,EAAKumB,qCACL,MAAWb,EAAc,IAAMA,GAAeO,GAC1CN,EAAIpkB,IAAI,QAASmkB,GAGrBpa,EAAO9J,MAAQkkB,EAEf1lB,EAAKwmB,8BACLxmB,EAAKymB,2BACLzmB,EAAK0mB,0BACL1mB,EAAK2mB,sBA3DL,CA4DJ,EAEAC,WAAY,WACR,IAEIxgB,EACAygB,EACAnB,EACAO,EACAE,EAGAP,EACAD,EAAK5F,EAVL/f,EAAOV,KACPH,EAAUa,EAAKb,QAMf2nB,EAAWxnB,KAAK+d,UAChB/b,EAAahN,EAAMO,QAAQixB,SAAuC,EAA5BxxB,EAAMO,QAAQyM,cAI9B,IAAtBnC,EAAQib,WAAuBjb,EAAQib,YAA2C,IAA9Bjb,EAAQib,UAAUnP,WACtE7E,EAAYjH,EAAQga,WAAanZ,EAAKc,QAAQ0J,KAAK,uBAAuB5I,QAAU5B,EAAKc,QAErFgmB,EACA9mB,EAAKqlB,iCAAiCjf,GAEtCpG,EAAK4kB,4BAA4Bxe,GAGjCpG,EAAKoa,WACLpa,EAAKoa,UAAUvZ,UAGnBb,EAAKoa,UAAY,IAAI5lB,EAAGuyB,UAAU3gB,EAAUrF,IAAIf,EAAKkd,cAAe,CAChE8J,QAAW7nB,EAAQga,WAAa,GAAK,KAAO,mBAC5C8N,KAAM,SAASD,GACX,OAAO7yB,EAAE,2CAA2CoN,IAAI,CACpDqC,OAAQxO,EAAY4xB,EAAOtyB,KAAK,OAASsL,EAAKuU,MAAM5d,KAAK,iBAEjE,EACA2L,MAAO,SAASC,GACZwd,EAAK5rB,EAAEoO,EAAEiB,eAAe9O,KAAK,MAEzBoyB,GACA9mB,EAAKolB,oBAGT,IAAIY,EAASjG,EAAGtM,QAAQ,SACpB1N,EAAQ5R,EAAE0B,QAAQkqB,EAAG,GAAI9M,GAAc8M,EAAGtM,QAAQ,UAAUlJ,OAAO,aAInEwb,GAFJH,EAAWI,EAAOnkB,SAASuN,SAAS,yBAENpP,EAAKke,YAAcle,EAAKwU,MAClDyJ,EAASje,EAAKie,QAAU9pB,IAExB6L,EAAKie,QAAUje,EAAKsK,gBACpB2T,EAAS2H,EAAW5lB,EAAKie,OAAOtc,SAAS,yBAA2B3B,EAAKie,OAAOtc,SAAS,wBAG7F8H,GAAOzJ,EAAKc,QAAS,cAGjB6kB,EADAxmB,EAAQga,WACF6M,EAAOxb,KAAK,+CAA+CJ,GAAGrE,GAC/DhF,IAAIglB,EAAapkB,SAAS,YAAY6I,KAAK,+CAA+CJ,GAAGrE,IAC7FhF,IAAIkd,EAAOzT,KAAK,YAAYA,KAAK,+CAA+CJ,GAAGrE,IAElFggB,EAAapkB,SAAS,YAAY6I,KAAK,+CAA+CJ,GAAGrE,GAGnG,IAAIkF,EAAU9W,EAAEsB,IAAIuK,EAAKiL,SAAS,SAASmI,GACvC,OAAQA,EAAE7H,SAAYqa,GAAYxS,EAAEhI,SAAcwa,IAAaxS,EAAEhI,QAAYgI,EAAI,IACrF,IAEAyT,EAActkB,EAAEQ,EAAEmkB,SAClBxB,EAAcxwB,EAAW6qB,GACzBkG,EAAiB/W,GAAYjE,GAASlF,GAAOmgB,mBAAqB,GAClEC,EAAuBjxB,EAAX0wB,EAAsBG,EAAapkB,SAAS,SAAuB3B,EAAKuU,OAGhFhW,GAAQwI,QACR/G,EAAKc,QAAQgU,SAAS,yBAE9B,EACAkE,OAAQ,SAASzW,GACb,IAAI4kB,EAAgB7oB,IAAS,EAAI,EAC7B8oB,EAAe1B,EAAenjB,EAAEQ,EAAEmkB,SAAWC,EAAkBN,EAAcM,EAEjF,GAAIhoB,EAAQga,WAAY,CACpB,IAAI8E,EACA2H,GAAY5lB,EAAKme,aACjBF,EAASje,EAAKme,aAAaxc,SAAS,SAC7B3B,EAAKie,SACZA,EAASje,EAAKie,OAAOzT,KAAK,+BAEzByT,GAAWA,EAAO,KACnBA,EAAS9pB,KAEb,IAAI6xB,EAASjG,EAAGtM,QAAQ,SACpBsS,EAAeH,EAAW5lB,EAAKke,YAAcle,EAAKwU,MAClD4R,GAAY,EACZC,EAAarmB,EAAKc,QAAQU,QAAUF,EACpCE,EAAQ4lB,EAERxB,GAAYO,EAAYT,EAAclkB,EAAQ6kB,KAC9C7kB,EAAQkkB,GAAeW,EAAaF,EAAwB,EAAZ7kB,IACpC,IACRE,EAAQ4lB,GAEZhB,GAAY,GAGZ5kB,EAAQ,IAAMA,GAASykB,IACvBN,EAAIpkB,IAAI,QAASC,GAEb2kB,IAEI3kB,EADA4kB,EACQC,EAAyB,EAAZ/kB,EAEb6kB,EAAa5jB,EAAEQ,EAAEmkB,SAAWC,EAAkBN,EAAcM,EAGxEpB,EACKhlB,IAAIilB,GACJjlB,IAAIkd,GACJ1c,IAAI,QAASC,GAEbokB,IACD5lB,EAAKsmB,aAAe9kB,KAKhCxB,EAAKumB,qCACT,MAAWa,EAAe,IAAMA,GAAgBnB,GAC5CN,EAAIpkB,IAAI,QAAS6lB,EAEzB,EACAC,UAAW,WACP,IACI/b,EACA0a,EAFAsB,EAAWpyB,EAAW6qB,GAU1B,GANAtW,GAAOzJ,EAAKc,QAAS,IAEjBvC,GAAQwI,QACR/G,EAAKc,QAAQse,YAAY,0BAGzBsG,GAAe4B,EAAU,CACzBtB,EAAShmB,EAAKkd,aAAeld,EAAKkd,aAAa1S,KAAK,SAAS5I,QAAQ4I,KAAKnO,IAAIuF,QAAQb,IAAIf,EAAK+O,MAAMvE,KAAKnO,IAAIuF,SAAWme,EAAGle,SAE5H,IAAIkE,EAAQga,EAAGppB,KAAKrC,EAAMqC,KAAK,UAC1BoP,IACDA,EAAQigB,EAAOxb,KAAK,gDAAgDzE,MAAMga,KAE9EzU,EAAS4D,GAAYlP,EAAKiL,SAASlF,IAE5BvE,MAAQ8lB,EAEftnB,EAAK0E,QAAQvK,GAAc,CACvBmR,OAAQA,EACRic,SAAU7B,EACV4B,SAAUA,IAGdtnB,EAAKwmB,8BACLxmB,EAAKymB,2BACLzmB,EAAK0mB,0BACL1mB,EAAK2mB,sBACT,CAEA3mB,EAAKmlB,2BACLnlB,EAAKolB,oBACLrF,EAAK,IACT,IAIZ,EAGAyH,sBAAuB,SAAShI,GAC5B,IAAIzZ,EAAQyZ,EAAGzZ,QAEf,OAAOzG,KAAK4e,YAAY1T,KAAKnO,IAAI+N,GAAGrE,GAC/BhF,IAAIzB,KAAKiV,MAAM/J,KAAKnO,IAAI+N,GAAGrE,GACpC,EAEA0hB,iBAAkB,SAASthB,GACvB,IAAIuhB,EAAY,EAahB,OAXAvhB,EAAI2Z,MAAK,CAACvS,EAAG4B,KACT,IAAIwY,EAEJxY,EAAGhC,MAAMvJ,OAAS,IAClB+jB,EAAmBvyB,EAAY+Z,IAERuY,IACnBA,EAAYC,EAChB,IAGGD,CACX,EAEAE,gBAAiB,SAASrZ,EAAM3K,GAC5B,IAAI5D,EAAOV,KAENU,EAAK6nB,oBACN7nB,EAAK6nB,kBAAoB,CAAC,GAG9BtZ,EAAKuR,MAAK,CAACvS,EAAG4B,KACV,IAAItD,EAAMsD,EAAG8E,aAAa,YAE1BjU,EAAK6nB,kBAAkBhc,GAAOjI,CAAM,GAE5C,EAEAkkB,uBAAwB,SAASvZ,GAC7B,IAAIvO,EAAOV,KAEPiP,GAAQvO,EAAK6nB,kBACbtZ,EAAKuR,MAAK,CAACvS,EAAG4B,KACV,IAAItD,EAAMsD,EAAG8E,aAAa,mBAEnBjU,EAAK6nB,kBAAkBhc,EAAI,IAGtC7L,EAAK6nB,kBAAoB,IAEjC,EAEAE,qBAAsB,SAAStb,EAAQuB,GACnC,IAAIga,EAAQ1oB,KAAKuoB,kBACbI,EAAK3oB,KAAKC,WACV2oB,EAAS,CAAC,EAEdC,OAAO7yB,KAAK0yB,GAAOtF,SAAS0F,IACxB,IAAI1S,EAAOuS,EAAGxb,GAAQ2b,GAEtBF,EAAOxS,EAAK1H,IAAWga,EAAMI,EAAI,IAGrC9oB,KAAKuoB,kBAAoBK,CAC7B,EAEAG,oBAAqB,WACjB,IAIIC,EAAW/Z,EAJXvO,EAAOV,KACPipB,EAAUvoB,EAAKwoB,WACfriB,EAAMoiB,EAAQ7zB,KAAK2H,IACnBosB,EAAYrzB,EAAY+Q,GAIxBoI,EADApI,EAAIiJ,SAASnW,IACN+G,EAAK0oB,SAELviB,EAGPnG,EAAKke,aAID3P,GAHJpI,EAAMnG,EAAKwnB,sBAAsBrhB,IAEzBiJ,SAASnW,IACN+G,EAAKke,YAAY1T,KAAKjU,EAAM0C,IAE5B+G,EAAKke,YAAY1T,KAAKnO,IAAI+N,GAAGjE,EAAIJ,UAGvC+Z,MAAK,CAACvS,EAAG4B,KACV,IAAItJ,EAAWsJ,EAAGtJ,SACd8iB,EAAUx0B,EAAEgb,GAAIpO,IAAIf,EAAKuU,MAAM/J,KAAKnO,IAAI+N,GAAGvE,IAC3C+iB,EAAgB5oB,EAAKynB,iBAAiBkB,GAE1CA,EAAQpnB,IAAIrG,GAAQ0tB,EAAc,IAGtCra,EAAKhN,IAAIrG,GAAQE,IAGrB4E,EAAK8nB,uBAAuBvZ,GAE5Bga,EAAQnJ,YAAYtmB,IACpByvB,EAAQnJ,YAAYrmB,IAIhB0vB,IAFJH,EAAYlzB,EAAY+Q,KAGpBnG,EAAK0E,QAAQxK,GAAW,CACpBiM,MACAoI,OACAka,YACAH,aAGZ,EAEAO,iBAAiBN,EAASpiB,EAAKke,GAC3BkE,EACK7zB,KAAK2H,GAAI8J,GACT5E,IAAI,CACD8iB,IAAKA,GAEjB,EAEAyE,wBAAyB,WACrB,IAAIN,EAAalpB,KAAKkpB,WAElBO,GAAO,EAEXP,EACK1mB,GAAGlH,GAAYxD,GAAKmL,IACA,IAAbA,EAAEuiB,SACF0D,EAAWpJ,YAAYtmB,IACvB0vB,EAAW1T,SAAS/b,IACxB,IAEH+I,GAAGjH,GAAUzD,GAAKmL,IACE,IAAbA,EAAEuiB,SACF0D,EAAWpJ,YAAYrmB,IACvByvB,EAAW1T,SAAShc,IACxB,IAEHgJ,GAAGhH,GAAa1D,GAAI,KACjB2xB,GAAO,EAEPpkB,YAAW,KACHokB,GACAP,EAAW1T,SAAShc,GACxB,GAtBA,IAuBK,IAEZgJ,GAAG/G,GAAa3D,GAAI,KACjB2xB,GAAO,EACPP,EAAWpJ,YAAYtmB,GAAM,GAEzC,EAEAkwB,eAAgB,SAASxJ,EAAIpZ,GACzB,IAAImiB,EAAUjpB,KAAKkpB,WACfS,EAAQV,EAAQ/d,KAAKjU,kBAAmB,GACxC2yB,EAAavjB,SAASwjB,iBAAiBZ,EAAQ,IAAIW,YAEvD,OAAO1J,EAAGxQ,SAASqV,IACfK,WAAWlF,EAAGje,IAAI,eACjB6E,EAAU4I,SAASqV,IAAMK,WAAWte,EAAU7E,IAAI,oBACnD0nB,EAAM5lB,aACN6lB,EACA9iB,EAAUzD,WAClB,EAEAymB,qBAAsB,WAClB,IAAIhjB,EAAY9G,KAAKiV,MAAMd,QAAQnX,IAMnC,OAJIgD,KAAK4e,cACL9X,EAAYA,EAAUqN,QAAQld,sBAG3B6P,CACX,EAEAijB,kBAAmB,SAAS9mB,GACxB,IAOI8hB,EAPArkB,EAAOV,KACPkgB,EAAKrrB,EAAEoO,EAAEiB,eACT8lB,EAAe/mB,EAAEiB,cAAcH,aAC/BkmB,EAAmBhnB,EAAEinB,QACrBhB,EAAaxoB,EAAKwoB,WAClBiB,EAAcjK,EAAGiD,KAAKpmB,GAAK,YAC3B+J,EAAYpG,EAAKopB,uBAGhBZ,IACDA,EAAaxoB,EAAKwoB,WAAar0B,EAAE,uEACjCiS,EAAUkP,OAAOkT,GACjBxoB,EAAK8oB,0BAELN,EAAWvnB,IAAIhG,GAAa7D,GAAI0K,GAAG7G,GAAa7D,EAAI4I,EAAKqoB,oBAAoBloB,KAAKH,KAGtFqkB,EAAMrkB,EAAKgpB,eAAexJ,EAAIpZ,GAEH,IAAvBqjB,EAAY9e,QAAgB2e,EAAe,EAAIC,EAC1CE,EAAYra,SAASpV,KACtBgG,EAAK6oB,iBAAiBL,EAAYiB,EAAapF,GAG9C7E,EAAGpQ,SAASpV,KACbgG,EAAK6oB,iBAAiBL,EAAYhJ,EAAI6E,EAAMiF,EAGxD,EAEAI,wBAAyB,WACJpqB,KAAKkpB,WAGjBvnB,IAAIrG,GAAYxD,GAChB6J,IAAIpG,GAAUzD,GACd6J,IAAInG,GAAa1D,GACjB6J,IAAIlG,GAAa3D,EAC1B,EAEAuyB,gBAAiB,SAASpb,EAAMqb,EAAsBtB,GAClD,IAAItoB,EAAOV,KAEXiP,EAAKuR,MAAK,CAACvS,EAAG4B,KACV,IAAIuY,EAEJ,GAAIkC,EAAsB,CACtB,IAAI/jB,EAAWsJ,EAAGtJ,SACdgkB,EAAUvB,EACVwB,EAAU,EACVnB,EAAUx0B,EAAEgb,GAAIpO,IAAIf,EAAKuU,MAAM/J,KAAKnO,IAAI+N,GAAGvE,IAE/C8iB,EAAQ7I,MAAK,CAACvS,EAAGwc,KACb,IAAIpC,EAEJoC,EAAE5c,MAAMvJ,OAAS,IACjB+jB,EAAmBvyB,EAAY20B,IAERD,IACnBA,EAAUnC,EACd,IAGAkC,EAAUC,GACVD,EAAUC,EAEV9pB,EAAK8nB,uBAAuBa,EAAQve,GAAG,KAEvCpK,EAAK4nB,gBAAgBe,EAAQve,GAAG,GAAIyf,GAGxClB,EAAQpnB,IAAIrG,GAAQ2uB,EACxB,MACI1a,EAAGhC,MAAMvJ,OAAS,GAClB8jB,EAAYtyB,EAAY+Z,GAEpBmZ,EAAYZ,GACZvY,EAAGhC,MAAMvJ,OAAS0kB,EAAYlsB,GAE9B4D,EAAK4nB,gBAAgBzzB,EAAEgb,GAAKmZ,IAE5BtoB,EAAK8nB,uBAAuB3zB,EAAEgb,GAEtC,GAER,EAEAyI,aAAc,WACV,IAEIxR,EAAW4jB,EAAUvmB,EAAW+b,EAFhCxf,EAAOV,KACPH,EAAUa,EAAKb,QAGfA,EAAQib,YAAwC,IAA3Bjb,EAAQib,UAAU7L,OACvCvO,EAAKuU,MACA1S,SACAd,IAAIf,EAAKke,aACTpc,GAAG9G,GAAY5D,EAAI,uCAAwC4I,EAAKqpB,kBAAkBlpB,KAAKH,IAExFA,EAAKiqB,aACLjqB,EAAKiqB,YAAYppB,UAGrBuF,EAAYpG,EAAKopB,uBAEjBppB,EAAKiqB,YAAc,IAAIz1B,EAAGuyB,UAAU3gB,EAAW,CAC3C4gB,OAAQzwB,kBACR+L,MAAO,SAASC,GACZid,EAAKrrB,EAAEoO,EAAEiB,eAAe9O,KAAK2H,IAEzB2D,EAAKke,cACLsB,EAAKxf,EAAKwnB,sBAAsBhI,IAGpCA,EAAG1K,SAAShc,IAEZkH,EAAK0pB,0BAELM,EAAWznB,EAAEK,EAAEskB,SACfzjB,EAAYrO,EAAYoqB,EAC5B,EACAxG,OAAQ,SAASzW,GACb,IAAI+lB,EAAY7kB,EAAYlB,EAAEK,EAAEskB,SAAW8C,EACvCtC,EAAY,EAEZlI,EAAG7U,OAAS,IACZ+c,EAAY1nB,EAAKynB,iBAAiBjI,IAGlC8I,EAAYZ,IACZY,EAAYZ,GAGhBlI,EAAGje,IAAI,SAAU+mB,GAEjBtoB,EAAK6oB,iBAAiB7oB,EAAKwoB,WAAYhJ,EAAIxf,EAAKgpB,eAAexJ,EAAIpZ,GAAakiB,EACpF,EACAjB,UAAW,WACP,IAEI9Y,EAFA+Z,EAAYlzB,EAAYoqB,GACxBoK,GAAuB,EAGvBpK,EAAGpQ,SAASnW,KACZsV,EAAOvO,EAAK0oB,SAERlJ,EAAG7U,OAAS,GAAK4D,EAAK5D,OAAS6U,EAAG7U,SAClC4D,EAAOvO,EAAKke,YAAY1T,KAAKjU,EAAM0C,IAAUyoB,IAAIlC,GACjDoK,GAAuB,IAG3Brb,EAAOiR,EAGXxf,EAAK2pB,gBAAgBpb,EAAMqb,EAAsBtB,GAEjD9I,EAAGJ,YAAYtmB,IAEfkH,EAAKwoB,WAAWpJ,YAAYrmB,IAC5BiH,EAAKwoB,WAAW1T,SAAShc,IACzBkH,EAAK8oB,0BAEDc,IACArb,EAAOvO,EAAK0oB,UAGZjlB,GAAa6kB,GACbtoB,EAAK0E,QAAQxK,GAAW,CACpBiM,IAAKqZ,EACLjR,OACAka,UAAWhlB,EACX6kB,cAIR9I,EAAK,IACT,IAGZ,EAEA0K,WAAY,WACR,IAAIlqB,EAAOV,KACP+a,EAAcra,EAAKb,QAAQkb,YAE/B,IAAoB,IAAhBA,GAAyBA,GAAeA,EAAYpP,QAAU,CAE1DjL,EAAKwd,oBACLxd,EAAKwd,mBAAmB3c,UAG5B,IAAImlB,EAAShmB,EAAKc,QAAQa,SAAS,kBAEnC3B,EAAKwd,mBAAqBxd,EAAKc,QAAQqpB,eAAe,CAClDxL,MAAOrqB,EAAMwX,OACbse,YAAY,EACZ7f,OAAQvK,EAAK0B,QAAU,wBAA0B1K,EAAc,8BAAgCA,EAC/FqzB,UAAW,WACPrE,EAAOrkB,SAAS,uBAAuBV,IAAI,SAAW7J,EAAK,aAAa0K,GAAG,SAAW1K,EAAK,aAAa,SAASmL,GACzGvC,EAAKsZ,kBACLhlB,EAAMwO,WAAW9C,EAAK0B,QAAQ8I,KAAK,+BAAgClL,KAAKwD,YAExExO,EAAMwO,WAAW9C,EAAKge,YAAY0D,IAAInf,EAAEiB,eAAgBlE,KAAKwD,WAErE,GACJ,EACAwnB,QAAS,WACLtqB,EAAKmlB,2BACLa,EAAOrkB,SAAS,uBAAuBV,IAAI,SAAW7J,EAAK,YAC/D,EACAiK,KAAM,WACFrB,EAAKolB,mBACT,EACA6B,KAAM,SAASjZ,GACX,IAAI4E,EAAQ5E,EAAOrX,KAAKrC,EAAMqC,KAAK,UAInC,OAHIic,IACAA,EAAQte,EAAM4B,WAAW0c,IAEtBze,EAAE,8CACJ0T,KAAK+K,GAAS5E,EAAOrX,KAAKrC,EAAMqC,KAAK,WAAaqX,EAAOjQ,QACzDwX,QAAQjhB,EAAME,GAAG4J,KAAK,CAAEA,KAAM,SAAU4K,UAAW,kBAC5D,IACDtU,KAAK,iBACZ,CACJ,EAEA61B,aAAc,WACV,IAAIvqB,EAAOV,KACP+a,EAAcra,EAAKb,QAAQkb,cAEX,IAAhBA,GAAyBA,GAAeA,EAAYpP,WAChDjL,EAAKc,QAAQpM,KAAK,qBAClBsL,EAAKc,QAAQpM,KAAK,oBAAoBmM,UAG1Cb,EAAKc,QAAQ0pB,iBAAiB,CAC1BC,UAAWzqB,EAAKwd,mBAChBkN,WAAY1zB,EACZ2zB,mBAAoB,SAASxgB,EAAasG,GACtC,IAAIxF,EAAUyF,GAAsB1Q,EAAKiL,SACzC,OAAyC,IAAlCA,EAAQd,GAAaygB,UAAsB9Z,GAA2B7F,EAASjL,EAAKiL,QAASd,EAAasG,IAAgB,CACrI,EACAoa,gBAAiB,SAAStoB,GACtB,OAAOpO,EAAEoO,EAAEyH,QAAQnI,SAAS,KAAO1N,EAAEoO,EAAEyL,QAAQnM,SAAS,IAAMiP,GAA2BJ,GAAsB1Q,EAAKiL,SAAUjL,EAAKiL,QAAS1I,EAAE4H,YAAa5H,EAAEkO,cAAgB,CACjL,EACAqa,OAAQ,SAASvoB,GACb,IAAI0I,EAAUyF,GAAsB1Q,EAAKiL,SACrCK,EAASL,EAAQ1I,EAAEwoB,UACnBC,EAAWla,GAA2B7F,EAASjL,EAAKiL,QAAS1I,EAAEwoB,SAAUxoB,EAAEyoB,UAE/EhrB,EAAK0E,QAAQtK,GAAe,CACxB4wB,SAAUA,EACVD,SAAUl1B,EAAQyV,EAAQL,GAC1BK,OAAQA,IAGZtL,EAAKirB,cAAcD,EAAU1f,EAAuB,WAAf/I,EAAEuD,SAC3C,IAGZ,EAEAolB,eAAgB,SAASnd,EAASC,EAAQ9D,EAAQ9D,GAQ9C,IAPA,IAGI+B,EACAuH,EAJA1P,EAAOV,KACPkQ,EAAiBH,GAAetB,EAAQ,GAAI/N,EAAKiL,SACjDkgB,EAAe9b,GAAerB,EAAQhO,EAAKiL,SAI3CgD,EAAQ,GACHrG,EAAM,EAAGA,EAAMmG,EAAQpD,OAAQ/C,IAChCmG,EAAQnG,GAAKqD,UACbgD,EAAQA,EAAMP,OAAOK,EAAQnG,GAAKqD,UAItCyE,EADAtJ,EACMiE,GAASjE,EAAWA,EAAW,SAAWoJ,EAAerJ,IAAM,sDAE/DkE,GAASrK,EAAKkd,aAAcld,EAAK+O,MAAO,SAAWS,EAAerJ,IAAM,sDAGlF,IAjsFmBmJ,EAAMrE,EAASmgB,EAClCC,EACAC,EAEA3c,EA6rFI4c,EAAsB3a,GAAc7C,GAASpD,OAC7C6gB,EAAsB5a,GAAc,CAAC5C,IAASrD,OAE9CsD,EAAMtD,QACF4gB,EAAsB,GAA6B,IAAxBC,GAC3BrjB,EAAS,UACT2F,GAA2BC,EAASC,EAAQC,EAAOjO,EAAKiL,QAASjL,EAAKkd,aAAa1S,KAAK,SAAUxK,EAAK+O,MAAOzP,KAAKuZ,UAAW1Q,IAC/F,IAAxBojB,GAA6BC,EAAsB,IAC1DrjB,EAA+B,IAAtBgjB,EAAa7b,OAAcvB,EAAQ,GAAG9C,SAAY+C,EAAO/C,SAAYjL,EAAK4Y,OAAqB,SAAZ,UAC5F9K,GAA2BC,EAASC,EAAQC,EAAO4C,GAAiB7Q,EAAKiL,SAAUjL,EAAK+O,MAAO/O,EAAKkd,aAAa1S,KAAK,SAAUlL,KAAKuZ,UAAW1Q,KAGhJ6F,EAAO/C,SAAWuE,EAAeF,KAAO6b,EAAa7b,KAAO,GAAK6b,EAAa7b,KAAOE,EAAeF,KAAO,KAC3GtB,EAASmC,GAAkBnQ,EAAKiL,QAAS+C,EAAQD,EAAQ,GAAI7D,EAAQlK,EAAKiL,YAElEsgB,EAAsB,GAA6B,IAAxBC,EAC3BxrB,EAAKkrB,eAAejd,EAAOD,EAAQ9D,EAAQlK,EAAK+O,OACjB,IAAxBwc,GAA6BC,EAAsB,EAC1DxrB,EAAKkrB,eAAejd,EAAOD,EAAQ9D,EAAQlK,EAAK6kB,YAEhD7kB,EAAKkrB,eAAejd,EAAOD,EAAQ9D,KAIxCqhB,IAAwBC,IAztFhBlc,EA0tFGI,EAAIF,EAAeF,MA1tFhBrE,EA0tFuBjL,EAAKiL,QA1tFnBmgB,EA0tF4BG,EAztF9DF,EAAoBhd,GAAMuC,GAAc3F,IACxCqgB,EAAuBjd,GAAMwC,GAAiB5F,IAE9C0D,EAAUW,EAAKX,QAGXW,EAAKX,QAFTyc,EACIC,EAAoBC,EACJ3c,GAAW0c,EAAoBC,IAA0B,EAE1D3c,GAAW2c,EAAuBD,GAGjDA,EAAoBC,EACL3c,GAAW0c,EAAoBC,GAE9B3c,GAAW2c,EAAuBD,IAAuB,GA8sF7EvhB,GAAQ4F,EAAKF,EAAeF,KAAM6b,EAAa7b,KAAMpF,EAAQ6D,EAAQpD,OACzE,EAEA8gB,gBAAiB,SAAS1d,EAASG,EAAahE,GAC5C,IAaIwhB,EAAWC,EAAWC,EAbtB5rB,EAAOV,KACP0jB,EAAa7uB,IACb6V,EAAS+D,EAAQ,GACjB8d,EAAiBxe,GAAeU,GAChC5D,EAActU,EAAQmU,EAAQkF,GAAYlP,EAAKiL,UAC/C6gB,EAAYj2B,EAAQqY,EAAagB,GAAYlP,EAAKiL,UAElD8gB,EAAiBl2B,EAAQg2B,EAAe,GAAIvZ,GAAmBtS,EAAKiL,UACpE+gB,EAAUn2B,EAAQqY,EAAaoE,GAAmBtS,EAAKiL,UACvDghB,EAAcrb,GAAc5Q,EAAKiL,SAASN,OAC1Cib,IAAa1X,EAAY9C,OACzB6S,EAASje,EAAKie,QAAUje,EAAKc,QAAQ0J,KAAK,kBAK9C,GAFAkhB,EAAYC,EAAYK,EAEpB9d,EAAY3C,OAAQ,CACpB,IAAI2gB,EAAetG,EAAWhV,GAAc5Q,EAAKiL,SAAW4F,GAAiB7Q,EAAKiL,SAE9EoC,GAAe6e,GAAcvhB,OAAS,GACtC+gB,EAAYC,EAAYK,EAAU1sB,KAAK6sB,+BAA+BD,EAAcJ,GACpFF,EAAsBve,GAAe6e,EAAaE,MAAMN,IAAYnhB,OAAS,GAGzEib,GACAoG,EAAUhsB,EAAKke,YAAY1T,KAAK,YAChCkhB,EAAY1rB,EAAKkd,aAAa1S,KAAK,YACnCmhB,EAAYx3B,EAAE6L,EAAKme,cAAc3T,KAAK,qBAEtCwhB,EAAUhsB,EAAKuU,MAAMkO,OACrBiJ,EAAY1rB,EAAK+O,MAAM0T,OACvBkJ,EAAY1N,EAAOzT,KAAK,uBAAuBA,KAAK,mBAGhE,CAEIxK,EAAKqsB,iBACLviB,GAAQ9J,EAAKc,QAAQ0J,KAAK,yDAA0DL,EAAa2hB,EAAW5hB,EAAQ6D,EAAQpD,QAG5HohB,GAAkB,GAClBjiB,GAAQO,GAASrK,EAAKkd,aAAcld,EAAK+O,MAAM0T,OAAQ1rB,GAAWg1B,EAAgBL,EAAWE,GAA4C1hB,EAAQ2hB,EAAelhB,QAGhK3K,EAAKb,QAAQga,YACT4S,GAAkB,IAAM/rB,EAAKssB,sBAC7BxiB,GAAQO,GAASrK,EAAKke,YAAale,EAAKuU,MAAMkO,OAAQ1rB,GAAWg1B,EAAgBC,EAASJ,GAA4C1hB,EAAQ2hB,EAAelhB,QAIjKsT,GAAUA,EAAOtT,SACbohB,GAAkB,GAClBjiB,GAAQO,GAASrK,EAAKme,aAAcF,EAAOzT,KAAK,uBAAwB,0DAA2DuhB,EAAgBJ,EAAWC,GAA4C1hB,EAAQ2hB,EAAelhB,QAErOb,GAAQmU,EAAOzT,KAAK,8DAA+DL,EAAa2hB,EAAW5hB,EAAQ6D,EAAQpD,SAG/H,IAAI4D,EAAOvO,EAAKuU,MAAM5S,SAAS,uCAC3B3B,EAAKke,cACD+N,EAAcH,EACVG,GAAe9hB,GACfqM,GACIxW,EAAKke,YAAY1T,KAAK,4BACtBxK,EAAKwU,MAAMhK,KAAK,4BAChBuD,EAAQpD,QAGTshB,EAAc9hB,GACrBqM,GACIxW,EAAKwU,MAAMhK,KAAK,4BAChBxK,EAAKke,YAAY1T,KAAK,4BACtBuD,EAAQpD,QAIhBqY,EAAahjB,EAAKke,YAAY1T,KAAK,iDAGvC,IAAK,IAAI5C,EAAM,EAAG+C,EAAS4D,EAAK5D,OAAQ/C,EAAM+C,EAAQ/C,GAAO,EACzDkC,GAAQO,GAAS2Y,EAAWpb,GAAM2G,EAAK3G,GAAM,4CAA6CuC,EAAa2hB,EAAW5hB,EAAQ6D,EAAQpD,OAE1I,EAEAwhB,+BAAgC,SAASlhB,EAASgL,GAC9C,IAAIiW,EAAe7e,GAAepC,EAAQmhB,MAAMnW,IAActL,OAAS,EAAIM,EAAQmhB,MAAMnW,GAAehL,EAAQmhB,MAAM,EAAGnW,EAAc,GAAGsW,UACtIC,EAAuBnf,GAAe6e,GAAc,GAExD,OAAOr2B,EAAQ22B,EAAsBnf,GAAe/N,KAAK2L,SAC7D,EAEA0Z,mBAAoB,SAAS8H,GACzBntB,KAAKotB,cAAcxd,GAAY5P,KAAK2L,SAASwhB,GACjD,EAEAE,oBAAqB,WACjB,OAAOrtB,KAAKstB,sBAAyBttB,KAAKH,QAAQkb,aAAe/a,KAAKH,QAAQkb,YAAY9L,IAC9F,EAEAse,eAAgB,WACZ,IAAI7sB,EAAOV,KACPka,EAAaxZ,EAAK8sB,oBACL9sB,EAAKb,QAAQqa,aAAellB,EAAME,GAAGu4B,WAAWC,aAAahtB,EAAKb,QAAQqa,YAAYlK,KAEnGtP,EAAKyd,wBACLzd,EAAKyd,uBAAuB5c,UAGhCb,EAAKyd,uBAAyBzd,EAAKuU,MAAM4V,eAAe,CACpDxL,MAAO,gBACPyL,YAAY,EACZ7f,QAASiP,EAAa,iBAAmB,MAAQ1iB,IAAYkJ,EAAK4sB,qBAAuB,kBAAoB,IAC7G3F,KAAM,SAASjZ,GACX,IAAIiZ,EAAO9yB,EAAE,2CAA6CG,EAAME,GAAG4J,KAAK,CAAEA,KAAM,SAAU4K,UAAW,kBAAqB,UAE1H,GAAIwQ,GAAcxZ,EAAK0oB,SAAS/d,OAAS,EACrCsc,EAAK3R,OAAO,SAAWtV,EAAK0oB,SAAS/d,OAAS,IAAM3K,EAAKb,QAAQwb,SAASO,cAAgB,eACvF,CACH,IAAI+R,EAAQjf,EAAOyF,QAAQ3c,GAASm2B,QACpCA,EAAMziB,KAAK,qBAAqBgH,SAChCyb,EAAMziB,KAAK,MAAMsV,MAAK,SAAS/Z,EAAOmnB,GAClCjG,EAAK3R,OAAO,SAAW4X,EAAIC,UAAY,gBAC3C,GACJ,CAEA,OAAOlG,CACX,IACDvyB,KAAK,iBACZ,EAEA04B,iBAAkB,WACd,IAAIptB,EAAOV,KACPka,EAAaxZ,EAAK8sB,oBACL9sB,EAAKb,QAAQqa,aAAellB,EAAME,GAAGu4B,WAAWC,aAAahtB,EAAKb,QAAQqa,YAAYlK,KAEnGtP,EAAKuU,MAAM7f,KAAK,qBAChBsL,EAAKuU,MAAM7f,KAAK,oBAAoBmM,UAGxCb,EAAKuU,MAAMiW,iBAAiB,CACxB6C,eAAe,EACf5C,UAAWzqB,EAAKyd,uBAChBkN,mBAAoB,SAASxgB,EAAasG,GACtC,IAAIzK,GAAS,EACTgI,EAAS7Z,EAAE2C,EAASkJ,EAAK0B,SAAS0I,GAAGqG,GAMzC,OAJI+I,IACAxT,GAAUgI,EAAOqH,GAAG,gBAGjBrP,CACX,EACA6kB,gBAAiB,SAAStoB,GACtB,OAAIiX,IACQrlB,EAAEoO,EAAEyL,QAAQqH,GAAG,cAI/B,EACAqV,WAAY,KAAO5zB,EACnBw2B,UAAW,gBACXC,YAAa,WACbC,eAAgBr5B,EAAE,0HAClBs5B,gBAAiB,SAASD,EAAgBE,GACtC,IAAIC,EAAgBr5B,EAAMs5B,UAAUF,EAAW/rB,SAASjL,GAAW0T,GAAG,IAAIuH,KAC1E6b,EAAejsB,IAAI,CACfssB,UAAW,oBACXlc,KAAMgc,GAEd,EACAG,kBAAmB,SAASvrB,GACxB,IAAIkoB,EAAYloB,EAAEkoB,UAElB,GAAIA,EACA,OAAOA,CAEf,EACAK,OAAQ,SAASvoB,GACbvC,EAAK+tB,kBAAkBxrB,EAC3B,GAER,EAEAwrB,kBAAmB,SAASxrB,GACxB,IAAIvC,EAAOV,KACP0uB,EAAO,CACHhD,SAAyB,UAAfzoB,EAAEuD,SAAuBvD,EAAEyoB,SAAW,EAAIzoB,EAAEyoB,SACtDD,SAAUxoB,EAAEwoB,UAEhB5kB,EAAM5D,EAAErD,QACRsa,EAAaxZ,EAAK8sB,oBACjB9sB,EAAKb,QAAQqa,aAAellB,EAAME,GAAGu4B,WAAWC,aAAahtB,EAAKb,QAAQqa,YAAYlK,KAGvF0e,EADAxU,GAAcxZ,EAAK0oB,SAAS/d,OAAS,EAC9BnV,EAAOw4B,EAAM,CAChBzf,KAAMvO,EAAK0oB,WAGRlzB,EAAOw4B,EAAM,CAChB7nB,IAAKA,IAIRnG,EAAK0E,QAAQjK,GAAYuzB,IAC1BhuB,EAAKiuB,YAAYzU,EAAaxZ,EAAK0oB,SAAWviB,EAAK6nB,EAAKhD,SAEhE,EAEAiD,YAAa,SAAS1f,EAAMxI,GACxB,IAAI/F,EAAOV,KACPC,EAAaS,EAAKT,WAClB2uB,EAAaluB,EAAKuU,MAAM5S,SAAS7K,GAAS6T,OAC1CwjB,EAAanuB,EAAKouB,SAASpuB,EAAKuU,MAAM5S,SAAS7K,GAASsT,GAAGrE,IAC3DqQ,EAAQ7H,EAAKX,UAAUnY,KAAI,SAAS0Q,GAChC,OAAOnG,EAAKouB,SAASjoB,EACzB,IAECgoB,EAKDpoB,EAAQxG,EAAW8R,QAAQ8c,IAH3BA,EAAanuB,EAAKouB,SAASpuB,EAAKuU,MAAM5S,SAAS7K,GAASsT,GAAG8jB,EAAa,IACxEnoB,EAAQxG,EAAW8R,QAAQ8c,GAAc,GAKzCpoB,GAAS,IACT/F,EAAKquB,cAAe,EACpB9uB,EAAW+uB,SAASvoB,EAAOqQ,GAC3BpW,EAAKquB,cAAe,EAE5B,EAEAE,eAAgB,SAAStjB,GACrB,IAAIjL,EAAOV,KAEX2L,EAAUA,GAAWjL,EAAKiL,QAE1B,IAAK,IAAIsC,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAAK,CACrC,IAAIjC,EAASL,EAAQsC,GAEjBjC,EAAOL,QACPjL,EAAKuuB,eAAejjB,EAAOL,SAE3BjL,EAAK0sB,cAAcphB,EAE3B,CACJ,EAEAohB,cAAe,SAASphB,GACpB,IAGIvF,EACAga,EACAyO,EACAC,EACA7I,EAEAD,EACA+I,EACAC,EAAY7rB,EAGZ8rB,EACAC,EAfA7uB,EAAOV,KACPH,EAAUa,EAAKb,QACf8L,EAAUjL,EAAKiL,QAMf6jB,EAAgB9uB,EAAKkd,aAAejK,GAAcjT,EAAKkd,aAAa1S,KAAK,iBAAiBD,OAAO2C,IAAevC,OAAS,EAIzHokB,EAAyB,8CACzBC,EAAiC,uDAiBrC,IAXI1jB,EADiB,iBAAVA,EACEL,EAAQK,GACV/V,EAAc+V,GACZ5V,EAAKib,GAAY1F,IAAU,SAASyK,GACzC,OAAOA,IAASpK,CACpB,IAAG,GAEM5V,EAAKib,GAAY1F,IAAU,SAASyK,GACzC,OAAOA,EAAKlK,QAAUF,CAC1B,IAAG,KAGSG,GAAUH,GAA1B,CAIAmjB,EAAWvf,GAAYjE,GACvByjB,EAAWpjB,EAAO4a,kBAClBngB,EAAQlQ,EAAQyV,EAAQmjB,GAUxBG,GADA7O,GALIyO,GAHJ5I,EAAWta,EAAOF,QAGApL,EAAKkd,aAAavb,SAAS,SAE3B3B,EAAK+O,MAAMlN,UAGZ2I,KAAK,gBAAkBzE,EAAQ,OACtCyE,KAAK,8CAEf,IAAIub,EAAeH,EAAW5lB,EAAKke,YAAcle,EAAKwU,MAClDyJ,EAASje,EAAKie,QAAU9pB,IAExB6L,EAAKie,QAAUje,EAAKsK,gBACpB2T,EAAS2H,EAAW5lB,EAAKie,OAAOtc,SAAS,yBAA2B3B,EAAKie,OAAOtc,SAAS,wBAG7F,IAAIstB,EAAchR,EAAOzT,KAAK,SAAS5I,QAEnC5B,EAAKkd,eAAiB0I,IACtB7f,GAAS+oB,GAIb,IAAK,IAAI1M,EAAI,EAAGA,EAAIqM,EAAS9jB,QACrB8jB,EAASrM,KAAO9W,EADa8W,IAIzBqM,EAASrM,GAAG7W,QACZxF,IAMR5G,EAAQga,YACRwM,EAAM6I,EAAYhkB,KAAKukB,GAAwB3kB,GAAGrE,GAC7ChF,IAAIglB,EAAapkB,SAAS,YAAY6I,KAAKukB,GAAwB3kB,GAAGrE,IACtEhF,IAAIkuB,EAAYzkB,KAAK,YAAYA,KAAKukB,GAAwB3kB,GAAGrE,IAEjE6f,IACD+I,EAAa5I,EAAalkB,SAC1BiB,EAAaxO,EAAMwO,WAAW6rB,KAGlChJ,EAAMI,EAAapkB,SAAS,YAAY6I,KAAKukB,GAAwB3kB,GAAGrE,GAG5E,IAAImpB,EAASV,EAAYztB,IAAIglB,GAAchlB,IAAIkuB,GAE3C1wB,GAAQ4wB,QACRpP,EAAGxe,IAAI,cAAe,WAG1B,IAAI6tB,EAAiBl6B,EAAW6qB,GAIhC4F,EAAInkB,MAAM,IACV0tB,EAAO3tB,IAAI,eAAgB,SAC3BokB,EAAInkB,MAAMpG,IACV8zB,EAAOpa,SAAS,iBAChBoa,EAAO3tB,IAAI,eAAgB,IAE3BstB,EAAUD,EAAKjkB,OAASzV,EAAW05B,GAAQ15B,EAAW6qB,GAAM7qB,EAAW6qB,GAGvE,IAAIsP,EAAiB/4B,KAAKqJ,KAAKrJ,KAAK2N,IAChC4qB,EACA35B,EAAW6wB,EAAavb,KAAK,2BAA2BJ,GAAG,GAAGzI,SAASqtB,GAAgC5kB,GAAGrE,IAC1G7Q,EAAW+5B,EAAYzkB,KAAKnO,IAAI+N,GAAG,GAAGzI,SAASqtB,GAAgC5kB,GAAGrE,MACjF,EAcL,GAZI2oB,GAAYA,EAAWW,IACvBA,EAAiBX,GAGrB/I,EAAInkB,MAAM6tB,GACV/jB,EAAO9J,MAAQ6tB,EAEX9wB,GAAQ4wB,QACRpP,EAAGxe,IAAI,cAAe,IAItBpC,EAAQga,WAAY,CAIpB,IAHA,IACI/H,EADAF,EAAOsd,EAAYhkB,KAAK,OAExB6b,EAAa,EACRze,EAAM,EAAG+C,EAASuG,EAAKvG,OAAQ/C,EAAM+C,EAAQ/C,GAAO,EAEzD,IADAwJ,EAAWF,EAAKtJ,GAAKuF,MAAM3L,SACe,GAA1B4P,EAASC,QAAQ,KAC7BgV,GAAc1gB,SAASyL,EAAU,QAC9B,KAAIF,EAAK9G,GAAGxC,GAAKwH,SAAS,eAE1B,CACHiX,EAAa,EACb,KACJ,CAJIA,GAAc1gB,SAASuL,EAAK9G,GAAGxC,GAAKpG,QAAS,GAIjD,CAGA6kB,GACA6I,EAAOpP,MAAK,WACRxgB,KAAK6N,MAAM3L,MAAQ6kB,EAAajqB,EACpC,GAER,CAEA8yB,EAAO9P,YAAY,iBAEftc,GACAxO,EAAMwO,WAAW6rB,EAAY7rB,GAGjC9C,EAAK0E,QAAQvK,GAAc,CACvBmR,OAAQA,EACRic,SAAU6H,EACV9H,SAAU+H,IAGdrvB,EAAKwmB,8BACLxmB,EAAKymB,2BACLzmB,EAAK0mB,0BACL1mB,EAAK2mB,sBAjIL,CAkIJ,EAEAsE,cAAe,SAASa,EAAWxgB,EAAQpB,GACvC,IAMIolB,EANAtvB,EAAOV,KACPuC,EAASmK,GAAaV,EAAQtL,EAAKiL,SACnCA,EAAUpJ,EAASA,EAAOoJ,QAAUjL,EAAKiL,QACzCd,EAActU,EAAQyV,EAAQL,GAC9BskB,EAAatkB,EAAQ6gB,GACrB/K,EAAgB/gB,EAAK+gB,eAAiB,CAAC,EAEvC6E,IAAa2J,EAAWnkB,OACxB6gB,EAAcrb,GAAc5Q,EAAKiL,SAASN,OAC1C6kB,EAAmC95B,EAAKwZ,GAAYlP,EAAKiL,UAAU,SAASK,GAAU,OAAOA,EAAOmkB,yBAA2B,IAEnI,GAAItlB,IAAgB2hB,IAIfxgB,EAAOF,SAAUwa,GAAqD,GAAzC/U,GAAiB7Q,EAAKiL,SAASN,WAI7DW,EAAOF,QAAWwa,GAA2B,GAAfqG,GAAlC,CAIAjsB,EAAKolB,oBAEDlb,IAAW9V,IACX8V,EAAS4hB,EAAY3hB,GAGzB,IAAIulB,EAAgB,CAACpkB,GAErBtL,EAAKkrB,eAAewE,EAAeH,EAAYrlB,GAE3ClK,EAAKkd,eACL5L,GAAgBtR,EAAK+O,OACrBuC,GAAgBtR,EAAKkd,eAGrBqS,EAAWtkB,UAEXskB,GADAA,EAAargB,GAAYqgB,EAAWtkB,UACZf,EAAS,EAAIqlB,EAAW5kB,OAAS,IAGzDW,EAAOL,UACPykB,EAAgBxgB,GAAY5D,EAAOL,UAGvCjL,EAAKyrB,gBAAgBiE,EAAeH,EAAYrlB,GAGhDolB,GADAA,IAAgBhkB,EAAOF,SACMwa,EAC7Bta,EAAOF,OAASwa,EAEhB3a,EAAQmB,OAAOlC,EAAS4hB,EAAYA,EAAY,EAAG,EAAGxgB,GACtDL,EAAQmB,OAAOjC,EAAc2hB,EAAY3hB,EAAcA,EAAc,EAAG,GAExEnK,EAAK2vB,oBACL3vB,EAAK4vB,cACL5vB,EAAKiY,aAELjY,EAAK6vB,yBACL7vB,EAAK8vB,uBAEDN,EAAiC7kB,OAAS,GAC1C3K,EAAK+vB,mBAET/vB,EAAKgwB,qBACLhwB,EAAKwmB,8BACLxmB,EAAK0mB,0BACL1mB,EAAKymB,2BACLzmB,EAAKiwB,0BACLjwB,EAAK2mB,uBAED5F,EAAc9V,SACdjL,EAAKE,UAGJovB,IAID1J,EACA5lB,EAAK0E,QAAQrK,GAAY,CACrBiR,OAAQA,IAGZtL,EAAK0E,QAAQpK,GAAc,CACvBgR,OAAQA,IAlEhB,CAqEJ,EAEAukB,uBAAwB,WACpB,IACI7gB,EAAS,EAET1P,KAAK4d,eAELlO,EAASF,GADAxP,KAAK4d,aAAa1S,KAAK,SACCoG,GAActR,KAAK2L,WAExD6D,GAAgBxP,KAAKyP,MAAO8B,GAAiBvR,KAAK2L,SAAU+D,EAChE,EAEAkhB,WAAY,SAAS5kB,GACjB,IAAIL,EAAU3L,KAAK2L,QAUnB,IAPIK,EADiB,iBAAVA,EACEL,EAAQK,GAER5V,EAAKuV,GAAS,SAASyK,GAC5B,OAAOA,EAAKlK,QAAUF,CAC1B,IAAG,MAGQA,EAAOF,SAAUE,EAAOC,OAAvC,CAIID,EAAO6G,QACP7S,KAAK6wB,cAAcllB,EAAQoG,QAAQ/F,IAGvC,IAAIvF,EAAQ6K,GAAc3F,GAASN,OAAS,EAC5CrL,KAAK2rB,cAAcllB,EAAOuF,GAAQ,EAPlC,CAQJ,EAEA8kB,aAAc,SAAS9kB,GACnB,IAAIL,EAAU3L,KAAK2L,QAUnB,IAPIK,EADiB,iBAAVA,EACEL,EAAQK,GAER5V,EAAKuV,GAAS,SAASyK,GAC5B,OAAOA,EAAKlK,QAAUF,CAC1B,IAAG,KAGSA,EAAOF,SAAUE,EAAOC,OAAxC,CAIA,IAAIxF,EAAQ6K,GAAc3F,GAASN,OACnCrL,KAAK2rB,cAAcllB,EAAOuF,GAAQ,EAHlC,CAIJ,EAEA+kB,YAAa,SAAS/kB,GAClB,IAAIL,EAAU3L,KAAK2L,UAGfK,EADiB,iBAAVA,EACEL,EAAQK,GAER5V,EAAKuV,GAAS,SAASyK,GAC5B,OAAOA,EAAKlK,QAAUF,CAC1B,IAAG,KAGQA,EAAO6G,QAAU7G,EAAOC,QAInCD,EAAOF,SACP9L,KAAK8wB,aAAanlB,EAAQoG,QAAQ/F,IAE9BA,EAAOF,UAKfE,EAAO6G,QAAS,EAChB7S,KAAKqnB,uBACT,EAEAwJ,cAAe,SAAS7kB,GACpB,IAAIL,EAAU3L,KAAK2L,SAGfK,EADiB,iBAAVA,EACEL,EAAQK,GAER5V,EAAKuV,GAAS,SAASyK,GAC5B,OAAOA,EAAKlK,QAAUF,CAC1B,IAAG,KAGSA,EAAO6G,SAAU7G,EAAOF,SAAUE,EAAOC,SAIzDjM,KAAKgxB,wBAAwB,CAAChlB,IAC9BhM,KAAKixB,oBAAoBre,GAAcjH,IAEvCK,EAAO6G,QAAS,EAChB7S,KAAKqnB,uBAE4B,IAA7BrnB,KAAKkxB,sBACLlxB,KAAK2Y,aACD3Y,KAAK+sB,iBACL/sB,KAAKmxB,4BAGjB,EAEAC,UAAW,SAASC,GAChB,IAAIC,EAAqB,EAMzB,OAJItxB,KAAK4e,cAAgB/pB,EAAEiC,SAASkJ,KAAK4e,YAAY,GAAIyS,EAAG,MACxDC,EAAqB1hB,GAAY0B,GAActR,KAAK2L,UAAUN,QAG3DxW,EAAEw8B,GAAI9uB,SAASF,SAAS,2CAA2CoE,MAAM4qB,GAAMC,CAC1F,EAEAC,mBAAoB,SAASzqB,IACzBA,EAAYjS,EAAEiS,IAECiP,GAAGhZ,KAA4B,UAArBiD,KAAKwxB,cAC1B1qB,EAAYA,EAAUqN,QAAQpX,KAGlC,IAAIxI,EAAKuS,EAAUzP,KAAKrC,EAAMqC,KAAK,SAAWyP,EAAUoE,KAAK,sBAAsB7T,KAAKrC,EAAMqC,KAAK,QAEnG,OAAO2I,KAAKC,WAAWwxB,SAASl9B,EACpC,EAEAm9B,sBAAuB,SAAS1hB,GAC5B,IAAIohB,EAAYpxB,KAAKoxB,UAAUphB,GAC3B2hB,EAAgB,EAOpB,OALI3xB,KAAKgtB,uBAEL2E,GADAA,EAAgBtrB,SAASxR,EAAEmb,GAAMmE,QAAQpX,IAAImO,KAAK,MAAM5I,QAAQjL,KAAK,WAAY,KAChD,EAAIs6B,EAAgB,EAAI,GAGtDP,EAAYO,CACvB,EAEA3Y,UAAW,WACP,IAAItY,EAAOV,KACPya,EAAW/Z,EAAKb,QAAQ4a,SAcxBA,IACAza,KAAKwB,QAAQgU,SAAS,cAGT,WADF9U,EAAK8wB,aAEZ9wB,EAAKwU,MAAMzT,IAAIf,EAAKke,aACfpc,GAAGlH,GAAYxD,EAAIR,EAAS,IAAMC,GAAS,SAAS0L,GACjD,IAAIyL,EAAS7Z,EAAEoO,EAAEyL,QACQ,WAArBhO,EAAK8wB,aAA4B9iB,EAAOoB,SAAS,eAAiBpB,EAAOyU,OAAO9rB,KAAKrC,EAAMqC,KAAK,UAChG4L,EAAES,gBAEV,KAEoB,IAApB+W,EAAS3Q,SACLzK,IACAqB,EAAKc,QACAgB,GAAGnH,GAAQvD,EAAI,yCAAyC,SAASmL,GAG9DpO,EAAEoO,EAAEyL,QAAQtJ,QAAQ,QACxB,IACC5C,GAAGnH,GAAQvD,EAAI,gBAAgB,SAASmL,GAChCpO,EAAEoO,EAAEyL,QAAQqH,GAAG,UAChBlhB,EAAEoO,EAAEiB,eAAegH,KAAK,0BAA0B9F,QAAQ,QAElE,IACC5C,GAAGlH,GAAYxD,EAAI,gCAAgC,SAASmL,GACzD,IAAI2uB,EAAgBlxB,EAAKmxB,eAErBD,GAAiBA,EAAc,KAAO/8B,EAAEiC,SAAS86B,EAAc,GAAI3uB,EAAEyL,SAAWkjB,EAAc,KAAO3uB,EAAEyL,QACvGhO,EAAKoxB,sBAAuB,EAE5BpxB,EAAKoxB,sBAAuB,CAEpC,IAGRpxB,EAAK2c,mBAAqB,IAAIroB,EAAM6N,WAAWnC,EAAKc,QAAS,CACzDyJ,OAAQ,+BACRlI,gBAAgB,EAChBgvB,IAAK,SAAS9uB,GACV,IAAIouB,EAAKx8B,EAAEoO,EAAEyL,QACbsjB,EAAetxB,EAAKke,aAAeyS,EAAGld,QAAQ,SAAS,KAAOzT,EAAKke,YAAY,GAE/Ele,EAAKoxB,sBAAuB,EAExBT,EAAGvhB,SAAS,qBACZuhB,EAAGvhB,SAAS,kBACZuhB,EAAGvhB,SAAS,iBACZuhB,EAAGvhB,SAAS,gBACZuhB,EAAGY,IAAI,0BAA0B5mB,QAChCgmB,EAAGld,QAAQ,SAAS,KAAOzT,EAAKuU,MAAM,KAAO+c,GAC9Cn9B,EAAEoO,EAAEyL,QAAQqH,GAAG,YAIfrV,EAAK+Z,SACD/Z,EAAK+Z,SAASyX,OACdr9B,EAAEY,KAAiB2P,QAAQ,QAC3B1E,EAAKyxB,YACLzxB,EAAK0xB,SAASf,IAEd3wB,EAAK2xB,wBAGT3xB,EAAK0xB,SAASf,GAEtB,IAGJ3wB,EAAKc,QAAQgB,GAAG,UAAY1K,GAAI,WAEvBjD,EAAEiC,SAASkJ,KAAMvK,OAClBmM,aAAalB,EAAK6b,OAClB7b,EAAK6b,MAAQ,KAErB,IACC/Z,GAAG,WAAa1K,GAAI,SAASmL,GAC1B,IAAIqvB,GAAkB,GAEjBjzB,IAASqB,EAAKoxB,sBAAyBpxB,EAAK6xB,qBAC7CD,GAAkB,GAGtB5xB,EAAKoxB,sBAAuB,EAExBQ,IACA5xB,EAAK6b,MAAQlX,YAAW,WApG9B,IACFqJ,EACAsB,EADAtB,EAASjZ,KACTua,EAAOtP,EAAKmxB,iBAEJ7hB,EAAK,KAAOnb,EAAEiC,SAASkZ,EAAK,GAAItB,IAAWsB,EAAK,KAAOtB,IAAW7Z,EAAE6Z,GAAQyF,QAAQ,0BAA0B9I,SAClH3K,EAAK+Z,SAASyX,MACdxxB,EAAKyxB,YAELzxB,EAAK2xB,wBA8FD,GAAG,GAEX,OAGoB,IAApB5X,EAAS3Q,SACTpJ,EAAKc,QAAQgB,GAAGnH,GAAQvD,EAAI,4EAA4E,SAASmL,GAC7G,IAAIrD,EAAU/K,EAAEmL,MACXU,EAAK8xB,eAAe5yB,KAGzBqD,EAAES,iBACFhD,EAAK+xB,QAAQ7yB,EAAQuU,QAAQpX,KACjC,IAEI2D,EAAKgyB,4BACLhyB,EAAKc,QAAQgB,GAAG,WAAa1K,EAAI,gCAAgC,WACzD4I,EAAK+Z,WAAa/Z,EAAK+Z,SAASyX,OAChCxxB,EAAK2xB,uBAEb,MAKa,IAArB5X,EAASlZ,QACTb,EAAKc,QAAQgB,GAAGnH,GAAQvD,EAAI,8EAA8E,SAASmL,GAC/G,IAAIrD,EAAU/K,EAAEmL,MACXU,EAAK8xB,eAAe5yB,KAGzBqD,EAAES,iBACFT,EAAE0vB,kBACFjyB,EAAKkyB,UAAUhzB,EAAQuU,QAAQpX,KACnC,IAGA2D,EAAKc,QAAQgB,GAAGnH,GAAQvD,EAAI,8EAA8E,SAASmL,GAC1GvC,EAAK8xB,eAAe39B,EAAEmL,SAG3BiD,EAAE0vB,kBAEGjyB,EAAKmyB,iBACN5vB,EAAES,iBAEV,IAGZ,EAEA0uB,SAAU,SAASpiB,GACfA,EAAOnb,EAAEmb,GAET,IAAItP,EAAOV,KACXgM,EAAS4D,GAAYlP,EAAKiL,SAASjL,EAAKgxB,sBAAsB1hB,IAC1D8iB,EAAQpyB,EAAK6wB,mBAAmBvhB,GAIpC,GAFAtP,EAAKyxB,YAEDW,GAASC,GAAiB/mB,EAAQ8mB,KAAW9mB,EAAOV,QAAS,CAC7D,GAAI5K,EAAK0E,QAAQpN,EAAY,CAAE86B,MAAOA,IAClC,OAGJpyB,EAAKsyB,mBAAmBF,GAExBpyB,EAAKmxB,eAAiB7hB,EAElBtP,EAAKuyB,2BACLvyB,EAAKwyB,sBAETxyB,EAAK+Z,SAAWzK,EAAKwF,SAAS,eACzB2d,cAAc,CACXC,OAAQ/f,GAAUrH,GAClB8mB,MAAOA,EACPn0B,KAAM+B,EAAKb,QAAQlB,KACnB+P,OAAQhO,EACR8qB,OAAQ,SAASvoB,GACTvC,EAAK0E,QAAQnN,EAAM,CAAEib,OAAQjQ,EAAEiQ,OAAQpM,UAAWkJ,EAAM8iB,MAAOA,KAC/D7vB,EAAES,gBAEV,EACA2vB,aAAY3yB,EAAK4yB,6BAA8B5yB,EAAKssB,uBAAyBtsB,EAAK6yB,kBAEnFn+B,KAAK,iBAEZ,IAAI8qB,EAAKlQ,EAAKzN,SAASiT,SAAS,mBAE5B9U,EAAKsK,gBACLwoB,GAAgBtT,EAAG,GAAIxf,EAAK+yB,YAAYvT,GAAI1K,SAAS,mBAAmB,IACxE9U,EAAKgzB,qBAGThzB,EAAK0E,QAAQrN,EAAM,CAAE+O,UAAWkJ,EAAM8iB,MAAOA,GACjD,CACJ,EAEAa,iCAAkC,WAC9B,IAAIze,EAAQlV,KAAKkV,MACb9S,EAAU8S,EAAM3S,SAEhBP,EAAYkT,EAAM,GAAGtM,YAAcxG,EAAQ,GAAG4D,YAAchR,EAAMO,QAAQyM,YAAc,EAC5FhC,KAAKgL,cAAc1G,OAAOlC,EAAQ,GAAGgF,aAAepF,EACxD,EAEA0xB,kBAAmB,WACf1zB,KAAKgL,cAAc,GAAG3H,UAAYrD,KAAKoC,QAAQ,GAAGiB,UAC9CrD,KAAKga,oBACLha,KAAKgL,cAAc,GAAG3H,UAAYrD,KAAKwB,QAAQ0J,KAAK,8BAA8B,GAAG7H,UAE7F,EAEA8jB,yBAA0B,WAClBnnB,KAAK4e,cACA5e,KAAK4zB,eACN5zB,KAAK2zB,mCAET3zB,KAAK6zB,kBAAkB7zB,KAAKkV,MAAOlV,KAAK4e,aAEhD,EAEAwI,wBAAyB,WACrB,GAAIpnB,KAAK4d,aAAc,CACnB,IAAIgB,EAAc5e,KAAK4d,aAAavb,SAAS,SACzC6S,EAAQlV,KAAKyP,MAAMlN,SAEvBvC,KAAK6zB,kBAAkBjV,EAAa1J,GA01QjD,SAAyB4e,EAAQC,GAI7B,GAHAD,EAASA,EAAO,GAChBC,EAASA,EAAO,GAEZD,EAAO7kB,KAAK5D,SAAW0oB,EAAO9kB,KAAK5D,OAAQ,CAC3C,IAGIxE,EACAmtB,EAJAC,EAAeH,EAAO1sB,aACtB8sB,EAAcH,EAAO3sB,aAIrB6sB,EAAeC,GACfrtB,EAAMktB,EAAO9kB,KAAK8kB,EAAO9kB,KAAK5D,OAAS,GAEnC/M,GAAgBgB,KAAKuH,EAAIrI,aACzBqI,EAAMktB,EAAO9kB,KAAK8kB,EAAO9kB,KAAK5D,OAAS,IAG3C2oB,EAAOC,EAAeC,IAEtBrtB,EAAMitB,EAAO7kB,KAAK6kB,EAAO7kB,KAAK5D,OAAS,GAEnC/M,GAAgBgB,KAAKuH,EAAIrI,aACzBqI,EAAMitB,EAAO7kB,KAAK6kB,EAAO7kB,KAAK5D,OAAS,IAG3C2oB,EAAOE,EAAcD,GAEzBptB,EAAIgH,MAAMvJ,OAASuC,EAAIO,aAAe4sB,EAAOl3B,EACjD,CACJ,CAr3Qaq3B,CAAgBvV,EAAa1J,EACjC,CACJ,EAEAkf,wBAAyB,WACjBp0B,KAAK6e,cAAgB7e,KAAK2e,QAAU3e,KAAK2e,OAAOtT,QAChDrL,KAAK6zB,kBAAkB7zB,KAAK6e,aAAaxc,SAAS,SAAUrC,KAAK2e,OAAOzT,KAAK,+BAErF,EAEAqS,iBAAkB,WACd,IAAI7c,EAAOV,KAEPuB,EAAU,WACV,GAAIb,EAAK+Z,SAAU,CAEf,IAAI3T,EAAYpG,EAAK2zB,SAAW3zB,EAAK2zB,SAASz0B,QAAUc,EAAKmxB,eACzD58B,EAASyL,EAAKmxB,eAAez8B,KAAK,eAElC0R,IACAA,EAAUnF,IAAItG,GAAQvD,EAAI,yBAA0B4I,EAAK4zB,yBACzDxtB,EAAUnF,IAAItG,GAAQvD,EAAI,uBAAwB4I,EAAK6zB,0BAG3D7zB,EAAK8zB,qBACL9zB,EAAK+Z,SAASlZ,UACdb,EAAK+Z,SAAW,KACZxlB,GACAA,EAAOsM,UAEXb,EAAKmxB,eAAiB,KACtBnxB,EAAK+zB,mBACL/zB,EAAKg0B,mBAAqB,IAC9B,CACJ,EAEIh0B,EAAK+Z,WACoB,UAArB/Z,EAAK8wB,aAA4B9wB,EAAKqd,UAStCxc,IARIb,EAAKg0B,mBACLh0B,EAAKmxB,eAAez8B,KAAK,eAAeyL,KAAK,aAAcU,IAG3Db,EAAKg0B,oBAAqB,EAC1Bh0B,EAAKmxB,eAAez8B,KAAK,eAAeyL,KAAK,aAAcU,GAASozB,UAM5Ej0B,EAAKk0B,iBACLl0B,EAAKk0B,eAAeD,QACpBj0B,EAAKk0B,eAAerzB,UACpBb,EAAKk0B,eAAiB,KAE9B,EAEAH,iBAAkB,WACVz0B,KAAKq0B,WACLr0B,KAAKq0B,SAASQ,QACd70B,KAAKq0B,SAAW,KAChBr0B,KAAK8d,KAAKgX,SAAS,IAE3B,EAEA9B,mBAAoB,SAASF,GACzB,IAAIpyB,EAAOV,KAEXU,EAAKq0B,oBAAsB,SAAS9xB,GAChCvC,EAAKs0B,aAAa,CAAE9oB,MAAOjJ,EAAEiJ,MAAO4mB,MAAO9yB,MAC/C,EAEA8yB,EAAMjyB,KAAK,SAAUH,EAAKq0B,oBAC9B,EAEAP,mBAAoB,WAChB,IAAI9zB,EAAOV,KACP8G,EAAYpG,EAAKmxB,eACjBiB,EAAQpyB,EAAK6wB,mBAAmBzqB,GAEhCgsB,GACAA,EAAM9xB,OAAOvI,EAAQiI,EAAKq0B,oBAElC,EAEA5C,UAAW,SAAS8C,GAChB,IAEIjpB,EACAkU,EACA4S,EAJApyB,EAAOV,KACPgQ,EAAOtP,EAAKmxB,eAKX7hB,IAIL8iB,EAAQpyB,EAAK6wB,mBAAmBvhB,GAE5BilB,GAAYv0B,EAAK0E,QAAQ,SAAU,CAAE0B,UAAWkJ,EAAM8iB,MAAOA,MAIjEpyB,EAAK0E,QAAQ5M,EAAW,CAAE6qB,KAAM4R,EAAW,SAAW,OAAQnC,MAAOA,EAAOhsB,UAAWkJ,IAEvFA,EAAK8P,YAAY,eACjB9T,EAAS4D,GAAYlP,EAAKiL,SAASjL,EAAKgxB,sBAAsB1hB,IAE9DkQ,EAAKlQ,EAAKzN,SAASud,YAAY,mBAE3Bpf,EAAKsK,eACLtK,EAAK+yB,YAAYvT,GAAIJ,YAAY,mBAGrCpf,EAAK6c,mBAEL7c,EAAKw0B,aAAallB,EAAMhE,EAAQ8mB,GAE5BpyB,EAAKuyB,2BACLvyB,EAAKwyB,sBAGTxyB,EAAK0E,QAAQ,aAAc,CAAEgR,KAAM8J,EAAI9qB,KAAM09B,EAAOqC,GAAIjgC,IAEpDwL,EAAKsK,eACLwoB,GAAgBtT,EAAGje,IAAIrG,GAAQ,IAAI,GAAI8E,EAAK+yB,YAAYvT,GAAIje,IAAIrG,GAAQ,IAAI,KAEpF,EAEAs5B,aAAc,SAASllB,EAAMhE,EAAQ8iB,GACjC,IAAIpuB,EAAOV,KACPo1B,EAAQ,CAAEC,QAAS,CAAC,EAAGjsB,MAAO,GAC9BksB,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SAAU70B,EAAKb,QAAQ21B,kBACnDC,EAAOzgC,EAAM0gC,SAASh1B,EAAKi1B,UAAU3pB,EAAQopB,GAAQE,GAErDF,EAAMhsB,MAAQ,IACdqsB,EAAOA,EAAK50B,KAAKu0B,EAAMC,UAG3BrlB,EAAKmF,QAAQ5M,KAAKktB,EAAK3G,IAEvBpuB,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAUiF,EACV5a,KAAM,CAAE,CAAE05B,SAAUA,IAE5B,GACJ,EAEA8D,UAAW,SAAS/rB,GACX7G,KAAK6yB,cAAchsB,IAIxB7G,KAAK41B,WAAW/uB,EACpB,EAEA+uB,WAAY,SAAS/uB,GACjB,IACIisB,EAEAhK,EACA+M,EAJAn1B,EAAOV,KAKP81B,EAAOp1B,EAAK8wB,YAEH,WAATsE,GACAp1B,EAAKq1B,YAGTlvB,EAAMhS,EAAEgS,GAEJnG,EAAKsK,gBACLnE,EAAMA,EAAIpF,IAAIf,EAAK+yB,YAAY5sB,KAGnCA,EAAMA,EAAIgF,OACNnL,EAAKT,WAAW0H,iBAChBjH,EAAKs1B,oBAAoBnvB,IAG7BisB,EAAQpyB,EAAK6wB,mBAAmB1qB,MAElBnG,EAAK0E,QAAQlN,EAAQ,CAAE2O,IAAKA,EAAKisB,MAAOA,KAClD+C,EAASn1B,EAAKT,WAAWJ,QAAQg2B,OAC7Bn1B,EAAKmc,cAAgBgZ,GAAUA,EAAO/C,QAEtChK,EAAMgK,EADIp8B,EAAWgK,EAAKT,WAAWJ,QAAQg2B,OAAO/C,OAASpyB,EAAKT,WAAWJ,QAAQg2B,OAAO/C,MAAMhzB,GAAGm2B,QAAUv1B,EAAKT,WAAWJ,QAAQg2B,OAAO/C,MAAMv+B,WAE7ImM,EAAKmc,aAAaiM,IAG7BpoB,EAAKT,WAAWiS,OAAO4gB,GAEV,WAATgD,GAA8B,UAATA,GACrBp1B,EAAKT,WAAWi2B,QAEJ,WAATJ,GACPp1B,EAAK6c,kBAEb,EAEAiU,UAAW,WACP,IAAIsE,EAAO,SACPrb,EAAWza,KAAKH,QAAQ4a,SAU5B,OARiB,IAAbA,IAEIqb,EADmB,iBAAZrb,EACAA,EAEAA,EAASqb,MAAQA,GAIzBA,CACX,EAEArD,QAAS,SAAS5rB,GACd,IAAIisB,EACApyB,EAAOV,KAEP6G,aAAexR,EACfy9B,EAAQjsB,GAERA,EAAMhS,EAAEgS,GACRisB,EAAQpyB,EAAK6wB,mBAAmB1qB,IAGpC,IACIC,EADAgvB,EAAOp1B,EAAK8wB,YAGhB9wB,EAAKq1B,YAEDjD,IACAjsB,EAAMnG,EAAKuU,MAAM5S,SAAS,IAAMrN,EAAMqC,KAAK,OAAS,IAAMy7B,EAAMvmB,IAAM,KACtE7L,EAAKsyB,mBAAmBF,GAEX,UAATgD,EACAp1B,EAAKy1B,mBAAmBrD,GACR,WAATgD,EACPp1B,EAAK01B,oBAAoBvvB,EAAKisB,GACd,WAATgD,GACPjhC,EAAEgS,GAAKxE,SAASjL,GAAWopB,MAAK,WAC5B,IAAIxQ,EAAOnb,EAAEmL,MACTgM,EAAS4D,GAAYlP,EAAKiL,SAASjL,EAAKgxB,sBAAsB1hB,IAIlE,IAFA8iB,EAAQpyB,EAAK6wB,mBAAmBvhB,OAEjB8iB,EAAMrY,UAAYqY,EAAMrY,SAASzO,EAAOE,SAAWF,EAAOE,QAAUF,EAAOkO,WAEtF,OADAxZ,EAAK0xB,SAASpiB,IACP,CAEf,KAIJlJ,EAAYpG,EAAK2zB,SAAW3zB,EAAK2zB,SAASz0B,QAAUc,EAAKmxB,kBAGhD7xB,KAAKs0B,0BACNt0B,KAAKs0B,wBAA0Bt0B,KAAKq2B,iBAAiBx1B,KAAKb,OAG9D8G,EAAUtE,GAAGnH,GAAQvD,EAAI,yBAA0BkI,KAAKs0B,yBAEnDt0B,KAAKu0B,0BACNv0B,KAAKu0B,wBAA0Bv0B,KAAKs2B,iBAAiBz1B,KAAKb,OAG9D8G,EAAUtE,GAAGnH,GAAQvD,EAAI,uBAAwBkI,KAAKu0B,0BAGlE,EAEA+B,iBAAkB,SAASrzB,GACvBA,EAAES,iBACFT,EAAE0vB,kBAEF3yB,KAAKu2B,SACT,EAEAF,iBAAkB,SAASpzB,GACvB,IAAIvC,EAAOV,KACPia,EAAcvZ,EAAKb,QAAQoa,YAC3B6Y,EAAQpyB,EAAK+Z,SAAS5a,QAAQizB,MAC9BhsB,EAAYpG,EAAK2zB,SAAW3zB,EAAK2zB,SAASz0B,QAAUc,EAAKmxB,eAK7D,GAHA5uB,EAAES,iBACFT,EAAE0vB,mBAEEjyB,EAAK0E,QAAQ,SAAU,CAAE0B,UAAWA,EAAWgsB,MAAOA,IAA1D,CAIA,IAAI9P,EAAetiB,EAAKoW,QAAQrQ,MAAM5R,EAAE6L,EAAKqiB,WAAWxgB,UAExD7B,EAAKq1B,YAED9b,IACAvZ,EAAK81B,YAAY91B,EAAKoW,QAAQhM,GAAGkY,GAAc3gB,WAAW4I,OAAO1T,GAAS+K,SAC1Em0B,GAAW/1B,EAAKwU,OAAO,GAR3B,CAUJ,EAEAwhB,YAAa,SAAS/qB,EAASmnB,GAI3B,IAHA,IACI9mB,EADAonB,EAAS,GAGJ9qB,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,KACpC0D,EAASL,EAAQrD,IACN4R,YAAclO,EAAOV,SAG5BynB,GAAiB/mB,EAAQ8mB,IACzBM,EAAO58B,KAAK6c,GAAUrH,IAG9B,OAAOonB,CACX,EAEA+C,mBAAoB,SAASrD,GACzB,IAEI9mB,EACAV,EACAhD,EACA+C,EACAoqB,EACAkB,EACAC,EACAC,EACAC,EACAC,EAEA1/B,EAMA+9B,EACAtuB,EACAkwB,EArBAt2B,EAAOV,KACPuI,EAAO,QAAUvT,EAAMqC,KAAK,OAAS,KAAOy7B,EAAMvmB,IAAM,iCAAmC7L,EAAKqd,UAAY,kEAAoE,sCAWhLpS,EAAUiE,GAAYlP,EAAKiL,SAE3BsrB,EAAejiC,EAAMwX,OACrBiO,EAAW/Z,EAAKb,QAAQ4a,SACxBib,EAAWjb,EAASib,SACpB71B,EAAU5J,EAAcwkB,GAAYA,EAASxlB,OAAS,CAAC,EACvDqgC,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SAAU70B,EAAKb,QAAQ21B,kBAKvD,IAAI90B,EAAK0E,QAAQpN,EAAY,CAAE86B,MAAOA,IAAtC,CAMA,GAFAjzB,EAAUA,GAAW,CAAC,EAElB61B,EAOA,WANWA,IAAaz5B,KACpBy5B,EAAW1gC,EAAMkiC,SAASxB,IAG9BntB,GAASvT,EAAM0gC,SAASA,EAAUJ,EAA1B,CAAqCxC,GAExCxqB,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,KACjD0D,EAASL,EAAQrD,IACNgD,UACPyrB,EAAcI,GAAWnrB,EAAOV,QAAS,WAErCA,EAAUyrB,QAKtB,IAAKzuB,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,KACjD0D,EAASL,EAAQrD,IACN4R,aAGNlO,EAAOV,QA0BDU,EAAOV,UACdyrB,EAAcI,GAAWnrB,EAAOV,QAAS,WAErCA,EAAUyrB,GA5BVr2B,EAAKqd,YACLxV,GAAQ,uCAEJwqB,GAAiB/mB,EAAQ8mB,IACzBvqB,GAAQ,+CACRA,GAAQ,4DAA8DyD,EAAOsH,QAAU5S,EAAKb,QAAQ6a,aAAe9jB,GAAWoV,EAAOsH,OAAO,GAAQtH,EAAOsH,QAAUtH,EAAOE,OAAS,IAAM,UAC3L3D,GAAQ,mDAAqDyD,EAAOE,MAAQ,IAAM+qB,EAAe,KAAOjiC,EAAMqC,KAAK,iBAAmB,KAAO2U,EAAOE,MAAQ,WAC5J3D,GAAQ,aAER6sB,EAAQ,CAAEC,QAAS,CAAC,EAAGjsB,MAAO,GAE9BqsB,EAAOzgC,EAAM0gC,SAASh1B,EAAKi1B,UAAU3pB,EAAQopB,GAAQE,GAEjDF,EAAMhsB,MAAQ,IACdqsB,EAAOA,EAAK50B,KAAKu0B,EAAMC,UAG3B9sB,GAAQ,0DACRA,GAAQ,4DAA8DyD,EAAOsH,QAAU5S,EAAKb,QAAQ6a,aAAe9jB,GAAWoV,EAAOsH,OAAO,GAAQtH,EAAOsH,QAAUtH,EAAOE,OAAS,IAAM,UAC3L3D,GAAQ,4DAA8DktB,EAAK3C,GAAS,UACpFvqB,GAAQ,YAGZA,GAAQ,UAWpB+C,GACIrV,EAAcqV,KACVrV,EAAcqV,EAAQ7M,QACtBk4B,EAAarrB,EAAQ7M,KAAKqL,OAC1B8sB,EAAatrB,EAAQ7M,KAAKqK,QAE1B7S,EAAcqV,EAAQ5B,aACtBmtB,EAAkBvrB,EAAQ5B,UAAUI,OACpCgtB,EAAkBxrB,EAAQ5B,UAAUZ,QAGrCwC,EAAQjU,OACRA,EAAOiU,EAAQjU,OAKrBqJ,EAAKqd,WAoCNxV,GAAQ,cACR7H,EAAK2zB,SAAW3zB,EAAKod,KAAK9H,OACtB,aAAehhB,EAAMmgC,GAArB,kDACmBngC,EAAMmgC,GADzB,gKAG6CngC,EAAME,GAAG4J,KAAK,gBAAkB,QACpE4B,EAAKb,QAAQwb,SAASjQ,SAASxB,MAAQ,QAJhD,yHAM2C5U,EAAME,GAAG4J,KAAK,SANzD,uBAQmB9J,EAAMmgC,GAAK,yBAA2B11B,GAAqB,KACtE8I,EATR,gBAYJzB,EAAYpG,EAAKmxB,eAAiBnxB,EAAK2zB,SAASz0B,QAAQsL,KAAK,wBAjD7D8rB,EAAc,+CACdA,GAAet2B,EAAK02B,cAAc,CAAE5iC,KAAM,SAAUiK,KAAMk4B,EAAYt/B,KAAMA,EAAMqS,UAAWmtB,EAAiBl4B,KAAM,WAAc+B,EAAK02B,cAAc,CAAE5iC,KAAM,aAAciK,KAAMm4B,EAAYv/B,KAAMA,EAAMqS,UAAWotB,EAAiBn4B,KAAM,WAC3Oq4B,GAAe,SAEfzuB,GAAQmtB,EAAWsB,EAAc,SAAW,SAE5ClwB,EAAYpG,EAAKmxB,eAAiBh9B,EAAE0T,GACnC5E,SAASjD,EAAKc,SAASsJ,GAAG,GAC1BusB,YAAYnhC,EAAO,CAChBohC,OAAO,EACPxc,WAAW,EACXqQ,WAAW,EACX7X,MAAO5S,EAAKb,QAAQwb,SAASjQ,SAASxB,MAAQ,OAC9CoD,SAAS,EACT2nB,MAAO,SAAS1xB,GACZ,GAAIA,EAAEs0B,cAAe,CAGjB,GADAt0B,EAAEC,OAAOtD,QAAQwF,QAAQ,SACrB1E,EAAK0E,QAAQ,SAAU,CAAE0B,UAAWA,EAAWgsB,MAAOA,IAEtD,YADA7vB,EAAES,iBAIN,IAAIsf,EAAetiB,EAAKoW,QAAQrQ,MAAM5R,EAAE6L,EAAKqiB,WAAWxgB,UAExD7B,EAAKg0B,oBAAqB,EAC1Bh0B,EAAKq1B,YACDr1B,EAAKb,QAAQoa,cACbvZ,EAAK81B,YAAY91B,EAAKoW,QAAQhM,GAAGkY,GAAc3gB,WAAW4I,OAAO1T,GAAS+K,SAC1Em0B,GAAW/1B,EAAKwU,OAAO,GAE/B,CACJ,GACDrV,KAmBF61B,GAAah1B,EAAKqd,UAQnBrd,EAAK+Z,SAAW/Z,EAAKmxB,eACpBsB,cAAc,CACXC,OAAQ1yB,EAAKqd,UAAYrd,EAAKg2B,YAAY/qB,EAASmnB,GAAS,KAC5DA,MAAOA,EACP0E,gBAAgB,EAChB9oB,OAAQhO,IACTtL,KAAK,kBAbRsL,EAAK+Z,SAAW,IAAIvlB,EAAGuiC,KAAK/2B,EAAKmxB,eAAe3mB,KAAK,0BAA2B,CAC5E4L,MAAOpW,EAAKg2B,YAAY/qB,EAASmnB,GACjC4E,gBAAiB,IAAM,GACvBC,SAAU7E,IACXrY,SACH/Z,EAAKmxB,eAAe7b,OAAOghB,IAW/Bt2B,EAAKk3B,mBAELl3B,EAAK0E,QAAQrN,EAAM,CAAE+O,UAAWA,EAAWgsB,MAAOA,GAtJlD,CAuJJ,EAEA8E,iBAAkB,WACd,IAAIl3B,EAAOV,KACP63B,EAAen3B,EAAKmxB,eAAiBnxB,EAAKmxB,eAAez8B,KAAK,eAAiB,KAC/E0iC,GAAiBp3B,EAAKb,QAAQ4a,UAAY,CAAC,GAAGxlB,QAAU,CAAC,EAExD+K,KAAK+d,UASN/d,KAAK8d,KAAKgX,SAAS90B,KAAKq0B,SAAUr0B,KAAK+3B,gBARnCF,IACKC,EAActxB,UACfqxB,EAAaG,SAGjBH,EAAaI,OAKzB,EAEA7B,oBAAqB,SAASvvB,EAAKisB,GAC/B,IACI9mB,EACAgE,EACA1E,EAHA5K,EAAOV,KAIPozB,EAAS,GAET1yB,EAAK0E,QAAQpN,EAAY,CAAE86B,MAAOA,MAIlCpyB,EAAKsK,gBACLnE,EAAMA,EAAIpF,IAAIf,EAAK+yB,YAAY5sB,KAGnCA,EAAIxE,SAAS,yCAAyCme,MAAK,WAIvD,GAHAxQ,EAAOnb,EAAEmL,QACTgM,EAAS4D,GAAYlP,EAAKiL,SAASjL,EAAKgxB,sBAAsB1hB,KAElD1E,SAAWynB,GAAiB/mB,EAAQ8mB,GAC5CM,EAAO58B,KAAK6c,GAAUrH,IACtBgE,EAAK3Y,KAAKrC,EAAMqC,KAAK,iBAAkB2U,EAAOE,OAC9C8D,EAAKmF,aACF,GAAInJ,EAAOV,QAAS,CAKnB,IAAIqrB,EACAC,EACAC,EACAC,EACAz/B,EAPR,GADAiU,EAAU6rB,GAAWnrB,EAAOV,QAAS,QAEjC0E,EAAKmF,QAQDlf,EAAcqV,KACNrV,EAAcqV,EAAQ7M,QACtBk4B,EAAarrB,EAAQ7M,KAAKqL,OAC1B8sB,EAAatrB,EAAQ7M,KAAKqK,QAE1B7S,EAAcqV,EAAQ5B,aACtBmtB,EAAkBvrB,EAAQ5B,UAAUI,OACpCgtB,EAAkBxrB,EAAQ5B,UAAUZ,QAGxCwC,EAAQjU,OACRA,EAAOiU,EAAQjU,OAIvBxC,EAAE6L,EAAK02B,cAAc,CAAE5iC,KAAM,SAAUiK,KAAMk4B,EAAYt/B,KAAMA,EAAMqS,UAAWmtB,IAC5En2B,EAAK02B,cAAc,CAAE5iC,KAAM,aAAciK,KAAMm4B,EAAYv/B,KAAMA,EAAMqS,UAAWotB,KAAoBnzB,SAASqM,EAE3H,CACJ,IAEAtP,EAAKmxB,eAAiBhrB,EACtBnG,EAAKmxB,eAAerc,SAAS,mBAEzB9U,EAAKuyB,2BACLvyB,EAAKwyB,sBAGTxyB,EAAK+Z,SAAW,IAAIzlB,EAAME,GAAGgjC,SAASx3B,EAAKmxB,eAAgB,CACvDnjB,OAAQhO,EACR0yB,OAAQA,EACRz0B,KAAM+B,EAAKb,QAAQlB,KACnBm0B,MAAOA,EACPO,UAAY3yB,EAAKgyB,4BAA8BhyB,EAAK6yB,kBAAmB7yB,EAAK6yB,eAAernB,OAA0BxL,EAAKssB,qBAC1HwK,gBAAgB,IAGhB3wB,EAAIwE,OAAS,IAEbmoB,GAAgB3sB,EAAI,GAAIA,EAAI,IAC5BnG,EAAKwmB,+BAGTxmB,EAAK0E,QAAQrN,EAAM,CAAE+O,UAAWD,EAAKisB,MAAOA,IAChD,EAEAiD,UAAW,SAASpc,GAChB,IAEImZ,EAFApyB,EAAOV,KACP8G,EAAYpG,EAAKmxB,eAGrB,GAAI/qB,EAAW,CAGX,KAFAgsB,EAAQpyB,EAAK6wB,mBAAmBzqB,KAEjB6S,GAAUjZ,EAAK0E,QAAQ,SAAU,CAAE0B,UAAWA,EAAWgsB,MAAOA,IAC3E,OAGJpyB,EAAK6c,mBAEL7c,EAAKT,WAAWk4B,cAAcrF,GAE9BpyB,EAAKwyB,sBAEoB,UAArBxyB,EAAK8wB,YACL9wB,EAAK03B,YAAYtxB,GAEjBpG,EAAK03B,YAAY13B,EAAKuU,MAAM/J,KAAK,IAAMlW,EAAMqC,KAAK,OAAS,IAAMy7B,EAAMvmB,IAAM,KAErF,CACJ,EAEAgqB,QAAS,WACL,IAII8B,EAJA33B,EAAOV,KACP8G,EAAY9G,KAAK6xB,eACjBiB,EAAQ9yB,KAAKuxB,mBAAmBzqB,GAChCwxB,EAAWzjC,EAAE0jC,WAGjB,OAAKzxB,GAAc9G,KAAKya,WAIxB4d,EAAQ33B,EAAK+Z,UAAY/Z,EAAK+Z,SAASyX,QAEzBlyB,KAAKoF,QAAQnN,EAAM,CAAE6O,UAAWA,EAAWgsB,MAAOA,KACvDuF,GACD33B,EAAK2xB,wBAGFiG,EAASE,SAASC,YAG7B/3B,EAAKwyB,sBAEElzB,KAAKC,WAAWi2B,QAfZoC,EAASI,UAAUD,SAgBlC,EAEAL,YAAa,SAASvxB,GAClB,IAEI8xB,EACAC,EACAC,EAJAn4B,EAAOV,KACP8yB,EAAQpyB,EAAK6wB,mBAAmB1qB,GAIhCiyB,EAAajyB,EAAIiJ,SAASnW,IAC1Bo/B,EAAQlyB,EAAIiJ,SAAS,SAEzB,GAAIgjB,EAAO,CAEHpyB,EAAKsK,gBACL2tB,EAAU9jC,GAAGkkC,EAAQr4B,EAAK2d,qBAAuB3d,EAAK0d,mBAAmB0U,IACzEpyB,EAAK+yB,YAAY5sB,EAAIsI,QAAQ6pB,YAAYL,IAG7Cj4B,EAAK4f,QAAQ,WAAW,WAAa,MAAO,CAAEvV,SAAUlE,EAAI0Z,MAAS,IAErEqY,EAAS/jC,GAAGkkC,EAAQr4B,EAAKka,eAAiBla,EAAKia,aAAamY,IACvDjsB,EAAIkP,GAAG,aACR6iB,EAAO/sB,OAEXhF,EAAImyB,YAAYJ,GAEhBl4B,EAAK0E,QAAQ,aAAc,CAAEgR,KAAMwiB,EAAQxjC,KAAM09B,EAAOqC,GAAIjgC,IAExDyjC,GAAWA,EAAQttB,QACnB3K,EAAK0E,QAAQ,aAAc,CAAEgR,KAAMuiB,EAASvjC,KAAM09B,EAAOqC,GAAIjgC,IAGjE,IAAI+jC,EAAkBL,EAClBM,EAAc,CAAC,CAAEpK,SAAUgE,IAE3B6F,GAAWA,EAAQttB,SACnB4tB,EAAkBL,EAAOn3B,IAAIk3B,GAC7BO,EAAY1iC,KAAK,CAAEs4B,SAAUgE,KAGjCpyB,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAUkuB,EAAgB1Y,MAC1BnrB,KAAM8jC,EAEd,IAGIJ,IAAep4B,EAAKb,QAAQqa,YAAcxZ,EAAK8sB,qBAC/C9sB,EAAK0oB,OAAOwP,EAAOn3B,IAAIk3B,IAGvBA,GACAnF,GAAgBoF,EAAO,GAAID,EAAQ,KAGvCE,EAAUD,EAAO7jB,QACLjF,SAAS,iBAAmB+oB,EAAQ9iB,GAAG,aAC/C/gB,EAAME,GAAG4J,KAAK85B,EAAO1tB,KAAK,2DAA4D,CAAEpM,KAAM,kBAEtG,CACJ,EAEAq6B,aAAc,SAAS9d,EAAUxU,GAC7B,IAAInG,EAAOV,KAEX,OAAKU,EAAKqd,YAKUrd,EAAKk0B,eAAiB,IAAI5/B,EAAME,GAAGkkC,QAAQvkC,EAAE,WAAW8O,SAAS2G,SAASC,MAAO,CACjG+sB,MAAO,CACH+B,eAAe,GAEnBC,UAAU,EACVhmB,OAAO,EACPlR,QAASiZ,EAAS/H,MAClB+H,SAAU,CACNke,OAAQle,EAASG,cACjB1S,OAAQuS,EAASC,cAErB2c,KAAM,WACEv3B,EAAK0B,UACL1B,EAAK0B,QAAQhN,KAAKoH,GAAUkE,EAAK0B,QAAQH,IAAIzF,KAC7CkE,EAAK0B,QAAQH,IAAIzF,GA1jKxB,UA4jKD,EACAm4B,MAAO,WACCj0B,EAAK0B,SACL1B,EAAK0B,QAAQH,IAAIzF,GAAUkE,EAAK0B,QAAQhN,KAAKoH,IAErD,KAGUkK,OACT8yB,MAAK,WACF94B,EAAKk1B,WAAW/uB,EACpB,IACC4yB,MAAK,WACF,IAAIC,EAAgBh5B,EAAKk0B,eAErB8E,IACAA,EAAc/E,QACd+E,EAAcn4B,UAEtB,KAEG,GAxCItM,OAAO0kC,QAAQte,EAAS/H,MAyCvC,EAEAuf,cAAe,SAAShsB,GACpB,IAAInG,EAAOV,KACPya,EAAW/Z,EAAKb,QAAQ4a,SACxBc,GAA6B,IAAbd,UAA4BA,IAAaxe,GAAUyE,EAAKb,QAAQwb,SAASZ,SAASc,aAAed,EAASc,aAM9H,OAJItlB,EAAcwkB,WAAoBA,EAASqb,OAAS75B,WAAiBsf,IAAiBvf,WAAmBuf,IAAiBtf,KAA2B,IAAjBsf,IACpIA,EAAe7a,EAAKb,QAAQwb,SAASZ,SAASc,eAG7B,IAAjBA,GAA0C,MAAhBA,WAEfA,IAAiBvf,KACxBuf,EAAeA,EAAa7a,EAAK6wB,mBAAmB1qB,KAGjDnG,EAAKy4B,aAAa,CACjB3d,cAAef,EAASe,eAAiB9a,EAAKb,QAAQwb,SAASZ,SAASe,cACxEF,aAAcb,EAASa,cAAgB5a,EAAKb,QAAQwb,SAASZ,SAASa,aACtEhI,OAAwB,IAAjBiI,EAAwB7a,EAAKb,QAAQwb,SAASZ,SAASc,aAAeA,GAC9E1U,GAIf,EAEAsxB,cAAe,WACX,IAAIz3B,EAAOV,KAEPU,EAAK6nB,oBACL7nB,EAAK+nB,qBAAqB,WAAY,MACtC/nB,EAAKk5B,kBAAmB,GAG5Bl5B,EAAKT,WAAWk4B,gBAEZz3B,EAAKm5B,sBACLn5B,EAAKo5B,mBAAkB,WACnBp5B,EAAKsZ,kBAAkBxU,aAC3B,GAER,EAEAu0B,YAAa,WACT,IAAIr5B,EAAOV,KACPq4B,EAAQ33B,EAAK+Z,UAAY/Z,EAAK+Z,SAASyX,OAEtCmG,GAAU33B,EAAK+Z,UAAc/Z,EAAK0E,QAAQxM,GAEnCy/B,GACR33B,EAAK2xB,wBAFL3xB,EAAKT,WAAWi2B,MAIxB,EAEA8D,OAAQ,WACJ,IACIvzB,EAOAqsB,EARApyB,EAAOV,KAEPC,EAAaS,EAAKT,WAClB61B,EAAOp1B,EAAK8wB,YACZyI,EAAWv5B,EAAKb,QAAQ4a,SAASwf,UAAY,GAC7C15B,EAAWN,EAAWM,WACtB25B,EAAOj6B,EAAWi6B,QAAU,GAC5BC,EAAiBF,EAASG,gBAAkBl+B,GAE5Cm+B,EAAkB35B,EAAKm5B,qBAEtBn5B,EAAK+Z,UAAY/Z,EAAK+Z,SAASyX,QAAWxxB,EAAK+Z,UACpC,UAARqb,GACAp1B,EAAKq1B,YAGTtvB,EAAQxG,EAAW8R,QAAQmoB,EAAK,IAE5BC,IACA1zB,GAASyzB,EAAK7uB,OAEV9K,IAAaN,EAAWJ,QAAQy6B,cAAgB/5B,GAAY25B,EAAK7uB,SACjE5E,GAAS,IAIbA,EAAQ,IAEJA,EADAxG,EAAW8I,OAAS9I,EAAWG,cACtBH,EAAW8I,OAAS,GAAKxI,EAE1B,GAIZG,EAAKb,QAAQoa,aAAuB,UAAR6b,GAC5Bp1B,EAAK65B,iBAGLF,EACA35B,EAAK85B,kBAEL1H,EAAQ7yB,EAAWw6B,OAAOh0B,EAAO,CAAC,GAClC/F,EAAKg6B,WAAW5H,KAGpBpyB,EAAK2xB,uBAEb,EAEAqI,WAAY,SAAS5H,GACjB,IAAIpyB,EAAOV,KACPi6B,EAAWv5B,EAAKb,QAAQ4a,SAASwf,UAAY,GAC7CnE,EAAOp1B,EAAK8wB,YAEhB,GAAIsB,EAAO,CACP,IAAIv+B,EAAKu+B,EAAMvmB,IAEX1F,GADQnG,EAAKsK,cAAgBtK,EAAKke,YAAcle,EAAKwU,OACzChK,KAAK,MAAQlW,EAAMqC,KAAK,OAAS,IAAM9C,EAAK,KACxDyb,EAAOnJ,EAAIxE,SAAS,2CAA2CyI,GAAGpK,EAAKi6B,0BAA0B9zB,IAExF,WAATivB,GAAqBjvB,EAAIwE,OACzB3K,EAAK+xB,QAAQ5rB,GACG,UAATivB,EACPp1B,EAAK+xB,QAAQK,GACN9iB,EAAK3E,QACZ3K,EAAK0xB,SAASpiB,GAGY,UAA1BiqB,EAASG,eAA6B15B,EAAKsK,gBAE3CtK,EAAKsK,cAAc,GAAG3H,UAAY3C,EAAK0B,QAAQ,GAAGiB,UAAY3C,EAAKwU,MAAM,GAAG9N,aAEpF,CACJ,EAEAozB,eAAgB,WACZ,IAAI95B,EAAOV,KACPm6B,GAAkBz5B,EAAKb,QAAQ4a,SAASwf,UAAY,IAAIG,gBAAkBl+B,GAE9EwE,EAAKwyB,sBAEDiH,EACAz5B,EAAKk6B,yBAELl6B,EAAKm6B,qBAEb,EAEAA,oBAAqB,WACjB,IAGI/H,EAHApyB,EAAOV,KACPC,EAAaS,EAAKT,WAClB+Z,EAAoBtZ,EAAKsZ,kBAGH,IAAtB/Z,EAAW8I,QACX+pB,EAAQ7yB,EAAWw6B,OAAO,EAAG,CAAC,GAC9B/5B,EAAKg6B,WAAW5H,GAChB9Y,EAAkBxU,eAElB9E,EAAKo5B,mBAAkB,WACnBhH,EAAQ7yB,EAAWw6B,OAAO,EAAG,CAAC,GAC9B/5B,EAAKg6B,WAAW5H,GAChB9Y,EAAkBxU,aACtB,GAER,EAEAo1B,uBAAwB,WACpB,IAII9H,EAJApyB,EAAOV,KACPC,EAAaS,EAAKT,WAClB+Z,EAAoBtZ,EAAKsZ,kBACzBvT,EAAQxG,EAAWyH,QAGnBzH,EAAW66B,GAAGr0B,EAAQ,aAAcpR,GACpCy9B,EAAQ7yB,EAAWw6B,OAAOh0B,EAAO,CAAC,GAElC/F,EAAKq6B,sBAAqB,WACtBr6B,EAAKg6B,WAAW5H,GAChB9Y,EAAkBtU,gBACtB,KAEAhF,EAAKq6B,sBAAqB,WACtBjI,EAAQ7yB,EAAWw6B,OAAOh0B,EAAO,CAAC,GAClC/F,EAAKg6B,WAAW5H,GAChB9Y,EAAkBtU,gBACtB,GAER,EAEAo0B,kBAAmB,SAAShyB,GACb9H,KAENg7B,aAAa,EAFPh7B,KAEeC,WAAWsF,QAAQ,WACzCuC,GACJ,GACJ,EAEAizB,qBAAsB,SAASjzB,GAC3B,IACI7H,EADOD,KACWC,WAClBsF,EAAOtF,EAAWsF,OAClBmC,EAAQzH,EAAWyH,QACnBtD,EAAOsD,EAAQnC,EAAQmC,EAAQnC,EAAQ,EAJhCvF,KAMNg7B,aAAa52B,EAAMmB,GAAM,WAC1BuC,GACJ,GACJ,EAEAkzB,aAAc,SAAS52B,EAAMmB,EAAMuC,GAC/B,IAAIpH,EAAOV,KAEPU,EAAKm5B,uBACLn5B,EAAKsZ,kBAAkBjV,gBAAiB,EACxCrE,EAAKsZ,kBAAkB1U,MAAMlB,EAAMmB,EAAMuC,GAEjD,EAEA6yB,0BAA2B,SAAS7zB,GAChC,IACIkF,EAEA1D,EACA+C,EAFAM,EAAUiE,GAFH5P,KAEoB2L,SAG3BmnB,EALO9yB,KAKMuxB,mBAAmBzqB,GAEpC,IAAKwB,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,IAGjD,GAFA0D,EAASL,EAAQrD,GAEbwqB,KAAWA,EAAMrY,UAAYqY,EAAMrY,SAASzO,EAAOE,UAAYF,EAAOV,SAAWU,EAAOE,QAA2B,IAAlBF,EAAOC,OACxG,OAAO3D,EAGf,OAAQ,CACZ,EAEA2yB,UAAW,SAASh4B,GACZA,EAAES,gBACFT,EAAES,iBAGN1D,KAAKg6B,QACT,EAEAkB,aAAc,SAASj4B,GACfA,EAAES,gBACFT,EAAES,iBAGN1D,KAAKm4B,eACT,EAEAgD,YAAa,SAASl4B,GACdA,EAAES,gBACFT,EAAES,iBAGN1D,KAAKo7B,aACT,EAEAC,UAAW,SAASp4B,GAChB,IAAIvC,EAAOV,KAEPiD,EAAES,gBACFT,EAAES,iBAGN,IAAI+0B,EAAU/3B,EAAK46B,YAEf7C,GACAA,EAAQe,MAAK,WACT94B,EAAK66B,iBAAkB,CAC3B,GAER,EAEAC,WAAY,SAASv4B,GACbA,EAAES,gBACFT,EAAES,iBAGN1D,KAAK+5B,aACT,EAEA0B,aAAc,SAASx4B,GACnB,IAAIvC,EAAOV,KACP0oB,EAAQzlB,EAAEiB,cAEdtC,aAAalB,EAAKg7B,gBAElBh7B,EAAKg7B,eAAiBr2B,YAAW,WAC7B3E,EAAKg7B,eAAiB,KAEtB,IAAI77B,EAAUa,EAAKb,QACf87B,EAAe97B,EAAQqK,OAASrK,EAAQqK,OAAOkpB,OAAS,KACxDwI,EAAa,CAAEC,QAAS,GAAIC,MAAO,MACnCzxB,EAAQqe,EAAMre,MAWlB,GATKsxB,IACDA,EAznIhB,SAA0BhwB,GACtB,IAAIjF,EAAS,GACbiF,EAAUiE,GAAYjE,GAEtB,IAAK,IAAIrD,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IACR,iBAAjBqD,EAAQrD,GACf5B,EAAOlQ,KAAKmV,EAAQrD,IACbqD,EAAQrD,GAAK4D,OACpBxF,EAAOlQ,KAAKmV,EAAQrD,GAAK4D,OAGjC,OAAOxF,CACX,CA6mI+Bq1B,CAAiBl8B,EAAQ8L,UAGxCjL,EAAKT,WAAWJ,QAAQm8B,UACxBt7B,EAAKT,WAAWJ,QAAQm8B,QAAU,KAClCt7B,EAAKu7B,iBAAmBv7B,EAAKT,WAAWJ,QAAQU,UAGhD8J,EACA,IAAK,IAAI4D,EAAI,EAAGA,EAAI0tB,EAAatwB,OAAQ4C,IACrCvN,EAAKw7B,gBAAgBN,EAAWC,QAASF,EAAa1tB,GAAI5D,QAG9DuxB,EAAa,CAAC,EAGlBl7B,EAAKT,WAAWgL,OAAO2wB,EAC3B,GAAG,IACP,EAEAM,gBAAiB,SAASL,EAAS3vB,EAAO7B,GACtC,IAAI3J,EAAOV,KACPm8B,EAAoBz7B,EAAKT,WAAWJ,QAAQu8B,gBAC5CC,EAAmB,CACfC,OAAQ,WACRC,OAAQ,MACRC,KAAM,MACNC,MAAO,KACPC,QAAS,MAEbloC,EAAO0X,EAAM1X,MAAQ0X,EACrBywB,EAAWzwB,EAAMywB,SACjBC,EAAYl8B,EAAKT,WAAW48B,OAAO/J,OAASpyB,EAAKT,WAAW48B,OAAO/J,MAAMM,OACzE0J,EAAYF,GAAaA,EAAUpoC,GACnCuoC,EAAUD,GAAaA,EAAUE,MACjCpB,EAAa,CACT1vB,MAAO1X,EACPmoC,SAAUA,GAAYN,EAAiBC,OACvCjyB,MAAOA,IAGVsyB,GAAYR,IAAsBW,GAAa9nC,EAAM0B,WAAWqmC,IAA+B,OAAnBA,EAAQ1yB,IACrFnU,EAAO0lC,EAAY,CACfe,SAAUA,GAAYN,EAAiBS,EAAUzZ,MACjDhZ,MAAO0yB,EAAQ1yB,KAInB8xB,GAAqBW,GAAa9nC,EAAM0B,WAAWqmC,IAA+B,OAAnBA,EAAQ1yB,IAI3EwxB,EAAQrlC,KAAKolC,EACjB,EAEApjB,SAAU,WACN,IAII1R,EAAWgQ,EAJXpW,EAAOV,KACPwB,EAAUd,EAAKc,QACf2Y,EAAUzZ,EAAKb,QAAQsa,QAIvBA,IACAzZ,EAAKu8B,oBAAsBv8B,EAAKw8B,iBAAmBx8B,EAAKu6B,UAAUp6B,KAAKH,GACvEA,EAAKy8B,oBAAsBz8B,EAAKw6B,aAAar6B,KAAKH,GAClDA,EAAK08B,kBAAoB18B,EAAK86B,WAAW36B,KAAKH,GAC9CA,EAAK28B,mBAAqB38B,EAAKy6B,YAAYt6B,KAAKH,GAChDA,EAAK48B,iBAAmB58B,EAAK26B,UAAUx6B,KAAKH,GAC5CA,EAAK68B,eAAiB78B,EAAK+6B,aAAa56B,KAAKH,IAE7CoG,EAAYpG,EAAKc,QAAQ0J,KAAK,oBAEfG,OAyBX3K,EAAK88B,wBAxBL12B,EAAYjS,EAAE,4CACT4oC,UAAUj8B,UAEJ2Y,IAAYle,IAAUvF,EAAWyjB,WAC7BA,IAAYle,KACnBke,EAAUnlB,EAAM0gC,SAASvb,GAAStZ,KAAKH,IAG3CoG,EAAUyB,KAAK4R,EAAQ,CAAEujB,KAAMh9B,KAC/BA,EAAK88B,wBACEnnC,EAAQ8jB,KACfrD,EAAQpW,EAAKi9B,cAAcxjB,GAE3BrT,EAAU82B,aAAa,CACnBC,eAAgBn9B,EAAKb,QAAQoa,YAC7Btb,KAAM+B,EAAKb,QAAQlB,KACnBmY,MAAOA,KAIfpW,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CAAEvV,SAAUjE,EAAUyZ,MACjC,KAKJzZ,EAAUtE,GAAGnG,GAAQvE,EAAI,uBAAwBkI,KAAKu9B,gBAE9D,EAEAC,qBAAsB,WAClB,IAAI/iB,EAAWza,KAAKH,QAAQ4a,SACxB3T,EAAY9G,KAAKwB,QAAQ0J,KAAK,mBAE9BuP,IAAgC,IAApBA,EAAShR,QACrB3C,EAAUtE,GAAGnH,GAAQvD,EAAI,cAAekI,KAAKi9B,qBACxCz6B,GAAGnH,GAAQvD,EAAI,yBAA0BkI,KAAKm9B,qBAC9C36B,GAAGnH,GAAQvD,EAAI,uBAAwBkI,KAAKo9B,mBAGrDt2B,EAAUtE,GAAGnH,GAAQvD,EAAI,gBAAiBkI,KAAKq9B,oBAC/Cv2B,EAAUtE,GAAGnH,GAAQvD,EAAI,cAAekI,KAAKs9B,iBACjD,EAEAK,cAAe,SAASG,GACpB,IAAIp9B,EAAOV,KACP8W,EAAQ,GACRuE,EAAWrb,KAAKH,QAAQwb,SAASjQ,SAiErC,OA/DA0yB,EAAM3nC,KAAIka,IACN,IAAI/E,EAASyyB,EAAYj/B,EAAMN,EAAsBk3B,EAAW,GAWhE,GATiB,iBAANrlB,GACP/E,EAAU+E,EAAE+pB,eACZ/pB,EAAI,CAAC,GACH5R,KAAO4c,EAAS/P,IAAYA,IAE9BA,GAAW+E,EAAE7b,MAAQ6b,EAAE5R,MAAQ,IAAI27B,cACnC/pB,EAAE5R,KAAO4R,EAAE5R,MAAQ4c,EAAS/P,IAAYA,GAG5B,WAAZA,EACAwL,EAAMtgB,KAAK,CACP6sB,KAAM,WAGV0a,EAAa1tB,EAAE5R,MAAQ4c,EAASnR,OAChCpL,EAAOuR,EAAEvR,MAAQuR,EAAE3G,WAAa,SAGhCgsB,GAAY,oCADA1gC,EAAMygB,iBAAiB,WAAY,OAAQ/U,EAAKb,QAAQlB,mDAEpE+2B,GAAY1gC,EAAME,GAAG4J,KAAK,CAAEA,KAAMA,EAAM4K,UAAW,iBACnDgsB,GAAY,0CAA4CqI,EAAa,YAAcA,EAAa,iBAAmBA,EAAa,6BAChIrI,GAAY,UAEZ5e,EAAMtgB,KAAK,CACPhC,KAAM,SACN2N,SAAU,QACVuzB,SAAUA,QAEX,CACH,KAAKpqB,GAAarV,EAAcoa,IAAMA,EAAEqlB,UACpC,MAAM,IAAIvnB,MAAM,8CAIpB3P,GADA6R,EAAIna,EAAO,CAAEmtB,KAAM,UAAY7Z,GAAgB8B,GAAU+E,IAC3C7R,WAAa,WAAa8M,GAAW,IAAIG,QAAQ,MAAO,IACtE4E,EAAE2tB,eAAiB3tB,EAAEvR,KAAO,KAAOuR,EAAE3G,UAErC2G,EAAE9G,WAAa7I,EAAKu9B,aAAa5tB,EAAEhZ,aAC5BgZ,EAAEhZ,KAEHmH,IACE6R,EAAE9G,WAAkB,QAAMzU,IAC1Bub,EAAE9G,WAAkB,MAAI,IAG5B8G,EAAE9G,WAAkB,OAAM,IAAM/K,GAGhC6R,EAAEqlB,iBACKrlB,EAAEgT,KAGP3iB,EAAK,IAAM4K,EAAU,kBACvB+E,EAAE7E,MAAQ9K,EAAK,IAAM4K,EAAU,iBAGnCwL,EAAMtgB,KAAK6Z,EACf,KAGGyG,CACX,EAEAmnB,aAAc,SAAS5mC,GACnB,IAAIkS,EAAa,CAAC,EAgBlB,cAbWlS,IAAS4E,IAAU5E,EAAKgU,OAAS,EAC5BhU,EAAKsZ,MAAM,KACbxa,KAAI2d,IACV,IAAIoqB,EAAWpqB,EAAEnD,MAAM,KAEC,IAApButB,EAAS7yB,SACT9B,EAAW20B,EAAS,IAAMA,EAAS,GAAGC,WAAW,IAAK,IAAIA,WAAW,IAAK,IAC9E,IAEGloC,EAAcoB,KACrBkS,EAAalS,GAGVkS,CACX,EAEA6tB,cAAe,SAAS9rB,GACpB,IAAIka,EAMA4Y,EALA1I,EAAWpqB,EAAQoqB,UAAYn3B,GAC/BgN,SAAqBD,IAAYrP,GAASqP,EAAUA,EAAQ9W,MAAQ8W,EAAQ7M,KAE5EoB,EAAU,CAAErB,UADAgL,GAAgB+B,GAAe/B,GAAgB+B,GAAa/M,UAAY,WAAa+M,GAAe,IAAIE,QAAQ,MAAO,IACjGhN,KAAM8M,EAAalU,KAAM,GAAIqS,UAAW,GAAI/K,KAAM2M,EAAQ3M,MAAQqB,KAAKH,QAAQlB,MACjH0c,EAAWrb,KAAKH,QAAQwb,SAASjQ,SAGrC,KAAKG,GAAiBtV,EAAcqV,IAAYA,EAAQoqB,UACpD,MAAM,IAAIvnB,MAAM,8CA4CpB,OAzCIlY,EAAcqV,KACdA,EAAUpV,GAAO,EAAM,CAAC,EAAGoV,IAEf9M,WAAajI,EAAQsJ,EAAQrB,UAAW8M,EAAQ9M,UAAUmS,MAAM,MAAQ,EAChFrF,EAAQ9M,WAAa,IAAMqB,EAAQrB,UAC5B8M,EAAQ9M,YAAc1J,IAC7BwW,EAAQ9M,UAAYqB,EAAQrB,WAG5B8M,EAAQ9M,UAAUuT,QAAQ,cAAgB,IAC1CzG,EAAQ9M,UAAY8M,EAAQ9M,UAAUiN,QAAQ,YAAa,IAC3DH,EAAQzB,WAAa,WAGL,SAAhB0B,KACAD,EAAUpV,GAAO,EAAM,CAAC,EAAGoV,IACnB7M,KAAOxI,EAAcqV,EAAQ7M,MAAQ6M,EAAQ7M,KAAKmL,KAAO0B,EAAQ7M,KACzE6M,EAAQ5B,UAAYzT,EAAcqV,EAAQ5B,WAAa4B,EAAQ5B,UAAUE,KAAO0B,EAAQ5B,WAGxF4B,EAAQjU,OACJpB,EAAcqV,EAAQjU,QACtBiU,EAAQjU,KAAOiS,GAAoBgC,EAAQjU,cAGpCiU,EAAQjU,OAAS4E,KACxBmiC,EAAsB9yB,EAAQjU,KAAKoZ,MAAM,mBAEdla,EAAQ6nC,EAAoB,GAAI9yB,EAAQ9M,UAAUmS,MAAM,MAAQ,IACvFrF,EAAQ9M,WAAa,IAAM4/B,EAAoB,KAK3Dv+B,EAAU3J,GAAO,EAAM2J,EAAS2J,GAAgB+B,GAAc,CAAE9M,KAAM4c,EAAS9P,IAAgBD,IAE/FzL,EAAU3J,GAAO,EAAM2J,EAAS2J,GAAgB+B,GAAc,CAAE9M,KAAM4c,EAAS9P,KAGnFia,EAASxwB,EAAM0gC,SAASA,EAAf1gC,CAAyB6K,GAE7ByL,EAAQoqB,SAGFlQ,EAFAxwB,EAAMuT,KAAK81B,aAAaxpC,EAAE2wB,GAAS3lB,EAIlD,EAEAy+B,YAAa,WACT,QAASt+B,KAAKse,kBACRte,KAAKue,qBACNve,KAAK2e,QAAU3e,KAAK2e,OAAOtT,OAAS,GACrCrL,KAAKwB,QAAQ0J,KAAK,kBAAkBG,OAAS,CACrD,EAEAkN,WAAY,WACR,IAAI7X,EAAOV,KAEPU,EAAKoe,uBACLpe,EAAKwU,MAAMzT,IAAIf,EAAKke,aAAajd,IAAItG,GAAQvD,EAAI4I,EAAKoe,wBAEtDpe,EAAKoe,uBAAyB,SAAS7b,GACnC,IAAIrD,EAAU/K,EAAEmL,MAChBu+B,EAAW3+B,EAAQuU,QAAQpX,IAEvBsiB,EAAQ3e,EAAKqe,WAAare,EAAKqe,WAAWre,EAAKc,QAAQ0J,KAAKjU,EAAMyD,IAAc+L,MAAM83B,IAAa,CAAE,EAErG3+B,EAAQmW,GAAGpe,GACN+I,EAAK0E,QAAQ,gBAAiB,CAAEia,MAAOA,EAAOzf,QAAS2+B,KACxD79B,EAAK89B,cAAcD,GAGlB79B,EAAK0E,QAAQ,cAAe,CAAEia,MAAOA,EAAOzf,QAAS2+B,KACtD79B,EAAK+9B,YAAYF,GAGzBt7B,EAAES,iBACFT,EAAE0vB,iBACN,EAGAjyB,EAAKg+B,YACLh+B,EAAKke,YAAYpc,GAAGnH,GAAQvD,EAAI,mBAAqBF,EAAkB,qBAAuBD,EAAgB+I,EAAKoe,wBAEnHpe,EAAKwU,MAAM1S,GAAGnH,GAAQvD,EAAI,mBAAqBF,EAAkB,qBAAuBD,EAAgB+I,EAAKoe,wBAGjHpe,EAAKi+B,kBACT,EAEAA,iBAAkB,WACd,IAAIj+B,EAAOV,KACPwB,EAAUd,EAAKc,QACfuY,EAAYrZ,EAAKb,QAAQka,UACzB6kB,EAAalnC,EAAc,IAAM1C,EAAMqC,KAAK,SAAW,IACvD4T,EAASvK,EAAK0B,QAAU,wBAA0Bw8B,EAAa,8BAAgCA,EAE/F7kB,IAAmC,IAAtBA,EAAU8kB,UAClBr9B,EAAQywB,IAAI,yBAAyB,IACtCp9B,EAAE,UAAU2gB,SAAS,qBAAqBioB,UAAUj8B,GAGpDd,EAAKqZ,WACLrZ,EAAKic,oBAGL1d,GAAQ6/B,SACRt9B,EAAQ0J,KAAK,yBAAyBjJ,IAAI,eAAgBtE,IAC1D6D,EAAQ0J,KAAKD,GAAQhJ,IAAI,eAAgBtE,KAG7C+C,EAAKqZ,UAAY,IAAI7kB,EAAG6pC,UAAUv9B,EAAStL,EAAO,CAAC,EAAG6jB,EAAW,CAC7DoR,UAAWzqB,EAAKwd,mBAChB8gB,eAAgB,yBAChB/+B,WAAYS,EAAKT,WACjBg/B,kBAAmBh0B,EACnBA,OAAQA,EACRtM,KAAM+B,EAAKb,QAAQlB,KACnBugC,UAAWx+B,EAAKb,QAAQkb,YACxBokB,YAAa,SAASl8B,GAClBvC,EAAK0+B,qBAAqBn8B,EAC9B,EACAuoB,OAAQ,SAASvoB,GACTvC,EAAK0E,QAAQ,QAAS,CAAEyJ,OAAQ5L,EAAE4L,SAClC5L,EAAES,kBAEFhD,EAAKwyB,sBACLxyB,EAAK2+B,oBAAoBp8B,EAAE4L,QACvBnO,EAAKT,WAAWJ,QAAQm8B,SACxBt7B,EAAK4+B,gBAGjB,KAGJ5+B,EAAK6+B,+BAEb,EAEAH,qBAAsB,SAAS/f,GAC3B,IACIpR,EADAtC,EAAUiE,GAAY5P,KAAK2L,SAG/B,IAAKsC,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IACxBtC,EAAQsC,GAAG1B,KAAO8S,EAAMmgB,OAAS7zB,EAAQsC,GAAGwxB,aAC5Cz/B,KAAK0/B,WAAW/zB,EAAQsC,GAGpC,EAEAoxB,oBAAqB,SAASxwB,GAC1B,GAAKA,EAAL,CAGA,IAEIZ,EAFAtC,EAAUiE,GAAY5P,KAAK2L,SAC3BynB,EAAS,GAGb,IAAKnlB,EAAI,EAAGA,EAAIY,EAAOxD,OAAQ4C,IACvBY,EAAOZ,GAAGuxB,OACVpM,EAAO58B,KAAKqY,EAAOZ,GAAGuxB,OAI9B,IAAKvxB,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IACxBmlB,EAAOrhB,QAAQpG,EAAQsC,GAAG1B,MAAQ,GAAKZ,EAAQsC,GAAGwxB,aAClDz/B,KAAK2/B,WAAWh0B,EAAQsC,GAbhC,CAgBJ,EAEAqxB,cAAe,WACX,IAAI5+B,EAAOV,KACXU,EAAKT,WAAWJ,QAAQm8B,QAAU,KAClCt7B,EAAKu7B,iBAAmBv7B,EAAKT,WAAWJ,QAAQU,SAChDG,EAAKT,WAAW2/B,MAAQ,EACxBl/B,EAAKT,WAAW4/B,UAAYn/B,EAAKT,WAAW6/B,MAAQp/B,EAAKu7B,iBACzDv7B,EAAKT,WAAWqF,MAAQ,CAC5B,EAEAi6B,6BAA8B,WAC1B,IAMIQ,EACAC,EACA/xB,EAPAtC,EAAU0F,GADHrR,KACoB2L,SAC3Bs0B,EAAiB,CAAC,EAElBC,EAJOlgC,KAIYmgC,eAMvB,IAAKlyB,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IACpBtC,EAAQsC,GAAG/B,MACnB+zB,EAAet0B,EAAQsC,GAAG/B,OAASP,EAAQsC,GAG/C,IAAKA,EAAI,EAAGA,EAAIiyB,EAAY70B,OAAQ4C,KAGhC+xB,EAAgBC,GAFhBF,EAAaG,EAAYp1B,GAAGmD,IACD5W,KAAKrC,EAAMqC,KAAK+E,QAGtB4jC,EAAcjmB,WAAaimB,EAAcjmB,UAAUlG,MACpEksB,EAAW3qC,KAAKsH,GAAYsjC,EAAcjmB,UAAUlG,KAGhE,EAEA8I,kBAAmB,WACf,IAAIjc,EAAOV,KAEPU,EAAKqZ,WAAarZ,EAAKqZ,UAAUna,SACjCc,EAAKqZ,UAAUna,QAAQwgC,eAAe,WAG1C1/B,EAAKqZ,UAAY,KAEjBrZ,EAAK2/B,mCACT,EAEAA,kCAAmC,WAI/B,IAHA,IACIH,EADOlgC,KACYmgC,eAEdlyB,EAAI,EAAGA,EAAIiyB,EAAY70B,OAAQ4C,IACpCiyB,EAAYp1B,GAAGmD,GAAGqyB,WAAW5jC,GAErC,EAEA6jC,iBAAkB,SAASt1B,EAAQ+E,GAC/B,GAAKhQ,KAAKgL,cAAV,CAcA,IAVA,IAAItK,EAAOV,KAEP+K,EAAWrK,EAAKwU,MAAMzT,IAAIf,EAAKke,aAE/B4hB,EAAc3rC,EAAEoW,EAAQF,EAAS,IACjC01B,EAAiB5rC,EAAEoW,EAAQF,EAAS,IACpCY,EAAUqE,EAAOsB,GAAc1B,GAAYlP,EAAKiL,UAAUN,OAAS,EACnEkG,EAAmBvB,EAAOJ,GAAYlP,EAAKiL,SAASN,OAASM,EAAU,EACvEjF,EAAS,GAEJ4B,EAAM,EAAGA,EAAMk4B,EAAYn1B,OAAQ/C,GAAOqD,EAC/CnV,EAAKuhB,MAAMrR,EAAQ85B,EAAY1T,MAAMxkB,EAAKA,EAAMqD,IAChDnV,EAAKuhB,MAAMrR,EAAQ+5B,EAAe3zB,OAAO,EAAGyE,IAGhD,OAAO7K,CAjBP,CAkBJ,EAEAmS,YAAa,WACT,IACI6nB,EACA1wB,EAFAtP,EAAOV,KAGP2gC,EAAY,GACZra,EAAW5lB,EAAKg+B,YAChBxkB,EAAaxZ,EAAKb,QAAQqa,WAE9B,GAAIA,EAAY,CAERxZ,EAAKwZ,YACLxZ,EAAKwZ,WAAW3Y,UAGpBb,EAAKmc,aAAe,CAAC,EAErB3C,EAAallB,EAAME,GAAGu4B,WAAWC,aAAaxT,GAE9CwmB,EAAQxmB,EAAW0mB,SACnB5wB,EAAOkK,EAAWlK,KAEdtP,EAAKwgB,gBACLyf,EAAUA,EAAUt1B,QAAU,kBAE9B3K,EAAKb,QAAQka,WAAarZ,EAAK49B,eAAiB59B,EAAK6Y,aACrDonB,EAAUA,EAAUt1B,QAAU,mCAKhB,MAFlBs1B,EAAYA,EAAUt3B,KAAK,QAGvBs3B,EAAY,QAAUA,EAAY,KAGtC,IAAI51B,EAAWrK,EAAKwU,MAChBoR,IACAvb,EAAWA,EAAStJ,IAAIf,EAAKke,cAGjC,IAAI3T,EAAS,KAAO+E,EAz9LF,uHAy9LmC,WAAa2wB,GAClEjgC,EAAKwZ,WAAa,IAAIllB,EAAME,GAAGu4B,WAAW1iB,EAAU,CAChDE,OAAQA,EACR41B,MAAM,EACND,SAAUF,EACVI,aAAcpgC,EAAKb,QAAQqa,YAAcxZ,EAAKb,QAAQqa,WAAW4mB,aACjEtV,OAAQ,SAASvoB,GACb,IAAI89B,EACC/wB,GACDtP,EAAKsgC,uBAGLtgC,EAAK8sB,qBACLuT,EAAiBrgC,EAAKwZ,WAAW7P,QACjC3J,EAAKugC,qBACLvgC,EAAKwgC,WAAWH,GACZA,EAAe11B,QAAU01B,EAAe11B,SAAW3K,EAAKoW,QAAQzL,OAChE3K,EAAKygC,yBAAwB,GAE7BzgC,EAAKygC,yBAAwB,IAIjCl+B,EAAEm+B,OACF1gC,EAAK0E,QAAQ3M,EAErB,EACA4oC,YAAa/a,GAAYoa,GAAS1wB,EAClCsxB,cAAe,SAASxqB,GACpB,IAAI9G,GAASsW,EAAb,CAMA,IAFA,IAAIqS,EACAjyB,EAAS7R,IACJyT,EAAM,EAAG+C,EAASyL,EAAMzL,OAAQ/C,EAAM+C,EAAQ/C,IACnDqwB,EAAUj4B,EAAK+yB,YAAY3c,EAAMxO,IAE7B/R,EAAQoiC,EAAQ,GAAI7hB,GAAS,IAC7BpQ,EAASA,EAAOjF,IAAIk3B,IAI5B,OAAOjyB,CAZP,CAaJ,EACA66B,gBAAiB,WACb,OAAO7gC,EAAK6/B,iBAAiBt1B,EAAQ+E,EACzC,EACAwxB,iBAAkB9gC,EAAKb,QAAQqa,YAAcxZ,EAAKb,QAAQqa,WAAWsnB,iBACrEC,eAAe,IAGf/gC,EAAKb,QAAQoa,aACblP,EAASvI,GAAG,UAAY1K,GAAI,SAASmL,GACjC,IAGIy+B,EACAC,EAJA5e,EAAUriB,EAAKqiB,UACfrU,EAASzL,EAAEyL,OACXkzB,EAAc,CAAER,MAAOn+B,GAG3B,GAAK8f,EAGL,GAAI9f,EAAE4+B,UAAY7rC,EAAK8rC,WAAa7+B,EAAE8+B,UAAYltC,EAAE0B,QAAQmY,EAAQ3D,IAAa,IAC5EgY,EAAQhN,GAAG,2BACZgN,EAAQxgB,SAASwT,GAAG,uDAAwD,CAUxE,GATA9S,EAAES,iBACFT,EAAE0vB,kBAEF+O,IADA3e,EAAU/S,EAAO+S,EAAUA,EAAQxgB,UACVuN,SAASnW,KAAa+G,EAAKwZ,WAAW7P,QAAQgB,OAAS,EAE5Eib,IAAatW,IACb+S,EAAUA,EAAQthB,IAAIf,EAAK+yB,YAAY1Q,KAGvC2d,EACA,GAAKz9B,EAAEY,SAGH,GAAIkf,EAAQjT,SAASnW,IAGjB,OAFA+G,EAAKshC,mBAAmBjf,QACxBriB,EAAK0E,QAAQ3M,QAJjBiI,EAAKwZ,WAAW+nB,aASpBvhC,EAAKwZ,WAAW+nB,QAEfjyB,IACDtP,EAAKwZ,WAAWgoB,YAAcnf,GAElCriB,EAAKwZ,WAAW7P,MAAM0Y,GAClB2e,GACAhhC,EAAK0E,QAAQ3M,EAEzB,MAAYuX,IACPnb,EAAE6Z,GAAQqH,GAAG,OAAUlhB,EAAE6Z,GAAQqH,GAAG,UAAYxf,EAAQmY,EAAQ1O,KAAKoc,uBACtEnZ,EAAE8+B,UAAY9+B,EAAE4+B,SAAW7rC,EAAKmsC,MAChCl/B,EAAE8+B,UAAY9+B,EAAE4+B,SAAW7rC,EAAKosC,OAChCn/B,EAAE8+B,UAAY9+B,EAAE4+B,SAAW7rC,EAAKqsC,IAChCp/B,EAAE8+B,UAAY9+B,EAAE4+B,SAAW7rC,EAAKssC,MAChCr/B,EAAE4+B,UAAY7rC,EAAK8rC,UAAY7+B,EAAE8+B,YACjC9+B,EAAES,iBACFT,EAAE0vB,kBACF5P,EAAUA,EAAQxgB,SAElBo/B,EAAgBjhC,EAAKwZ,WAAW7P,QAE5Bic,IACAvD,EAAUA,EAAQthB,IAAIf,EAAK+yB,YAAY1Q,KAGvC2d,GACKhgC,EAAKwZ,WAAWgoB,cACjBxhC,EAAKwZ,WAAWgoB,YAAcnf,GAElCriB,EAAKwZ,WAAWqoB,YAAY7hC,EAAKwZ,WAAWsoB,iBAAkBzf,GAmxN3F,SAAyBnjB,EAAS6iC,GAC9B,GAAI7iC,EAAQyL,SAAWo3B,EAAUp3B,OAC7B,OAAO,EAGX,IAAK,IAAI4C,EAAI,EAAGA,EAAIrO,EAAQyL,OAAQ4C,IAChC,GAAIrO,EAAQqO,KAAOw0B,EAAUx0B,GACzB,OAAO,EAIf,OAAO,CACX,CA7xNkCy0B,CAAgBf,EAAejhC,EAAKwZ,WAAW7P,UAChD3J,EAAK0E,QAAQ3M,EAAQmpC,IAEjB7e,EAAQjT,SAASnW,MACzB+G,EAAKwZ,WAAW+nB,QAChBvhC,EAAKwZ,WAAW7P,MAAM0Y,GACtBriB,EAAK0E,QAAQ3M,IAGzB,GAER,CACJ,EAEAqgB,WAAY,WACR,IAAIjZ,EAAUG,KAAKH,QAEnB,GADiBA,EAAQqa,YACPra,EAAQya,UAAW,CACjC,IAAIojB,EAAO19B,KACNH,EAAQoa,cACTyjB,EAAKxoB,MAAM7d,KAAK0E,GAAU,GAE1B2hC,EAAKxoB,MAAMzT,IAAIi8B,EAAK9e,aACfpc,GAAGlH,GAAYxD,EAAK,WAAaA,EAAI,kBAAkB,SAASmL,GACzDA,EAAEyL,SAAWzL,EAAEiB,eACfjB,EAAE0/B,0BAEV,IACCngC,GAAGlH,GAAYxD,EAAIR,EAAS,IAAMC,EAASqrC,GAAW/hC,KAAK68B,KAEpEA,EAAK5gB,YAAc4gB,EAAKmF,cAAchiC,KAAK68B,GAC3CA,EAAK3gB,qBAAuB,WACpB2gB,EAAKoF,eACLpF,EAAKoF,cAAcC,IAAIrF,EAAKsF,UAAU59B,QAAQ,SAASgkB,QAE/D,EACAsU,EAAK78B,KAAK,SAAS68B,EAAK3gB,sBACxB2gB,EAAKl8B,QAAQgB,GAAG,UAAWk7B,EAAK5gB,aAChC4gB,EAAK1gB,iBAAmB0gB,EAAK9gB,UAAU/b,KAAK68B,GAC5CA,EAAKl8B,QAAQgB,GAAG,QAASk7B,EAAK1gB,iBAClC,CACJ,EAEAimB,yBAA0B,SAASC,GAC/BljC,KAAKmjC,uBACLnjC,KAAK8iC,cAAcC,IAAI/iC,KAAKgjC,OAAOE,IAAiB99B,QAAQ,SAASgkB,SACrE9e,SAAS84B,YAAY,OACzB,EAEAP,cAAe,SAAS5/B,GACfA,aAAaogC,OAAOC,QAAWrgC,EAAEY,UAAWZ,EAAEsgC,SAC/C1uC,EAAEoO,EAAEyL,QAAQqH,GAAG,mCACd9gB,OAAOuuC,cAAgBvuC,OAAOuuC,eAAeC,YAC7Cn5B,SAASo5B,WAAap5B,SAASo5B,UAAUC,cAAcllC,OAI5DuB,KAAKmjC,uBACLnjC,KAAK8iC,cAAcC,IAAI/iC,KAAKgjC,UAAU59B,QAAQ,SAASgkB,SAE3D,EAEA+Z,qBAAsB,WACbnjC,KAAK8iC,gBACN9iC,KAAK8iC,cACDjuC,EAAE,gBACDoN,IAAI,CACDuE,SAAU,QACVue,IAAK,MACL1S,KAAM,MACNuxB,QAAS,EACT1hC,MAAO,EACPoC,OAAQ,IAEXX,SAAS3D,KAAKwB,SAE3B,EAEAwhC,OAAQ,SAASE,GACb,IAAIxF,EAAO19B,KACP6jC,EAAWnG,EAAKtU,SAChB0a,EAAY,KACZxpB,EAAYojB,EAAK79B,QAAQya,UAEzBypB,EAAgBrG,EAAKgB,aAAeptB,GAAcosB,EAAK/xB,SAASN,OAEhExW,EAAEoB,cAAcqkB,IAAcA,EAAUwpB,YACxCA,EAAYxpB,EAAUwpB,WAE1B,IAAIrlC,EAAO,GACX,GAAIolC,EAASx4B,OAAQ,CACbw4B,EAAS/4B,GAAG,GAAGiL,GAAGhZ,MAClB8mC,EAAWA,EAAS34B,KAAK,0BAGzB24B,EAAS54B,OAAO,YAGpB,IAKIiB,EALAxF,EAAS,GACTs9B,EAAchkC,KAAK2L,QAAQN,OAC3B44B,EAAavG,EAAKgB,aAAeptB,GAAcosB,EAAK/xB,SAASN,OAC7D64B,GAAe,EACf9Q,EAAS,GAETznB,EAAUqH,GAAmBhT,KAAK2L,SAEtC9W,EAAE2rB,KAAKqjB,GAAU,SAASv7B,EAAK0H,GAC3BA,EAAOnb,EAAEmb,GACT9D,EAAQwxB,EAAKyG,cAAcn0B,EAAM+zB,GAEjC,IACIx9B,EADKyJ,EAAKmE,QAAQpX,IACJ0J,QACd2qB,EAAYphB,EAAKvJ,QAEjB2qB,GAAaphB,EAAKwE,QAAQ,WAAWnJ,OAErC44B,GAAcC,IACdA,EAAervC,EAAEiC,SAAS4mC,EAAK9e,YAAY,GAAI5O,EAAK,KAEpD0tB,EAAKnkB,WAAa2qB,IAClB9S,GAAasM,EAAKnkB,WAEtB6X,EAAY8S,EAAe9S,EAAaA,EAAY6S,EAChD/3B,IACAknB,EAAOhC,GAAallB,GAEpB83B,EAAc5S,IACd4S,EAAc5S,GAElB,IAAIgT,EAAWp0B,EAAKvR,OACfiI,EAAOH,KACRG,EAAOH,GAAY,IAEvBG,EAAOH,GAAU6qB,GAAagT,CAClC,IAEA,IAAIC,EAAa39B,EAAO2E,OAUxB,GATA3E,EAAS7R,EAAE2rB,KAAK9Z,GAAQ,SAAS4B,EAAKy6B,GAC9BA,IACAr8B,EAAO4B,GAAOy6B,EAAIjW,MAAMkX,GACpBK,EAAa/7B,IACb+7B,EAAa/7B,GAGzB,IAEI46B,GAAkB9P,EAAO/nB,OAAQ,CACjC3E,EAAOoG,OAAOu3B,EAAY,EAAGjR,EAAOj9B,KAAI,SAAS+V,GAC7C,OA82NrB,SAAkBA,EAAOP,GACpB,OAAOA,EAAQV,QAAO,SAASob,GAC3B,OAAOA,EAAIna,QAAUA,CACzB,IAAG,GAAGoH,OAASpH,CACnB,CAl3N2Bo4B,CAASp4B,EAAOP,EAC3B,KAEA,IAAI44B,EAAc79B,EAAO89B,WAAU,SAAS30B,GACxC,OAAOA,IAAO/a,CAClB,IAEA4R,EAAO69B,GAAe79B,EAAO69B,GAAazX,MAAMkX,EACpD,CAEAnvC,EAAE2rB,KAAK9Z,EAAOomB,MAAMuX,IAAa,SAAS/7B,EAAKy6B,GAEvCtkC,GADAskC,EACQA,EAAI15B,KAAKy6B,GAAa,OAEtB,MAEhB,GACJ,CACA,OAAOrlC,CACX,EAEAme,UAAW,SAAS3Z,GACZjD,KAAK8iC,eAAiB7/B,GAAKA,EAAEyL,SAAW1O,KAAK8iC,cAAc,IAC3DrM,GAAWz2B,KAAKkV,OAAO,GAGvBlV,KAAK8iC,gBACL9iC,KAAK8iC,cAAc5wB,SACnBlS,KAAK8iC,cAAgB,KAE7B,EAEA5pB,iBAAkB,WACd,IAAIxY,EAAOV,KAEPU,EAAK+jC,4BACL/jC,EAAKgkC,2BAA2BhkC,EAAKiL,SACrCjL,EAAKikC,kCAEb,EAEAF,wBAAyB,WACrB,OAAOzkC,KAAK4kC,yBAAyBv5B,MACzC,EAEAu5B,uBAAwB,WACpB,OAAO52B,GAAiBhO,KAAK2L,QACjC,EAEAg5B,gCAAiC,WAC7B,IAAIjkC,EAAOV,KAEXU,EAAKud,kCACLvd,EAAKmkC,0BAA4BnkC,EAAKokC,qBAAqBjkC,KAAKH,GAChE7L,EAAEI,QAAQuN,GAAG7H,GAAS7C,EAAI4I,EAAKmkC,0BACnC,EAEA5mB,gCAAiC,WAClBje,KAEF6kC,2BACLhwC,EAAEI,QAAQ0M,IAAIhH,GAAS7C,EAHhBkI,KAGyB6kC,0BAExC,EAEAC,qBAAsB,WAClB,IAAIpkC,EAAOV,KACXU,EAAKgkC,2BAA2BhkC,EAAKiL,SACrCjL,EAAKqkC,uBACT,EAEAL,2BAA4B,SAAS/4B,GAGjC,IAFA,IAAIiG,EAAOjG,GAAW,GAEbsC,EAAI,EAAGA,EAAI2D,EAAKvG,OAAQ4C,IAC7BjO,KAAKglC,0BAA0BpzB,EAAK3D,GAE5C,EAEA+2B,0BAA2B,SAASh5B,GAChC,IAAItL,EAAOV,KAEP0N,GAAY1B,EAAO2B,OACnBjN,EAAKgkC,2BAA2B14B,EAAOL,SAEnC8B,GAAmBzB,IACnBtL,EAAKukC,mBAAmBj5B,GAEnBA,EAAOC,QACRvL,EAAKgkC,2BAA2B14B,EAAOL,UAG3CjL,EAAKwkC,mBAAmBl5B,EAGpC,EAEAi5B,mBAAoB,SAASj5B,GACpBA,EAAOC,QAERjM,KAAK0/B,WAAW1zB,GAGpBsB,GAAsBtB,EAC1B,EAEAk5B,mBAAoB,SAASl5B,GACzB,IAAIm5B,EAAkBn5B,EAAOC,OAExBk5B,IACDn5B,EAAOuB,cAAe,EACtBvN,KAAK2/B,WAAW3zB,GAChBA,EAAOuB,cAAe,EAGtBvB,EAAOC,OAASk5B,GAGpB73B,GAAsBtB,EAC1B,EAEA+4B,sBAAuB,WACnB,IAGIpmB,EAniLc/e,EAgiLdc,EAAOV,KACPH,EAAUa,EAAKb,QACfymB,EAAW5lB,EAAKg+B,YAGpB,GAAI7+B,EAAQga,cAAqC,IAAtBha,EAAQib,WAAuBjb,EAAQib,YAA2C,IAA9Bjb,EAAQib,UAAUnP,SAAoB,CAC7G2a,GAAY5lB,EAAKme,aACjBF,EAASje,EAAKme,aAAaxc,SAAS,SAC7B3B,EAAKie,SACZA,EAASje,EAAKie,OAAOzT,KAAK,+BAGzByT,GAAWA,EAAO,KACnBA,EAAS9pB,KAGb,IAAI6xB,EAASJ,EAAW5lB,EAAKc,QAAQ0J,KAAK,yBAAyBA,KAAK,SAAWxK,EAAKc,QAAQ0J,KAAK,kBAAkBA,KAAK,SACxHub,EAAeH,EAAW5lB,EAAKke,YAAcle,EAAKwU,MAElDkwB,EAAgB1e,EAAOxb,KAAK,MAC5Bm6B,EAAiB3e,EAAOxb,KAAK,YAE7Bo6B,EAAqBF,EAAc/5B,OACnCk6B,EAA4BH,EAAcn6B,OAAO2C,IAAevC,OAChEm6B,EAA2BJ,EAAc/5B,OAASk6B,EAElDE,EAAmB,EAEvB,GAA8B,KAA1B/e,EAAO,GAAG7Y,MAAM3L,OAAgBkjB,WAAWsB,EAAO,GAAG7Y,MAAM3L,SAAWujC,EAAkB,CAGxF,IAFA,IAAIC,EAAqBhf,EAAOzkB,IAAIpG,IAE3BoS,EAAI,EAAGA,EAAIq3B,EAAoBr3B,IACpC,GAhkLMrO,EAgkLewlC,EAAcn3B,GA/jL5CpZ,EAAE+K,GAAS,GAAGiO,MAAMC,UAAYnQ,GA+jLiB,CACpC,IAAIyoB,EACAgL,EAAYp6B,KAAK2N,IAAIsJ,EAAIA,EAAIu3B,GAC7BG,EAAgBN,EAAehjC,WAAW+uB,GAC1CwU,EAAmBD,EAAgBA,EAAc93B,MAAM3L,MAAQ,GAE1C,KAArB0jC,EACAxf,EAAchB,WAAWwgB,IAGzBlf,EAAOzkB,IAAIpG,GAAOC,IAClBsqB,EAAcxwB,EAAWwvC,EAAct6B,GAAGmD,IAC1CyY,EAAOzkB,IAAIpG,GAAO6pC,IAGtBD,GAAoBrf,CACxB,CAGJK,EAAaxkB,IAAI,QAASwjC,EAAmB,GAC7C/e,EAAOzkB,IAAI,QAASwjC,GACpB9mB,EAAO1c,IAAI,QAASwjC,GACpB/kC,EAAK2mB,sBACT,CACJ,CACJ,EAEAlO,kBAAmB,WACLnZ,KAAK6lC,sBAGX7lC,KAAKge,uBAAyBhe,KAAK6lC,kBAAkBhlC,KAAKb,MAC1DnL,EAAEI,QAAQuN,GAAG,SAAUxC,KAAKge,wBAEpC,EAEA6nB,kBAAmB,WACf,IAAIj0B,EAAO5R,KAAK2L,QACZm6B,EAAe7wC,OAAO8wC,WAAa,EAAK9wC,OAAO8wC,WAAaC,OAAO9jC,MAEvE,OAAOlC,KAAKimC,sBAAsBr0B,EAAMk0B,EAC5C,EAEAG,sBAAuB,SAASr0B,EAAMk0B,GAGlC,IAFA,IAAII,GAAM,EAEDj4B,EAAI,EAAGA,EAAI2D,EAAKvG,OAAQ4C,IAAK,CAClC,IAAIoY,EAAMzU,EAAK3D,GACXmhB,EAAW/I,EAAInY,eACfkhB,IAAat6B,GAA4B,OAAbs6B,IAC5B8W,GAAM,EACF9W,EAAW0W,EACX9lC,KAAK2/B,WAAWtZ,GAEhBrmB,KAAK0/B,WAAWrZ,KAGnBA,EAAIpa,QAAUoa,EAAI1a,UACnBu6B,EAAMlmC,KAAKimC,sBAAsB5f,EAAI1a,QAASm6B,IAAgBI,EAEtE,CACA,OAAOA,CACX,EAEA/tB,eAAgB,WACDnY,KAEFkxB,qBAFElxB,KAGFmmC,mBAAkB,EAE/B,EAEA9e,qBAAsB,WAClB,IAAI3mB,EAAOV,KACPkwB,EAAmC95B,EAAKwZ,GAAYlP,EAAKiL,UAAU,SAASK,GAAU,OAAOA,EAAOmkB,yBAA2B,IAE/HzvB,EAAKwwB,sBACLxwB,EAAKylC,mBAAkB,GACvBzlC,EAAKiY,aAEDuX,EAAiC7kB,OAAS,GAC1C3K,EAAK+vB,mBAGL/vB,EAAKqsB,iBACLrsB,EAAKywB,2BAGjB,EAEAA,yBAA0B,WACtB,IACIiV,EADOpmC,KACYyP,MAAMvE,KAAK,iBAAiBA,KAAK,2CACpDk7B,EAAY/6B,QACZ+6B,EAAY5lB,MAAK,WACb,IAAIC,EAAK5rB,EAAEmL,MACPgM,EAASyU,EAAGrrB,KAAK,UACjByY,EAAQ4S,EAAGppB,KAAK,UAAY,GAC5B2U,EAAO6G,QACP4N,EAAGppB,KAAK,QAASwW,EAAQ7B,EAAOq6B,aAChC5lB,EAAGjL,SAASjb,MAGZsT,GADAA,EAAQA,EAAMpC,QAAQvN,GAAY,KACpBuN,QAAQrN,GAAa,IACnCqiB,EAAGppB,KAAK,QAASwW,GACjB4S,EAAGX,YAAYvlB,IAEvB,GAER,EAEA22B,kBAAmB,WAGf,OAAOte,GAFI5S,KAEe2L,SAASN,MACvC,EAEA86B,kBAAmB,SAASG,GACxB,IAAI5lC,EAAOV,KACP2L,EAAUiH,GAAclS,EAAKiL,SAC7BoC,EAlvKZ,SAA8BpC,GAC1B,OAAOvV,EAAKuV,GAAS,SAASK,GAC1B,OAAOA,EAAO6G,SAAW7G,EAAOF,QAAUK,GAAUH,EACxD,GACJ,CA8uK6Bu6B,CAAqB7lC,EAAKiL,SAC3C66B,EAAe9lC,EAAK+lC,uBAAuB14B,GAE/CrN,EAAKswB,wBAAwBrlB,GAC7BjL,EAAKgmC,0BAA0B/6B,GAC/BjL,EAAKimC,0BAA0B54B,EAAgBy4B,EAAcF,GAEzDA,GACA5lC,EAAKkmC,iBAAiB74B,EAAgBy4B,EAE9C,EAEAC,uBAAwB,SAAS96B,EAASk7B,EAAkBC,GACxD,IACI74B,EACAjC,EAEA+6B,EACAC,EACA30B,EAAOrT,GAAQ,QAAU,OACzBsT,EAAQtT,GAAQ,OAAS,QACzBwnC,EAAe,CACfn0B,KAAM,IAAI/b,MAAMqV,EAAQN,QAAQ47B,KAAKJ,GAAsC,GAC3Ev0B,MAAO,IAAIhc,MAAMqV,EAAQN,QAAQ47B,KAAKH,GAAwC,IAGlF,IAAK74B,EAAI,EAAGA,EAAItC,EAAQN,OAAS,EAAG4C,IAChCjC,EAASL,EAAQsC,GAEjB84B,EAhBO/mC,KAeYknC,gBAAgBl7B,GACJw6B,EAAan0B,GAAMpE,GAElDu4B,EAAan0B,GAAMpE,EAAI,GAAK84B,EAGhC,IAAK94B,EAAItC,EAAQN,OAAS,EAAG4C,EAAI,EAAGA,IAChCjC,EAASL,EAAQsC,GAEjB+4B,EAxBOhnC,KAuBYknC,gBAAgBl7B,GACHw6B,EAAal0B,GAAOrE,GAEpDu4B,EAAal0B,GAAOrE,EAAI,GAAK+4B,EAGjC,OAAOR,CACX,EAEAE,0BAA2B,SAAS/6B,EAASw7B,GACzC,IACIl5B,EACAjC,EAEJ,IAAKiC,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,KAC5BjC,EAASL,EAAQsC,IAENtC,WACFw7B,GAAel5B,IAChBk5B,EAAcl5B,GATfjO,KAYE0mC,0BAA0BvzB,GAAa,CAACnH,IAAUm7B,IAGvDA,GACAz0B,GAAmB1G,EAAQ,mBAAoB,QAASvR,IAE5DiY,GAAmB1G,EAAQ,aAAc,QAAS1R,IAClDoY,GAAmB1G,EAAQ,mBAAoB,QAASzR,IACxDmY,GAAmB1G,EAAQ,mBAAoB,QAASxR,GAEhE,EAEAmsC,0BAA2B,SAASh7B,EAAS66B,EAAcF,GACvD,IACIr4B,EACAjC,EACAo7B,EACAC,EACAhB,EACAiB,EACAC,EAPA7mC,EAAOV,KASX,IAAKiO,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAC5BjC,EAASL,EAAQsC,GAGjBo4B,EAAc,UAFde,EAAaZ,EAAan0B,KAAKpE,IAEO,eADtCo5B,EAAcb,EAAal0B,MAAMrE,IACmC,MAEhEjC,EAAOL,UACP27B,EAAYl0B,GAAoB,CAACpH,IACjCu7B,EAAoB7mC,EAAK+lC,uBAAuBa,EAAWF,EAAYC,GAEvE3mC,EAAKimC,0BAA0BW,EAAWC,EAAmBjB,GAEzDA,GACA5lC,EAAKkmC,iBAAiBU,EAAWC,IAIzC70B,GAAmB1G,EAAQ,aAAc,QAASq6B,GAClD3zB,GAAmB1G,EAAQ,mBAAoB,QAASq6B,GACxD3zB,GAAmB1G,EAAQ,mBAAoB,QAASq6B,GAExDr6B,EAAOq6B,YAAcA,CAE7B,EAEArV,wBAAyB,SAASrlB,GAC9B,IACIsC,EAKAjC,EAJAw7B,EAAkB,IAAIrpC,OAAO,QAAU7D,GAAoB,KAAM,MACjEmtC,EAAoB,IAAItpC,OAAO,QAAU5D,GAAsB,KAAM,MACrEmtC,EAAoB,IAAIvpC,OAAO,QAAU3D,GAAsB,KAAM,MACrEmtC,EAA4B,IAAIxpC,OAAO,QAAU1D,GAAgC,KAAM,MAG3F,IAAKwT,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,KAC5BjC,EAASL,EAAQsC,IAENtC,SAXJ3L,KAYEgxB,wBAAwB7d,GAAa,CAACnH,KAG/C2G,GAAsB3G,EAAQ,aAAc,QAASw7B,GACrD70B,GAAsB3G,EAAQ,aAAc,QAAS9N,IACrDyU,GAAsB3G,EAAQ,aAAc,QAAS5N,IAErDuU,GAAsB3G,EAAQ,mBAAoB,QAASy7B,GAC3D90B,GAAsB3G,EAAQ,mBAAoB,QAAS27B,GAC3Dh1B,GAAsB3G,EAAQ,mBAAoB,QAAS9N,IAC3DyU,GAAsB3G,EAAQ,mBAAoB,QAAS5N,IAE3DuU,GAAsB3G,EAAQ,mBAAoB,QAAS07B,GAC3D/0B,GAAsB3G,EAAQ,mBAAoB,QAAS9N,IAC3DyU,GAAsB3G,EAAQ,mBAAoB,QAAS5N,GAEnE,EAEAwoC,iBAAkB,SAASj7B,EAAS66B,GAChC,IACIv4B,EACA6U,EAGAjc,EACAmF,EACA2K,EACAtE,EACAC,EACAoU,EACA/H,EACAjD,EACA1L,EAbAtP,EAAOV,KAGP4nC,EAAYh4B,GAAY2B,GAAiB7Q,EAAKiL,UAC9CsD,EAAOvO,EAAKuU,MAAM5S,SAAS,uBAW/B,IAAK4L,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAa5B,GAZAjC,EAASL,EAAQsC,GACjBoE,EAAOm0B,EAAan0B,KAAKpE,GACzBqE,EAAQk0B,EAAal0B,MAAMrE,GAC3B0I,EAAcixB,EAAU71B,QAAQ/F,IAChC0a,EAAShmB,EAAKmnC,iBAAiB77B,IAExBwJ,SAASjb,IACZyR,EAAOM,iBAAwB,QAAkF,IAA7EN,EAAOM,iBAAwB,MAAEyF,QAAQtX,KAC7EisB,EAAOlR,SAAS/a,IAEpB2X,GAAsBsU,EAAQrU,EAAMC,IAEhCtG,EAAOL,QAWX,IAPIjL,EAAKie,UACLA,EAASje,EAAKie,OAAOzT,KAAK,4CAA4C7I,WAAW4I,OAAO,yCAAyCH,GAAG6L,IAE7HnB,SAAShb,IAChB4X,GAAsBuM,EAAQtM,EAAMC,IAGnCwQ,EAAI,EAAGA,EAAI7T,EAAK5D,OAAQyX,KACzBjc,EAAMhS,EAAEoa,EAAK6T,KAELhT,SAASpV,MACbghB,EAAc7U,EAAIqE,KAAK,IAAMc,EAAO87B,iCAExBtyB,SAASlb,IACrB8X,GAAsBsJ,EAAarJ,EAAMC,MAEzCtC,EAAOnJ,EAAIxE,WAAW4I,OAAO,yCAAyCH,GAAG6L,IAEpEnB,SAASlb,IACd8X,GAAsBpC,EAAMqC,EAAMC,GAIlD,EAEA2e,oBAAqB,SAAStlB,GAC1B,IACIsC,EACA6U,EAGAjc,EACAmF,EACA2K,EACA+P,EACA/H,EACAjD,EACA1L,EAXAtP,EAAOV,KAGP4nC,EAAYh4B,GAAY2B,GAAiB7Q,EAAKiL,UAC9CsD,EAAOvO,EAAKuU,MAAM5S,SAAS,uBAS/B,IAAK4L,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAS5B,GARAjC,EAASL,EAAQsC,GACjB0I,EAAcixB,EAAU71B,QAAQ/F,IAChC0a,EAAShmB,EAAKmnC,iBAAiB77B,IAExB8T,YAAYvlB,IACnBmsB,EAAO5G,YAAYrlB,IACnB2X,GAAsBsU,EAAQ,GAAI,IAE9B1a,EAAOL,QACPjL,EAAKuwB,oBAAoBjlB,EAAOL,cAWpC,IAPIK,EAAOsS,gBAAkB5d,EAAKie,UAC9BA,EAASje,EAAKie,OAAOzT,KAAK,4CAA4C7I,WAAW4I,OAAO,yCAAyCH,GAAG6L,IAE7HmJ,YAAYtlB,IACnB4X,GAAsBuM,EAAQ,GAAI,KAGjCmE,EAAI,EAAGA,EAAI7T,EAAK5D,OAAQyX,KACzBjc,EAAMhS,EAAEoa,EAAK6T,KAELhT,SAASpV,MACbghB,EAAc7U,EAAIqE,KAAK,IAAMc,EAAO87B,iCAExBhoB,YAAYxlB,IACxB8X,GAAsBsJ,EAAa,GAAI,OAEvC1L,EAAOnJ,EAAIxE,WAAW4I,OAAO,yCAAyCH,GAAG6L,IAEpEmJ,YAAYxlB,IACjB8X,GAAsBpC,EAAM,GAAI,IAIhD,EAEA63B,iBAAkB,SAAS77B,GAIvB,OAFanX,EAAE,IAAMmX,EAAOM,iBAAiB/X,IAAI8W,OAASxW,EAAE,IAAMmX,EAAOM,iBAAiB/X,IAAMM,EAAE,IADvFmL,KACkGyjB,QAGjH,EAEAyjB,gBAAiB,SAASl7B,GAUtB,OANIA,EAAOL,QAHA3L,KAIM+nC,kBAAkBn4B,GAAY,CAAC5D,KAJrChM,KAMM+nC,kBAAkB,CAAC/7B,GAIxC,EAEA+7B,kBAAmB,SAASn2B,GACxB,IAGIyU,EACAK,EACAzY,EAJA/L,EAAQ,EACR4P,EAAW,EAIXzG,EAASuG,EAAKvG,OAElB,IAAK4C,EAAI,EAAGA,EAAI5C,EAAQ4C,IACpBoY,EAAMzU,EAAK3D,GACXyY,EAVO1mB,KAUO6nC,iBAAiBxhB,IAE1BA,EAAIpa,QAAUwB,GAAmB4Y,KAGlCnkB,IAFA4P,EAAW4U,EAAO3Q,GAAG,YAAc2Q,EAAO9wB,aAAeywB,EAAInkB,OAEzCmE,SAASyL,EAAU,IAAM,GAIrD,OAAO5P,CACX,EAEAswB,eAAgB,SAAS5yB,GACrB,OAAOI,KAAKwB,QAAQ,KAAO5B,EAAQuU,QA7wN7B,WA6wN8C,EACxD,EAEA6zB,gBAAiB,WAQb,IAPA,IAAItnC,EAAOV,KACPioC,EAAiBvnC,EAAKwZ,WAAW+tB,iBACjCC,EAAqBrf,OAAO7yB,KAAKiyC,GACjCE,EAAsBznC,EAAKwZ,WAAWiuB,sBACtCzhC,EAAS,GACTqH,EAAiBiF,GAAmBtS,EAAKiL,SAEpCrD,EAAM,EAAGA,EAAM4/B,EAAmB78B,OAAQ/C,IAC/C5B,EAASA,EAAO0H,OAAO1N,EAAK0nC,oBAAoBH,EAAeC,EAAmB5/B,IAAOyF,IAO7F,OAJIo6B,EAAoB98B,SACpB3E,EAASA,EAAO0H,OAAO1N,EAAK0nC,oBAAoBD,EAAqBp6B,KAGlErH,CACX,EAEA2hC,sBAAuB,SAASnF,GAC5B,IAAKluC,EAAMgV,QAAUhV,EAAMszC,MACvB,MAAM,IAAIn6B,MAAM,iIAGpB,IAgBI7F,EAhBA5H,EAAOV,KACPgK,EAAQhK,KAAKH,QAAQmK,OAAS,CAAC,EAC/B+D,EAAiBiF,GAAmBtS,EAAKiL,SACzC48B,EAAW,IAAIvzC,EAAMgV,MAAMw+B,cAAc,CAAC,GAE1CC,EAAO,CACPC,OAAQ,CAAC,CACL/8B,QAASrV,MAAMyhB,MAAM,EAAGzhB,MAAMyX,EAAe1C,SAASlV,KAH1C,WAAY,MAAO,CAAEwyC,WAAW,EAAO,IAInD15B,KAAM,GACN25B,WAAY,CAAC,EACb39B,QAAQ,KAGZg9B,EAAiBvnC,EAAKwZ,WAAW+tB,iBACjCC,EAAqBrf,OAAO7yB,KAAKiyC,GACjCE,EAAsBznC,EAAKwZ,WAAWiuB,sBAEtCU,EAAa,GACb9E,EAAgBrjC,EAAKg+B,aAAeptB,GAAc5Q,EAAKiL,SAASN,OAChEy9B,EAAcC,GAAeloC,KAAKH,GAEtC,IAAK4H,EAAM,EAAGA,EAAM4/B,EAAmB78B,OAAQ/C,IAC3CugC,EAAaA,EAAWz6B,OAAO1N,EAAK0nC,oBAAoBH,EAAeC,EAAmB5/B,IAAOyF,EAAgBi7B,KAgBrH,GAbIH,EAAWx9B,QACX3K,EAAKuoC,uBAAuBR,EAAMF,EAAUM,EAAY3F,IAG5D2F,EAAaV,EAAoB98B,OAAS3K,EAAK0nC,oBAAoBD,EAAqBp6B,EAAgBi7B,IAA2B,IAEpH39B,SACP04B,IACA8E,EAAaA,EAAWh1B,KAAKi1B,IAEjCpoC,EAAKwoC,wBAAwBT,EAAMF,EAAUM,EAAY3F,IAGzDuF,EAAKC,OAAO,GAAGz5B,KAAK5D,OAAQ,CAC5B,IAAI89B,EAAW,IAAIn0C,EAAMszC,MAAMc,SAASX,GAEnCU,EAAStpC,UACVspC,EAAStpC,QAAU,CAAC,GAExBspC,EAAStpC,QAAQwpC,kBAAmB,EAEpCF,EAASG,iBAAiBtxB,MAAK,SAASuxB,GACpCv0C,EAAMw0C,OAAO,CACTD,QAASA,EACTE,SAAUhB,EAAKgB,UAAYz/B,EAAMy/B,SACjCC,SAAU1/B,EAAM0/B,SAChBC,WAAY3/B,EAAM2/B,YAE1B,GACJ,CACJ,EAEAT,wBAAyB,SAAST,EAAMF,EAAUnzC,EAAM8tC,GACpD,IAEI9sB,EAFA9N,EAAM,EACNyF,EAAiBkF,GAAyBjT,KAAK2L,SAGnD,IAAKrD,EAAM,EAAGA,EAAMlT,EAAKiW,OAAQ/C,IAC7B8N,EAAOhhB,EAAKkT,GACZigC,EAASnzC,KAAO,CAACghB,GACjBpW,KAAK4pC,oBAAoBrB,EAAUx6B,EAAgBqI,GACnDpW,KAAK6pC,kBAAkBpB,EAAMF,EAAUrF,EAE/C,EAEA+F,uBAAwB,SAASR,EAAMF,EAAUnzC,EAAM8tC,GACnD,IAAIn1B,EAAiBkF,GAAyBjT,KAAK2L,SAEnD48B,EAASnzC,KAAOA,EAChB4K,KAAK4pC,oBAAoBrB,EAAUx6B,EAAgB3Y,EAAK,IACxD4K,KAAK6pC,kBAAkBpB,EAAMF,EAAUrF,EAC3C,EAEA2G,kBAAmB,SAASpB,EAAMF,EAAUrF,GACxCuF,EAAKC,OAAO,GAAGz5B,KAAOw5B,EAAKC,OAAO,GAAGz5B,KAAKb,OAAO80B,EAAiBqF,EAASuB,QAAUvB,EAASwB,UAAUxB,EAASnzC,KAAM,GAC3H,EAEAw0C,oBAAqB,SAASrB,EAAU58B,EAASyK,GAC7CmyB,EAAS58B,QAAU48B,EAAS1oC,QAAQ8L,QAAU9W,EAAEsB,IAAIwV,EAAQV,QAAO,SAASob,GACxE,OAAOwC,OAAO7yB,KAAKogB,GAAMrE,QAAQsU,EAAIna,QAAU,CACnD,IAAIq8B,EAASyB,eACjB,EAEA5B,oBAAqB,SAASr9B,EAAUgD,EAAgBk8B,GAsBpD,IArBA,IAGInb,EAEAlvB,EACAsqC,EACAh+B,EAYAF,EAnBAtL,EAAOV,KAEPmqC,EAAiC,OADnBp/B,EAAS,GAAG,GAAGq/B,SAG7B1jC,EAAS,CAAC,EAIV2jC,EAAmB,SAAShkB,GAC5B,IAAI3f,EAAS,CAAC,EAEd,GAAK2f,EAAIna,SAAU+9B,GAAkBA,EAAc5jB,IAKnD,OADA3f,EAAO2f,EAAIna,OAAS4iB,EAASzI,EAAIna,OAC1BxF,CACX,EACIq9B,EAAgBrjC,EAAKg+B,aAAeptB,GAAc5Q,EAAKiL,SAASN,OAG3D4C,EAAI,EAAGA,EAAIlD,EAASM,OAAQ4C,IAIjC,GAHArO,EAAUmL,EAASkD,GACnB6gB,EAAWpuB,EAAKouB,SAASqb,EAAiBvqC,EAAUA,EAAQ2C,UAExD4nC,EACAzjC,EAAOooB,EAASviB,KAAO1X,EAAEqB,OAAO6hB,MAAM,KAAMhK,EAAe5X,IAAIk0C,QAC5D,CAGH,KAFAn+B,EAAQxL,EAAKyjC,cAAcvkC,EAASmkC,IAGhC,SAWJ,IARAmG,EAAOxjC,EAAOooB,EAASviB,QAGnB29B,EAAOxjC,EAAOooB,EAASviB,KAAO,CAAC,KAGnCP,EAASuC,GAAkBR,EAAgB7B,KAE3B+9B,IAAkBA,EAAcj+B,GAC5C,SAGJk+B,EAAKh+B,GAAS4iB,EAAS5iB,EAC3B,CAGJ,OAAO2c,OAAO7yB,KAAK0Q,GAAQvQ,KAAI,SAAS5B,GAEpC,OADAmS,EAAOnS,GAAIgY,IAAMhY,EACVmS,EAAOnS,EAClB,GACJ,EAEA4vC,cAAe,SAASn0B,EAAM+zB,GAC1B,IAAIrG,EAAO19B,KACPkkC,EAAeH,GAAiBlvC,EAAEiC,SAAS4mC,EAAK9e,YAAY,GAAI5O,EAAK,IACrEs6B,EAAYt1C,EAAMqC,KAAK,SACvBoP,EAAQzR,EAAMqC,KAAK,SAEvB,OAAI0sC,EACOrG,EAAK99B,QAAQsL,KAAK,mBAAqBg5B,EAAe,SAAW,QAAU,OAASz9B,EAAQ,KAAOuJ,EAAKvJ,QAAU,MAAMpP,KAAKizC,GAE7H5M,EAAKjuB,MAAMvE,KAAK,MAAQzE,EAAQ,KAAOuJ,EAAKvJ,QAAU,MAAMpP,KAAKizC,EAEhF,EAEA7W,YAAa,SAAS5sB,GAClB,IAAI+X,EAAc5e,KAAK4e,YAGvB,GAFA/X,EAAMhS,EAAEgS,IAEH+X,EACD,OAAO/X,EAGX,IAAIqO,EAAQrO,EAAIsN,QAAQnU,KAAKkV,MAAMzT,IAAIzB,KAAK4e,cACxCnY,EAAQyO,EAAMhK,KAAK,aAAazE,MAAMI,GAI1C,OAFAqO,EAAQA,EAAM,KAAOlV,KAAKkV,MAAM,GAAK0J,EAAc5e,KAAKkV,OAE3ChK,KAAK,aAAaJ,GAAGrE,EACtC,EAEA8jC,aAAc,SAASv6B,GACnB,IAAI4O,EAAc5e,KAAK4e,YAIvB,GAFA5O,EAAOnb,EAAEmb,IAEJ4O,EACD,OAAO5O,EAGX,IAAIkF,EAAQlF,EAAKmE,QAAQnU,KAAKkV,MAAMzT,IAAIzB,KAAK4e,cACzCnY,EAAQyO,EAAMhK,KAAK,gBAAgBzE,MAAMuJ,GAI7C,OAFAkF,EAAQA,EAAM,KAAOlV,KAAKkV,MAAM,GAAK0J,EAAc5e,KAAKkV,OAE3ChK,KAAK,gBAAgBzE,MAAMA,EAC5C,EAEA+jC,eAAgB,WACZ,IAAI9pC,EAAOV,KAEPU,EAAKwZ,aAAexZ,EAAK8sB,oBACzB9sB,EAAKwZ,WAAW+nB,QAGhBvhC,EAAK8sB,mBACL9sB,EAAKshC,mBAAmBthC,EAAK0oB,UAI7B1oB,EAAKb,QAAQ2a,iBACb9Z,EAAKsgC,uBAELtgC,EAAKmc,aAAe,CAAC,CAE7B,EAEAuM,OAAQ,SAAStS,GACb,IAAIpW,EAAOV,KACPka,EAAaxZ,EAAKwZ,WAElBlK,EADoBhb,EAAME,GAAGu4B,WAAWC,aAAa1tB,KAAKH,QAAQqa,YACzClK,KAG7B,OADA8G,EAAQpW,EAAKwU,MAAMzT,IAAIf,EAAKke,aAAa1T,KAAK4L,IACpCzL,QACF6O,IAAeA,EAAWra,QAAQ+gC,WAClC1mB,EAAW+nB,QACXnrB,EAAQA,EAAMxU,SAGd5B,EAAKg+B,cACL5nB,EAAQA,EAAMrV,IAAIqV,EAAM3gB,KAAI,WACxB,OAAI6Z,EACOtP,EAAK6pC,aAAavqC,MAGlBU,EAAK+yB,YAAYzzB,KAEhC,MAGAka,IAAexZ,EAAK8sB,mBACpBtT,EAAW7P,MAAMyM,IAEjBpW,EAAKwgC,WAAWpqB,GACZpW,EAAK0oB,SAAS/d,SAAW3K,EAAKoW,QAAQzL,QACtC3K,EAAKygC,yBAAwB,SAIhCnxB,GACDtP,EAAKsgC,yBAMN9mB,EAAaA,EAAW7P,QAAU3J,EAAKoW,QAAQ7L,OAAO,IAAMtR,GACvE,EAEAwnC,wBAAyB,SAASsJ,GAC9B,IAAI/pC,EAAOV,KACPyqC,EACA/pC,EAAK+O,MAAMhO,IAAIf,EAAKkd,cAAc1S,KAAK,MAAQrR,IAC1C6wC,KAAK,WAAW,GAAMrzC,KAAKmG,IAAc,GACzCnG,KAAK4F,GAAY,qBAEtByD,EAAK+O,MAAMhO,IAAIf,EAAKkd,cAAc1S,KAAK,MAAQrR,IAC1C6wC,KAAK,WAAW,GAAOrzC,KAAKmG,IAAc,GAC1CnG,KAAK4F,GAAY,kBAE9B,EAEAgkC,mBAAoB,WACLjhC,KACOkV,MAAMzT,IADbzB,KACsB4e,aAE1B1T,KAAK,SAAWrR,IAAexC,KAAKmG,IAAc,GACpDktC,KAAK,WAAW,GAAOrzC,KAAK4F,GAAY,aAEjD,EAEA+kC,mBAAoB,SAASlrB,GACzB,IAAIpW,EAAOV,KACX2qC,EAAoB31C,EAAMqC,KAAK,kBAC/Byf,EAAQpW,EAAKwU,MAAMzT,IAAIf,EAAKke,aAAa1T,KAAK4L,GAE1CpW,EAAKg+B,cACL5nB,EAAQA,EAAMrV,IAAIqV,EAAM3gB,KAAI,WACxB,OAAOuK,EAAK+yB,YAAYzzB,KAC5B,MAGJ8W,EAAM0J,MAAK,WACP3rB,EAAEmL,MAAM8f,YAAYnmB,IAAUsqB,WAAW0mB,GAAmBz/B,KAAKrR,IAAexC,KAAKmG,IAAc,GAC9FktC,KAAK,WAAW,GAAOrzC,KAAK4F,GAAY,aACjD,IACAyD,EAAKygC,yBAAwB,GAE7BzgC,EAAKsgC,sBAET,EAEAE,WAAY,SAASpqB,GACjBA,EAAM0J,MAAK,WACP3rB,EAAEmL,MAAMwV,SAAS7b,IAAUuR,KAAKrR,IAC3B6wC,KAAK,WAAW,GAChBrzC,KAAK4F,GAAY,gBACjB5F,KAAKmG,IAAc,EAC5B,GACJ,EAEAwjC,qBAAsB,WAClB,IACIlY,EACAgG,EAIA8b,EANAlqC,EAAOV,KAGP6qC,EAAUnqC,EAAKoW,QAEf+e,EADoBn1B,EAAKT,WAAWJ,QACTg2B,OAE3BiV,EAAkB,CAAC,EAEvB,GAAKjV,GAAWA,EAAO/C,OAAUpyB,EAAK0e,QAItCwrB,EAAUl0C,EAAWm/B,EAAO/C,OAAS+C,EAAO/C,MAAMhzB,GAAGm2B,QAAUJ,EAAO/C,MAAMv+B,IAE5E,CAIKS,EAAME,GAAGu4B,WAAWC,aAAahtB,EAAKb,QAAQqa,YAAY0mB,UAAalgC,EAAK8sB,qBAC7E9sB,EAAKmc,aAAe,CAAC,GAGzBnc,EAAK0oB,SAAS5I,MAAK,WACfsO,EAAWpuB,EAAKouB,SAAS9uB,MACzB8qC,EAAgBhc,EAAS8b,KAAY,CACzC,IAEA,IAAK,IAAI38B,EAAI,EAAGA,EAAI48B,EAAQx/B,OAAQ4C,IAEhC6a,GADAgG,EAAWpuB,EAAKouB,SAAS+b,EAAQ58B,KAClB28B,GACXE,EAAgBhiB,GAChBpoB,EAAKmc,aAAaiM,IAAO,SAElBpoB,EAAKmc,aAAaiM,EAjBjC,CAoBJ,EAEAiiB,iBAAkB,WACd,IACIC,EAAM,GACV,IAAK,IAAIv4B,KAFEzS,KAEe6c,aACtBmuB,EAAIx0C,KAAKic,GAGb,OADAu4B,EAAIn3B,OACGm3B,CACX,EAEAC,mBAAoB,SAASloB,EAAShO,GAClC,IACIm2B,EACAC,EAFAC,EAAWv2C,EAAEkuB,GAAS3tB,KAAK,YAI/BP,EAAEkuB,GAASjD,YAAYvmB,IACvByG,KAAKkV,MAAM+O,WAAWxmB,IAElB2tC,GACAA,EAAWA,EAAS3/B,QAAQzL,KAAKyjB,QAAS,IAC1C5uB,EAAEkuB,GAAS1rB,KAAKwF,GAAIuuC,IAEpBv2C,EAAEkuB,GAASkB,WAAWpnB,KAG1BquC,EAASn2B,EAAK1d,KAAKwF,MAELmD,KAAKyjB,SACf1O,EAAK3f,KAAK,WAAY81C,GAGpBA,EACFC,EAASD,EAETn2B,EAAK1d,KAAKwF,GAAImD,KAAKyjB,SAGvB1O,EAAKS,SAASjc,IACdyG,KAAKkV,MAAM7d,KAAKoG,GAAuB0tC,GAAUnrC,KAAKyjB,SAEtDzjB,KAAKqrC,SAAWt2B,CACpB,EAEAu2B,eAAgB,WACZ,IAAIvoB,EAAU/iB,KAAKqrC,SACfxxB,EAAa7Z,KAAKH,QAAQga,WAE9B,GAAKkJ,GAAYlJ,EAAjB,CAIA,IAAIhT,EAAMkc,EAAQxgB,SACdgpC,EAAiB1kC,EAAIsN,QAAQ,SAAS5R,SAEtCipC,EAAsBD,EAAex1B,GAAG,gDACxC01B,EAAcF,EAAex1B,GAAG,qEAEhC21B,EAAsB72C,EAAEmL,KAAKoC,SAAS8I,KAAK,+BAA+BygC,UAAUx8B,OAAO,GAG/F,GAAIs8B,EACA,GAAIzrC,KAAKyhB,cAAe,CACpB,IAAIlb,EAAWvP,KAAK2N,IAAIpO,EAAQsQ,EAAI,GAAI7G,KAAKggB,OAAOnZ,EAAItE,WAAY,GAChEvC,KAAKyhB,cAAcxS,MACnBjP,KAAK4rC,iBAAmB5rC,KAAKga,kBAAkB1T,UAAUC,GACzDvG,KAAKga,kBAAkBpT,eAAeC,KAEtC7G,KAAK4rC,iBAAmBrlC,EACxBvG,KAAKyF,UAAUzF,KAAKyzB,YAAY5sB,GAAK,GAAI6kC,GAEjD,MACI1rC,KAAKyF,UAAUzF,KAAKyzB,YAAY5sB,GAAK,GAAI6kC,GAI7C1rC,KAAKgL,gBAELhL,KAAKgL,cAAc,GAAG3H,UAAYqoC,EAAoBroC,WAIrDmoC,GACDxrC,KAAKyF,UAAUsd,EAAQ,GAAI2oB,EAjC/B,CAmCJ,EAEA3oB,QAAS,SAAShO,GACd,OAAO/U,KAAKw2B,YAAYzhB,GAAM,EAClC,EAEAyhB,YAAa,SAASzhB,EAAM82B,EAAgBxS,GACxC,IAAItW,EAAU/iB,KAAKqrC,SAQnB,GANAt2B,EAAOlgB,EAAEkgB,GAELgO,GAAWhO,GAAQgO,EAAQ1X,QAAU0J,EAAK1J,QAAU0X,EAAQ5O,QAAQ,iBAAiB9I,OAAS,GAA8C,IAAzC0J,EAAKZ,QAAQ,iBAAiB9I,QACjIrL,KAAK8rC,mBAAmBz0C,KAAK0E,IAAW,GAGxCgZ,EAAK1J,UACA0X,GAAWA,EAAQ,KAAOhO,EAAK,IAAI,CACpC,IAAIxS,EAASwS,EAAKxS,SACdwpC,EAAWxpC,EAAOF,SAASjL,GAC3B40C,EAAU3lC,SAAS9D,EAAOF,WAAWC,QAAQjL,KAAK,WAAY,IAE9D2I,KAAKgtB,uBACLhtB,KAAKisC,mBAAqBD,EAAU,EAAIA,EAAU,GAAKD,EAAStlC,MAAMsO,IAE1E/U,KAAKirC,mBAAmBloB,EAAShO,GAE5BskB,GACDr5B,KAAKsrC,iBAGJO,GACD7rC,KAAKoF,QAAQhK,GAAU,CACnBwE,QAASmV,GAGrB,CASJ,OANIA,GAAQA,EAAK1J,SACbrL,KAAKksC,eAAiBn3B,EAAKxS,SAASF,SAASjL,GAAWqP,MAAMsO,IAGlE/U,KAAKmsC,qBAAqBppB,EAAShO,GAE5B/U,KAAKqrC,QAChB,EAEA9Q,eAAgB,WACRv6B,KAAKqrC,WACLrrC,KAAKqrC,SAASvrB,YAAYvmB,IAC1ByG,KAAKqrC,SAAW,KAExB,EAEAc,qBAAsB,SAASppB,EAAShO,GACpC,IAAIq3B,EAEAr3B,GAAQA,EAAK1J,UACb+gC,EAAer3B,EAAK7J,KAAK,uBAERG,OAAS,EACtB+gC,EAAaC,QACNtpB,GAAWA,EAAQ7X,KAAK,sBAAsBG,OAAS,GAC9DorB,GAAWz2B,KAAKkV,OAAO,GAGnC,EAEAzP,UAAW,SAAS7F,EAASkH,GACzB,IAAIwlC,EAAqB1sC,EAAQ2sC,QAAQnS,cACrCoS,EAAsC,OAAvBF,GAAsD,OAAvBA,EAC9Cp3B,EAAQrgB,EAAE+K,GAASuU,QAAQ,SAAS,GACpCs4B,EAAmB7sC,EAAQ4sC,EAAe,cAAgB,gBAC1DxlC,EAAkBF,EAAU0lC,EAAe,aAAe,aAC1DE,EAAqB5lC,EAAU0lC,EAAe,cAAgB,gBAC9DvlC,EAA+C,aAA/BpS,EAAE+K,GAASqC,IAAI,aAA8BjD,IAASwtC,EAAex1C,KAAK21C,IAAIz3B,EAAM03B,WAAahtC,EAAQgtC,YAAchtC,EAAQ4sC,EAAe,aAAe,aAC7KK,EAAiB5lC,EAAgBwlC,EACjC/lC,EAAS,EACTke,EAAe,EACfkoB,EAAoB,EAEpB9tC,IAASwtC,IACLvtC,GAAQE,MAAQF,GAAQ8tC,KACxBnoB,EAAe1P,EAAM03B,YACd3tC,GAAQkmB,SAAYlmB,GAAQwI,QAAWxI,GAAQG,QAAU,MAChE0tC,EAAoB53B,EAAM03B,WAAa53C,EAAMO,QAAQyM,cAOzD0E,GAHJM,EAAkBhQ,KAAK21C,IAAI3lC,EAAkB4d,EAAekoB,IAEtC7lC,EACTA,EACF4lC,EAAkB7lC,EAAkB0lC,EACvCD,GAAoBC,EACVG,EAAiBH,EAElBzlC,EAGJD,EAGbN,EAAS1P,KAAK21C,IAAIjmC,EAASke,GAAgBkoB,EAE3ChmC,EAAU0lC,EAAe,aAAe,aAAe9lC,CAC3D,EAEAkS,aAAc,WACV,IAAIlY,EAAOV,KAEX,GAAKU,EAAKb,QAAQoa,YAAlB,CAKA,IAAI+yB,EAAatsC,EAAKwU,MAAMzT,IAAIf,EAAKke,aAEjCquB,EAAevsC,EAAK+O,MAAMlN,SAASd,IAAI5M,EAAE,SAAU6L,EAAKkd,eAGxDgS,EAASod,EAETtsC,EAAKb,QAAQga,aAEb+V,EAASA,EAAOnuB,IAAIwrC,IAGxBjtC,KAAKoc,mBAAqBwT,EAC1B5vB,KAAKqc,cAAgB4wB,EAGrBrd,EAAOjuB,IAAIrG,GAAYxD,EAAK,SAAWA,EAAK,YAAcA,EAAK,WAAaA,GAE5Em1C,EACK/hC,KAAK,YAAY7T,KAAK,YAAa,GAGxC21C,EACKxqC,GAAG,UAAY1K,EAAI,kBAAkB,SAASmL,GACvCA,EAAEyL,SAAWzL,EAAEiB,eACfjB,EAAE0/B,0BAEV,IAEJ/S,EAEKptB,GAAIxN,EAAMO,QAAQqN,MAAQ,aAAe9K,EAAKwD,GAAYxD,EAAKR,EAAS,IAAMC,EAASqrC,GAAW/hC,KAAKH,IACvG8B,GAAG,QAAU1K,EAAI4I,EAAKwsC,YAAYrsC,KAAKH,IACvC8B,GAAG,WAAa1K,EAAI4I,EAAKysC,WAAWtsC,KAAKH,IACzC8B,GAAG,UAAY1K,EAAI4I,EAAMA,EAAK0sC,cAAcvsC,KAAKH,IAEtDA,EAAKorC,mBAAmBtpC,GAAG,QAAS9B,EAAK2sC,aAAaxsC,KAAKH,GAvC3D,CAwCJ,EAEA2sC,aAAc,SAASpqC,GACnB,IAAIyjB,EAASzjB,EAAEyL,OAAOyF,QAAQ,MAE9BnU,KAAK8rC,mBAAmBz0C,KAAK0E,GAAU,GACvCiE,KAAKw2B,YAAY9P,GACjB7xB,EAAE6xB,GAAQ5G,YAAYvmB,GAC1B,EAEA2zC,YAAa,WACT,IAAInqB,EAAU/iB,KAAK+iB,UACf7N,EAAQlV,KAAK4e,YAAc5e,KAAK4e,YAAc5e,KAAKkV,MAInD6N,GAAWA,EAAQhN,GAAG,YACtBgN,EAAQvN,SAASjc,IAEbyG,KAAKuyB,kBACLvyB,KAAKw2B,YAAYthB,EAAMhK,KAAK5T,GAAQgL,QAAQD,SAAS9K,GAAS+K,SAAS,GAAM,GAE7EtC,KAAKw2B,YAAYthB,EAAMhK,KAAK5T,GAAQgL,QAAQD,SAAS9K,GAAS+K,SAItEtC,KAAKkV,MAAM7d,KAAK0E,GAAU,EAC9B,EAEAoxC,WAAY,WACR,IAAIpqB,EAAU/iB,KAAK+iB,UAEfA,GACAA,EAAQjD,YAAYvmB,GAE5B,EAEA+zC,eAAgB,SAAS3hC,EAAS4hC,EAAYC,GAC1C,IAAIpc,EACAnjB,EAEJ,GAAIu/B,EACA,IAAKv/B,EAAIs/B,EAAYt/B,GAAK,IACtBmjB,EAAYnjB,EACPtC,EAAQsC,GAAGhC,QAFSgC,UAO7B,IAAKA,EAAIs/B,EAAYt/B,EAAItC,EAAQN,SAC7B+lB,EAAYnjB,EACPtC,EAAQsC,GAAGhC,QAFqBgC,KAQ7C,OAAOmjB,CACX,EAEAqc,gBAAiB,SAAS3kB,EAAK7lB,GAC3B,GAAIjD,KAAKisC,oBAAsBn3C,EAC3B,OAAO,EAGX,IAAI4L,EAAOV,KACPoxB,EAAY1wB,EAAKurC,kBACjBrE,EAAYh4B,GAAY2B,GAAiB7Q,EAAKiL,UAC9C5F,EAAc,EAEd+iB,IAAQ9pB,GAAQhJ,EAAKmsC,KAAOnsC,EAAKosC,QAAWhR,IAAcwW,EAAUv8B,OAAS,EAC7E+lB,EAAY1wB,EAAK4sC,eAAe1F,EAAWxW,EAAY,GAChDtI,IAAQ9pB,GAAQhJ,EAAKosC,MAAQpsC,EAAKmsC,OAAS/Q,EAClDA,EAAY1wB,EAAK4sC,eAAe1F,EAAUxW,EAAY,GAAG,GAClDtI,GAAO9yB,EAAK03C,KACnBtc,EAAY1wB,EAAK4sC,eAAe1F,EAAW,GACpC9e,GAAO9yB,EAAK23C,MACnBvc,EAAY1wB,EAAK4sC,eAAe1F,EAAWA,EAAUv8B,OAAS,GAAG,IAGrE,IAAK,IAAI4C,EAAI,EAAGA,EAAImjB,EAAWnjB,IAC3BlI,GAAe6hC,EAAU35B,GAAG/L,MAShC,OANAxB,EAAKurC,kBAAoB7a,EACrBnuB,IACAA,EAAES,iBACFT,EAAE0vB,mBAEN39B,EAAMwO,WAAW9C,EAAK0B,QAAS2D,IACxB,CACX,EAEAqnC,cAAe,SAASnqC,GACpB,IAAI8f,EAAU/iB,KAAK+iB,UACftB,EAAgBzhB,KAAKyhB,eAAiB,CAAC,EACvCmsB,EAAoB5tC,KAAKga,mBAAqBha,KAAKga,kBAAkBzS,WACrEmH,EAAS7Z,EAAEoO,EAAEyL,QACbm/B,GAAa5qC,EAAE6qC,uBAAyBp/B,EAAOqH,GAAG,oEAEtD,GAAI9S,EAAE8qC,QAAU9qC,EAAE4+B,SAAW7rC,EAAKssC,KAG9B,OAFAtiC,KAAK+iB,UAAU7X,KAAK,4CAA4CM,aAChEvI,EAAE0/B,2BAMN,GAAIiL,EAEA3qC,EAAES,sBAIN,KAAI+d,EAAc9V,SAAaoX,GAAYzY,SAASC,KAAKzT,SAASisB,EAAQ,MAAS/iB,KAAKytC,gBAAgBxqC,EAAE4+B,QAAS5+B,MAI9G8f,IACDA,EAAUluB,EAAEmL,KAAK4e,aAAand,IAAIzB,KAAKH,QAAQga,WAAa7Z,KAAKkV,MAAQlV,KAAKiV,OAAO/J,KAAK5T,GAAQgL,QAAQD,SAAS9K,GAAS+K,SAG3HygB,EAAQ1X,QAAb,CAIA,IAAI2iC,GAAU,EAET/qC,EAAE6qC,sBAAwB7qC,EAAE4+B,UAAY7rC,EAAKi4C,MAC9CD,EAAUhuC,KAAKkuC,iBAGfL,GAAa5qC,EAAE4+B,SAAW7rC,EAAKqsC,KAC/B2L,EAAUhuC,KAAKmuC,QAAQprB,EAAS9f,EAAE8+B,SAAU9+B,EAAEY,UAG9CgqC,GAAa5qC,EAAE4+B,SAAW7rC,EAAKssC,OAC/B0L,EAAUhuC,KAAKouC,UAAUrrB,EAAS9f,EAAE8+B,SAAU9+B,EAAEY,UAGhDgqC,GAAa5qC,EAAE4+B,UAAY7iC,GAAQhJ,EAAKmsC,KAAOnsC,EAAKosC,SACpD4L,EAAUhuC,KAAKquC,WAAWtrB,EAAS9f,EAAE8qC,OAAQ9qC,EAAE8+B,SAAU9+B,EAAEY,QAASZ,EAAEiB,gBAGtE2pC,GAAa5qC,EAAE4+B,UAAY7iC,GAAQhJ,EAAKosC,MAAQpsC,EAAKmsC,QACrD6L,EAAUhuC,KAAKsuC,UAAUvrB,EAAS9f,EAAE8qC,OAAQ9qC,EAAE8+B,SAAU9+B,EAAEY,QAASZ,EAAEiB,gBAGrE2pC,GAAa5qC,EAAE4+B,SAAW7rC,EAAKu4C,WAC/BP,EAAUhuC,KAAKwuC,mBAGfX,GAAa5qC,EAAE4+B,SAAW7rC,EAAKy4C,SAC/BT,EAAUhuC,KAAK0uC,iBAGfb,GAAa5qC,EAAE4+B,SAAW7rC,EAAK03C,OAC/BM,EAAUhuC,KAAK2uC,YAAY5rB,EAAS9f,EAAEY,UAGtCgqC,GAAa5qC,EAAE4+B,SAAW7rC,EAAK23C,MAC/BK,EAAUhuC,KAAK4uC,WAAW7rB,EAAS9f,EAAEY,UAGrCgqC,GAAa5qC,EAAE4+B,SAAW7rC,EAAK8rC,WAC/BkM,EAAUhuC,KAAK6uC,gBAAgB9rB,EAAS9f,EAAEY,UAG1CZ,EAAE4+B,SAAW7rC,EAAK84C,OAAS7rC,EAAE4+B,SAAW7rC,EAAK+4C,KAC7Cf,EAAUhuC,KAAKgvC,gBAAgBjsB,EAAS9f,EAAEiB,cAAewK,IAGzDzL,EAAE4+B,SAAW7rC,EAAKi5C,MAClBjB,EAAUhuC,KAAKkvC,cAAcnsB,EAAS9f,EAAEiB,gBAGxCjB,EAAE4+B,SAAW7rC,EAAKm5C,MAClBnB,EAAUhuC,KAAKovC,cAAcrsB,EAAS9f,EAAEiB,cAAejB,EAAE8+B,SAAUrzB,IAGnEs/B,IAEA/qC,EAAES,iBAEFT,EAAE0vB,kBA5DN,CA8DJ,EAEAub,cAAe,WACX,IAAImB,EAAYrvC,KAAKwB,QAAQ0J,KAAK,gCAElC,OAAImkC,EAAUhkC,OAAS,IACnBgkC,EAAU/sC,QAAQkT,SAAS,YAAYpQ,QAAQ,UAExC,EAIf,EAEAkpC,UAAW,SAASvrB,EAASgrB,EAAQhM,EAAUl+B,EAASyrC,GACpD,IAAIv6B,EAAMtO,EACNI,EAAMkc,EAAQxgB,SAEduE,EAAYD,EAAItE,SAuCpB,OArCIwrC,EACIlnC,EAAIiJ,SAASpV,IACbsF,KAAKw+B,cAAc33B,GAEnB7G,KAAKuvC,YAAY1oC,GAEdhD,GAAWkf,EAAQhN,GAAG,cAAgB/V,KAAKH,QAAQkb,YAC3D/a,KAAKwvC,YAAYzsB,GAAS,IAEzBtc,EAAQK,EAAUoE,KAAK5T,GAAQmP,MAAMI,IACrCkO,EAAO/U,KAAKyvC,oBAAoB3oC,EAAWic,EAAStc,IAE1C,KACFs7B,EACI/hC,KAAK4e,aACL7J,EAAO/U,KAAKyzB,YAAY5sB,GACpBhS,EAAEiC,SAASkJ,KAAK4e,YAAY,GAAI/X,EAAI,MACpCkO,EAAOA,EAAKP,QAAQhd,GAAS8K,SAEjCyS,EAAOA,EAAK1S,SAASjL,GAAW+X,QAEhC4F,EAAO/U,KAAK0vC,SAAS3sB,EAASusB,GAAc,IAGhDxoC,EAAY9G,KAAK2vC,qBAAqB7oC,IAEtCiO,EAAO/U,KAAKyvC,oBAAoB3oC,EAAWic,EAAStc,IAE3C,KAAOsc,EAAQ,IACpB0T,GAAWz2B,KAAKkV,OAAO,KAKnClV,KAAKw2B,YAAYzhB,KAGd,CACX,EAEAs5B,WAAY,SAAStrB,EAASgrB,EAAQhM,EAAUl+B,EAASyrC,GACrD,IAAIv6B,EAAMtO,EACNI,EAAMkc,EAAQxgB,SAEduE,EAAYD,EAAItE,SAuCpB,OArCIwrC,EACIlnC,EAAIiJ,SAASpV,IACbsF,KAAKy+B,YAAY53B,GAEjB7G,KAAK4vC,UAAU/oC,GAEXhD,GAAWkf,EAAQhN,GAAG,cAAgB/V,KAAKH,QAAQkb,YAC3D/a,KAAKwvC,YAAYzsB,GAAS,IAE1Btc,EAAQK,EAAUoE,KAAK5T,GAAQmP,MAAMI,IACrCkO,EAAO/U,KAAK6vC,oBAAoB/oC,EAAWic,EAAStc,IAE1C,KACFs7B,EACG/hC,KAAK4e,aACJ7J,EAAO/U,KAAKyzB,YAAY5sB,GACpBhS,EAAEiC,SAASkJ,KAAKkV,MAAM,GAAIrO,EAAI,MAC9BkO,EAAOA,EAAK+6B,QAAQt4C,GAAS8K,SAEjCyS,EAAOA,EAAK1S,SAASjL,GAAWkL,SAEhCyS,EAAO/U,KAAK0vC,SAAS3sB,EAASusB,GAAc,IAGhDxoC,EAAY9G,KAAK2vC,qBAAqB7oC,GAAW,IAEjDiO,EAAO/U,KAAK6vC,oBAAoB/oC,EAAWic,EAAStc,IAE3C,KAAOsc,EAAQ,IACpB0T,GAAWz2B,KAAKkV,OAAO,KAKnClV,KAAKw2B,YAAYzhB,KAGd,CACX,EAEAo5B,QAAS,SAASprB,EAASgf,EAAUl+B,GAEjC,IACIkR,EAAMqc,EAAW3qB,EAAOglB,EADxB3kB,EAAYic,EAAQxgB,SAASA,SAG7Bw/B,GAEDhtB,GADAA,EAAOgO,EAAQxgB,UACHiS,QAAQhd,GAAS8K,QAC7ByS,EAAOgO,EAAQxgB,SAASwT,GAAGve,GAAWud,EAAK1S,WAAWyI,GAAGiY,EAAQtc,SAAWsO,EAAK1S,SAASjL,GAAW+X,QAC7FtL,GAAWkf,EAAQxgB,SAASwT,GAAGve,IAAYwI,KAAKqtB,uBACvD+D,EAAYrO,EAAQtc,QAEpBsO,GADAA,EAAOgO,EAAQxgB,UACHiS,QAAQhd,GAAS8K,QAC7BmE,EAAQzG,KAAKiV,MAAM5S,SAAS7K,GAASiP,MAAMsO,GAC3C0W,EAAWzrB,KAAKiV,MAAM5S,SAAS7K,GAASiP,MAAMsc,EAAQxgB,UAElDkE,GAAS,IAAMzG,KAAKoF,QAAQjK,GAAY,CAAEswB,SAAUA,EAAUC,SAAUjlB,EAAOI,IAAKkc,EAAQxgB,aAC5FvC,KAAK2uB,YAAY5L,EAAQxgB,SAAUkE,GACnCsO,EAAO/U,KAAKiV,MAAM5S,SAAS7K,GAASsT,GAAGrE,GAAOpE,WAAWyI,GAAGsmB,MAGjErc,EAAO/U,KAAK+vC,kBAAkBjpC,EAAWic,IAC/B,KACP/iB,KAAKksC,eAAiB,EACtBplC,EAAY9G,KAAKgwC,mBAAmBlpC,GAAW,IAE/CiO,EAAO/U,KAAK+vC,kBAAkBjpC,EAAWic,IAEhC,IACL0T,GAAWz2B,KAAKkV,OAAO,IAKjC,IAAIG,EAAMrV,KAAKksC,gBAAkB,EAIjC,OAHAlsC,KAAKw2B,YAAYzhB,GACjB/U,KAAKksC,eAAiB72B,GAEf,CACX,EAEA+4B,UAAW,SAASrrB,EAASgf,EAAUl+B,GAEnC,IACIkR,EAAMqc,EAAW3qB,EAAOglB,EADxB3kB,EAAYic,EAAQxgB,SAASA,SAG7Bw/B,GAEAhtB,GADAA,EAAOgO,EAAQxgB,UACHutC,QAAQt4C,GAAS8K,QAC7ByS,EAAOgO,EAAQxgB,SAASwT,GAAGve,GAAWud,EAAK1S,WAAWyI,GAAGiY,EAAQtc,SAAWsO,EAAK1S,SAASjL,GAAWkL,SAC9FuB,GAAWkf,EAAQxgB,SAASwT,GAAGve,IAAYwI,KAAKqtB,uBACvD+D,EAAYrO,EAAQtc,QAEpBsO,GADAA,EAAOgO,EAAQxgB,UACHutC,QAAQt4C,GAAS8K,QAC7BmE,EAAQzG,KAAKiV,MAAM5S,SAAS7K,GAASiP,MAAMsO,GAC3C0W,EAAWzrB,KAAKiV,MAAM5S,SAAS7K,GAASiP,MAAMsc,EAAQxgB,UAElDkE,GAAS,IAAMzG,KAAKoF,QAAQjK,GAAY,CAAEswB,SAAUA,EAAUC,SAAUjlB,EAAOI,IAAKkc,EAAQxgB,aAC5FvC,KAAK2uB,YAAY5L,EAAQxgB,SAAUkE,EAAQ,GAC3CsO,EAAO/U,KAAKiV,MAAM5S,SAAS7K,GAASsT,GAAGrE,GAAOpE,WAAWyI,GAAGsmB,MAGhErc,EAAO/U,KAAKiwC,kBAAkBnpC,EAAWic,IAC/B,KACN/iB,KAAKksC,eAAiB,EACtBplC,EAAY9G,KAAKgwC,mBAAmBlpC,IAEpCiO,EAAO/U,KAAKiwC,kBAAkBnpC,EAAWic,IAChC,IACL0T,GAAWz2B,KAAKkV,OAAO,IAInC,IAAIG,EAAMrV,KAAKksC,gBAAkB,EAGjC,OAFAlsC,KAAKw2B,YAAYzhB,GACjB/U,KAAKksC,eAAiB72B,GACf,CACX,EAEAm6B,YAAa,SAASzsB,EAASmtB,GAC3B,IAAInlC,EAAW/K,KAAKwB,QAAQpM,OAAO81B,iBAAiBtrB,QAAQsL,KAAKlL,KAAKke,mBAAmBre,QAAQoL,OAAS,YAEtGU,EAAUoC,GAAeqD,GAAsBpR,KAAK2L,UACpD8f,EAAW1gB,EAAStE,MAAM5R,EAAEkuB,IAC5BrT,EAASwgC,GAAW,EAAI,EACxBlkC,EAASL,EAAQ8f,GACjBC,EAAWla,GAA2B7F,EAAS3L,KAAK2L,QAAS8f,EAAUA,EAAW/b,GAClFgc,GAAY,IACZ1rB,KAAK2rB,cAAcD,EAAU1f,EAAQkkC,GACrClwC,KAAKoF,QAAQtK,GAAe,CACxB4wB,SAAUA,EACVD,SAAUA,EACVzf,OAAQA,IAGpB,EAEA2iC,YAAa,SAAS5rB,EAASotB,GAC3B,IAIIhtB,EAJAtc,EAAMkc,EAAQxgB,SACd6tC,EAAevpC,EAAItE,SACnB8tC,EAAkBrwC,KAAK4e,aAAe5e,KAAK4e,YAAYvc,SAAS,SAAS,KAAO+tC,EAAa,GAC7FE,EAAWF,EAAa,KAAOpwC,KAAKiV,MAAM,GAG9C,OAAIjV,KAAKgtB,sBACLhtB,KAAKytC,gBAAgBz3C,EAAK03C,OACnB,IAGPyC,EAEIhtB,EADAnjB,KAAK4e,YACE5e,KAAK4e,YAAY1T,KAAK1T,GAAS8K,QAAQD,SAAS9K,GAAS+K,QAEzDtC,KAAKkV,MAAMhK,KAAK1T,GAAS8K,QAAQD,SAAS9K,GAAS+K,SAEvDguC,GAAYD,KACfC,GAAYtwC,KAAK4e,cACjB/X,EAAM7G,KAAKyzB,YAAY5sB,IAE3Bsc,EAAOtc,EAAIxE,SAASjL,GAAWkL,SAG/B6gB,GAAQA,EAAK9X,QACbrL,KAAKw2B,YAAYrT,IACV,QAFX,EAIJ,EAEAyrB,WAAY,SAAS7rB,EAASotB,GAC1B,IAIIp7B,EAJAlO,EAAMkc,EAAQxgB,SACd6tC,EAAevpC,EAAItE,SACnB8tC,EAAkBrwC,KAAK4e,aAAe5e,KAAK4e,YAAYvc,SAAS,SAAS,KAAO+tC,EAAa,GAC7FE,EAAWF,EAAa,KAAOpwC,KAAKiV,MAAM,GAG9C,OAAIjV,KAAKgtB,sBACLhtB,KAAKytC,gBAAgBz3C,EAAK23C,MACnB,IAGPwC,EACAp7B,EAAO/U,KAAKkV,MAAMhK,KAAK1T,GAAS2X,OAAO9M,SAAS9K,GAAS4X,QAClDmhC,GAAYD,MACdC,GAAYtwC,KAAK4e,cAClB/X,EAAM7G,KAAKyzB,YAAY5sB,IAE3BkO,EAAOlO,EAAIxE,SAASjL,GAAW+X,QAG/B4F,GAAQA,EAAK1J,QACbrL,KAAKw2B,YAAYzhB,IACV,QAFX,EAIJ,EAEAy5B,gBAAiB,WACb,QAAKxuC,KAAKH,QAAQ0a,WAIlBva,KAAKC,WAAW8I,KAAK/I,KAAKC,WAAW8I,OAAS,IAEvC,EACX,EAEA2lC,cAAe,WACX,QAAK1uC,KAAKH,QAAQ0a,WAIlBva,KAAKC,WAAW8I,KAAK/I,KAAKC,WAAW8I,OAAS,IAEvC,EACX,EAEAqmC,cAAe,SAASrsB,EAASusB,EAAcvN,EAAUrzB,GACrD,IACIsB,EAAMugC,EAEV,KAHevwC,KAAKH,QAAQ4a,UAAgC,UAApBza,KAAKwxB,cAIzCzO,EAAQhN,GAAG,QACV/V,KAAKH,QAAQga,WAAa7Z,KAAKqc,cAAcpR,OAAOqkC,GAAcjkC,OAASrL,KAAKyP,MAAMxE,OAAOyD,GAAQrD,QAAS,CAC3G,GAAI0X,EAAQxgB,SAASuN,SAAS,gBAAiB,CAG3C,GAFAygC,EAAkBvwC,KAAK8rC,oBAElB/J,GAAYwO,EAAgBA,EAAgBllC,OAAS,KAAOf,SAAS7U,cAGtE,OAFA86C,EAAgBjuC,QAAQ8C,QAAQ,UAEzB,EACJ,GAAI28B,GAAYwO,EAAgB,KAAOjmC,SAAS7U,cAGnD,OAFA86C,EAAgBphC,OAAO/J,QAAQ,UAExB,CAEf,CAEA,OAAO,CACf,CAUA,OARA4K,EAAOnb,EAAEY,KAAiB0e,QAAQ,iBAEzB,IAAMnE,EAAK,KAAO+S,EAAQ,KAC/BA,EAAU/S,IAGdA,EAAOhQ,KAAK0vC,SAAS3sB,EAASusB,EAAcvN,IAEnC,KAAOhf,EAAQ,OAIpB/S,EAAK3E,SACLrL,KAAKwwC,eAAeztB,EAAS/S,EAAMA,EAAKmE,QAAQ,WAEzC,GAIf,EAEA+6B,cAAe,SAASnsB,GACpB,IA0oKS/S,EA1oKLygC,EAASh7C,IACTi7C,EAA+B,UAApB1wC,KAAKwxB,YAEpB,KAuoKSxhB,EAvoKK+S,KAyoKd/S,EAAKF,SAAS,iBACdE,EAAKzN,SAASuN,SAAS,mBAzoKnB,OAAIiT,EAAQkP,IAAIwe,GAAQplC,QAEpBorB,GAAWz2B,KAAKkV,OAAO,IAEhB,KAGP6N,EAAQxgB,SAASuN,SAAS,kBAC1B9P,KAAK8rC,mBAAmBz0C,KAAK0E,IAAW,GACxC06B,GAAWz2B,KAAKkV,OAAO,IAEhB,GAMf,GAAIw7B,EACA1wC,KAAKmyB,WAAU,OACZ,CACH,IAAInP,EAAenuB,EAAEkuB,GAASxgB,SAASkE,QACnCgqC,GACAA,EAAOE,OAEX3wC,KAAK+1B,WAAU,GACX/S,GAAgB,GAChBhjB,KAAKw2B,YAAYx2B,KAAK8W,QAAQhM,GAAGkY,GAAc3gB,SAAS9K,GAAS+K,QAEzE,CAIA,OAFAm0B,GAAWz2B,KAAKkV,OAAO,IAEhB,CACX,EAEA07B,eAAgB,SAAS7tB,EAAStI,EAAU5E,GACxC,IAAIhP,EAAMkc,EAAQxgB,SAElB,OAAIwgB,EAAQhN,GAAG,sBAIXlP,EAAIkP,GAAG9e,EAAMyD,OAMZ+f,IAAY5E,MALbhP,EAAIqE,KAAK,uBAAuB5I,QAAQkJ,SAEjC,GAUf,EAEAqjC,gBAAiB,SAAS9rB,EAASlf,GAC/B,IAAInD,EAAOV,KAEX,GAAK6D,GAAYnD,EAAKqZ,WAAcgJ,EAAQjT,SAAS,YAArD,CAIA,IAAI+gC,EAAcnwC,EAAKqZ,UAAU82B,cAC7B3kC,EAAQ6W,EAAQ1rB,KAAKrC,EAAMqC,KAAK,UAChC2f,EAAatW,EAAKqZ,UAAU/C,aAiBhC,OAfItW,EAAKqZ,UAAU+2B,SAAS/tB,GACxB8tB,EAAYr6C,KAAK,CACb0V,MAAOA,EACP6kC,IAAK,MACL/5B,WAAYA,GAAc,KAG9B65B,EAAch8C,EAAEuB,KAAKy6C,GAAa,SAASz6B,GAEvC,OAAOA,EAAKlK,QAAUA,CAC1B,IAGJxL,EAAKT,WAAWof,MAAMwxB,IAEf,CArBP,CAsBJ,EAEA7B,gBAAiB,SAASjsB,EAASusB,EAAc5gC,GAC7C,IAGIsiC,EAHAv2B,EAAWza,KAAKH,QAAQ4a,WAA6C,IAAjCza,KAAKH,QAAQ4a,SAAS3Q,OAC1DhD,EAAY4H,EAAOyF,QAAQ,MAC3B0B,EAAa7V,KAAKkhB,cAOtB,GAJKxS,EAAOqH,GAAG,UAAalhB,EAAEiC,SAASisB,EAAQ,GAAIrU,EAAO,MACtDqU,EAAUjc,GAGVic,EAAQhN,GAAG,MAIX,OAFAi7B,EAAOjuB,EAAQ7X,KAAK,aAEhB6X,EAAQkP,IAAIp9B,EAAEY,MAAkB4V,OAAS,KAElC2lC,EAAK3lC,OACZ2lC,EAAKxlC,QACEuX,EAAQxgB,SAASuN,SAAS,iBACf9P,KAAK8rC,mBACPz0C,KAAK0E,GAAU,GAC/BgnB,EAAQ7X,KAAK,mBAAmB5I,QAAQ+pC,SAExCtpB,EAAQ7X,KAAKrR,IAAeuL,QAAQ,UAGjC,GAEX,GAAIpF,KAAK4wC,eAAe7tB,EAAStI,EAAU5E,GACvC,OAAO,EAGX,IAAIw5B,EAAYtsB,EAAQ7X,KAAK,mBAAmB5I,QAChD,OAAI+sC,EAAU,KAAOtsB,EAAQjT,SAAS,gBAAkBiT,EAAQjT,SAAS,YACrEu/B,EAAUjqC,QAAQ,UAEX,MAGPqV,GAAa/L,EAAOqH,GAAG,iCAClBjP,EAAU,KACXA,EAAYic,GAGhB/iB,KAAKwwC,eAAe1pC,GAAW,EAAOwoC,IAE/B,EAIf,EAEAO,oBAAqB,SAAS36B,EAAO6N,EAASkuB,GAC1C,IAAI7hC,EAAQ2T,EAAQ+sB,QAAQ14C,GAE5B,IAAKgY,EAAM/D,OAAQ,CACf,IAAI4D,EAAOiG,EAAMhK,KAAK5T,GAItB,IAAiB,GAHF2X,EAAKxI,MAAMsc,EAAQxgB,UAGd,CAChB,GAAIwgB,EAAQjT,SAAS,YAAa,CAC9B,IAAIsE,EAAa,GAGjB,OAFAjC,GAAoB,CAACb,GAActR,KAAK2L,SAAS,IAAKiJ,GAAkB3F,EAAKnE,GAAG,GAAGzI,SAAS,YAAYC,SAAU8R,EAAY,EAAG,GAE7HA,EAAW68B,GACJ78B,EAAW68B,GAAe,GAG9BluB,CACX,CAGA,OAAIA,EAAQxgB,SAASuN,SAAS,gBACnBb,EAAKE,OAAO9M,SAASjL,GAAWkL,QAIpC2M,EAAKnE,GAAGmmC,GAAe5uC,SAASjL,GAAWkL,OACtD,CACJ,CAEA,OAAO8M,EAAM9M,OACjB,EAEAmtC,oBAAqB,SAASv6B,EAAO6N,EAASkuB,GAC1C,IAAI7hC,EAAQ2T,EAAQvO,QAAQpd,GAE5B,IAAKgY,EAAM/D,OAAQ,CACf,IAAI4D,EAAOiG,EAAMhK,KAAK5T,GAItB,IAAiB,GAHF2X,EAAKxI,MAAMsc,EAAQxgB,UAGd,CAChB,GAAIwgB,EAAQjT,SAAS,YAAa,CAC9B,IAAIsE,EAAa,GACbzI,EAAU2F,GAActR,KAAK2L,SAGjC,OAFAwG,GAAoB,CAACxG,EAAQA,EAAQN,OAAS,IAAKuJ,GAAkB3F,EAAKnE,GAAG,GAAGzI,WAAW8M,QAASiF,EAAY,EAAG,GAE/GA,EAAW68B,GACJ78B,EAAW68B,GAAe,GAG9BluB,CACX,CAGA,OAAIA,EAAQxgB,SAASuN,SAAS,gBACnBb,EAAKE,OAAO9M,SAASjL,GAAW+X,OAIpCF,EAAKnE,GAAGmmC,GAAe5uC,SAASjL,GAAW+X,MACtD,CACJ,CAEA,OAAOC,EAAM9M,OACjB,EAEA4uC,kBAAmB,SAASh8B,EAAO6N,GAC/B,IAAItc,EAAQsc,EAAQ1rB,KAAK,cAEzB,IAAKoP,EACD,OAAO3R,EAGX,IAAIq8C,EAAqB7/B,GAActR,KAAK2L,SAASN,OACrD,OAAI8lC,IAAuBj8B,EAAMf,QAAQnX,IAAK8S,SAAS,yBAAyB,GACrErJ,EAAQ0qC,EAGZ1qC,CACX,EAEAspC,kBAAmB,SAASjpC,EAAWic,GACnC,IAAI3T,EACAvI,EAAMkc,EAAQxgB,SACd0M,EAAOnI,EAAUzE,SAAS/K,GAC1BiP,EAAW0I,EAAKxI,MAAMI,GAEtBJ,EAAQzG,KAAKkxC,kBAAkBpqC,EAAWic,GAG9C,GAAItc,GAASsc,EAAQjT,SAAS,YAE1B,OADAV,EAAQ8E,GAAmB6O,IACdjY,GAAGsE,EAAM/D,OAAS,GAOnC,GAHA5E,EAAQzP,KAAK2N,IAAIkC,EAAIxE,SAASjL,GAAWqP,MAAMsc,GAAU/iB,KAAKksC,gBAAkB,GAG5ErlC,EAAIiJ,SAAS,gBACb,OAAO6D,GAAc7M,GAAWmE,OAAO2C,IAAe9C,GAAGrE,GAI7D,IAAiB,GAAbF,GAMA,GALIvG,KAAKgtB,uBACLvmB,EAAQzG,KAAKisC,qBAGjBplC,EAAMC,EAAUoE,KAAK,4BACZ,GAML,OAHKlL,KAAKkhB,eAAiB6B,EAAQxgB,SAAS2I,KAAK,qBAAqBG,SAAW5E,GAC7EA,IAEGkN,GAAc7M,GAAWmE,OAAO2C,IAAe9C,GAAGrE,QAG7DI,EAAmB,IAAbN,EAAiB1R,IAAMoa,EAAKnE,GAAGvE,EAAW,GAIpD,OADA6I,EAAQvI,EAAIxE,SAASjL,IACXiU,OAAS5E,EACR2I,EAAMtE,GAAGrE,GAGb2I,EAAMtE,GAAG,EACpB,EAEAmlC,kBAAmB,SAASnpC,EAAWic,GACnC,IAAI3T,EAOA48B,EANAnlC,EAAMkc,EAAQxgB,SACd0M,EAAOnI,EAAUzE,SAAS/K,GAC1BiP,EAAW0I,EAAKxI,MAAMI,GAEtBJ,EAAQzG,KAAKkxC,kBAAkBpqC,EAAWic,GAC1CtB,EAAgBzhB,KAAKyhB,eAAiB,CAAC,EAK3C,IAAiB,GAAblb,GAAkBE,IAAU3R,GAAeiuB,EAAQjT,SAAS,YAC5D,OAAO8E,GAAkBmO,GAASjY,GAAG,GAGzCrE,EAAQA,EAAQJ,SAASI,EAAO,IAAMI,EAAIxE,SAASjL,GAAWqP,MAAMsc,GACpEtc,EAAQzP,KAAK2N,IAAI8B,EAAOzG,KAAKksC,gBAAkB,IAG9B,GAAb3lC,GACAM,EAAMoI,EAAKnE,GAAG,GACV2W,EAAc9V,UACdqgC,EAAU3lC,SAASQ,EAAIxE,WAAWC,QAAQjL,KAAK,WAAY,IAC3DoP,EAAQzG,KAAKisC,mBAAqBD,EAAU,EAAIA,EAAU,KAI1DhsC,KAAKkhB,eAAiBra,EAAIqE,KAAK,qBAAqBG,SACpD5E,KAGJI,EAAMoI,EAAKnE,GAAGvE,EAAWwc,EAAQ,GAAG1T,SAGxC,IAAI+hC,EAAW3qC,EAEf,GAAIzG,KAAKkxC,kBAAkBpqC,EAAWic,KAAajuB,EAG/C,IAFA,IAAIu8C,EAAkBxqC,EAAIxE,SAAS,8CAC/BivC,EAAgBD,EAAgBpmC,OAAO,WAClC3C,EAAM,EAAG+C,EAASimC,EAAcjmC,OAAQ/C,EAAM+C,EAAQ/C,IACvD+oC,EAAgB5qC,MAAM6qC,EAAchpC,IAAQ7B,GAC5C2qC,IAOZ,OAHA3qC,EAAQ2qC,GAERhiC,EAAQvI,EAAIxE,SAASjL,IACXiU,OAAS5E,EACR2I,EAAMtE,GAAGrE,GAGb2I,EAAMtE,GAAG,EACpB,EAEAklC,mBAAoB,SAASlpC,EAAWyqC,GACpC,IAAIr8B,EAAQpO,EAAUvE,SAClB8I,EAASrL,KAAKoc,mBAAmB/Q,OACjCmmC,EAAOx6C,KAAK4N,MAAMyG,EAAS,GAC3B5E,EAAQlQ,EAAQ2e,EAAM,GAAIlV,KAAKoc,oBAWnC,OATIm1B,IACAC,IAAS,KAEb/qC,GAAS+qC,IAEI,GAAK/qC,EAAQ4E,KACtB6J,EAAQlV,KAAKoc,mBAAmBtR,GAAGrE,IAGhCyO,EAAMhK,KAAKqmC,EAAK,SAAW,SACtC,EAEAzF,iBAAkB,WACd,OAAO9rC,KAAKwB,QAAQ0J,KAAK,iBAAiBA,KAAK,gHACnD,EAEAykC,qBAAsB,SAAS7oC,EAAWwL,GACtC,IAAIjH,EAASrL,KAAKoc,mBAAmB/Q,OACrC,GAAIA,GAAU,EACV,OAAOvE,EAGX,IAAIoO,EAAQpO,EAAUvE,SAClBkE,EAAQlQ,EAAQ2e,EAAM,GAAIlV,KAAKoc,oBAInC,OAFA3V,GAAS6L,EAAQ,GAAK,GAElBA,GAAmB,GAAT7L,GAAcA,GAAS4E,GAIhCiH,IAAmB,GAAT7L,GAAcA,EAAQ,GAC1BK,EAGJ9G,KAAKoc,mBAAmBtR,GAAGrE,GAAOyE,KAAK,gBAPnCpE,CAQf,EAEA4oC,SAAU,SAAS3sB,EAASusB,EAAcmC,GACtC,IAAIC,GAAY,EACZ38B,EAAO08B,EAAO1uB,EAAQvO,QAAQpd,GAAWkL,QAAUygB,EAAQ+sB,QAAQ,YAAYxtC,QAEnF,IAAKyS,EAAK1J,OAAQ,CAOd,GANA0J,EAAOgO,EAAQxgB,SACXvC,KAAK4e,cACL8yB,EAAaD,GAAQnC,GAAgBtvC,KAAK4e,YAAY,KAAS6yB,GAAQnC,GAAgBtvC,KAAKkV,MAAM,GAClGH,EAAO/U,KAAKyzB,YAAY1e,IAGxB28B,EAAW,CACX,GAAI1xC,KAAKgtB,qBACL,OAAOjK,EAEXhO,EAAOA,EAAK08B,EAAO,UAAY,WAAW,sDAAsDnvC,OACpG,CAEIyS,EADA08B,EACO18B,EAAK1S,SAASjL,GAAW+X,OAEzB4F,EAAK1S,SAASjL,GAAWkL,OAExC,CAEA,OAAOyS,CACX,EAEAy7B,eAAgB,SAASztB,EAAShO,EAAMG,GACpC,IAKIm6B,EAEAsC,EAPAjxC,EAAOV,KACPywC,EAAS57C,EAAEY,KACXqgC,EAAOp1B,EAAK8wB,YACZogB,EAAO3yC,GAAQE,KACfyyB,EAAgBlxB,EAAKmxB,eAErBpX,EAAW/Z,EAAKb,QAAQ4a,WAA6C,IAAjC/Z,EAAKb,QAAQ4a,SAAS3Q,OAU9D,GAPAoL,EAAQrgB,EAAEqgB,GAENy8B,EADQ,UAAR7b,EACW/S,EAAQjT,SAAS,eAEjBiT,EAAQxgB,SAASuN,SAAS,mBAGrCpP,EAAK+Z,SAAU,CAUf,GATI5lB,EAAEiC,SAAS86B,EAAc,GAAI6e,EAAO,MACpCA,EAAOrrC,QAAQ,QACXwsC,GAGAnB,EAAOrrC,QAAQ,UAIlB1E,EAAK+Z,SAEN,YADAgc,GAAW/1B,EAAKwU,OAIpB,IAAIxU,EAAK+Z,SAASyX,MAiBd,MATY,UAAR4D,EACAp1B,EAAK81B,YAAY5E,GAEjBlxB,EAAK81B,YAAY5E,EAAcvvB,WAAW4I,OAAO7T,GAAWkL,eAEhE+sC,EAAYzd,EAAc1mB,KAAK,mBAAmB5I,QAAQ,KAEtD+sC,EAAUhD,SAdF,UAARvW,EACAp1B,EAAKyxB,aAELzxB,EAAK61B,UACLob,GAAW,EAcvB,CAEI58B,GACArU,EAAK81B,YAAYzhB,GAGrB0hB,GAAW/1B,EAAKwU,OAAO,GAElBuF,KAICk3B,IAAa58B,GAASA,KACpB+gB,IAASx5B,GACJzH,EAAE6L,EAAKqiB,WAAWjT,SA50QZ,qBA60QPpP,EAAK0xB,SAAS1xB,EAAKqiB,WAGvBriB,EAAK+xB,QAAQ/xB,EAAKqiB,UAAUxgB,UAGxC,EAEAG,SAAU,WACN,IAAIhC,EAAOV,KACPkV,EAAQxU,EAAKwU,MACb5Q,EAAS5D,EAAKb,QAAQyE,OACtBpC,EAAQxB,EAAKb,QAAQqC,MACrBV,EAAUd,EAAKd,QAEd4B,EAAQuU,GAAG/Y,MACbwE,EAAUA,EAAQT,KAAK,UAAUwB,UAGpC7B,EAAKc,QAAUA,EAAQgU,SAAS,UAAYxgB,EAAMygB,iBAAiB,UAAW,OAAQ/U,EAAKb,QAAQlB,OAE/F2F,IACA5D,EAAKc,QAAQS,IAAIrG,GAAQ0I,GACzB4Q,EAAMjT,IAAIrG,GAAQE,KAGlBoG,GACAxB,EAAKc,QAAQS,IAAIpG,GAAOqG,GAG5BxB,EAAKmxC,aACT,EAEAA,YAAa,WACT,IAAIhyC,EAAUG,KAAKH,QACfa,EAAOV,KAMX,GAJAA,KAAK+d,WAAgC,IAAnBle,EAAQsb,QAAmBnmB,EAAMO,QAAQixB,UACpB,UAAnB3mB,EAAQsb,QACW,WAAnBtb,EAAQsb,OAExBnb,KAAK+d,UAAW,CAChB,IAAIxV,EAAOvI,KAAKwB,QAAQgU,SAAS,iBAAiBzU,KAC9C,aAAe/L,EAAMmgC,GAAK,uBAAyBngC,EAAMmgC,GAAzD,oBACUngC,EAAMmgC,GAAK,+BAExB5yB,SAEDvC,KAAK8d,KAAO9d,KAAK8xC,YAAYvpC,GAC7BvI,KAAKk6B,KAAOl6B,KAAK8d,KAAKoc,OAElBr6B,EAAQyE,OACRtE,KAAK8d,KAAKle,QAAQ2C,SAASN,IAAIrG,GAAQiE,EAAQyE,QAE/CtE,KAAK8d,KAAKle,QAAQ2C,SAASN,IAAIrG,GAAQoE,KAAKwB,QAAQ,GAAGqM,MAAMvJ,QAGjEtE,KAAK+3B,eAAiB,QAGtBr3B,EAAKc,QAAQgB,GAAG,gBAAkB1K,GAAI,SAASmL,GAC3CA,EAAE0vB,iBACN,IAEAjyB,EAAKc,QAAQgB,GAAG,cAAgB1K,EAAI,QAAQ,SAASmL,GAEjD,OADAA,EAAES,kBACK,CACX,IAEA1D,KAAKk6B,KAAKr5B,KAAK,aAAa,WACpBH,EAAKg+B,cACLh+B,EAAKgwB,qBACLhwB,EAAKwmB,8BACLxmB,EAAKymB,2BACLzmB,EAAK0mB,0BACL1mB,EAAK0zB,0BAEb,GACJ,CACJ,EAEA0d,YAAa,SAASvpC,GAalB,OAZWvT,EAAM+8C,KAAKhxC,KAAKwH,EAAM,CAC7BypC,WAAY,CACRC,YAAa,CACTC,cAAc,EACdnxC,MAAM,EACNoxC,gBAAgB,EAChBC,cAAc,EACdC,iBAAiB,KAMjC,EAEAj6B,OAAQ,WACJ,IAEInD,EADAC,EADOlV,KACMkV,OAGjBD,EAAQC,EAAMhK,KAAK,WAERG,SACP4J,EAAQpgB,EAAE,kCAAkC8O,SAASuR,IAP9ClV,KAUNiV,MAAQA,CACjB,EAEAq9B,YAAa,WACT,IACI5rB,EACAxR,EAMAyP,EARAjkB,EAAOV,KAGPH,EAAUa,EAAKb,QACfga,EAAaha,EAAQga,WAErB4H,GADkC,IAAf5H,GAAuBA,EAAW5Y,QAshJlE,SAA8BpB,GACzB,IAAI0yC,EAEJ,GAAuB,iBAAZ1yC,EAEP,MAAsB,UADtB0yC,EAAgB1yC,EAAQu6B,eAEb,CACHnrB,MAAM,GAGH,CACHA,KAAMsjC,EAAcxgC,QAAQ,SAAW,EACvCpG,QAAS4mC,EAAcxgC,QAAQ,YAAc,GAIlD,IAAgB,IAAZlS,EACP,MAAO,CACHoP,MAAM,EAGnB,CA1iJgDujC,CAAqB34B,EAAW5Y,SAAW,KAC9Ee,GAAahN,EAAMO,QAAQoN,qBAAwB8e,GAAiBA,EAAcxS,KAAQja,EAAMO,QAAQyM,YAAc,EAG1H,GAAI6X,EAAY,EACZ6M,EAAShmB,EAAKc,QAAQa,SAAS,mBAEnB,KACRqkB,EAAS7xB,EAAE,iCAAiC49C,aAAa/xC,EAAKwU,QAIlEwR,EAAOzkB,IAAKjD,GAAQ,eAAiB,gBAAkB6a,EAAW5Y,QAAUe,EAAY,EAAIA,IAC5FkT,EAAQrgB,EAAE,6DACJ2gB,SAASxgB,EAAMygB,iBAAiB,WAAY,OAAQ5V,EAAQlB,OAElEuW,EAAMhT,MAAMxB,EAAKwU,MAAM,GAAGrH,MAAM3L,OAEhCgT,EAAMc,OAAOtV,EAAK+O,OAClBiX,EAAOvR,QAAQa,OAAOnhB,EAAE,wDAAwDmhB,OAAOd,IAGvFxU,EAAK0B,QAAU1B,EAAKwU,MAAM3S,SAC1B7B,EAAK+gB,cAAgBA,EAEjB/gB,EAAK0B,QAAQ2T,GAAG,gCAAuCtW,MACvDiB,EAAK0B,QAAU1B,EAAK0B,QAAQG,UAG3B7B,EAAK0B,QAAQ2T,GAAG,iDACjBrV,EAAK0B,QAAU1B,EAAKwU,MAAMnU,KAAK,oDAAoDwB,UAGvF7B,EAAK0B,QAAQrB,KAAK,oCAAoCwB,SAElDkf,GAAiBA,EAAcxS,OAASvO,EAAKsZ,mBAC7CtZ,EAAKgyC,2BAGLjxB,GAAiBA,EAAc9V,SAE/BjL,EAAKwU,MAAMjT,IAAI,CACXC,MAAOyP,GAAUqB,GAAmBF,GAAwBpS,EAAKiL,aAIzEgZ,EAAa+B,EAAOrkB,SAAS,uBAE7B3B,EAAKge,YAAciG,EAAWljB,IAAIf,EAAK0B,SAGvC,IAAIuc,EAASje,EAAKc,QAAQ0J,KAAK,kBAY/B,GAVIyT,EAAOtT,SACP3K,EAAKge,YAAche,EAAKge,YAAYjd,IAAIkd,EAAOtc,SAAS,yBAG5DsiB,EAAWhjB,IAAI,SAAW7J,GAAI0K,GAAG,SAAW1K,GAAI,SAASmL,GACjDvC,EAAKiyC,cAAgB3yC,KAAKwD,YAC1BxO,EAAMwO,WAAW9C,EAAKge,YAAY0D,IAAInf,EAAEiB,eAAgBlE,KAAKwD,WAErE,IAEIie,GAAiBA,EAAcxS,KAC/BvO,EAAK0B,QAAQ8I,KAAK,+BAA+BvJ,IAAI,SAAW7J,GAAI0K,GAAG,SAAW1K,GAAI,WAClF,IAAI86C,EAAkB5yC,KAAKwD,YAAc9C,EAAKiyC,YAC9CjyC,EAAKiyC,YAAc3yC,KAAKwD,WACxBxO,EAAMwO,WAAW9C,EAAKge,YAAa1e,KAAKwD,YACpC9C,EAAKsK,gBACLtK,EAAKsK,cAAc,GAAG3H,UAAYrD,KAAKqD,WAEvCoe,EAAc9V,SAAWinC,GACzBlyC,EAAKE,SAEb,QACG,CACH,IAAIo7B,EAAUniB,EAAWmiB,QACrB6W,EAAmBnyC,EAAKT,WAAWJ,QAAQU,SAC3Cy7B,IACAt7B,EAAKu7B,iBAAmB4W,GAE5BnyC,EAAK0B,QAAQT,IAAI,SAAW7J,GAAI0K,GAAG,SAAW1K,GAAI,SAASmL,GACvD,IAAI2vC,EAAkB5yC,KAAKwD,YAAc9C,EAAKiyC,YAC9CjyC,EAAKiyC,YAAc3yC,KAAKwD,WACxBxO,EAAMwO,WAAW9C,EAAKge,YAAY0D,IAAInf,EAAEiB,eAAgBxD,EAAKiyC,aACzDjyC,EAAKsK,eAAiB/H,EAAEiB,eAAiBxD,EAAK0B,QAAQ,KACtD1B,EAAKsK,cAAc,GAAG3H,UAAYrD,KAAKqD,WAEvC24B,GACKh8B,KAAKqD,UAAYrD,KAAK+D,aAAe/D,KAAKgE,eAAiB,KAC3DtD,EAAKoyC,yBACNpyC,EAAKu7B,iBAAmBv7B,EAAKT,WAAWyH,UACxChH,EAAKqyC,wBAA0BryC,EAAKu7B,iBACpCv7B,EAAKu7B,iBAAmBv7B,EAAKu7B,iBAAmB4W,EAChDnyC,EAAKT,WAAWJ,QAAQm8B,SAAU,EAClCt7B,EAAKoyC,yBAA0B,EAC/BpyC,EAAKT,WAAWM,SAASG,EAAKu7B,mBAIlCxa,GAAiBA,EAAc9V,SAAWinC,IACxClyC,EAAK6xB,mBAAoB,EACzB7xB,EAAKsyC,sBACLtyC,EAAKE,UACLF,EAAKuyC,wBACLvyC,EAAK6xB,mBAAoB,GAG3B7xB,EAAKwoB,YACLxoB,EAAKwoB,WAAWjnB,IAAI,OAAQgB,EAAEiB,cAAcV,WAAa,KAEjE,IAEA,IAAIowB,EAAgBlzB,EAAK0B,QAAQhN,KAAK,sBAClCw+B,GACAA,EAAcryB,WAGlBqyB,EAAgB5+B,EAAM4+B,cAAclzB,EAAK0B,WACpBwxB,EAAcsf,UAC/BxyC,EAAKkzB,cAAgBA,EACrBA,EAAcsf,QAAQryC,KAAK,UAAU,SAASoC,GAC1CjO,EAAMwO,WAAW9C,EAAKge,aAAczb,EAAEC,OAAOO,GACzC/C,EAAKsK,eACLtK,EAAKsK,cAAc3H,WAAWJ,EAAEC,OAAOI,EAE/C,IAEA5C,EAAKyyC,IAAIt6C,GAAW,SAASoK,GACzBA,EAAEC,OAAO1B,QAAQgU,SAAS,kBAC9B,IAER,CACJ,CACJ,EAEAk9B,yBAA0B,WACtB,IAAIhyC,EAAOV,KAEPU,EAAKsZ,mBACLtZ,EAAKsZ,kBAAkBzY,UAG3Bb,EAAKsZ,kBAAoB,IAAIvZ,GAAkBC,EAAK0B,QAAS,CACzDnC,WAAYS,EAAKT,WACjBiB,WAAY,WAAa,OAAOR,EAAK0yC,mBAAqB,EAC1DrqC,KAAM,WACFrI,EAAKuyC,uBACT,EACAI,OAAQ,WACJ3yC,EAAK4yC,gBACT,EACAC,UAAW,WACP7yC,EAAK8yC,WAAU,EACnB,EACAC,QAAS,WACL/yC,EAAK8yC,WAAU,EACnB,IAGJ9yC,EAAKsZ,kBAAkBnZ,KAAK3H,GAAQwH,EAAKgzC,iBAAiB7yC,KAAKH,GACnE,EAEAgzC,iBAAkB,WACd,IAAIhzC,EAAOV,KAEXU,EAAKsyC,sBAEDtyC,EAAK4yB,6BACL5yB,EAAKuyB,2BAA4B,EACjCvyB,EAAKyxB,YACLzxB,EAAKuyB,2BAA4B,EAEzC,EAEA4G,mBAAoB,WAChB,OAAO75B,KAAKszB,4BAA8BtzB,KAAK0yB,4BAA8B1yB,KAAK2zC,yBACtF,EAEAjhB,yBAA0B,WACtB,OAAQ1yB,KAAsB,mBAAKA,KAAKwxB,cAAgBj1B,EAC5D,EAEA+2B,yBAA0B,WACtB,OAAQtzB,KAAsB,mBAAKA,KAAKwxB,cAAgBl1B,EAC5D,EAEAq3C,wBAAyB,WACrB,OAAO3zC,KAAKga,mBAA0C,UAArBha,KAAKwxB,WAC1C,EAEAxE,mBAAoB,WAChB,SAAQhtB,KAAKyhB,eAAiB,CAAC,GAAG9V,OACtC,EAEA0mB,sBAAuB,WACnB,IAAI3xB,EAAOV,KACP6Z,EAAanZ,EAAKsZ,mBAElBtZ,EAAKgyB,4BAA8BhyB,EAAK4yB,8BACpCzZ,EAAW3T,sBACX2T,EAAWjU,yBACJiU,EAAWzT,oBAClByT,EAAWlU,sBAGvB,EAEAshB,oCAAqC,WACjC,IAAIjN,EAAoBha,KAAKga,kBAEzBA,GACAA,EAAkBnU,8BAE1B,EAEAotC,sBAAuB,WACnB,IAOIpsC,EACAmJ,EARAtP,EAAOV,KACP4zC,EAAgBlzC,EAAK6yB,gBAAkB,CAAC,EACxCsgB,EAAcD,EAAc9gB,MAC5B7yB,EAAaS,EAAKT,WAClB6zC,EAAapzC,EAAKgyB,2BAClBqhB,EAAarzC,EAAK4yB,2BAClB0gB,EAAiBtzC,EAAKssB,sBAIrB8mB,GAAcC,GAAcC,IAAmBH,GAAe5zC,EAAWg0C,UAAUJ,EAAYtnC,IAAKtM,EAAWi6B,UAC5Gx5B,EAAK8wB,cAAgBj1B,IACrBmE,EAAKuyB,2BAA4B,EACjCvyB,EAAK+xB,QAAQohB,GACRG,GACDtzC,EAAK4yC,kBAEF5yC,EAAK8wB,cAAgBl1B,KAC5BuK,EAAMnG,EAAKuU,MAAM5S,SAAS2G,GAjlR1B,MAilRgD6qC,EAAYtnC,OAC5DyD,EAAOnb,EAAEgS,GAAKxE,SAAS2G,GAAW5M,GAAOw3C,EAAc1nC,SAE9C,KACLxL,EAAKuyB,2BAA4B,EACjCvyB,EAAK0xB,SAASpiB,GACTgkC,GACDtzC,EAAK4yC,oBAMrB5yC,EAAKuyB,2BAA4B,CACrC,EAEAqgB,eAAgB,WACZ,IAAI5yC,EAAOV,KACPk0C,GAAexzC,EAAK6yB,gBAAkB,CAAC,GAAGrnB,MAC1C0lB,EAAgBlxB,EAAKmxB,eAErBD,GAAiBA,EAAcvmB,SAAWvU,EAAS86B,EAAc,GAAIn8B,MAAoBiL,EAAKyzC,sBAC1FzzC,EAAKgyB,4BAA8BhyB,EAAKssB,qBACxC4E,EAAc1mB,KAAKlC,GAAW7M,GAAe+3C,IAAchpC,KAAKxR,IAAWoR,GAAG,GAAG1F,QAAQ,UAClF1E,EAAK4yB,4BAA8B5yB,EAAKssB,uBAC/C4E,EAAc1mB,KAAKxR,IAAWoR,GAAG,GAAG1F,QAAQ,SAGxD,EAEA+uC,kBAAmB,WACf,IAAIzzC,EAAOV,KAIX,OAHeU,EAAK4yB,4BAA8B5yB,EAAKgyB,4BAA8BhyB,EAAKssB,wBACzFonB,IAA2B1zC,EAAKsZ,mBAAqB,CAAC,GAAGxY,QAASd,EAAKmxB,iBAAmBuiB,GAA0B1zC,EAAK0B,QAAS1B,EAAKmxB,gBAG5I,EAEAmhB,oBAAqB,WACjB,IAMIvC,EACA4D,EACAhqC,EARA3J,EAAOV,KACP4xB,EAAgBlxB,EAAKmxB,eACrBgiB,EAAcjiB,EAAgBlxB,EAAK6wB,mBAAmBK,GAAiB,KACvEkiB,EAAapzC,EAAKgyB,2BAClBqhB,EAAarzC,EAAK4yB,2BAClB0gB,EAAiBtzC,EAAKssB,sBAKrB8mB,GAAcC,GAAcC,IAAmBH,IAChDnzC,EAAKwyB,sBACLud,EAAS57C,EAAEY,KAEPm8B,GAAiB6e,EAAO,IAAM35C,EAAS86B,EAAc,GAAI6e,EAAO,MAGhEA,EAAOjlB,UAEP6oB,EAASr/C,EAAMs/C,eAAe7D,EAAQz7C,EAAME,MAE9BwB,EAAW29C,EAAOhqC,QAAUomC,EAAO16B,GAAG1Z,MAChDgO,EAAQomC,EAAO1N,MAEX0N,EAAO16B,GAAG,sBACV1L,EAAQomC,EAAO16B,GAAG,aAGtBs+B,EAAOhqC,MAAMA,GACbgqC,EAAOjvC,QAAQ3M,KAInBiI,EAAK8wB,cAAgBj1B,GACrBmE,EAAK6yB,eAAiB,CAClBT,MAAO+gB,EACP3nC,MAAOukC,EAAOt8B,QAAQ,IAAMnf,EAAMqC,KAAK8E,IAAiB,KAAK9E,KAAKrC,EAAMqC,KAAK8E,MAE1EuE,EAAK8wB,cAAgBl1B,KAC5BoE,EAAK6yB,eAAiB,CAClBT,MAAO+gB,EACP3nC,MAAO0lB,EAAcv6B,KAAKrC,EAAMqC,KAAK+E,OAIrD,EAEAshB,kBAAmB,WACf,IAAIhd,EAAOV,KACPoC,EAAU1B,EAAK0B,SAAW1B,EAAKwU,MAC/BlK,EAAgBtK,EAAKsK,cAErB5I,GACAA,EAAQ8I,KAAKzT,GAAUqoB,YAAY3lB,IAGnC6Q,GACAA,EAAcE,KAAKzT,GAAUqoB,YAAY3lB,GAEjD,EAEA+4B,oBAAqB,WACjB,IAAIxyB,EAAOV,MAEPU,EAAKsZ,mBAAsBtZ,EAAK+gB,eAAiB/gB,EAAKssB,wBACtDtsB,EAAK6yB,eAAiB,KAE9B,EAEAnW,0BAA2B,WACvB,IAAI1c,EAAOV,KAEXU,EAAKwyB,sBAEDxyB,EAAKsZ,mBAAqBtZ,EAAKsZ,kBAAkBpa,SACjDc,EAAKsZ,kBAAkBzY,UAG3Bb,EAAKsZ,kBAAoB,IAC7B,EAEAmD,oBAAqB,WACbnd,KAAK2qB,cACL3qB,KAAK2qB,YAAYppB,UAEjBvB,KAAK2qB,YAAc,MAGnB3qB,KAAKkpB,aACLlpB,KAAKoqB,0BACLpqB,KAAKkpB,WAAWvnB,IAAIhG,GAAa7D,GACjCkI,KAAKkpB,WAAa,KAClBlpB,KAAKwoB,yBAEb,EAEA+rB,wBAAyB,WACrB,IAAI7zC,EAAOV,KAEX,GAAIU,EAAKb,QAAQgb,UAAW,CACxB,IAAI25B,EAAmB9zC,EAAKwU,MAAM3S,SAASF,SAAS,IAAMvI,IAEtD06C,EAAiBnpC,SACjB3K,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CAAEvV,SAAUypC,EAAiBj0B,MACxC,IAEAi0B,EAAiBtiC,UAGhBxR,EAAKT,YAAeS,EAAKT,WAAWi6B,OAAO7uB,SAC5CmpC,EAAmB3/C,EAAE6L,EAAK+d,kBAAkB,CAAEif,KAAMh9B,KAASwO,YAAYxO,EAAKwU,OAE9ExU,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAUypC,EAAiBj0B,MAC3BnrB,KAAM,CAAC,CAAC,GAEhB,IAER,CACJ,EAEAq/C,iBAAkB,SAASjxC,GACvB,IAIIkxC,EAJAh0C,EAAOV,KACP20C,EAAiB,0BACjBC,EAAY,eAAiBD,EAAiB,WAC9C75B,EAAYpa,EAAKoa,UAGjBpa,EAAKb,QAAQga,YAAcnZ,EAAKc,QAAQuU,GAAG,cAC3C2+B,EAAWh0C,EAAKwU,MAAM3S,SAASF,SAAS,IAAMsyC,GAC9Cj0C,EAAKse,wBAA0Bte,EAAK+zC,iBAAiB5zC,KAAKH,GACrDA,EAAKT,YAAeS,EAAKT,WAAWi6B,OAAO7uB,OAarCqpC,EAAS,KAChBA,EAASxiC,SACL4I,GACAA,EAAU9Z,OAAO,SAAUN,EAAKse,2BAf/B01B,EAAS,KACVA,EAAW7/C,EAAE+/C,GAAWjxC,SAASjD,EAAKwU,MAAM3S,UACxCuY,GACAA,EAAUja,KAAK,SAAUH,EAAKse,0BAGlCte,EAAK+O,QACLilC,EAASxyC,MAAMxB,EAAK+O,MAAMvN,SACrB2yC,MAAMzvB,WAAW5hB,EAAY,MAC9BxO,EAAMwO,WAAW9C,EAAK0B,QAASoB,KAU3C9C,EAAKwmB,8BACLxmB,EAAKymB,2BAGDzmB,EAAKkd,cAA8C,IAA9Bld,EAAKwU,MAAM,GAAGlP,cACnCtF,EAAKwU,MAAM,GAAGrH,MAAM3L,MAAQ,OAGxC,EAEAglB,4BAA6B,WACzB,GAAIlnB,KAAKH,QAAQga,YAAc7Z,KAAK4d,aAAc,CAC9C,IASIk3B,EATA5lB,EAAclvB,KAAKyP,MAAMlN,SACzBoiB,EAAauK,EAAY3sB,SACzBwyC,EAAe/0C,KAAKwB,QAAQ,GAAGwE,YAC/B6I,EAAS7O,KAAKuZ,UACdvX,EAAYhN,EAAMO,QAAQyM,YAC1B4P,EAAO5R,KAAK4d,aAAa1S,KAAK,2DAC9B8pC,EAAgB9lB,EAAYhkB,KAAK,qDACjChJ,EAAQ2P,GAAaD,GACrBqjC,EAAqBpjC,GAAamjC,GAGlCnmC,EAAS,IACT3M,GAAStM,EAAWoK,KAAK4d,aAAa1S,KAAK,iBAAiB5I,SAAWuM,GAGvE3M,GAAS6yC,IACT7yC,EAAQ6yC,EAAe,EAAI/yC,GAG/BhC,KAAK4d,aACAnc,IAAIzB,KAAKgL,eACT9I,MAAMA,GAEXyiB,EAAW,GAAG9W,MAAM3L,MAAQyiB,EAAWpiB,SAASL,QAAUA,EAAQ,EAAIpF,GAEtEoyB,EAAYztB,IAAIzB,KAAKkV,OAAOhT,MAAM+yC,GAG9Bj1C,KAAKga,oBAAsB9a,KAC3B61C,GAAgB/yC,GAGpBhC,KAAKoC,QAAQ,GAAGyL,MAAM3L,MAAQ6yC,EAAe7yC,EAAQ,EAAIpF,GAErDkD,KAAK6e,cAAgB7e,KAAK6e,aAAaxT,SACvCrL,KAAK6e,aAAa3c,MAAMA,IACxB4yC,EAAa90C,KAAK2e,OAAOzT,KAAK,wBACnB,GAAG2C,MAAM3L,MAAQyiB,EAAW,GAAG3e,YAAclJ,GACxDg4C,EAAWzyC,WAAWC,QAAQJ,MAAM+yC,GAE5C,CACJ,EAEAv8B,kBAAmB,WACf,IAEIpU,EA+B+BuL,EACvBqlC,EAlCRx0C,EAAOV,KACPH,EAAUa,EAAKb,QAEf6mB,EAAShmB,EAAKc,QAAQa,SAAS,kBAC/BL,EAAYhN,EAAMO,QAAQyM,YAC1BmzC,GAAoBt1C,EAAQga,YAAc,CAAC,GAAGvV,OAElD,GAAIzE,EAAQga,YAAcnZ,EAAKc,QAAQuU,GAAG,YAAa,CAC/Co/B,GAAqD,KAAjCz0C,EAAK0B,QAAQ,GAAGyL,MAAMvJ,SAE1C5D,EAAK0B,QAAQ,GAAGyL,MAAMvJ,OAAS6wC,GAGnC7wC,EAAS5D,EAAKc,QAAQ+C,cAEtBD,GAAUxO,EAAY4wB,GAElBhmB,EAAK4b,OAAS5b,EAAK4b,MAAM1c,QAAQmW,GAAG,cACpCzR,GAAUxO,EAAY4K,EAAK4b,MAAM1c,UAGjCC,EAAQka,YACRzV,GAAUxO,EAAY4K,EAAKc,QAAQa,SAAS,wBAG5CxC,EAAQsa,UACR7V,GAAUxO,EAAY4K,EAAKc,QAAQa,SAAS,qBAG5C3B,EAAK4d,iBACLha,GAAUxO,EAAY4K,EAAKc,QAAQa,SAAS,sBAGjBwN,EAmBXnP,EAAKc,SAjBd,GAAGqM,MAAMvJ,SAGZ4wC,EAAgBrlC,EAAGvL,SAGvBuL,EAAGvL,OAAOxI,IAGNo5C,GAFQrlC,EAAGvL,UAGXuL,EAAGvL,OAAO,IACH,IAEXuL,EAAGvL,OAAO,IACH,OAIHA,EAAqB,EAAZtC,GACLtB,EAAKsK,gBACLhJ,EAAYtB,EAAKwU,MAAM,GAAGtM,YAAclI,EAAKwU,MAAM3S,SAAS,GAAGyD,YAAchE,EAAY,EACzFtB,EAAKsK,cAAc1G,OAAOA,EAAStC,IAGvCtB,EAAK0B,QAAQkC,OAAOA,IAEpB5D,EAAK0B,QAAQkC,OAAmB,EAAZtC,EAAgB,GAGhD,CACJ,EAEAoxC,kBAAmB,WACf,IAAI1yC,EAAOV,KACPo1C,EAAa10C,EAAKsf,OAAOtf,EAAKuU,OAAO,GAAM5J,OAC3ClH,EAAYzD,EAAK20C,WAErB,GAAmB,IAAfD,EACA,OAAOjxC,EAGNzD,EAAK20C,aACN30C,EAAK20C,WAAalxC,EAAYrO,EAAY4K,EAAKwU,OAASkgC,EACxD10C,EAAK40C,KAAOnxC,EACZzD,EAAK60C,UAAY,GAGrB,IAAIC,EAAmB1/C,EAAY4K,EAAKwU,OAASkgC,EAOjD,OALIjxC,IAAcqxC,IACd90C,EAAK60C,YACL70C,EAAK40C,MAAQE,EACb90C,EAAK20C,WAAa30C,EAAK40C,KAAO50C,EAAK60C,WAEhCpxC,CACX,EAEA+T,YAAa,WACT,IAEIqC,EAFA7Z,EAAOV,KACPH,EAAUa,EAAKb,QAEfI,EAAaJ,EAAQI,WAEzBA,EAAa5J,EAAQ4J,GAAc,CAAE7K,KAAM6K,GAAeA,EAEtDhK,EAAcgK,KACd/J,EAAO+J,EAAY,CAAEiV,MAAOxU,EAAKwU,MAAOke,OAAQ1yB,EAAKiL,UAErD4O,EAAW1a,EAAQ0a,SAEftkB,EAAcskB,IAAaA,EAASha,WAAazL,IACjDmL,EAAWM,SAAWga,EAASha,WAInCG,EAAKT,YAAcS,EAAKC,gBACxBD,EAAKT,WAAWe,OAAOvI,EAAQiI,EAAKC,iBACnBK,OAAO9J,EAAUwJ,EAAK8c,kBACtBxc,OAAO7J,EAAOuJ,EAAK+c,eACnBzc,OAAOvE,GAAMiE,EAAKid,eAEnCjd,EAAKC,gBAAkBD,EAAKE,QAAQC,KAAKH,GACzCA,EAAK8c,iBAAmB9c,EAAK+0C,cAAc50C,KAAKH,GAChDA,EAAK+c,cAAgB/c,EAAKg1C,OAAO70C,KAAKH,GACtCA,EAAKid,aAAejd,EAAKgd,kBAAkB7c,KAAKH,IAGpDA,EAAKT,WAAa9K,EAAWsU,OAAOxJ,GACfY,KAAKpI,EAAQiI,EAAKC,iBAClBE,KAAK3J,EAAUwJ,EAAK8c,kBACpB3c,KAAK1J,EAAOuJ,EAAK+c,eACjB5c,KAAKpE,GAAMiE,EAAKid,aACzC,EAEA+3B,OAAQ,WACJ11C,KAAKwzC,WAAU,EACnB,EAEAiC,cAAe,WACXz1C,KAAKwzC,WAAU,EACnB,EAEAxe,aAAc,SAAS/xB,GACnB,IAII0yC,EACA3lC,EACAhE,EAEAqJ,EAGA6E,EACA07B,EACAC,EACAC,EACAzqC,EAfA3K,EAAOV,KACPiV,EAAQvU,EAAKuU,MACb6d,EAAQ7vB,EAAE6vB,MACVjsB,EAAMnG,EAAKuU,MAAM/J,KAAK,MAAQlW,EAAMqC,KAAK,OAAS,IAAMy7B,EAAMvmB,IAAM,KAIpEwsB,EAAQlyB,EAAIiJ,SAAS,SAErBxH,EAAM5H,EAAKsf,OAAO/K,GAAOxO,MAAMI,GAC/Byf,EAAW5lB,EAAKsK,cAWpB,GAJIsb,IACAqvB,EAAaj1C,EAAK+yB,YAAY5sB,IAG9BA,EAAIpF,IAAIk0C,GAAYtzC,SAAS,gBAAgBgJ,SAAW3K,EAAKb,QAAQ8a,YACrE9T,EAAIpF,IAAIk0C,GAAYtzC,SAAS,yCAAyCme,MAAK,WACvExQ,EAAOnb,EAAEmL,OACTgM,EAAS4D,GAAYlP,EAAKiL,SAASjL,EAAKgxB,sBAAsB1hB,KAEnD9D,QAAUjJ,EAAEiJ,QACd8D,EAAKF,SAAS,eAGfE,EAAKwF,SAAS,gBAFd9U,EAAKw0B,aAAallB,EAAMhE,EAAQ8mB,GAK5C,SAEG,IAAKjsB,EAAIiJ,SAAS,mBAAoB,CAEzC8lC,EAAgB/gD,IAAI4M,IAAIoF,GAEpByf,IACAjR,GAAO0jB,EAAQr4B,EAAK2d,qBAAuB3d,EAAK0d,mBAAmB0U,GAEnE8iB,EAAgBA,EAAcn0C,IAAIk0C,GAElCA,EAAW3c,YAAY3jB,IAG3B3U,EAAK4f,QAAQ,WAAW,WAAa,MAAO,CAAEvV,SAAU6qC,EAAcr1B,MAAS,IAE/ElL,GAAO0jB,EAAQr4B,EAAKka,eAAiBla,EAAKia,aAAamY,GAEvDjsB,EAAImyB,YAAY3jB,GAEhBA,EAAM3U,EAAKsf,OAAO/K,GAAOnK,GAAGxC,GAE5B,IAAI4wB,EAAc,CAAE,CAAEpK,SAAUgE,IA2BhC,IAzBIxM,IACAzf,EAAMA,EAAIpF,IAAIk0C,GAEdA,EAAaj1C,EAAK+yB,YAAYpe,GAAK,GACnCme,GAAgBne,EAAI,GAAIsgC,GAExBtgC,EAAMA,EAAI5T,IAAIk0C,GACdzc,EAAY1iC,KAAK,CAAEs4B,SAAUgE,KAGjCpyB,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAUsK,EAAIkL,MACdnrB,KAAM8jC,EAEd,MAEAhf,EAAaxZ,EAAKb,QAAQqa,aACPxZ,EAAK8sB,qBAAuB3mB,EAAIiJ,SAASnW,KACzD+G,EAAK0oB,OAAO/T,GAGfygC,EAAgBF,EAAcvzC,SAAS,yCACvCwzC,EAAaxgC,EAAIhT,SAAS,yCAErBiG,EAAM,EAAG+C,EAAS3K,EAAKiL,QAAQN,OAAQ/C,EAAM+C,EAAQ/C,IACtD0D,EAAStL,EAAKiL,QAAQrD,GAEtB0H,EAAO6lC,EAAW/qC,GAAGxC,GACjB4R,GAAc47B,EAAchrC,GAAGxC,GAAKwH,SAASnW,KAC7CqW,EAAKwF,SAAS7b,IAItB+G,EAAK0E,QAAQ,aAAc,CAAEgR,KAAMf,EAAKjgB,KAAM09B,EAAOqC,GAAIjgC,GAC7D,CACJ,EAEAujB,UAAW,WACP,IACIs9B,EADAr1C,EAAOV,KAEPua,EAAW7Z,EAAKb,QAAQ0a,SACxB5b,EAAO+B,EAAKb,QAAQlB,KACpBsb,EAAcvZ,EAAKb,QAAQoa,YAE3BM,KACAw7B,EAAYr1C,EAAKc,QAAQa,SAAS,qBAEnBgJ,SACX0qC,EAAYlhD,EAAE,wCAGQ,QAAtB0lB,EAAS/T,SACTuvC,EAAUtY,UAAU/8B,EAAKc,SAASgU,SAAS,oBAE3CugC,EAAUpyC,SAASjD,EAAKc,SAGxBd,EAAK4b,OACL5b,EAAK4b,MAAM/a,UAGS,iBAAbgZ,GAAyBA,aAAoBvlB,EAAME,GAAGwK,MAC7DgB,EAAK4b,MAAQ/B,EAET7Z,EAAKT,WAAW+1C,aAChBt1C,EAAK4b,MAAQ,IAAIvnB,EAAYghD,EAAW7/C,EAAO,CAAC,EAAGqkB,EAAU,CAAEta,WAAYS,EAAKT,WAAYga,YAAaA,EAAatb,KAAMA,KAE5H+B,EAAK4b,MAAQ,IAAItnB,EAAME,GAAGwK,MAAMq2C,EAAW7/C,EAAO,CAAC,EAAGqkB,EAAU,CAAEta,WAAYS,EAAKT,WAAYga,YAAaA,EAAatb,KAAMA,KAIvI+B,EAAK4b,MAAMzb,KAAK,cAAc,SAASoC,GAC/BvC,EAAK0E,QAAQ,OAAQ,CAAE2D,KAAM9F,EAAEwD,SAC/BxD,EAAES,gBAEV,IAEAhD,EAAKu1C,yBAEb,EAEAz8B,QAAS,WACL,IAKIs7B,EALAp0C,EAAOV,KACPgX,EAAatW,EAAKT,WAAW+W,aAC7BzO,EAAO,GACP+V,EAAiB5d,EAAK4d,eACtBze,EAAUa,EAAKb,QAEf8e,EAASje,EAAKie,QAAUje,EAAKc,QAAQ0J,KAAK,kBAE9C,GAAIoT,EAAgB,CAGhB,GAFA/V,EAAO1T,EAAE6L,EAAKw1C,YAAY53B,EAAetH,KAErC2H,EAAOtT,OAAQ,CACf,IAAIgK,EAAM9M,EAEV7H,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CAAEvV,SAAU4T,EAAO4B,MAC9B,IAEA5B,EAAOqa,YAAY3jB,GACnBsJ,EAASje,EAAKie,OAAStJ,CAC3B,MAEQsJ,EADA9e,EAAQga,WACCnZ,EAAKie,OAAS9e,EAAQ0a,UAA0C,QAA9B1a,EAAQ0a,SAAS/T,SAAqB+B,EAAKkqC,aAAa/xC,EAAKc,QAAQa,SAAS,qBAAuBkG,EAAK5E,SAASjD,EAAKc,SAE1Jd,EAAKie,OAASpW,EAAK2G,YAAYxO,EAAKuU,OAIrDvU,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAU4T,EAAOzT,KAAK,4CAA4CqV,MAClEnrB,KAAMe,EAAIuK,EAAKiL,SAAS,SAAS0a,GAC7B,MAAO,CACHra,OAAQqa,EACR/G,UAAWtI,EAAWqP,EAAIna,OAElC,IAER,GAEJ,MAAWyS,IAAWje,EAAKie,SACvBje,EAAKie,OAASA,GAGlB,GAAIA,EAAOtT,SACHxL,EAAQga,aACRi7B,EAAan2B,EAAOtnB,KAAK0E,IAAW,GAAGsG,SAAS,uBAEhD3B,EAAKge,YAAc7pB,EACf6L,EAAKge,YACAzT,QAAO,WAAa,OAAQpW,EAAEmL,MAAM+V,GAAG,sBAAwB,IAC/DzH,WACP7M,IAAIqzC,IAGNp0C,EAAKsmB,cACLrI,EAAOzT,KAAK,SAASjJ,IAAI,QAASvB,EAAKsmB,cAGvC8tB,GAAY,CACZ,IAAIplC,EAAS1a,EAAMwO,WAAW9C,EAAK0B,UAER,IAAvBvC,EAAQga,YAAuBnZ,EAAK+gB,eAAiB/gB,EAAK+gB,cAAcxS,OACxES,EAAS1a,EAAMwO,WAAW9C,EAAKc,QAAQ0J,KAAK,gCAEhDlW,EAAMwO,WAAWsxC,EAAYplC,EACjC,CAGAhP,EAAKsK,gBACLtK,EAAKy1C,4BACLz1C,EAAKwmB,8BACLxmB,EAAK0zB,0BAEb,EAEA8hB,YAAa,SAASE,GAClB,IAEIlhC,EAFAxU,EAAOV,KACPuI,EAAO,GAEPvG,EAAahN,EAAMO,QAAQixB,SAAuC,EAA5BxxB,EAAMO,QAAQyM,YAExD,OAAItB,EAAKb,QAAQga,aAEb3E,GADA3M,EAAO1T,EAAE,sIAAwIuhD,EAAY,iCAChJlrC,KAAK,UACZsK,SAASxgB,EAAMygB,iBAAiB,WAAY,OAAQ/U,EAAKb,QAAQlB,OACvE+B,EAAK21C,YAAYnhC,GACjB3M,EAAKtG,IAAKjD,GAAQ,eAAiB,gBAAkBgD,GAE9CuG,GAGJ,8CAAgD6tC,EAAY,UACvE,EAEAE,YAAa,WACT,IACIhnB,EAEAtjB,EAGAuqC,EACAl8B,EACAD,EACAhL,EATA1O,EAAOV,KAEP2L,EAAUiE,GAAYlP,EAAKiL,SAE3B9L,EAAUa,EAAKb,QACfmb,EAAanb,EAAQmb,WAKrBw7B,EAAwBpgD,EAAKsK,EAAKiL,SAAS,SAASyK,GAChD,OAAOA,EAAKzK,UAAY7W,CAC5B,IAAGuW,OAAS,EACZorC,EAAqBrgD,EAAKsK,EAAKiL,SAAS,SAASyK,GAC7C,OAAyB,IAAlBA,EAAKkV,QAChB,IAAGjgB,OAAS,EACZqrC,EAAsBtgD,EAAKsK,EAAKiL,SAAS,SAASyK,GAC9C,OAA0B,IAAnBA,EAAKugC,SAChB,IAAGtrC,OAAS,EACZmc,EAAWxnB,KAAK+d,UAChB64B,EAAe,SAAS3zC,GACpBvC,EAAK0E,QAAQ/M,EAAgB,CAAE6T,MAAOjJ,EAAEiJ,MAAOpF,UAAW7D,EAAE6D,WAChE,EACA+vC,EAAe,SAAS5zC,GACpBvC,EAAK0E,QAAQ7M,EAAgB,CAAE2T,MAAOjJ,EAAEiJ,MAAOpF,UAAW7D,EAAE6D,WAChE,EACAgwC,EAAgB,WACZrgB,GAAW/1B,EAAKwU,OAAO,EAC3B,EACA6hC,EAAgB,SAAS9zC,GACrBvC,EAAK0E,QAAQnK,GAAa,CAAE+Q,OAAQ/I,EAAE+I,QAC1C,EACAgrC,EAAkB,SAAS/zC,GACvBvC,EAAK0E,QAAQlK,GAAe,CAAE8Q,OAAQ/I,EAAE+I,QAC5C,EACA88B,EAAc,SAAS7lC,GACfvC,EAAK0E,QAAQ,OAAQ,CAAEyO,KAAM5Q,EAAE4Q,OAC/B5Q,EAAES,kBAEFhD,EAAKwyB,sBACDxyB,EAAKT,WAAWJ,QAAQm8B,SACxBt7B,EAAK4+B,gBAGjB,EACA2X,EAAgB,SAASh0C,GACjBvC,EAAK0E,QAAQ,SAAU,CAAE6F,OAAQhI,EAAEgI,OAAQiB,MAAOjJ,EAAEiJ,QACpDjJ,EAAES,kBAEFhD,EAAKwyB,sBACDxyB,EAAKT,WAAWJ,QAAQm8B,SACxBt7B,EAAK4+B,gBAGjB,EACA9f,EAAW3f,EAAQ2f,SAEvB,GAAIxE,EAAY,CACa,kBAAdA,IACPA,EAAa,CAAC,GAGlBta,EAAKgkC,2BAA2B/4B,GAIhC,IAAK,IAAIrD,EAAM,EAAG+C,GAFlB+D,EAAQuE,GAAcjT,EAAK+O,QAEMpE,OAAQ/C,EAAM+C,EAAQ/C,IAAO,CAC1D0D,EAASL,EAAQrD,GACjB,IAAI0H,EAAOZ,EAAMtE,GAAGxC,IAEM,IAAtB0D,EAAOgP,YAAyBhP,EAAOV,UAAYU,EAAOE,QAAS8D,EAAK3Y,KAAK,QAAUrC,EAAMmgC,GAAK,YAClG7F,EAAOtf,EAAK5a,KAAK,qBAEbk6B,EAAK/tB,UAGT8Y,GAA+B,IAApBrO,EAAOqO,WAA8C,IAAxBW,EAAWX,WAA2C,IAArBxa,EAAQwa,UAAqBnkB,EAAO,CAAC,EAAG2J,EAAQwa,SAAU,CAC/H68B,SAAUlrC,EAAOqO,UAAY,CAAC,GAAG68B,UAGrC98B,KAAava,EAAQua,aAAoC,IAAtBpO,EAAOoO,aAAkD,IAA1BY,EAAWZ,aAAuBlkB,EAAO,CAAE4nB,KAAMpd,EAAKod,MAAQje,EAAQua,WAAYpO,EAAOoO,YAEvJpO,EAAOoO,YAAcpO,EAAOoO,WAAWna,aACvCma,EAAW+8B,aAAc,EACzB/8B,EAAWg9B,YAAcprC,EAAOoO,WAAWna,YAG3Cma,IACAA,EAAW7G,OAASvH,EAAOuH,QAG/BgjC,EAAc,CACVt2C,WAAYS,EAAKT,WACjBiT,OAAQlH,EAAOkH,OACfvH,QAASqP,EAAWrP,QACpB0O,SAAUA,EACVD,WAAYA,EACZiB,SAAUL,EAAWK,SACrBg8B,MAAO32C,EACPo2C,cAAeA,EACfn3C,KAAMi3C,EACN3e,KAAM4e,EACNS,MAAOP,EACPQ,QAASP,EACTl5B,KAAMpd,EAAKod,KACXjK,KAAMi1B,EACN0O,UAAWP,EACXhsC,OAAQuc,EAAW,yBAA2B,GAC9CivB,mBAAoBnlC,GAAc3F,GAASN,OAAS,GAAKorC,IAAuBD,EAChFE,oBAAqBA,IAAwBF,EAC7C97B,aAAcha,EAAKb,QAAQ6a,aAC3B+8B,cAAez8B,EAAWy8B,cAC1B9zC,SAAU1M,EAAMwI,IAGhB+f,IACA+2B,EAAY/2B,SAAWA,GAG3BxP,EAAK0nC,gBAAgBnB,GAE7B,CACJ,CACJ,EAEApW,aAAc,WACV,OAAOtrC,EAAEmL,KAAKyP,OAAOvE,KAAK,MAAMD,QAAO,WACnC,IAAIwV,EAAK5rB,EAAEmL,MACX,OAAQygB,EAAG3Q,SAAS,kBAAoB2Q,EAAG3Q,SAAS,mBACxD,GACJ,EAEA6nC,eAAgB,WACZ,IAAIv9B,EAAapa,KAAKH,QAAQua,WAC9B,QAAIA,UAAqBA,EAAW0b,MAAQ75B,KAA8C,GAApCme,EAAW0b,KAAK/jB,QAAQ,UAIvEqI,CACX,EAEAw9B,YAAa,WACT,IAEIl3B,EACAtR,EACAY,EAJAtP,EAAOV,KACP2L,EAAUiE,GAAYlP,EAAKiL,SAI3BksC,EAAa,SAAS50C,GAClBvC,EAAK0E,QAAQhN,EAAgB,CAAE8T,MAAOjJ,EAAEiJ,MAAOpF,UAAW7D,EAAE6D,WAChE,EACAgwC,EAAgB,WACZrgB,GAAW/1B,EAAKwU,OAAO,EAC3B,EACA+hC,EAAgB,SAASh0C,GACjBvC,EAAK0E,QAAQ,SAAU,CAAE6F,OAAQhI,EAAEgI,OAAQiB,MAAOjJ,EAAEiJ,QACpDjJ,EAAES,kBAEFhD,EAAKwyB,sBACDxyB,EAAKT,WAAWJ,QAAQm8B,SACxBt7B,EAAK4+B,gBAGjB,EACAwY,EAAa,SAAS70C,GAClBvC,EAAK0E,QAAQ9M,EAAgB,CAAE4T,MAAOjJ,EAAEiJ,MAAOpF,UAAW7D,EAAE6D,WAChE,EACAsT,EAAa1Z,EAAKi3C,iBAEtB,GAAIv9B,IAAe1Z,EAAKb,QAAQmb,WAG5B,IAAK,IAAI1S,EAAM,EAAG+C,GAFlB+D,EAAQuE,GAAcjT,EAAK+O,QAEMpE,OAAQ/C,EAAM+C,EAAQ/C,IAGnD,GAFA0H,EAAOZ,EAAMtE,GAAGxC,IAEgB,IAA5BqD,EAAQrD,GAAK8R,aAAyBzO,EAAQrD,GAAKgD,UAAYK,EAAQrD,GAAK4D,OAAS8D,EAAK3Y,KAAK,QAAUrC,EAAMmgC,GAAK,UAAW,EAC/HzU,EAAa1Q,EAAK5a,KAAK,qBAGnBsrB,EAAWnf,WAGfmf,EAAa1Q,EAAK5a,KAAK,2BAEpBsrB,EAAWnf,UAGd,IAAIw2C,EAAmBpsC,EAAQrD,GAAK8R,WAEhCva,EAAU3J,EAAO,CAAC,EAClBkkB,EACA29B,EACA,CACI93C,WAAYS,EAAKT,WACjBiT,OAAQvH,EAAQrD,GAAK4K,OACrBK,OAAQ5H,EAAQrD,GAAKiL,OACrBujC,cAAeA,EACfxjC,MAAO3H,EAAQrD,GAAKgL,OAAS3H,EAAQrD,GAAK4D,MAC1CvM,KAAMk4C,EACN5f,KAAM6f,EACNh6B,KAAMpd,EAAKod,KACX0N,OAAQyrB,EACRtzC,SAAU1M,EAAMwI,KAIpBs4C,GAAoBA,EAAiB18B,WACrCxb,EAAQwb,SAAWnlB,GAAO,EAAM,CAAC,EAAGkkB,EAAWiB,SAAU08B,EAAiB18B,WAE1E08B,GAAoBA,EAAiB93C,aACrCJ,EAAQs3C,aAAc,EACtBt3C,EAAQu3C,YAAcW,EAAiB93C,YAGvC83C,GAAoBA,EAAiBrX,MACrC1wB,EAAKgoC,sBAAsBn4C,GAE3BmQ,EAAKioC,gBAAgBp4C,EAE7B,CAGZ,EAEAq4C,WAAY,WACR,IAAIx3C,EAAOV,KACX,GAAKU,EAAKqsB,gBAAV,CAIA,IAAIuI,EACA9V,EAAW9e,EAAKb,QAAQ2f,SACxB7T,EAAUiE,GAAYlP,EAAKiL,SAC3ByO,EAAa1Z,EAAKb,QAAQua,WAC1B+9B,EAAYz3C,EAAK+O,MAAMvE,KAAK,iBAC5B+rC,EAAgB,SAASh0C,GACjBvC,EAAK0E,QAAQ,SAAU,CAAE6F,OAAQhI,EAAEgI,OAAQiB,MAAOjJ,EAAEiJ,QACpDjJ,EAAES,kBAEFhD,EAAKwyB,sBACDxyB,EAAKT,WAAWJ,QAAQm8B,SACxBt7B,EAAK4+B,gBAGjB,EAGJt/B,KAAKo4C,cAAc13C,EAAK6Y,WAExB,IAAK,IAAItL,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAAK,CACrC,IAAIoqC,EACAhyB,EAAM1a,EAAQsC,GACdqqC,EAAY53C,EAAKb,QAAQua,WAAWk+B,UACpCC,GAAmB,EACnBlnB,EAAKx8B,EAAE,iCAAmC6L,EAAKb,QAAQwb,SAASW,gBAAkB,OAClF9P,EAAQma,EAAIna,MAMhB,GAJIma,EAAIpa,QACJolB,EAAGxlB,OAEPssC,EAAUniC,OAAOqb,GACbnlB,IAA4B,IAAnBma,EAAIjM,WAAsB,CACnC,IAAIo+B,EAAcnyB,EAAIjM,YAAciM,EAAIjM,WAAWpK,MAAQ,CAAC,GAE5DqoC,EAAoB33C,EAAKb,QAAQI,sBACA9K,IAC7BkjD,EAAoB33C,EAAKb,QAAQI,WAAWJ,SAGhD,IAAIwb,EAAWnlB,GAAO,EAAM,CAAC,EAAGkkB,EAAWiB,UAK3C,GAJIgL,EAAIjM,YACJlkB,GAAO,EAAMmlB,EAAUgL,EAAIjM,WAAWiB,WAGd,IAAxBm9B,EAAY3Z,QAAmB,CAC/BxN,EAAG9oB,KAAK,UACR,QACJ,CACIiwC,EAAYv4C,aACZo4C,EAAoBG,EAAYv4C,WAChCs4C,GAAmB,GAEnBlyB,EAAIjM,YAAciM,EAAIjM,WAAWk+B,YACjCA,EAAYjyB,EAAIjM,WAAWk+B,WAG/BhjB,EAAW,CACPtpB,OAAQqa,EACRpmB,WAAYS,EAAKT,WACjBo4C,kBAAmBA,EACnBE,iBAAkBA,EAClBrsC,MAAOA,EACPmP,SAAUA,EACV1c,KAAM+B,EAAKb,QAAQlB,KACnBuU,OAAQmT,EAAInT,OACZwiB,SAAU8iB,EAAY9iB,SACtB+iB,MAAOD,EAAYC,MACnBC,WAAYF,EAAYE,WACxBC,mBAAoBH,EAAYG,mBAChCC,UAAWJ,EAAYI,UACvBC,cAAeL,EAAYK,cAC3Blc,SAAU6b,EAAY7b,SACtB2b,UAAWA,EACXQ,cAAeN,EAAYM,cAC3BttB,OAAQyrB,GAGRz3B,IACA8V,EAAS9V,SAAWA,GAGxB3qB,EAAE,WAAWwC,KAAKrC,EAAMqC,KAAK,SAAU6U,GAClCvI,SAAS0tB,GACT0nB,gBAAgBzjB,EACzB,MACIjE,EAAG9oB,KAAK,UAEZ8oB,EAAGj8B,KAAK,SAAUixB,EACtB,CAEArmB,KAAK8rC,mBAAmBz0C,KAAK0E,IAAW,EA5FxC,CA6FJ,EAEAi9C,UAAW,WACP,IAEIhtC,EACAitC,EACAjpC,EAJAtP,EAAOV,KACP2L,EAAUiE,GAAYlP,EAAKiL,SAI3B0O,EAAW3Z,EAAKb,QAAQwa,SACxByuB,EAAc,SAAS7lC,GACfvC,EAAK0E,QAAQ,OAAQ,CAAEyO,KAAM5Q,EAAE4Q,OAC/B5Q,EAAES,iBAEFhD,EAAKwyB,qBAEb,EAGJ,GAAI7Y,EAAU,CAGV,IAFA,IAAIjL,EAAQuE,GAAcjT,EAAK+O,OAEtBnH,EAAM,EAAG+C,EAAS+D,EAAM/D,OAAQ/C,EAAM+C,EAAQ/C,KAG3B,KAFxB0D,EAASL,EAAQrD,IAEN+R,WAAuBrO,EAAOV,SAAWU,EAAOE,SAGvD+sC,GAFAjpC,EAAOZ,EAAMtE,GAAGxC,IAEMlT,KAAK,uBAGvB6jD,EAAe13C,UAGnByO,EAAK3Y,KAAK,QAAUrC,EAAMmgC,GAAK,QAASnpB,EAAOE,OAC1CgtC,kBACGhjD,EAAO,CAAC,EAAGmkB,EAAUrO,EAAOqO,SAAU,CAClCpa,WAAYS,EAAKT,WACjB4gC,MAAM,EACN51B,OAAQ,yBACRugB,OAAQsd,MAK5B15B,EAAQ,IACZ,CACJ,EAEAwI,SAAU,SAASjM,GACf,IAEIC,EAEAq4B,EAGAkV,EAPAz4C,EAAOV,KACPkV,EAAQxU,EAAKwU,MAEbtD,EAAOsD,EAAMhK,KAAK,OAElBkJ,EAAa1T,EAAKd,QAAQsL,KAAK,YAC/BjL,EAAaS,EAAKb,QAAQI,WAmC9B,GA/BA0L,EAAUA,EAAQN,OAASM,EAAUxV,EAAI+e,EAAMhK,KAAK,iDAAiD,SAASuV,EAAInY,GAE9G,IAAI+R,GADJoG,EAAK5rB,EAAE4rB,IACWppB,KAAKrC,EAAMqC,KAAK,aAC9B+iB,EAAaqG,EAAGppB,KAAKrC,EAAMqC,KAAK,eAChCgsB,EAAO5C,EAAGppB,KAAKrC,EAAMqC,KAAK,SAC1B0iB,EAAY0G,EAAGppB,KAAKrC,EAAMqC,KAAK,cAC/B6U,EAAQuU,EAAGppB,KAAKrC,EAAMqC,KAAK,UAC3Bic,EAAQmN,EAAGppB,KAAKrC,EAAMqC,KAAK,UAC3B2jB,EAAayF,EAAGppB,KAAKrC,EAAMqC,KAAK,gBAChCi4B,EAAO7O,EAAGppB,KAAKrC,EAAMqC,KAAK,SAM9B,OAJK6U,IACFA,EAAQuU,EAAGhiB,OAAOgN,QAAQ,gBAAiB,KAGvC,CACHS,MAAOA,EACPmX,KAAMA,EACN/P,MAAOA,EACP+G,SAAuB,UAAbA,EACVD,WAA2B,UAAfA,EACZL,UAAyB,UAAdA,EACXuV,KAAe,UAATA,EACNtU,WAA2B,UAAfA,EACZ0a,SAAUjV,EAAGppB,KAAKrC,EAAMqC,KAAK,aAC7B6K,MAAO0P,EAAK9G,GAAGxC,GAAKrG,IAAIpG,IAEhC,IAEA+P,IAAYlL,EAAKwU,MAAMhK,KAAK,YAAYG,OAAS,KAAOpL,IAAeA,EAAWsf,YAE9E7e,EAAKb,QAAQga,WAAY,CACzB,IAAIu/B,EAAiBztC,EAIrB,GAHAs4B,EAAa3yB,GAAc3F,GAC3BA,EAAU4F,GAAiB5F,GAEvBs4B,EAAW54B,OAAS,GAAwB,IAAnBM,EAAQN,OACjC,MAAM,IAAI8C,MAAM,mDA7mQhC,SAA8BrH,EAAW6E,GACrC,IACIrD,EAAM+wC,EADN52B,EAAY,EAEZhC,EAAK3Z,EAAUoE,KAAK,yBAExB,IAAK5C,EAAM,EAAG+wC,EAAM1tC,EAAQN,OAAQ/C,EAAM+wC,EAAK/wC,IACvCqD,EAAQrD,GAAKwD,SACb2U,EAAG3V,GAAGxC,GAAKmqC,aAAahyB,EAAG3V,GAAG2X,IAC9BhC,EAAK3Z,EAAUoE,KAAK,yBACpBuX,IAGZ,CAomQY62B,CAAqB54C,EAAKd,QAAQsL,KAAK,cAAc5I,QAAS82C,GAC9DztC,EAAUs4B,EAAW71B,OAAOzC,EAChC,CAiBA,GAfIyI,EAAW/I,QAAUM,EAAQN,QAC7B3K,EAAK64C,iBAAiB5tC,EAASyI,EAAW9R,SAG9C5B,EAAKiL,QAAUD,GAAiBC,EAASC,GAErC/W,EAAEuB,KAAKwZ,GAAYlP,EAAKiL,UAAU,SAAS0a,GAAO,OAAOA,EAAInM,UAAW,IAAG7O,SAC3E3K,EAAKmc,aAAe,CAAC,EACrBnc,EAAK8sB,oBAAqB,EAC1B9sB,EAAKc,QAAQgB,GAAGnH,GAAQvD,EAAI,cAAgB+B,GAAe6G,EAAK84C,eAAe34C,KAAKH,IACpFA,EAAKc,QAAQgB,GAAGnH,GAAQvD,EAAI,cAAgB+B,GAAe6G,EAAK+4C,qBAAqB54C,KAAKH,MAG9Fy4C,EAAmBtkD,EAAEuB,KAAKwZ,GAAYlP,EAAKiL,UAAU,SAAS0a,GAAO,OAAOA,EAAI8E,SAAU,KAErE9f,OAAQ,CACzB3K,EAAK4sB,sBAAuB,EAE5B,IAAK,IAAIrf,EAAI,EAAGA,EAAIkrC,EAAiB9tC,OAAQ4C,IACzCkrC,EAAiBlrC,GAAG3B,iBAAmBzX,EAAEqB,OAAO,CAC5C,aAAcwK,EAAKb,QAAQwb,SAASQ,iBACrCs9B,EAAiBlrC,GAAG3B,iBAE/B,CAEA5L,EAAKg5C,oBAAoBh5C,EAAKiL,QAClC,EAEA+tC,oBAAqB,SAAS/tC,GAK1B,IAJA,IAEIK,EADAX,EAASM,EAAQN,OAGZ4C,EAAI,EAAGA,EAAI5C,EAAQ4C,KACxBjC,EAASL,EAAQsC,IAENhO,YAPJD,KAQE25C,uBAAuB3tC,EAGxC,EAEA2tC,uBAAwB,SAAS3tC,GAC7B,IAAItL,EAAOV,KACPy4B,EAAU5jC,EAAE0jC,WAEhB73B,EAAKk5C,qBAAsB,EAC3B5tC,EAAO/L,WAAa9K,EAAWsU,OAAOuC,EAAO/L,YAExCS,EAAKmX,sBACNnX,EAAKmX,oBAAsB,IAG/BnX,EAAKmX,oBAAoBrhB,KAAKiiC,GAC9BzsB,EAAO/L,WAAWoZ,QAAQrB,MAAK,WAC3B,IAAI5iB,EAAO4W,EAAO/L,WAAW7K,OAC7B4W,EAAOkH,OAAS9d,EAAKe,KAAI,SAASigB,GAC9B,MAAO,CACH/L,MAAO+L,EAAKpK,EAAO6tC,gBACnBp7C,KAAM2X,EAAKpK,EAAO6sC,eAE1B,IACApgB,EAAQC,SACZ,GAEJ,EAEA6gB,iBAAkB,SAAS5tC,EAASuU,GAEhC,GAAKvU,EAAQN,OAAb,CAMA,IAFA,IACI9W,EADA6b,EAAM8P,EAAGhV,KAAK,gDAET+C,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,KAChC1Z,EAAK6b,EAAItF,GAAGmD,GAAG5W,KAAKwF,OAEhB8O,EAAQsC,GAAG3B,iBAAmBpW,EAAOyV,EAAQsC,GAAG3B,iBAAkB,CAAE/X,GAAIA,KAIhFyL,KAAKu5C,iBAAiBpmC,GAAaxH,GAAUuU,EAAGnL,OAXhD,CAYJ,EAEA0kC,qBAAsB,SAASx2C,GAC3B,IAAIvC,EAAOV,KACP85C,EAAWjlD,EAAEoO,EAAEyL,QACf+7B,EAAUqP,EAASpP,KAAK,WAEvBhqC,EAAK8xB,eAAesnB,KAIrBrP,EACA/pC,EAAK0oB,OAAO1oB,EAAKoW,SAEjBpW,EAAK8pC,iBAGT9pC,EAAK0E,QAAQ3M,GACjB,EAEA+gD,eAAgB,SAASv2C,GACrB,IAAIvC,EAAOV,KACP6G,EAAMhS,EAAEoO,EAAEyL,QAAQyF,QAAQpX,IAC1Bg9C,GAAelzC,EAAIiJ,SAASnW,IAE3B+G,EAAK8xB,eAAe3rB,KAIrBkzC,EACAr5C,EAAK0oB,OAAOviB,GAEZnG,EAAKshC,mBAAmBn7B,GAE5BnG,EAAK0E,QAAQ3M,GACjB,EAEA8gB,QAAS,WACL,IAAI8F,EAAQrf,KAAKC,WAAWof,QAE5B,OAAOA,EAAQA,EAAMhU,OAAS,CAClC,EAEA2uC,MAAO,SAASr/B,EAAahP,EAASsuC,EAAKC,GACvC,IAGI5xC,EAEAotB,EAEA1pB,EAMAE,EACAiuC,EAdAz5C,EAAOV,KACPs1B,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SAAU70B,EAAKb,QAAQ21B,kBAGnDnqB,GAFYiqB,EAAS8kB,UAEZzuC,EAAQN,QAEjB+pB,EAAQ,CAAEC,QAAS,CAAC,EAAGjsB,MAAO,GAG9ByM,EAAanV,EAAKwgB,cAClBrS,EAASnO,EAAK6Y,UAEd+wB,EAAYt1C,EAAMqC,KAAK,SAG3B,IAAIgjD,EAgGJ,OA9FK1/B,IACD0/B,EAAmBjlD,IACf,IAAImX,EAAMlB,EAAS,IAAIrW,EAAMqC,KAAK,WAAWrC,EAAMslD,OAAO,MAAbtlD,CAAoBI,MAAW,GACxEmlD,EAAoB,cAAcN,EAAM,qCAAuC,8BAA8B1tC,KAUjH,IARIsC,EAAS,IAAMqrC,IACfK,GAAqBpxC,GAAW0F,IAGhCgH,IACA0kC,GAAqB,iEAAmEvlD,EAAME,GAAG4J,KAAKjK,EAAE,eAAeoI,OAAeL,0BAA+B,CAAEkC,KAAM,cAAaE,GAAQ,OAAS,WAAe,SAGzNsJ,EAAM,EAAGA,EAAM+C,EAAQ/C,IAAO,CAM/B,GALA0D,EAASL,EAAQrD,GACjBotB,EAAW1pB,EAAO0pB,gBACJA,EACdxpB,EAAQF,EAAOE,MAEXxL,EAAK8wB,cAAgBl1B,IAAU4P,EAAO,CACtCF,EAAOzC,WAAayC,EAAOzC,YAAc,CAAC,EAEtC7I,EAAK+gB,gBACLzV,EAAOzC,WAAW+gC,GAAap+B,GAGnC,IAAIsuC,EAAoB95C,EAAK+5C,mBAAmBvuC,EAAxBxL,CAA+BtL,GACvD4W,EAAOzC,WAAkB,MAAKyC,EAAOzC,WAAkB,OAAK,GAExDyC,EAAOzC,WAAkB,MAAEwI,QAAQyoC,GAAqB,IACxDxuC,EAAOzC,WAAkB,OAAKixC,EAEtC,CAEIxuC,EAAOyI,SAAWzI,EAAOyI,QAAU,IAh1Qb,MAg1QiCzI,EAAOzC,YAn1QnE,CAAC,GACCsE,OAAS,IAEbkE,QAAQ,gBAi1QD/F,EAAOzC,WAAa6D,GAAkBpB,EAAOzC,aACrCyC,EAAOyI,SAAWzI,EAAOC,SACjCD,EAAOzC,WAAa6C,GAAeJ,EAAOzC,aAG1CyC,EAAOV,UACPU,EAAOzC,WAAayC,EAAOzC,YAAc,CAAC,OAGZ,KAF9B4wC,EAAiBnuC,EAAOzC,WAAkB,OAGlC4wC,EAAepoC,QAAQ,kBAAoB,IAC3C/F,EAAOzC,WAAkB,OAAK,mBAGlCyC,EAAOzC,WAAkB,MAAI,kBAIjCyC,EAAOmf,YACPnf,EAAOzC,WAAayC,EAAOzC,YAAc,CAAC,OACA,IAA/ByC,EAAOzC,WAAkB,MAChCyC,EAAOzC,WAAkB,OAAK,mCAE9ByC,EAAOzC,WAAkB,MAAI,uCAGY,IAAlCyC,EAAOzC,WAAWtM,MACzB+O,EAAOzC,WAAWtM,IAAcyD,EAAKb,QAAQwb,SAASQ,sBAGnB,IAA5B7P,EAAOzC,WAAWsE,MACzB7B,EAAOzC,WAAWsE,OAAS,iBAE3B7B,EAAOzC,WAAWsE,MAAQ,iBAIlC,IACI6sC,EAAmBpxC,GADN0C,EAAOzC,sBAAsBoxC,SAAW3uC,EAAOzC,WAAWnU,GAAQ4W,EAAOzC,YAEtFqxC,EAAoB,GAEpB5uC,EAAOyI,UACHzI,EAAOyI,QAAU,IACjBmmC,GAAqB,IAAM5lD,EAAMqC,KAAK,YAE1CujD,GAAqB,aAAa5uC,EAAOyI,YAE7C8lC,GAAqBhqC,GAAsB,MAAMmqC,IAAmBE,MACpEL,GAAqBvuC,EAAOkO,WAAallB,EAAM0gC,SAASh3B,GAAf1J,CAAiC,CAAE2J,KAAM3J,EAAMygB,iBAAiB,cAAe,OAAQ/U,EAAKb,QAAQlB,QAAW+B,EAAKi1B,UAAU3pB,EAAQopB,EAAvB10B,CAA8BtL,GACtLmlD,GAAqB,OACzB,CAGA,OADAA,GAAqB,OACG,GAIhC5/B,EAAc3lB,EAAM0gC,SAAS/a,GAAe0/B,EAAiB/kB,GAEzDF,EAAMhsB,MAAQ,EACPuR,EAAY9Z,KAAKu0B,EAAMC,SAG3B1a,CACX,EAEA8/B,mBAAoB,SAASvuC,GACzB,OAAQ9W,IACJ,GAAI8W,GAAS9W,GAAQA,EAAKylD,OAASzlD,EAAK0lD,YAAa,CAEjD,OADqC,MAApB5uC,EAAM6uC,OAAO,GAAa/lD,EAAMslD,OAAOpuC,EAAblX,CAAoBI,EAAK0lD,aAAe1lD,EAAK0lD,YAAY5uC,IAChF,gBAAkB,EAC1C,CAEA,MAAO,EAAE,CAEjB,EAEA8uC,gBAAiB,SAAShvC,GACtB,IACIspB,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SADrBv1B,KACoCH,QAAQ21B,kBACnDE,EAAW1pB,EAAOivC,eAClB53B,SAAa,EACb5kB,EAAOuN,EAAOsH,QAJPtT,KAIsBH,QAAQ6a,aAAe9jB,GAAWoV,EAAOsH,OAAStH,EAAOsH,QAAUtH,EAAOE,OAAS,GAOpH,OALImX,IAASrnB,GACTyC,EAAOzJ,EAAM0gC,SAASA,EAAUJ,EAAzBtgC,CAAmC,CAAC,GACpCquB,IAASpnB,KAChBwC,EAAOi3B,GAEJj3B,CACX,EAEAk3B,UAAW,SAAS3pB,EAAQopB,GACxB,IAKI9sB,EACA+C,EANA3K,EAAOV,KACPs1B,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SAAU70B,EAAKb,QAAQ21B,kBACnDE,EAAW1pB,EAAO0pB,SAClBxpB,EAAQF,EAAOE,MAIfqH,EAASvH,EAAOuH,OAChB8P,SAAcqS,EACdpf,EAAetK,EAAOkH,OAE1B,OAAIlH,EAAOV,QACHjV,EAAQ2V,EAAOV,SACPlW,IACJ,IAAImT,EAAO,GACX,IAAKD,EAAM,EAAG+C,EAASW,EAAOV,QAAQD,OAAQ/C,EAAM+C,EAAQ/C,IACpD0D,EAAOV,QAAQhD,GAAK0E,QACpBzE,GAAQyD,EAAOV,QAAQhD,GAAK0E,QAAQ5X,GAAQsL,EAAK02B,cAAcprB,EAAOV,QAAQhD,IAAQ,GAEtFC,GAAQ7H,EAAK02B,cAAcprB,EAAOV,QAAQhD,IAGlD,OAAOC,CAAI,EAGZ,IAAM7H,EAAK02B,cAAcprB,EAAOV,SAGvCU,EAAOkO,WACAxb,GAGPsN,EAAOmf,UACAtsB,GAGHzJ,IACJ,IAAImT,EAAO7H,EAAKw6C,wBAAwBhvC,EAA7BxL,CAAoCtL,GAE/C,GAAIiuB,IAASrnB,GACTo5B,EAAMC,QAAQ,OAASD,EAAMhsB,OAASssB,EACtCntB,GAAQmtB,EAAStgC,GACjBggC,EAAMhsB,aACH,GAAIia,IAASpnB,GAChBsM,GAAQvT,EAAM0gC,SAASA,EAAUJ,EAAzBtgC,CAAmCI,QACxC,GAAIkhB,GAAgBA,EAAajL,QAAUpV,EAAcqgB,EAAa,KAAO,UAAWA,EAAa,IAAMpK,EAAO,CACrH,IACIivC,EADIjlC,GAAgBI,GACdgf,EAAS8lB,aAAepmD,EAAMslD,OAAOpuC,EAAblX,CAAoBI,GAAQ8W,GAC9D3D,GAAa,MAAL4yC,EAAYA,EAAI,EAC5B,KAAO,CACH,IAAIE,EAAa,GACbnvC,IAEAmvC,EAAsB,OADtBnvC,EAAQlX,EAAMslD,OAAOpuC,EAAblX,CAAoBI,IACC,GAAK8W,GAGlCqH,IACA8nC,EAAarmD,EAAMue,OAAOA,EAAO9H,QAAQzN,GAAc,MAAOq9C,IAGlE9yC,GAAQyD,EAAOJ,QAAUjV,EAAO0kD,GAAcA,CAClD,CAEA,OAAO9yC,CAAI,CAEnB,EAEA2yC,wBAAyB,SAAShvC,GAC9B,OAAQ9W,IACJ,GAAI8W,GAAS9W,GAAQA,EAAKylD,OAASzlD,EAAK0lD,YAAa,CAEjD,OADqC,MAApB5uC,EAAM6uC,OAAO,GAAa/lD,EAAMslD,OAAOpuC,EAAblX,CAAoBI,EAAK0lD,aAAe1lD,EAAK0lD,YAAY5uC,IAChF,gCAAoC,EAC5D,CAEA,MAAO,EAAE,CAEjB,EAEAovC,aAAc,SAAS3vC,GACnB,IAWI4vC,EAXA76C,EAAOV,KACPw7C,EAAS3mD,EAAEsB,IAAIwV,GAAS,SAAS8vC,GAAK,OAAOA,EAAExvC,OAAS,EAAI5F,SAASo1C,EAAEv5C,MAAO,GAAK,IACnFsB,EAAa9C,EAAKsZ,kBAAoBhlB,EAAMwO,WAAW9C,EAAK0B,QAAQ8I,KAAK,gCAAkClW,EAAMwO,WAAW9C,EAAK0B,SACjIkV,EAAa1hB,EAAW8K,EAAK0B,SAC7Bs5C,EAAc/pC,GAAUhG,GACxBgwC,EAAe,GACfC,EAAe,EACfC,EAAc,EACdvK,EAAgB,EAChBhpC,EAAM,EACNwzC,EAAuB,EAG3B,IAAKxzC,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAAO,CAEvC,GADAizC,EAAgBjzC,EAAMkzC,EAAOnwC,OAAS,EAAKmwC,EAAOlzC,EAAM,GAAK,IACzDwzC,EAAuBN,EAAOlzC,GAAO,EAAIizC,EAAe/3C,GAKrD,CACHo4C,EAAe,EAAItK,EACnB,KACJ,CAPQkK,EAAOlzC,IACPgpC,IAEJwK,GAAwBN,EAAOlzC,EAKvC,CAEAgpC,EAAgB,EAChBwK,EAAuB,EAEvB,IAAK,IAAI7tC,EAAItC,EAAQN,OAAS,EAAG4C,GAAK,EAAGA,IAAK,CAC1C,KAAI6tC,EAAuB,EAAIN,EAAOvtC,GAAKytC,EAAcpkC,EAAa9T,GAK/D,CACHq4C,EAAc,EAAIvK,EAClB,IAAK,IAAIxuB,EAAIxa,EAAKwa,GAAK7U,EAAG6U,IAClBnX,EAAQmX,GAAGhX,SAGf6vC,EAAanlD,KAAKmV,EAAQmX,IACtBnX,EAAQmX,GAAGrO,gBACJ9I,EAAQmX,GAAGrO,SAG1BknC,EAAa,GAAGlnC,QAAUmnC,EAC1BD,EAAaA,EAAatwC,OAAS,GAAGoJ,QAAUonC,EAChD,KACJ,CAlBQL,EAAOvtC,IACPqjC,IAEJwK,GAAwBN,EAAOvtC,EAgBvC,CAQA,OANI0tC,EAAa,GAAG1vC,QAChB0vC,EAAa,GAAGlnC,UAGpB/T,EAAKq7C,YAAcJ,EAEZA,CACX,EAEAhjC,WAAY,WACR,IAAIjY,EAAOV,KACPH,EAAUa,EAAKb,QACfI,EAAaS,EAAKT,WAClB4O,EAAS5O,EAAWof,QACpBV,EAASje,EAAKie,QAAUje,EAAKc,QAAQ0J,KAAK,kBAC1C8L,EAAa/W,EAAWqf,YACxB08B,EAAcpsC,GAAYlP,EAAKiL,SAC/BswC,EAAgBrsC,GAAY0B,GAAc5Q,EAAKiL,UAC/Ci8B,EAAY/nC,EAAQga,WAAajK,GAAY2B,GAAiB7Q,EAAKiL,UAAYqwC,EAC/ErwC,GAAWjL,EAAK+gB,eAAiB,CAAC,GAAG9V,QAAUjL,EAAK46C,aAAa1T,GAAaA,EAC9EsU,EAAyC9lD,EAAK2X,GAAekuC,IAAgB,SAASjwC,EAAQvF,GAAS,OAAOuF,EAAOmkB,2BAAuC,IAAV1pB,CAAa,IAC/J01C,EAA4C/lD,EAAK2X,GAAepC,IAAU,SAASK,GAAU,OAAOA,EAAOmkB,yBAA2B,IAE1I,GAAItwB,EAAQga,YAAcoiC,EAAc5wC,OAAQ,CAC5C,GAAIxL,EAAQ8a,aAAe9a,EAAQ+a,eAC/B,MAAM,IAAIzM,MAAM,gEAGpBzN,EAAKia,YAAcja,EAAKs5C,MAAMn6C,EAAQ8a,YAAahP,GAAS,GAAO,GACnEjL,EAAKka,eAAiBla,EAAKs5C,MAAMn6C,EAAQ+a,gBAAkB/a,EAAQ8a,YAAahP,GAAS,GAAM,GAE/FjL,EAAK0d,kBAAoB1d,EAAKs5C,MAAMn6C,EAAQ8a,YAAashC,GACzDv7C,EAAK2d,qBAAuB3d,EAAKs5C,MAAMn6C,EAAQ+a,gBAAkB/a,EAAQ8a,YAAashC,GAAe,EACzG,MACIv7C,EAAKia,YAAcja,EAAKs5C,MAAMn6C,EAAQ8a,YAAahP,GACnDjL,EAAKka,eAAiBla,EAAKs5C,MAAMn6C,EAAQ+a,gBAAkB/a,EAAQ8a,YAAahP,GAAS,GAGzFjL,EAAKwgB,gBACLxgB,EAAKua,eAAiBva,EAAK07C,YAAYv8C,EAAQob,gBAAkB,KAAO,OAGvEva,EAAK4Y,SAAWziB,EAAcmgB,KAAkBngB,EAAcmgB,KAAgB2H,EAAOtT,QACtFjV,EAAK4lD,GAAa,SAAShwC,GAAU,OAAOA,EAAOsS,cAAgB,IAAGjT,UAEtE3K,EAAK4d,eAAiB5d,EAAK27C,YAAYL,EAAahlC,EAAY,iBAAkB,kCAGlFnI,GAAUzY,EAAK4lD,GAAa,SAAShwC,GAAU,OAAOA,EAAOuS,mBAAqB,IAAGlT,SACrF2L,EAAaniB,EAAEsB,IAAI0Y,GAAQ,SAASytC,GAAK,OAAOA,EAAEtlC,UAAY,IAE9DtW,EAAK6d,oBAAsB7d,EAAK27C,YAAY1wC,EAASqL,EAAY,sBAAuB,6BAA8BilC,EAAc5wC,QAEhIxL,EAAQga,YAAcoiC,EAAc5wC,SACpC3K,EAAK8d,0BAA4B9d,EAAK27C,YAAYJ,EAAejlC,EAAY,sBAAuB,gCAIxGnI,IAAWqtC,EAAuC7wC,QAAU8wC,EAA0C9wC,SACtG2L,EAAaniB,EAAEsB,IAAI0Y,GAAQ,SAASytC,GAAK,OAAOA,EAAEtlC,UAAY,IAE9DtW,EAAKyvB,0BAA4BzvB,EAAK67C,iBAAiBxuC,GAAepC,GAAUqL,EAAY,4BAA6B,+CAAgDilC,EAAc5wC,OAAQ8wC,GAE3Lt8C,EAAQga,YAAcoiC,EAAc5wC,SACpC3K,EAAK87C,gCAAkC97C,EAAK67C,iBAAiBxuC,GAAekuC,GAAgBjlC,EAAY,4BAA6B,+CAAgD,EAAGklC,MAG5Lx7C,EAAKyvB,0BAA4B,KACjCzvB,EAAK87C,gCAAkC,MAGvC97C,EAAKb,QAAQgb,YACbna,EAAK+d,kBAAoB/d,EAAK+7C,iBAEtC,EAEAA,eAAgB,WACZ,IAMI/mB,EAEArS,EACAoS,EATAj0B,EAAU,6BAEVk7C,EAAgC18C,KAAKH,QAAQga,aAAe7Z,KAAKwB,QAAQ,GAAGqM,MAAMvJ,OAAU,0CAA4C,GACxI8wB,EAAQ,CAAEC,QAAS,CAAC,EAAGjsB,MAAO,GAC9BksB,EAAWzgC,EAAEqB,OAAO,CAAC,EAAGlB,EAAMugC,SAAUv1B,KAAKH,QAAQ21B,kBACzCF,EAAS8kB,UAKzB,IAAIuC,EASJ,GAAa,cADbt5B,SALIqS,EADA11B,KAAKH,QAAQgb,UAAU6a,SACZ11B,KAAKH,QAAQgb,UAAU6a,SAEvB1gC,EAAMue,OAdC,sDAcuBvT,KAAKH,QAAQwb,SAASR,UAAW6hC,KAIrD,CACrB,IAAIE,EAAwBxnB,EAAMC,QAAQ,OAASD,EAAMhsB,OAASssB,EAClEN,EAAMhsB,QACNuzC,EAAkBvnD,GAASJ,EAAMue,OAAO/R,EAAS1H,GAAgB8iD,EAAsBxnD,GAE3F,KAAoB,WAATiuB,IACPs5B,EAAiB38C,KAAKH,QAAQgb,UAAU6a,SACpC1gC,EAAMue,OAAO/R,EAAS1H,GAAgB47B,GACpC,IAAM1gC,EAAMue,OAAO/R,EAAS1H,GAAgB47B,IAStD,OANAD,EAAOzgC,EAAM0gC,SAASinB,EAAgBrnB,GAElCF,EAAMhsB,MAAQ,IACdqsB,EAAOA,EAAK50B,KAAKu0B,EAAMC,UAGpBI,CACX,EAEA4mB,YAAa,SAAS1wC,EAASqL,EAAY6lC,EAAcC,EAAU5C,GAC/D,IAII5xC,EACA+C,EACAqqB,EACArS,EAMArX,EAbAtL,EAAOV,KACPs1B,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SAAU70B,EAAKb,QAAQ21B,kBACnD4kB,EAAY9kB,EAAS8kB,UAMrB/kB,EAAU,CAAC,EACXjsB,EAAQ,EACR2zC,EAAQ,CAAC,EACTluC,EAASnO,EAAK6Y,UACdyjC,EAAYt8C,EAAKT,WAAWg9C,iBAAiBjmC,GAGjD,IAsCI2lC,EAAiB3nD,EAAM0gC,UAtCGtgC,IAC1B,IAAImT,EAAO,cAAgBu0C,EAAW,KAUtC,IARIjuC,EAAS,IAAMqrC,IACf3xC,GAAQY,GAAW0F,IAGnBnO,EAAKwgB,gBACL3Y,GAAQ,uDAGPD,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,IACjD0D,EAASL,EAAQrD,GACjBotB,EAAW1pB,EAAO6wC,GAClBx5B,SAAcqS,EAEdntB,GAAQgI,GAAsB,MAAQjH,GAAoB0C,EAAOK,kBAAoB,KAEjFqpB,GACIrS,IAASrnB,KACT+gD,EAAQC,EAAUhxC,EAAOE,OAAShW,EAAO,CAAC,EAAGo/B,EAAU,CAAE8kB,UAAWA,EAAY,KAAOpuC,EAAOE,MAAQ,OAAU,CAAC,EACjHwpB,EAAW1gC,EAAM0gC,SAASA,EAAUqnB,IAGxC1nB,EAAQ,OAASjsB,GAASssB,EAC1BntB,GAAQmtB,EAAStgC,GACjBgU,KAEAb,GAAQ,SAGZA,GAAQ,QAIZ,OADAA,GAAQ,QACDA,CAAI,GAG6C+sB,GAE5D,OAAIlsB,EAAQ,EACDuzC,EAAe97C,KAAKw0B,GAGxBsnB,CACX,EAEAJ,iBAAkB,SAAS5wC,EAASqL,EAAY6lC,EAAcC,EAAU5C,EAAgBhqB,GACpF,IAII5nB,EACA+C,EACAqqB,EACArS,EAKArX,EAEA87B,EAdApnC,EAAOV,KACPs1B,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SAAU70B,EAAKb,QAAQ21B,kBACnD4kB,EAAY9kB,EAAS8kB,UACrB7xC,EAAO,GAKP8sB,EAAU,CAAC,EACXjsB,EAAQ,EACR2zC,EAAQ,CAAC,EACTC,EAAYt8C,EAAKT,WAAWg9C,iBAAiBjmC,GAE7CkmC,EAAsBhtB,EAAiC7kB,OAAS9U,EAAQ25B,EAAiC,GAAIvkB,IAAY,EAG7H,KAAIuxC,EAAsB,GAA1B,CAsEA,OAFA30C,EAAOvT,EAAM0gC,UAjEetgC,IACxB,IAAI+nD,EAAa,cAAgBL,EAAW,KAE5C,IAAK5C,EACD,IAAK,IAAIjsC,EAAI,EAAGA,EAAI7Y,EAAK+T,WAAY8E,IACjCkvC,GAAc,kDAQtB,GAJIz8C,EAAKwgB,gBACLi8B,GAAc,uDAGdD,EA5sUM,GA4sUmChtB,EAAiC7kB,QAAU,IAAM6uC,EAE1F,OADAiD,GAAejD,EAA0D,GAAzCkD,GAAiBzxC,EAAQN,OAAzB+xC,CAAiChoD,GAarE,IARI8nD,EAltUM,GAmtUNA,EAAuBhD,EAAqB,EAAJ,EACxCiD,GAAejD,EAA+D,GAA9CkD,GAAiBF,EAAjBE,CAAsChoD,IAGtE+nD,GAAejD,EA6uFhC,SAAuCgD,GACtC,MAAO,mCAAqCA,EAArC,sCAER,CAhvF+FG,CAA8BH,GAA5EE,GAAiBF,EAAjBE,CAAsChoD,GAGrEkT,EAAM40C,EAAqB7xC,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,IACnE0D,EAASL,EAAQrD,GACjBotB,EAAW1pB,EAAO6wC,GAClBx5B,SAAcqS,EAEV1pB,EAAO6G,SACPi1B,EAAkC97B,EAAO87B,gCAAkC,MAGvEA,EAAiC97B,EAAO87B,+BAAiC,gCAAkC9yC,EAAMwX,QAGrH2wC,GAAc,yBAA2B7iD,GAAoB,IAAMwtC,EAAiC,aAAe97B,EAAOq6B,aAAe,IAAM,MAE/I8W,GAAc,0BAGdznB,GACIrS,IAASrnB,KACT+gD,EAAQC,EAAUhxC,EAAOE,OAAShW,EAAO,CAAC,EAAGo/B,EAAU,CAAE8kB,UAAWA,EAAY,KAAOpuC,EAAOE,MAAQ,OAAU,CAAC,EACjHwpB,EAAW1gC,EAAM0gC,SAASA,EAAUqnB,IAGxC1nB,EAAQ,OAASjsB,GAASssB,EAC1BynB,GAAc9nB,EAAQ,OAASjsB,GAAOhU,GACtCgU,KAEA+zC,GAAc,SAGlBA,GAAc,QAKlB,OAFAA,GAAc,OAEG,GAGuB7nB,GAExClsB,EAAQ,EACDb,EAAK1H,KAAKw0B,GAGd9sB,CAxEP,CAyEJ,EAEA6zC,YAAa,SAAS1mB,GAClB,IAAIh1B,EAAOV,KACPs1B,EAAWp/B,EAAO,CAAC,EAAGlB,EAAMugC,SAAU70B,EAAKb,QAAQ21B,kBAEnD8nB,GADYhoB,EAAS8kB,UACK,CAAC,GAC3BmD,EAAwB,EACxB1uC,EAASnO,EAAK6Y,UACdyyB,EAAUj+B,GAAe6B,GAAYlP,EAAKiL,UAAUN,OACpDgY,SAAcqS,EAElB,IAmBIinB,EAAiB3nD,EAAM0gC,UAnBGtgC,IAC1B,IAAImT,EAAO,mDAeX,OAdIsG,EAAS,IACTtG,GAAQY,GAAW0F,IAGvBtG,GAAQ,oHAAoHyjC,EAAU,aAAaA,KAAa,MAC5J3oB,IAASrnB,IACTshD,EAAwB,OAASC,GAAyB7nB,EAC1DntB,GAAQmtB,EAAStgC,GACjBmoD,KAEAh1C,GAAQvT,EAAM0gC,SAASA,EAAUJ,EAAzBtgC,CAAmCI,GAG/CmT,GAAQ,aACDA,CAAI,GAG6C+sB,GAE5D,OAAIioB,EAAwB,EACjBZ,EAAe97C,KAAKy8C,GAGxBX,CACX,EAEAz7B,YAAa,WAGT,OAAuC,OAF5BlhB,KAECH,QAAQob,iBAFTjb,KAE0CyX,QAAQtf,IAAe,IAAIkT,MACpF,EACA0hB,cAAe,WACX,IAAI3S,EAAapa,KAAKH,QAAQua,WAC1BojC,EAAepjC,UACJA,EAAW0b,MAAQ75B,KACO,GAAjCme,EAAW0b,KAAK/jB,QAAQnU,IAC5B+N,EAAU3L,KAAK2L,QACf8xC,EAA0B5oD,EAAEuB,KAAKuV,GAAS,SAAS0a,GACnD,OAA0B,IAAnBA,EAAIjM,UACf,IAMA,OAJIzO,EAAQN,QAAUoyC,EAAwBpyC,QAAUM,EAAQN,SAC5DmyC,GAAe,GAGZA,CACX,EAEAzkC,SAAU,WACN,IAAIrY,EAAOV,KAEX,GAAIU,EAAKb,QAAQga,YAAcnZ,EAAKwgB,eAAiB5P,GAAc5Q,EAAKiL,SAASN,OAC7E,MAAM,IAAI8C,MAAM,mEAGpBzN,EAAKwU,MAAM1S,GAAGnH,GAAQvD,EAAI,qBAAuBF,EAAkB,uBAAyBD,GAAgB,SAASsL,GACjH,IAAIuiB,EAAS3wB,EAAEmL,MAIf,OAFAU,EAAKg9C,eAAel4B,GACpBviB,EAAES,kBACK,CACX,GACJ,EAEAg6C,eAAgB,SAASl4B,EAAQm4B,GAC7B,IAKAC,EAEAxoD,EA0nFe4X,EAjoFXtM,EAAOV,KACXgQ,EAAOwV,EAAOrR,QAAQ,uBACtB0pC,EAAYr4B,EAAOzP,GAAGne,GACtBkmD,EAAYt4B,EAAOrR,QAAQ,mBAC3B4pC,EAAiBD,EAAUzmD,KAAKiG,IAEhC2d,EAAiBva,EAAKua,eAEtBpF,EAAanV,EAAKwgB,cAClB88B,EAAgBH,EAAYlhD,GAAWC,GACvCqhD,IAAiBJ,EAEZA,EAGD7oD,EAAME,GAAG4J,KAAK0mB,EAAQ,CAAE1mB,KAAM,mBAF9B9J,EAAME,GAAG4J,KAAK0mB,EAAQ,CAAE1mB,KAAM,cAAaE,GAAQ,OAAS,WAKhEwmB,EAAOnuB,KAAK4F,GAAY+gD,GAExBhuC,EAAK3Y,KAAKkG,GAAe0gD,GAEzBL,EAAYE,EAAU/oC,OAElBc,IAAe+nC,EAAU9tC,SAAS,kBAClC1a,EAAOsL,EAAKouB,SAASgvB,GAErBF,EAAY/oD,EAAEomB,EAAe7lB,IACxBogB,SAASsoC,EAAUhuC,SAAS,SAAW,QAAU,IACjDZ,YAAY4uC,IAEbC,GAAqC,IAAnBA,IAClBH,EAAUvmD,KAAKiG,GAAeilB,OAAOw7B,GAAkB,GAG3Dr9C,EAAK4f,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAU6yC,EAAUr9B,MACpBnrB,KAAM,CAAE,CAAE05B,SAAU15B,IAE5B,IAEAsL,EAAK0E,QAAQjN,EAAY,CAAE2lD,UAAWA,EAAWF,UAAWA,EAAWxoD,KAAMA,EAAM8oD,WAAYN,EAAU1yC,KAAK,qBAGlHxK,EAAK0E,QAAQy4C,EAAY/kD,EAAeC,GAAgB,CAAE+kD,UAAWA,EAAWF,UAAWA,IAEvFD,GAklFW3wC,EAjlFU6wC,EAklFxBhpD,EAllFa+oD,GAklFN,GAEL/vC,MAAMC,QADVd,EACoB,GAEArP,IAplFfigD,EAAUO,OAAON,EAEzB,EAEA/uB,SAAU,SAAS5O,GAEf,KADAA,EAAKrrB,EAAEqrB,GAAI,IAEP,OAAO,KAGX,IAGI4C,EAAGs7B,EAHHnvC,EAAOjP,KAAKiV,MAAM5S,WAClBg8C,EAAe,6CACf/1C,EAAM4X,EAAGo+B,gBAKb,IAFAF,EAAa91C,EAERwa,EAAI,EAAGA,EAAIxa,EAAKwa,IACbu7B,EAAa/+C,KAAK2P,EAAK6T,GAAGtkB,YAC1B4/C,IAIR,OAAOp+C,KAAKof,MAAMg/B,EACtB,EAEAxO,UAAW,SAAS1vB,EAAIy9B,GACpB,IAAIn4B,EAAS3wB,EAAEqrB,GAAIhV,KAAK,QAAUtT,GAE9B4tB,EAAOna,QACPrL,KAAK09C,eAAel4B,EAAQm4B,EAEpC,EAEApO,YAAa,SAASrvB,EAAIy9B,GACtB,IAAIn4B,EAAS3wB,EAAEqrB,GAAIhV,KAAK,QAAUvT,GAE9B6tB,EAAOna,QACPrL,KAAK09C,eAAel4B,EAAQm4B,EAEpC,EAEAY,mBAAoB,SAAS5yC,EAAS0D,GAClC,IACI/G,EACAmY,EACAhiB,EAEA4M,EACAiI,EAOApH,EAi2EoBF,EA92EpBtL,EAAOV,KAIPuI,EAAO,GAGPyS,EAAata,EAAKb,QAAQmb,WAC1BX,EAAW3Z,EAAKb,QAAQwa,SACxBD,EAAa1Z,EAAKi3C,iBAClBt8B,EAAW3a,EAAKb,QAAQwb,SACxB1M,EAAQiB,GAAYlP,EAAKiL,SACzBkD,EAASnO,EAAKT,WAAWof,QAG7B,IAAK/W,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,IAAO,CACxDmY,EAAK9U,EAAQrD,GAAK0D,QAAUL,EAAQrD,GACpC7J,EAAOiC,EAAKs6C,gBAAgBv6B,GAC5BnN,EAAQmN,EAAGnN,MACXpH,EAAQ,GAER,IAAIzF,EAAQlQ,EAAQkqB,EAAI9R,GACpB6vC,EAAY,GAEZ/9B,EAAGvG,YACHskC,GAAa,kBAAoBl1C,GAAoBmX,EAAGnU,kBAEpD+C,IAAY1D,EAAQrD,GAAKmM,UACzB+pC,GAAa,aAAenvC,EAAU,KAGtC5I,GAAS,IACT+3C,GAAaxpD,EAAMqC,KAAK,SAAW,KAAOoP,EAAQ,KAGtD+3C,GAAa,KADb//C,EAAOgiB,EAAGw6B,eAAiBx8C,EAAOzJ,EAAM0gC,SAAS92B,GAAf5J,CAAuC,CAAE2J,KAAM3J,EAAMygB,iBAAiB,cAAe,OAAQ/U,EAAKb,QAAQlB,SAClH,SACnB8hB,EAAG0K,WACVqzB,GAAa,+CAAiDl1C,GAAoBmX,EAAGnU,kBAEjF+C,IAAY1D,EAAQrD,GAAKmM,UACzB+pC,GAAa,aAAenvC,EAAU,KAGtC5I,GAAS,IACT+3C,GAAaxpD,EAAMqC,KAAK,SAAW,KAAOoP,EAAQ,KAGtD+3C,GAAa,KADb//C,EAAOgiB,EAAGw6B,eAAiBx8C,EAAO,IACR,SACnBgiB,EAAGnV,SACVkzC,GAAa,kBAAoBl1C,GAAoBmX,EAAGnU,kBAEpD+C,IAAY1D,EAAQrD,GAAKmM,UACzB+pC,GAAa,aAAenvC,EAAU,KAGtC5I,GAAS,IACT+3C,GAAaxpD,EAAMqC,KAAK,SAAW,KAAOoP,EAAQ,KAGtD+3C,GAAa,IAAM//C,EAAO,UAEtBgiB,EAAGvU,QACHA,EAAQlX,EAAMqC,KAAK,SAAW,KAAOopB,EAAGvU,MAAQ,MAGpDsyC,GAAa,mBAAqBtyC,EAC7B8O,GAAcyF,EAAGvU,QAAqB,IAAZuU,EAAG6O,KAC9BkvB,GAAa,wBACNpkC,IAAgC,IAAlBqG,EAAGrG,aAAyBqG,EAAGnV,UACpDkzC,GAAa,2BAGbnvC,IAAY1D,EAAQrD,GAAKmM,UACzB+pC,GAAa,aAAenvC,EAAU,KAGtC1D,EAAQrD,GAAKmM,QAAU,GACvB+pC,GAAa,aAAe7yC,EAAQrD,GAAKmM,QAAUhD,GAAuBgP,EAAG9U,UAAY,KACzF6yC,GAAaxpD,EAAMqC,KAAK,WAAa,KAAOsU,EAAQrD,GAAKmM,QAAU,KACnC,IAAzB9I,EAAQrD,GAAKmM,UACpB+pC,GAAaxpD,EAAMqC,KAAK,WAAa,KAAOsU,EAAQrD,GAAKmM,QAAU,KAGnEnB,IACAA,EAAQA,IAAU5S,EAAKb,QAAQ6a,aAAe9jB,GAAW0c,GAAO,GAAQA,GACxEkrC,GAAaxpD,EAAMqC,KAAK,SAAW,KAAOic,EAAQ,MAGlDmN,EAAG1G,YAAcjlB,IACjB0pD,GAAaxpD,EAAMqC,KAAK,aAAe,KAAOopB,EAAG1G,UAAY,MAqxEjD/N,EAlxEYyU,GAAN/f,EAmxEvBb,QAAQka,YAAc/N,EAAO+N,WAAa/N,EAAO+N,YAAcjlB,GAnxEzB2rB,EAAGnU,kBAAqBmU,EAAGnU,iBAAiBgH,QAC7EkrC,GAAa,UACbA,GAAaC,GAAY5vC,EAAQ4R,EAAGvU,OAASmP,EAASM,cAAgBN,EAASK,YAC/E8iC,GAAa,MAGb/9B,EAAGzJ,YAAcyJ,EAAGzJ,WAAW3L,SAC/BmzC,GAAaxpD,EAAMqC,KAAK,cAAgB,KAAOopB,EAAGzJ,WAAa,KAG/DvQ,GAAS,IACT+3C,GAAaxpD,EAAMqC,KAAK,SAAW,KAAOoP,EAAQ,KAGtD+3C,GAAal1C,GAAoBmX,EAAGnU,kBAEhC+N,IACA5b,EAAOzJ,EAAM0gC,SAAS32B,GAAf/J,CAA+B,CAAEyJ,KAAMA,KAGlD+/C,GAAa,IAAM//C,EAAO,SAE9B8J,GAAQ1T,EAAE2pD,GAAWhpC,SAAS,cAAc,GAAGkpC,SACnD,CACA,OAAOn2C,CACX,EAEAo2C,2BAA4B,WACxB,IACIr2C,EAGA+C,EAGAvE,EACA2N,EACAmqC,EATAjzC,EAAU3L,KAAK2L,QAEfmK,EAAW9V,KAAKkV,MAAMhK,KAAK,YAC3B0G,EAAOkE,EAAS5K,KAAKzT,GAErBwsC,EAAapvC,IACbgqD,EAAkB,EAIlBC,EAAY,EAEhB,IAAKx2C,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,IACjD,GAAIqD,EAAQrD,GAAKwD,OAEb,GAAIK,GAAUR,EAAQrD,IAAO,CAQzB,IAPAmM,EAAU,EAEN9I,EAAQrD,GAAKqD,UACb8I,EAAU7E,GAAYjE,EAAQrD,GAAKqD,SAASN,OAASoG,GAAuB9F,EAAQrD,GAAKqD,UAG7F8I,EAAUA,GAAW,EAChBmqC,EAAU,EAAGA,EAAUnqC,EAASmqC,IACjC3a,EAAaA,EAAWxiC,IAAImQ,EAAK9G,GAAGxC,EAAMw2C,EAAYF,EAAUC,IAEpEC,GAAarqC,EAAU,CAC3B,MACIoqC,IAKZ/3C,EAAYjS,EAAE,mJAEdihB,EAASipC,SACTj4C,EAAUoE,KAAK,YAAY8K,OAAOiuB,GAClCnuB,EAAS28B,aAAazyC,KAAKkV,MAAMhK,KAAK,UAEtClL,KAAKgL,cAAgBlE,EAAU2rC,aAAazyC,KAAKoC,SACjDpC,KAAK4e,YAAc9X,EAAUzE,SAAS,SACtCrC,KAAK4e,YAAYpJ,SAASxgB,EAAMygB,iBAAiB,WAAY,OAAQzV,KAAKH,QAAQlB,MACtF,EAEAw3C,0BAA2B,WACvB,IAKI7tC,EAAK+C,EALL3K,EAAOV,KACP2e,EAASje,EAAKie,OACdvP,EAAQuP,EAAOzT,KAAK,yBACpB0G,EAAO+M,EAAOzT,KAAK,0CACnB3C,EAAO1T,EAAE,wMAETga,EAASnO,EAAK6Y,UACdylC,EAAcnqD,IAAKovC,EAAapvC,IAKpC,IAHA0T,EAAK2C,KAAK,SAASsK,SAASxgB,EAAMygB,iBAAiB,WAAY,OAAQzV,KAAKH,QAAQlB,OAEpFqgD,EAAcA,EAAYv9C,IAAI2N,EAAMnE,OAAO,kBACtC3C,EAAM,EAAG+C,EAASuE,GAAY0B,GAAc5Q,EAAKiL,UAAUN,OAAQ/C,EAAM+C,EAAQ/C,IAClF02C,EAAcA,EAAYv9C,IAAI2N,EAAMtE,GAAGxC,EAAMuG,IAIjD,IADAo1B,EAAaA,EAAWxiC,IAAImQ,EAAK3G,OAAO,iBACnC3C,EAAM,EAAG+C,EAAS0C,GAAe6B,GAAYmD,GAAqBrS,EAAKiL,WAAWN,OAAQ/C,EAAM+C,EAAQ/C,IACzG27B,EAAaA,EAAWxiC,IAAImQ,EAAK9G,GAAGxC,EAAMuG,IAG9CmwC,EAAYr7C,SAAS4E,EAAK2C,KAAKnO,KAC/BknC,EAAWtgC,SAAS4E,EAAK2C,KAAK,aAC9BxK,EAAKme,aAAetW,EAAKk1B,UAAU9e,EACvC,EAEAsgC,0BAA2B,SAASn4C,GAChC,IAEIwB,EACAC,EACA8C,EACAyK,EACAoK,EAEAhL,EACAwR,EACAw4B,EAOAlvC,EAjBAtP,EAAOV,KACP2L,EAAU3L,KAAK2L,QAUfsD,EAAO,GACP4vC,EAAkB,EAClBjtC,EAAO/c,IACPsqD,EAAez+C,EAAKqsB,gBACpBqyB,EAAmB,EACnBhZ,EAAcvxC,IAEdwqD,EAAmB,EACnBjwC,EAAQva,IAEZihB,EAAWpV,EAAK+O,MAAM0T,OAAOjY,KAAKzT,GAClCivB,EAAShmB,EAAK+O,MAAMvE,KAAKnO,IAAIuF,QAAQ4I,KAAK,kDAC1Cg0C,EAAkBx+C,EAAK+O,MAAMvE,KAAK,iBAAiBA,KAAK,2CAExD,IAAI4zC,EAAY,EAChB,IAAKx2C,EAAM,EAAG+C,EAASM,EAAQN,OAAQ/C,EAAM+C,EAAQ/C,IAAO,CACxD,GAAIqD,EAAQrD,GAAKwD,OAAQ,CAIrB,GAHAkE,EAAO0W,EAAO5b,GAAGxC,GACjB+2C,EAAmBzvC,GAAYjE,EAAQrD,GAAKqD,SAAW,IAAIN,OAEvDc,GAAUR,EAAQrD,IAAO,CACzB,IAAImM,EAAU,KAEV9I,EAAQrD,GAAKqD,UACb8I,EAAU4qC,EAAmB5tC,GAAuB9F,EAAQrD,GAAKqD,UAGrE8I,EAAUA,GAAW,EACrB,IAAK,IAAImqC,EAAU,EAAGA,EAAUnqC,EAASmqC,IACrChtC,EAAOA,EAAKnQ,IAAIqU,EAAShL,GAAGxC,EAAMw2C,EAAYF,EAAUC,IAE5DC,GAAarqC,EAAU,CAC3B,CAEAtC,GAAoB,CAACxG,EAAQrD,IAAOsM,GAAkB5E,GAAOf,EAAM,EAAG,GAEtEowC,EAAmBA,GAAoB,EACvC,IAAK,IAAIv8B,EAAI,EAAGA,EAAIu8B,EAAkBv8B,IAClCsjB,EAAcA,EAAY3kC,IAAIy9C,EAAgBp0C,GAAGs0C,EAAmBt8B,IAExEs8B,GAAoBC,CACxB,CAEI1zC,EAAQrD,GAAKqD,UACbkzC,GAAmBptC,GAAuB9F,EAAQrD,GAAKqD,UAGtDQ,GAAUR,EAAQrD,KACnBu2C,GAER,CAEA,GAAI5vC,EAAK5D,OAAQ,CAYb,IAXA9C,EAAO,oJACPA,GAAQ,IAAIjS,MAAM2Y,EAAK5D,OAAS,GAAGhC,KAAK,kCAGxC6L,EAAQrgB,EAFR0T,IAAS42C,EAAe,6CAA+C,IAAM,2BAIvEj0C,KAAK,SAASsK,SAASxgB,EAAMygB,iBAAiB,WAAY,OAAQ/U,EAAKb,QAAQlB,QACrFmX,EAAWZ,EAAMhK,KAAK,aACb8K,OAAOtV,EAAK+O,MAAM0T,OAAOjY,KAAK,mBAAmBzJ,IAAImQ,IAE9DsO,EAAKhL,EAAMhK,KAAK,+BACX5C,EAAM,EAAG+C,EAAS4D,EAAK5D,OAAQ/C,EAAM+C,EAAQ/C,IAC9C8G,EAAQf,GAASY,EAAK3G,IACtB4X,EAAGpV,GAAGxC,GAAK0N,OAAOtV,EAAK+O,MAAMvE,KAAKnO,IAAI+N,GAAGxC,GAAK4C,KAAK,iBAAiBzJ,IAAI2N,IAG5E,IAAIhG,EAAQ4I,GAAgBhS,KAAKyP,OAWjC,OAVIR,EAAK5D,OAASjC,GAnoT9B,SAA4BtC,EAAWsC,GAInC,IAHA,IAEIiG,EAFAD,EAAQtI,EAAUoE,KAAK,iEAGlB5C,EAAM,EAAGA,EAAM8G,EAAM/D,OAAQ/C,KAClC+G,EAAUD,EAAM9G,GAAK+G,SACP,IACVD,EAAM9G,GAAK+G,QAAWA,EAAUjG,GAAU,EAGtD,CA0nTgBk2C,CAAmBpqC,EAAO9L,EAAQ6F,EAAK5D,QAGhC6J,EAAMhK,KAAK,iBACb8K,OAAOtV,EAAK+O,MAAMvE,KAAK,+BAA+BzJ,IAAI2kC,IAEnEpmC,KAAK4d,aAAe1I,EAAMuoB,UAAU32B,GACpC9G,KAAKyP,MAAMvE,KAAK,iBAAiBgH,UAE1B,CACX,CACA,OAAO,CACX,EAEA2L,wBAAyB,WACrB,IAAI9S,EAAW/K,KAAK4d,aACfnc,IAAIzB,KAAKgL,eACTvJ,IAAIzB,KAAK6e,cAEd7pB,EAAMuM,QAAQwJ,GACdA,EAASpJ,IAAI7J,GAAIoa,SAEjBlS,KAAK4d,aAAe5d,KAAKgL,cAAgBhL,KAAK6e,aAAe,KAC7D7e,KAAKka,WAAa,IACtB,EAEA7B,OAAQ,WACJ,IAII/P,EAKA4X,EAiHAq/B,EA1HA7+C,EAAOV,KACP2L,EAAUjL,EAAKiL,QACfkK,EAAanV,EAAKwgB,eAAiBvV,EAAQN,OAC3C8zC,EAAez+C,EAAKqsB,gBAEpBxkB,EAAO,GACPkH,EAAQ/O,EAAKwU,MAAMhK,KAAK,UACxBs0C,EAAW9+C,EAAKd,QAAQsL,KAAK,SAAS5I,QAAQ+I,OAAS,EACvDo0C,EAAgB/+C,EAAKb,QAAQwb,SAASI,2BAmB1C,GAhBKhM,EAAMpE,SACPoE,EAAQ5a,EAAE,kDAAkD49C,aAAa/xC,EAAKuU,QAG9EvU,EAAKkd,cAAgBld,EAAK+O,QAC1ByQ,EAAKxf,EAAK+O,MAAMvE,KAAK,iCAAiC3C,KAAK,KACxD2J,SACHgO,EAAKrrB,IAEL6L,EAAKmd,2BAELqC,EADOs/B,EACF9+C,EAAKd,QAAQsL,KAAK,SAAS5I,QAAQ4I,KAAK,iCAExCxK,EAAKd,QAAQsL,KAAK,cAAc5I,QAGpC4d,EAAG7U,OAiBD,CACH,IAAK/C,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAAO,CACtD,IAAIqO,EAAcpgB,EAAQoV,EAAQrD,GAAMsH,GAAYjE,IAChDqE,EAAO2D,GAAcuM,EAAG3d,UAAU0I,OAAO,gDAAgDH,GAAG6L,GAC5FhL,EAAQrD,GAAK2D,QAAU0K,GAAe,IACzC3G,EAAK,GAAGnC,MAAMC,QAAUnQ,GAEf,CAEA+C,EAAKg/C,mBAAmBvsC,GAAaxH,GACjD,MAzBa,KADAuU,EAAKzQ,EAAMpN,WAAWC,SACd+I,OAAQ,CACb,IAAI4D,EAAO,CAAC,CAAEI,QAAS,EAAGD,MAAO,GAAI3I,MAAO,IAG5C,IAFA/F,EAAKi/C,gBAAgB1wC,EAAMtD,GAEtBrD,EAAM,EAAGA,EAAM2G,EAAK5D,OAAQ/C,IAC7BC,GAAQ,2BACJsN,IACAtN,GAAQ,uDAAyDk3C,EAAgB,SAErFl3C,GAAQ7H,EAAK69C,mBAAmBtvC,EAAK3G,GAAK8G,MAAOH,EAAK3G,GAAK+G,SAC3D9G,GAAQ,QAGZ2X,EAAKrrB,EAAE0T,EACV,CAaJ,GAAI42C,EAAc,CACd,IAAIS,EAAY/qD,EAAE,SAClB+qD,EAAUpqC,SAAS,6BACfK,GAAcqK,EAAGhV,KAAK,qBAAqBG,SAC3Cu0C,EAAU3pC,QAAQ,uDAGtB,IAAI4pC,GAAqBn/C,EAAK+O,OAASA,GAAOvE,KAAK,iBAC/C20C,EAAkBx0C,SAClBrW,EAAMuM,QAAQs+C,GACdA,EAAkB3tC,UAGtBzC,EAAMuG,OAAO4pC,EACjB,CAEK1/B,EAAG7d,WAAWgJ,OASRwK,IAAeqK,EAAGhV,KAAK,qBAAqB,IACnDgV,EAAGjK,QAAQ,wDAA0DwpC,GAAgC,UAAY,UATjHl3C,EAAO,GACHsN,IACAtN,GAAQ,mEAGZA,GAAQ7H,EAAK69C,mBAAmB5yC,GAEhCuU,EAAG3X,KAAKA,IAKZ2X,EAAGhV,KAAK,MAAMsK,SAAS,YAElB9U,EAAKb,QAAQga,YACdpK,EAAM+F,SAAS,iBAGnB0K,EAAGhV,KAAK,UAAUgH,SAASggB,MAAMuL,UAAUhuB,GAEvC/O,EAAK+O,OACL/O,EAAKyb,4BAGTnc,KAAKsgB,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAU0E,EAAMvE,KAAK,KAAO3T,GAASgpB,MAE7C,IAEAvgB,KAAKsgB,QAAQ,WAAW,WACpB,MAAO,CACHvV,SAAU0E,EAAMvE,KAAKxT,GAAa6oB,MAClCnrB,KAAMe,EAAIwV,GAAS,SAAS0a,GAAO,MAAO,CAAEra,OAAQqa,EAAO,IAEnE,IAEA3lB,EAAK+O,MAAQA,EAEb/O,EAAKs4C,YAELt4C,EAAKk3C,cAELl3C,EAAKw3C,aAELx3C,EAAK4xC,cAEL5xC,EAAK41C,cAGL,IAAIwJ,EAAmB9/C,KAAKH,QAAQga,YAAcvI,GAActR,KAAK2L,SAASN,OAE1Ey0C,IAEAP,EAAa7+C,EAAKu+C,0BAA0Bv+C,EAAK+O,MAAM0E,QAAQ,mBAE/DzT,EAAKi+C,6BAELj+C,EAAKsK,cAAcxI,GAAG,iBAAmB1K,EAAK,cAAgBA,EAAI4I,EAAK+B,aAAa5B,KAAKH,IAErF1L,EAAMO,QAAQqN,QACdlC,EAAK4c,yBAA2B,IAAItoB,EAAM6N,WAAWnC,EAAKsK,cAAe,CACrE5H,KAAM,SAASH,GACXvC,EAAK0B,QAAQiB,UAAU3C,EAAK0B,QAAQiB,aAAgBJ,EAAEK,EAAEC,OACxDN,EAAES,gBACN,KAIRhD,EAAK2vB,qBAGT3vB,EAAK4vB,cAEL5vB,EAAK6vB,yBAEL7vB,EAAKiwB,0BAELjwB,EAAK4mB,aAEL5mB,EAAKkqB,aAELlqB,EAAKuqB,eAELvqB,EAAK03C,cAAc13C,EAAK6Y,WAExB7Y,EAAK2mB,uBAEDy4B,IACIP,GACA7+C,EAAK0mB,0BAGT1mB,EAAKwmB,+BAGLxmB,EAAKqZ,WACLrZ,EAAKi+B,kBAEb,EAEAohB,qBAAsB,SAASp0C,EAASsD,GACpC,IAAIvI,EAAS7R,IAEb,GAAIoa,EAAK5D,QAAUM,EAAQ,GAAI,CAG3B,IAFA,IAAIK,EAASL,EAAQ,GAEdK,EAAOL,SAAWK,EAAOL,QAAQN,QACpCW,EAASA,EAAOL,QAAQ,GACxBsD,EAAOA,EAAKhE,OAAO,gBAGvBvE,EAASA,EAAOjF,IAAIwN,EACxB,CAEA,OAAOvI,CACX,EAEAiqB,wBAAyB,WACrB,IAAIjwB,EAAOV,KACP2L,EAAUjL,EAAKiL,SAAW,GAG9B,KAFiBjL,EAAKwgB,eAAiBvV,EAAQN,UAE3B3K,EAAK6Y,UAAW,CAChC,IAAI2G,EAAKxf,EAAK+O,MAAMvE,KAAK,sCACzBS,EAAU4F,GAAiB5F,GAE3B,IAAIsD,EAAOvO,EAAKq/C,qBAAqBp0C,EAASuU,GAE1Cxf,EAAKg+B,cACLxe,EAAKxf,EAAKkd,aAAa1S,KAAK,2CAC5BS,EAAU2F,GAAc5Q,EAAKiL,SAE7BsD,EAAOA,EAAKxN,IAAIf,EAAKq/C,qBAAqBp0C,EAASuU,KAGvDjR,EAAKuR,MAAK,WACN,IAAIpQ,EAAMvb,EAAEmL,MAAMkL,KAAK,MACvBkF,EAAI0P,YAAY,WAChB1P,EAAItF,GAAG,GAAG0K,SAAS,UACvB,GACJ,CACJ,EAEAmqC,gBAAiB,SAAS1wC,EAAMtD,EAAS+I,EAAYsrC,GAMjD,IALA,IAAIn5C,EAAMm5C,GAAa/wC,EAAKA,EAAK5D,OAAS,GAEtC40C,EAAWhxC,EAAKpI,EAAIJ,MAAQ,GAC5By5C,EAAe,EAEV53C,EAAM,EAAGA,EAAMqD,EAAQN,OAAQ/C,IAAO,CAC3C,IAAI0H,EAAO,CAAEhE,OAAQL,EAAQrD,GAAMmM,QAAS,GAC5C5N,EAAIuI,MAAM5Y,KAAKwZ,GAEXrE,EAAQrD,GAAKqD,SAAWA,EAAQrD,GAAKqD,QAAQN,SACxC40C,IACDA,EAAW,CAAE5wC,QAAS,EAAGD,MAAO,GAAI3I,MAAOwI,EAAK5D,QAChD4D,EAAKzY,KAAKypD,IAEdjwC,EAAKyE,QAAU9I,EAAQrD,GAAKqD,QAAQN,OACpCrL,KAAK2/C,gBAAgB1wC,EAAMtD,EAAQrD,GAAKqD,QAASqE,EAAMiwC,GACvDC,GAAgBlwC,EAAKyE,QAAU,EAC/B5N,EAAIwI,QAAUJ,EAAK5D,OAASxE,EAAIJ,MAExC,CACIiO,IACAA,EAAWD,SAAWyrC,EAE9B,EAEAz9C,aAAc,SAASQ,GACnB,IAAIA,EAAEY,QAAN,CAIA,IAAIzB,EAAUpC,KAAKoC,QAEfpC,KAAKyhB,eAAiBzhB,KAAKyhB,cAAcxS,OACzC7M,EAAUpC,KAAKga,kBAAkBtY,mBAGrC,IAAI2B,EAAYjB,EAAQiB,YACpBE,EAAQvO,EAAM8O,YAAYb,GAE1BM,IACInB,EAAQ,GAAG4B,aAAe5B,EAAQ,GAAG2B,eACpC3B,EAAQ,GAAGiB,UAAYjB,EAAQ,GAAG4B,aAAe5B,EAAQ,GAAG2B,cAAgBR,EAAQ,GACrFnB,EAAQ,GAAGiB,UAAY,GAAKE,EAAQ,IACpCN,EAAES,iBAGNtB,EAAQiB,UAAUA,GAAcE,GAlBpC,CAoBJ,EAEAm7B,UAAW,WACP,OAA4B,MAArB1+B,KAAK4d,YAChB,EAEAuiC,kBAAmB,WACf,IAAIjrC,EAAQlV,KAAKyP,MAAMlN,SAASd,IAAIzB,KAAKkV,OAErClV,KAAK0+B,YACL9oB,GAAcV,EAAOlC,GAAmBF,GAAwB9S,KAAK2L,UAAW3L,KAAKkhB,cAAe,GAEpGtL,GAAcV,EAAOlC,GAAmBjF,GAAe/N,KAAK2L,UAAW3L,KAAKkhB,cAAe,EAEnG,EAEAsP,qBAAsB,WAClB,IAGIxkB,EAEAitC,EALAv4C,EAAOV,KACPoP,EAAQuE,GAAcjT,EAAK+O,OAC3B9D,EAAUiE,GAAYlP,EAAKiL,SAK/B,GAAKjL,EAAKb,QAAQwa,SAIlB,IAAK,IAAI/R,EAAM,EAAG+C,EAAS+D,EAAM/D,OAAQ/C,EAAM+C,EAAQ/C,KAG3B,KAFxB0D,EAASL,EAAQrD,IAEN+R,WAAuBrO,EAAOV,SAAWU,EAAOE,QAGvD+sC,EAFO7pC,EAAMtE,GAAGxC,GAEMlT,KAAK,uBAGvB6jD,EAAer4C,SAI/B,EAEA8+C,mBAAoB,SAAS/zC,GACzB,GAAKA,EAAQN,OAAb,CAMA,IAFA,IAES4C,EAAI,EAAGA,EAAItC,EAAQN,OAAQ4C,IAAK,CACrC,GAAItC,EAAQsC,GAAG3B,iBAHRtM,KAIWJ,QAAQsL,KAAK,QAAUS,EAAQsC,GAAG3B,iBAAiB/X,GAAK,MACnE8C,KAAK,UAAWsU,EAAQsC,GAAG3B,iBAAiBG,QAEvD,CAPWzM,KASN0/C,mBAAmBvsC,GAAaxH,GAXrC,CAYJ,EAEA2kB,YAAa,SAASpb,GAClBA,EAAQA,GAASlV,KAAKyP,MAAMlN,SAASd,IAAIzB,KAAKkV,OAE9ClV,KAAKq2C,YAAYnhC,EAAOlV,KAAK0+B,YACjC,EAEArO,kBAAmB,SAASnb,GACpBlV,KAAK0+B,aAGL9oB,GAFAV,EAAQA,GAASlV,KAAK4d,aAAa1S,KAAK,SAASzJ,IAAIzB,KAAK4e,aAErC5L,GAAmBD,GAAqB/S,KAAK2L,UAAW3L,KAAKkhB,cAAelhB,KAAKuZ,UAE9G,EAEA88B,YAAa,SAASnhC,EAAOpJ,GACrBA,EACA8J,GAAcV,EAAOlC,GAAmBF,GAAwB9S,KAAK2L,UAAW3L,KAAKkhB,cAAe,GAEpGtL,GAAcV,EAAOlC,GAAmBjF,GAAe/N,KAAK2L,UAAW3L,KAAKkhB,cAAelhB,KAAKuZ,UAExG,EAEA6mC,aAAc,SAASvqB,GACnB,GAAIA,GAAUA,EAAOwqB,OAAQ,CACzB,IACIn0C,EACAN,EAFAlL,EAAOV,KAQX,IAAKkM,KAJL2pB,EAASA,EAAOwqB,SAEhBz0C,IAAYlL,EAAKwU,MAAMhK,KAAK,YAAYG,OAAS,KAAO3K,EAAKT,aAAeS,EAAKT,WAAWsf,YAE9EsW,EACVn1B,EAAKiL,QAAQnV,KAAK,CAAE0V,MAAOA,EAAON,QAASA,EAASU,iBAAkB,CAAE/X,GAAIS,EAAMwX,UAGtF9L,EAAK2X,SAEL3X,EAAKiY,YACT,CACJ,EAEA2nC,oBAAqB,SAASz5C,EAAK0F,GAC/B,IAEIg0C,EADAC,EADgBxgD,KAAKuoB,kBACQhc,GASjC,OANIi0C,KACAD,EAAO1rD,EAAEgS,IACJ,GAAGgH,MAAMvJ,OAASk8C,EAAe,KACtC35C,EAAM05C,EAAK7V,KAAK,cAGb7jC,CACX,EAEA45C,UAAW,SAASrrD,EAAMsrD,GACtB,IAEIp4C,EAIA+C,EAAQxE,EANRnG,EAAOV,KACPuI,EAAO,GAEPoS,EAAc+lC,EAAU/lC,YACxBC,EAAiB8lC,EAAU9lC,eAC3B+lC,EAAgBjgD,EAAK6nB,kBAGzB,IAAKjgB,EAAM,EAAG+C,EAASjW,EAAKiW,OAAQ/C,EAAM+C,EAAQ/C,IAC1C5H,EAAKqyC,wBAA0B,EAC/BryC,EAAKqyC,2BAGDlsC,EADAyB,EAAM,EACAsS,EAAexlB,EAAKkT,IAEpBqS,EAAYvlB,EAAKkT,IAGvBq4C,IACA95C,EAAMnG,EAAK4/C,oBAAoBz5C,EAAKzR,EAAKkT,GAAKiE,MAGlDhE,GAAQ1B,GAEZnG,EAAK0e,MAAM5oB,KAAKpB,EAAKkT,IAGzB,OAAOC,CACX,EAEAq4C,WAAY,SAASvhC,EAAOwhC,EAAYC,GACpC,IACIC,EADO/gD,KACeghD,+BAAiC,CAAC,EACxDC,EAAa5hC,EAAMvI,MACnBE,EAAa9gB,EAAO,CAAC,EAAG6qD,EAAgB1hC,EAAMrI,YAC9CkqC,EAAahrD,EAAO,CAAC,EAAG,CACpBgW,MAAOmT,EAAMnT,MACb7B,MAAOgV,EAAMhV,MACbyM,MAAOmqC,EACPjqC,WAAYA,GACbqI,EAAMrI,WAAW8pC,EAAcA,EAAY50C,MAAQmT,EAAMnT,QAC5Di1C,EAAa,CAAC,EAElB,IAAKN,EACD,IAAK,IAAIvhC,KAAatI,EAClBmqC,EAAW7hC,GAAappB,EAAO,CAAC,EAAG8gB,EAAWsI,GAC1C,CAAED,MAAO,CAAEnT,MAAOmT,EAAMnT,MAAO7B,MAAOgV,EAAMhV,MAAOyM,MAAOmqC,KAItE,OAAO/qD,EAAO,CAAC,EAAGirD,EAAYD,EAClC,EAEAlrB,oBAAqB,SAASnvB,GAM1B,IALA,IACIuuC,EACAgM,EACA/1C,EAHOrL,KAGOC,WAAWqZ,OAAOjO,OAE3B4C,EAAI,EAAGA,EAAI5C,EAAQ4C,IAExBmnC,IADAvuC,EAAMA,EAAIsc,QACQ9rB,KAAK,yBACvB+pD,GAAkBv6C,EAAIxP,KAAK,wBAET,GAAd+9C,GAAqC,GAAlBgM,GACnBv6C,EAAIgF,MAIhB,EAEAw1C,cAAe,SAAShiC,EAAO2sB,EAAS33B,EAAOitC,EAAoBZ,EAAWa,EAAaC,EAAeC,GACtG,IAEIn5C,EACA+C,EAYAq2C,EAfAhhD,EAAOV,KACPuI,EAAO,GAGP+d,EAAiC,MAAtB5lB,EAAKsK,cAChBkB,EAAQmT,EAAMnT,MACdF,EAAS5V,EAAKwZ,GAAYlP,EAAKiL,UAAU,SAASK,GAAU,OAAOA,EAAOE,OAASA,CAAO,IAAG,IAAM,CAAE,EACrG40C,EAAc/yC,GAAerN,EAAKiL,SAAS,GAC3Cg2C,EAAwCb,EAAcA,EAAY3wB,0BAA4B,KAC9FuF,EAAW1pB,EAAO41C,oBAAsB51C,EAAO41C,oBAAsBD,EACrEljD,GAAQuN,EAAOsH,QAAU5S,EAAKb,QAAQ6a,aAAe9jB,GAAWoV,EAAOsH,OAAO,GAAQtH,EAAOsH,QAAUpH,GAAS,KAAOmK,GAAiBgJ,EAAMhV,MAAO2B,EAAOuH,OAAQvH,EAAOkH,OAAQlH,EAAOJ,SAC1Lq1C,EAAa5hC,EAAMwiC,cAAgBxiC,EAAMvI,MACzCjI,EAASnO,EAAK6Y,UACdgF,EAAsBmiC,EAAUniC,oBAChC4R,EAA4BuwB,EAAUvwB,0BAEtCpoB,EAAerH,EAAKT,WAAW0H,gBAC/Bm6C,GAAW/5C,GAAerH,EAAKT,WAAW8hD,aAAa1iC,EAAM9S,KAyBjE,GAvBI7L,EAAKb,QAAQ4a,UAAY4E,EAAMvI,OAASuI,EAAMvI,MAAM,IAAMuI,EAAMvI,MAAM,GAAGkrC,OAAS3iC,EAAMvI,MAAM,GAAGkrC,UACjGF,GAAW,IAGXpB,EAAUniC,qBAAuBmiC,EAAUvwB,2BAA6BnkB,EAAO41C,uBAC/EF,EAAYhhD,EAAKkgD,WAAWvhC,GAAO,IAAQrT,EAAO41C,sBAAuB7zC,GAAerN,EAAKiL,SAAS,GAAGwkB,4BAA4BpiB,GAAerN,EAAKiL,SAAS,KAElK+pB,IAAa6rB,IACb9iD,SAAci3B,IAAa15B,GAAW05B,EAASgsB,GAAa1sD,EAAM0gC,SAASA,EAAf1gC,CAAyB0sD,IAGpFhhD,EAAKqyC,wBASNuO,EAAmBtV,EAAS33B,EAAO5V,EAAMqjD,EAAUziC,EAAM9S,IAAKxE,GARzDsX,EAAM4iC,cAGP5iC,EAAM4iC,gBADC37B,IACem7B,EAFtBl5C,GAsuDhB,SAA0B4nB,EAA2BmxB,EAAoBtV,EAASkW,EAAiBR,EAAWrtC,EAAO5V,EAAMqjD,EAAUziC,EAAOtX,GACxI,IAAIQ,EAGAA,EADA4nB,EACOA,EAA0Bj6B,EAAO,CAAC,EAAGwrD,EAAW,CACnDv4C,WAAYkL,EACZ23B,QAASkW,EACTzjD,KAAMA,KAGH6iD,EAAmBtV,EAAS33B,EAAO5V,EAAMqjD,EAAUziC,EAAM9S,IAAKxE,GAGzE,OAAOQ,CACX,CApvDwB45C,CAAiBhyB,EAA2BmxB,EAAoBtV,EAASn9B,EAASwF,EAAOqtC,EAAWrtC,EAAO5V,EAAMqjD,EAAUziC,EAAOtX,GAU9I+5C,EACA,GAAIziC,EAAMxI,aACN,IAAKvO,EAAM,EAAG+C,EAAS41C,EAAW51C,OAAQ/C,EAAM+C,EAAQ/C,IACpDC,GAAQ7H,EAAK2gD,cAAcJ,EAAW34C,GAAMi5C,EAAcvV,EAAUA,EAAU,EAAG33B,EAAQ,EAAGitC,EAAoBZ,EAAWa,EAAaC,GAAiBl5C,IAAQ24C,EAAW51C,OAAS,EAAGo2C,QAG5Ll5C,GAAQ7H,EAAK+/C,UAAUQ,EAAYP,GAmB3C,OAfIniC,IAEIijC,EACKjrD,EAAQ8oB,EAAMhV,MAAO3J,EAAK0hD,iBAC3B1hD,EAAK0hD,eAAe5rD,KAAK6oB,EAAMhV,QAG/B3J,EAAK0hD,eAAe/2C,QAAU3K,EAAK0hD,eAAe,KAAO/iC,EAAMhV,OAC/D3J,EAAK0hD,eAAeC,QAEnB3hD,EAAKqyC,0BACNxqC,GAAQgW,EAAoBmjC,MAIjCn5C,CACX,EAEAi2B,cAAe,SAASnf,GACpB,IAAIhL,EAMA3E,EAEApH,EACA+C,EACA6U,EATAxf,EAAOV,KACPsiD,EAAkBjjC,EAGlBkjC,EAFYviD,KAAKH,QAAQka,UACFyoC,WACI,EAAI,EAE/BC,EAAe5tD,IAQnB,GAFAwf,GADAgL,EAAQxqB,EAAEwqB,IACInU,KAAK,iBAAiBG,OAEhCrL,KAAKC,WAAW0H,gBAAiB,CACjC,IAGI+6C,EAHAC,EAAWtjC,EAAMhoB,KAAK,kBACtBurD,EAAcliD,EAAKT,WAAW4iD,eAAeF,GAC7CG,EAAoBpiD,EAAKT,WAAW8iD,sBAAsB,CAACH,IAAc,GAU7E,OAPAliD,EAAKT,WAAW8hD,aAAaY,IAAY,EACzCD,EAA0BhiD,EAAKT,WAAW8iD,sBAAsB,CAACH,IAAc,GAC/EliD,EAAKT,WAAW+iD,oBAAsBF,EAAoBJ,EAC1DhiD,EAAK8yC,WAAU,QACf9yC,EAAKT,WAAWiI,MAAMxH,EAAKT,WAAWgjD,mBAAoBviD,EAAKT,WAAWsF,QAAQ,WAC9E7E,EAAK8yC,WAAU,EACnB,GAAG,gBAEP,CAEIxzC,KAAK0+B,cACArf,EAAMlL,QAAQnX,IAAK8S,SAAS,yBAI7B2yC,EAAeziD,KAAKiV,MAAM5S,SAAStF,IAAI+N,GAAGuU,EAAM5Y,SAASqpC,QAAQ/yC,KAHjE0lD,EAAepjC,EAAMywB,QAAQ/yC,IAC7BsiB,EAAQrf,KAAK4e,YAAY1T,KAAK,aAAaJ,GAAGuU,EAAM5Y,WAMxD4Y,EAAMnU,KAAKvT,GAAgB0T,QAC3BrW,EAAME,GAAG4J,KAAKugB,EAAMnU,KAAKvT,GAAiB,CAAEmH,KAAM,cAAaE,GAAQ,OAAS,WAGpFqgB,EAAMnU,KAAK,4BAA4B5I,QAAQjL,KAAKkG,IAAe,GAC9D2N,KAAK,KAAK7T,KAAK4F,GAAYL,IAIhC,IAAIsmD,EAAS,GAEb,IAAK56C,EAAM,EAAG+C,GAJdgU,EAAQA,EAAMywB,QAAQ/yC,KAIOsO,OAAQ/C,EAAM+C,IAEvCqE,GADAwQ,EAAKb,EAAMvU,GAAGxC,IACF4C,KAAK,iBAAiBG,OAE9B6U,EAAGpQ,SAASpV,IACZ6nD,IACOriC,EAAGpQ,SAAS,mBACnByyC,MAGA7yC,GAAU2E,GAAU6L,EAAGpQ,SAAS,mBAAqByyC,EAAc,IAVxBj6C,IAc3Cm6C,EAAap3C,QACb63C,EAAO1sD,KAAKisD,EAAan6C,IAE7B46C,EAAO1sD,KAAK0pB,EAAG,IAGnBrrB,EAAEquD,GAAQr3C,OAEN7L,KAAKH,QAAQga,WAAWmiB,SAAWh8B,KAAKoC,UACxCR,aAAalB,EAAK+b,wBAClB/b,EAAK+b,uBAAyBpX,YAAW,WACrC3E,EAAK0B,QAAQixC,SACb3yC,EAAKyiD,iBAAmBb,CAC5B,IAER,EAEA7jB,YAAa,SAASpf,GACdA,EAAQxqB,EAAEwqB,GAEd,IAEIhL,EACA6L,EACAxQ,EAEApH,EACA+C,EAPA3K,EAAOV,KACPwiD,EAAa9hD,EAAKb,QAAQka,UAAUyoC,WAIpCC,EAAe5tD,IAGfuuD,EAAoB,GACpBC,EAAc,EAIlB,GAFIhvC,EAAQgL,EAAMnU,KAAK,iBAAiBG,OAEpCrL,KAAKC,WAAW0H,gBAAiB,CACjC,IAGI27C,EAHAX,EAAWtjC,EAAMhoB,KAAK,kBACtBurD,EAAcliD,EAAKT,WAAW4iD,eAAeF,GAC7CY,EAAa7iD,EAAKT,WAAW8iD,sBAAsB,CAACH,IAAc,GAatE,OAVAliD,EAAKT,WAAW8hD,aAAaY,IAAY,EACrCC,EAAY9rC,OAAS8rC,EAAY9rC,MAAMzL,SACvCi4C,EAAwB5iD,EAAKT,WAAW8iD,sBAAsB,CAACH,IAAc,GAC7EliD,EAAKT,WAAW+iD,oBAAsBM,EAAwBC,GAGlE7iD,EAAK8yC,WAAU,QACf9yC,EAAKT,WAAWiI,MAAMxH,EAAKT,WAAWgjD,mBAAoBviD,EAAKT,WAAWsF,QAAQ,WAC9E7E,EAAK8yC,WAAU,EACnB,GAAG,cAEP,CAmBA,IAjBIxzC,KAAK0+B,cACArf,EAAMlL,QAAQnX,IAAK8S,SAAS,yBAI7B2yC,EAAeziD,KAAKiV,MAAM5S,SAAStF,IAAI+N,GAAGuU,EAAM5Y,SAASqpC,QAAQ/yC,KAHjE0lD,EAAepjC,EAAMywB,QAAQ/yC,IAC7BsiB,EAAQrf,KAAK4e,YAAY1T,KAAK,aAAaJ,GAAGuU,EAAM5Y,WAMxD4Y,EAAMnU,KAAKtT,GAAiByT,QAC5BrW,EAAME,GAAG4J,KAAKugB,EAAMnU,KAAKtT,GAAkB,CAAEkH,KAAM,mBAGvDugB,EAAMnU,KAAK,6BAA6B5I,QAAQjL,KAAKkG,IAAe,GAC/D2N,KAAK,KAAK7T,KAAK4F,GAAYN,IAG3B2L,EAAM,EAAG+C,GAFdgU,EAAQA,EAAMywB,QAAQ/yC,KAEOsO,OAAQ/C,EAAM+C,MAEvCqE,GADAwQ,EAAKb,EAAMvU,GAAGxC,IACF4C,KAAK,iBAAiBG,SACpBgJ,GAHiC/L,IA4B/C,GArBIoH,GAAU2E,EAAQ,GAAM6L,EAAGpQ,SAAS,kBACpCoQ,EAAGhT,OACHu1C,EAAa33C,GAAGxC,GAAK4E,OAEjBgT,EAAGpQ,SAASpV,KAAiBwlB,EAAGhV,KAAK,uBAAuB6K,GAAGpe,IAC/D+I,EAAK+9B,YAAYve,GAGjBA,EAAGpQ,SAAS,iBAAmBoQ,EAAGhV,KAAK,uBAAuB6K,GAAGpe,KACjEuoB,EAAGnL,OAAO7H,OACVu1C,EAAa33C,GAAGxC,EAAM,GAAG4E,SAI7BgT,EAAGpQ,SAASpV,MACR8nD,GACAY,EAAkB5sD,KAAK0pB,EAAGnK,GAAG,aAEjCstC,KAGAnjC,EAAGpQ,SAAS,kBAAmB,CAC/B,GAAI0yC,EAAY,CACZ,IAAIgB,EAAmBJ,EAAkBxyC,MACzCsP,EAAGi+B,OAAOqF,GACVf,EAAa33C,GAAGxC,GAAK61C,OAAOqF,EAChC,CACmB,GAAfH,GACAnjC,EAAGhT,OACHu1C,EAAa33C,GAAGxC,GAAK4E,QAErBm2C,GAER,EAGW,IAAVhvC,GAAe3T,EAAKb,QAAQga,WAAWmiB,SAAWh8B,KAAK0+B,cAC1Dh+B,EAAKb,QAAQga,WAAWmiB,SAAWh8B,KAAK0+B,cACtCh+B,EAAKymB,0BAEb,EAEAixB,cAAe,SAASvpC,GACpB,IAAInO,EAAOV,KACP8G,EAAYpG,EAAKg+B,YAAch+B,EAAKkd,aAAa1S,KAAK,SAAWxK,EAAK+O,MACtE22B,EAAct/B,EAAUoE,KAAK,mBAAmBA,KAAK,mBAAmBG,OACxEA,EAASvE,EAAUoE,KAAKnO,IAAIuF,QAAQ4I,KAAK,mBAAmBG,OAC5D4D,EAAOnI,EAAUzE,SAAS,kBAAkB4I,QAAO,WAC/C,OAAQpW,EAAEmL,MAAMqC,SAAS,YAAYgJ,MACzC,IAEAwD,EAASxD,GACTxW,EAAE,IAAIyB,MAAMuY,EAASxD,EAAS,GAAGhC,KAAK,4DAA8D3I,EAAKb,QAAQwb,SAASI,2BAA6B,UAAUgiB,UAAU32B,EAAUzE,SAAS,0BAC1L3B,EAAKd,QAAQmW,GAAG,aAChB9G,EAAK/D,KAAK,mBAAmBW,QAE1BgD,EAASxD,GAChBvE,EAAUoE,KAAKnO,IAAIyjB,MAAK,WACpB3rB,EAAEmL,MAAMkL,KAAK,iBAAiBJ,GAAG+D,GAAQqD,SACzCrd,EAAEmL,MAAMkL,KAAK,iBAAiB4hB,MAAMje,GAAQqD,QAChD,IAEArD,EAASu3B,GACTvxC,EAAE,IAAIyB,MAAMuY,EAASu3B,EAAc,GAAG/8B,KAAK,oDAAoDo0B,UAAU32B,EAAUoE,KAAK,iBAEhI,EAEAu4C,eAAgB,SAASruD,EAAMsuD,GAQ3B,OAPItuD,GAAQsuD,IAEJtuD,EADAA,EAAKyhB,aACE7W,KAAKyjD,eAAeruD,EAAK0hB,MAAM,GAAI4sC,GAEnCtuD,EAAK0hB,MAAM,IAGnB1hB,CACX,EAEAs7B,mBAAoB,WAChB,IACId,EADAlvB,EAAOV,KAGNU,EAAKg+B,cAIV9O,EACI/6B,EAAE,4CAA6C6L,EAAKc,SACnDC,IAAIf,EAAK+O,MAAMlN,UACfd,IAAIf,EAAKwU,OAEdxU,EAAKsmB,aAAe1P,GAAWsY,EAAO9kB,GAAG,IACzC8kB,EAAO1tB,MAAMxB,EAAKsmB,eAElB4I,EACI/6B,EAAE,8CAA+C6L,EAAKc,SACrDC,IAAIf,EAAKkd,aAAa1S,KAAK,WAC3BzJ,IAAIf,EAAKke,cAEP1c,MAAMoV,GAAWsY,EAAO9kB,GAAG,KACtC,EAEA60B,WAAY,SAAS3zB,GACjB,IAEI4jB,EACAtnB,EACAsJ,EACAE,EACAtL,EAEAm9C,EACAt4C,EAKAsL,EAdAjW,EAAOV,KAOPkC,EAAQ,EAGRyc,EAASje,EAAKie,QAAUje,EAAKc,QAAQ0J,KAAK,kBAC1CuW,EAAgB/gB,EAAK+gB,eAAiB,CAAC,EACvC9V,EAAUjL,EAAKiL,QACf6jB,EAAgB9uB,EAAKkd,aAAejK,GAAcjT,EAAKkd,aAAa1S,KAAK,iBAAiBD,OAAO2C,IAAevC,OAAS,EAEzH6kB,EAAmC95B,EAAKwZ,GAAYlP,EAAKiL,UAAU,SAASK,GAAU,OAAOA,EAAOmkB,yBAA2B,IAcnI,IAXInkB,EADiB,iBAAVA,EACEL,EAAQK,GACV/V,EAAc+V,GACZ5V,EAAKib,GAAY1F,IAAU,SAASyK,GACzC,OAAOA,IAASpK,CACpB,IAAG,GAEM5V,EAAKib,GAAY1F,IAAU,SAASyK,GACzC,OAAOA,EAAKlK,QAAUF,CAC1B,IAAG,KAGSG,GAAUH,GAA1B,CAIA,IAAIe,EAAsBrM,EAAKkjD,wBAAwB53C,GAEvD,GAAIA,EAAOL,SAAWK,EAAOL,QAAQN,OAAQ,CAOzC,IANA7E,EAAW2J,GAAsBnE,EAAQL,GAEzCoB,EAAoBf,GAAQ,GAE5BwK,GAAkBzL,GAASlW,EAAE,eAAgB6L,EAAKkd,cAAeld,EAAK+O,MAAO,UAAYjJ,EAASK,IAAM,QAASL,EAASwJ,MAAM,GAE3H1H,EAAM,EAAGA,EAAM0D,EAAOL,QAAQN,OAAQ/C,IACxCtI,KAAK2/B,WAAW3zB,EAAOL,QAAQrD,IAMlC,OAHA5H,EAAKojB,8BACLpjB,EAAK0E,QAAQ1M,EAAY,CAAEsT,OAAQA,GAGvC,CAEA2K,EAAcpgB,EAAQyV,EAAQ+B,GAAe6B,GAAYjE,KAEzDoB,EAAoBf,GAAQ,GAE5BtL,EAAKmjD,sBAAsB73C,GAAQ,GAEnCtL,EAAKiY,aAELjY,EAAK4vB,cACL5vB,EAAK2vB,oBAEL,IAAIvpB,EAAYpG,EAAK+O,MAmBrB,GAjBAk0C,EAAkBhtC,EACdjW,EAAKkd,cAAgB4R,EAAgB7Y,EACrC7P,EAAYpG,EAAKkd,aAAa1S,KAAK,gBAEnCy4C,GAAmBn0B,EAGhB7b,GAAc7M,GAAWmE,OAAO2C,IAAe9C,GAAG64C,GACpD,GAAG91C,MAAMC,QAAUnQ,GAExB6Y,GAAkBzL,GAASlW,EAAE,eAAgB6L,EAAKkd,cAAeld,EAAK+O,MAAO,uBAAwBkH,GAAa,GAC9GgI,EAAO,KACPje,EAAK4vB,YAAY3R,EAAOzT,KAAK,+BAC7BxK,EAAK2vB,kBAAkB1R,EAAOzT,KAAK,iCACnCsL,GAAkBmI,EAAOzT,KAAK,yBAA0ByL,GAAa,IAGrE8K,EAAc9V,UAAYK,EAAOF,OAGjC,OAFApL,EAAKojD,2BACLpjD,EAAK0E,QAAQ1M,EAAY,CAAEsT,OAAQA,IAUvC,GANItL,EAAKke,aAAe4Q,EAAgB7Y,EACpCD,GAAgBhW,EAAKke,YAAY1T,KAAK,aAAcyL,GAEpDD,GAAgBhW,EAAKuU,MAAM5S,WAAYsU,EAAc6Y,GAGrD9uB,EAAKke,YACLle,EAAKgwB,qBACLhwB,EAAKwmB,8BACLxmB,EAAKymB,2BACLzmB,EAAK0mB,0BACL1mB,EAAK0zB,8BACF,CAEH,IAAK9rB,EAAM,EAAG+C,GADduG,EAAOlR,EAAK+O,MAAM0T,OAAOjY,KAAK,QACFG,OAAQ/C,EAAM+C,EAAQ/C,GAAO,EAGrD,GAFAwJ,EAAWF,EAAKtJ,GAAKuF,MAAM3L,MAEvB0P,EAAKtJ,GAAK9J,UAAUuT,QAAQ,oBAAsB,EAClD7P,GAAStM,EAAWgc,EAAKtJ,SAI7B,GAAIsJ,EAAKtJ,GAAK9J,UAAUuT,QAAQ,gBAAkB,EAC9C7P,GAAStM,EAAWgc,EAAKtJ,QAD7B,CAKA,IAAIwJ,IAAsC,GAA1BA,EAASC,QAAQ,KAE1B,CACH7P,EAAQ,EACR,KACJ,CAJIA,GAASmE,SAASyL,EAAU,GAHhC,CAUJ8d,EAASlvB,EAAKc,QAAQ0J,KAAK,yBAAyB5I,QAAQb,IAAIf,EAAKc,QAAQ0J,KAAK,yBAAyB5I,SAASb,IAAIf,EAAKwU,OAC7HxU,EAAKsmB,aAAe,KAEhB9kB,IACA0tB,EAAOpP,MAAK,WACRxgB,KAAK6N,MAAM3L,MAAQA,EAAQpF,EAC/B,IAEA4D,EAAKsmB,aAAe9kB,EACpBxB,EAAK+zC,mBAEb,CAEA/zC,EAAKiwB,0BACLjwB,EAAK2mB,uBACD6I,EAAiC7kB,OAAS,GAC1C3K,EAAK+vB,mBAET/vB,EAAKojB,yBACLpjB,EAAK0E,QAAQ1M,EAAY,CAAEsT,OAAQA,GA/GnC,CAgHJ,EAEA63C,sBAAuB,SAAS73C,EAAQgB,GACpC,IAEI1E,EAEA/F,EACAiE,EACAwJ,EACAyE,EANA9I,EADO3L,KACQ2L,QAEfgB,EAAU,GAKVI,EARO/M,KAQoB4jD,wBAAwB53C,GAEnD+3C,EAAY/2C,EACZ,SAASg3C,GAAK,OAAOj2C,GAAei2C,EAAEr4C,SAASN,QAAU24C,EAAE/3C,MAAQ,EACnE,SAAS+3C,GAAK,OAAQj2C,GAAei2C,EAAEr4C,SAASN,SAAW24C,EAAE/3C,MAAQ,EAGzE,GAAIW,GAAcZ,EAAQL,EAASgB,IAAYA,EAAQtB,OACnD,IAAK/C,EAAMqE,EAAQtB,OAAS,EAAG/C,GAAO,EAAGA,IAErC9B,EAAWuJ,GADXxN,EAASoK,EAAQrE,GACiBqD,GAClCqE,EAAOjF,GAASlW,EAAE,eAAgBmL,KAAK4d,cAAe5d,KAAKyP,MAAO,UAAYjJ,EAASK,IAAM,kDAAkDiE,GAAGtE,EAASwJ,MAEvJ+zC,EAAUxhD,KACVwK,EAAoBxK,EAAQyK,GAC5BgD,EAAK,GAAGnC,MAAMC,QAAUd,EAAU,GAAKrP,IAGvCqS,EAAK/E,OAAO,IAAMjW,EAAMqC,KAAK,WAAa,KAAKgU,SAC/CoJ,EAAUpO,SAAS2J,EAAK3Y,KAAKrC,EAAMqC,KAAK,YAAa,IACrD2Y,EAAK,GAAGyE,QAAWA,EAAUhD,GAAuBlP,EAAOoJ,UAAa,EAIxF,EAEAm4C,oBAAqB,WACjB,IAAIpjD,EAAOV,KACEU,EAAKwU,MAAMzT,IAAIf,EAAK+O,MAAMlN,UAEhCN,IAAI,CACPC,MAAOyP,GAAUqB,GAAmBF,GAAwBpS,EAAKiL,aAErEjL,EAAKE,SACT,EAEA8+B,WAAY,SAAS1zB,GACjB,IACI1D,EACA+C,EAEAukB,EACA1tB,EACAyhD,EACAn9C,EACAsL,EACAF,EAKA+E,EACAstC,EACAC,EAhBAxjD,EAAOV,KAUP2L,EAAUjL,EAAKiL,QACf8V,EAAgB/gB,EAAK+gB,eAAiB,CAAC,EACvC9C,EAASje,EAAKie,QAAUje,EAAKc,QAAQ0J,KAAK,kBAC1CimC,EAAqBzwC,EAAKkd,aAAejK,GAAcjT,EAAKkd,aAAa1S,KAAK,iBAAiBG,OAAS,EAIxG6kB,EAAmC95B,EAAKwZ,GAAYlP,EAAKiL,UAAU,SAASK,GAAU,OAAOA,EAAOmkB,yBAA2B,IAuBnI,GArBqB,iBAAVnkB,GACP2K,EAAc3K,EACdA,EAASL,EAAQK,IACV/V,EAAc+V,GACrBnX,EAAE2rB,KAAKnP,GAAY1F,IAAU,SAASlF,EAAO2P,GACzC,GAAIA,IAASpK,EAGT,OAFAA,EAASoK,EACTO,EAAclQ,GACP,CAEf,IAEA5R,EAAE2rB,KAAKnP,GAAY1F,IAAU,SAASlF,EAAO2P,GACzC,GAAIA,EAAKlK,QAAUF,EAGf,OAFAA,EAASoK,EACTO,EAAclQ,GACP,CAEf,IAGCuF,IAAUG,GAAUH,GAAzB,CAIA,IAAIe,EAAsBrM,EAAKkjD,wBAAwB53C,GAEvD,GAAIA,EAAOL,SAAWK,EAAOL,QAAQN,OAAQ,CAQzC,IAPA7E,EAAWuJ,GAAe/D,EAAQL,GAClCs4C,EAAiB5yC,GAAY3Q,EAAKb,QAAQ8L,SAASgL,GAEnD5J,EAAoBf,GAAQ,GAE5BwK,GAAkBzL,GAASlW,EAAE,eAAgB6L,EAAKkd,cAAeld,EAAK+O,MAAO,UAAYjJ,EAASK,IAAM,QAASL,EAASwJ,MAAM,GAE3H1H,EAAM,EAAGA,EAAM0D,EAAOL,QAAQN,OAAQ/C,IAClC27C,EAAet4C,QAAQrD,GAAK2D,QAC7BjM,KAAK0/B,WAAW1zB,EAAOL,QAAQrD,IAOvC,OAHA5H,EAAKsjB,iCACLtjB,EAAK0E,QAAQzM,EAAY,CAAEqT,OAAQA,GAGvC,CAEAk4C,EAAkB3tD,EAAQyV,EAAQ4D,GAAYjE,IAE9CoB,EAAoBf,GAAQ,GAE5BtL,EAAKmjD,sBAAsB73C,GAAQ,GAEnCtL,EAAKiY,aACLjY,EAAK4vB,cACL5vB,EAAK2vB,oBAEL,IAAIvpB,EAAYpG,EAAK+O,MAmBrB,GAjBAk0C,EAAkBO,EACdxjD,EAAKkd,cAAgBuzB,EAAqB+S,EAC1Cp9C,EAAYpG,EAAKkd,aAAa1S,KAAK,gBAEnCy4C,GAAmBxS,EAGhBx9B,GAAc7M,GAAWgE,GAAG64C,GAC9B,GAAG91C,MAAMC,QAAU,GAExB0I,GAAkBzL,GAASlW,EAAE,eAAgB6L,EAAKkd,cAAeld,EAAK+O,MAAO,uBAAwBy0C,GAAiB,GAClHvlC,EAAO,KACPje,EAAK4vB,YAAY3R,EAAOzT,KAAK,+BAC7BxK,EAAK2vB,kBAAkB1R,EAAOzT,KAAK,iCACnCsL,GAAkBmI,EAAOzT,KAAK,yBAA0Bg5C,GAAiB,IAGzEziC,EAAc9V,UAAYK,EAAOF,OAGjC,OAFApL,EAAKojD,2BACLpjD,EAAK0E,QAAQzM,EAAY,CAAEqT,OAAQA,IAUvC,GANItL,EAAKke,aAAeuyB,EAAqB+S,EACzCjtC,GAAgBvW,EAAKke,YAAY1T,KAAK,aAAcg5C,GAEpDjtC,GAAgBvW,EAAKuU,MAAM5S,WAAY6hD,EAAkB/S,GAGzDzwC,EAAKke,YACLle,EAAKgwB,qBACLhwB,EAAKwmB,8BACLxmB,EAAKymB,2BACLzmB,EAAK0mB,+BAGL,GADAwI,EAASlvB,EAAKc,QAAQ0J,KAAK,yBAAyB5I,QAAQb,IAAIf,EAAKc,QAAQ0J,KAAK,yBAAyB5I,SAASb,IAAIf,EAAKwU,OACxHlJ,EAAO9J,MAEL,CAGH,IAFAA,EAAQ,EAEHoG,EAAM,EAAG+C,GADduG,EAAOlR,EAAK+O,MAAM0T,OAAOjY,KAAK,QACFG,OAAQ/C,EAAM+C,EAAQ/C,GAAO,EAGrD,GAFAwJ,EAAWF,EAAKtJ,GAAKuF,MAAM3L,MAEvB0P,EAAKtJ,GAAK9J,UAAUuT,QAAQ,oBAAsB,EAClD7P,GAAStM,EAAWgc,EAAKtJ,SAI7B,GAAIsJ,EAAKtJ,GAAK9J,UAAUuT,QAAQ,gBAAkB,EAC9C7P,GAAStM,EAAWgc,EAAKtJ,QAD7B,CAKA,GAAIwJ,EAASC,QAAQ,MAAQ,EAAG,CAC5B7P,EAAQ,EACR,KACJ,CACAA,GAASmE,SAASyL,EAAU,GAN5B,CASJpR,EAAKsmB,aAAe,KAChB9kB,IACA0tB,EAAOpP,MAAK,WACRxgB,KAAK6N,MAAM3L,MAAQA,EAAQpF,EAC/B,IACA4D,EAAKsmB,aAAe9kB,EACpBxB,EAAK+zC,mBAEb,MAhCI7kB,EAAO1tB,MAAM,IAmCrBxB,EAAKiwB,0BACLjwB,EAAK2mB,uBACD6I,EAAiC7kB,OAAS,GAC1C3K,EAAK+vB,mBAET/vB,EAAKsjB,4BACLtjB,EAAK0E,QAAQzM,EAAY,CAAEqT,OAAQA,GAlHnC,CAmHJ,EAEA43C,wBAAyB,SAAS53C,GAG9B,OAAI0B,IAFM1B,GAAU,CAAC,GAED2B,OACTZ,GAEAM,EAEf,EAGA82C,eAAgB,WACZ,IAGInY,EAHAj+B,EAAiB/N,KAAK+7C,YAAc/7C,KAAK+7C,YAAc/oC,GAAmBhT,KAAK2L,SAC/EpL,EAAWP,KAAKC,WAAWM,YAAcP,KAAKC,WAAWyH,QACzD08C,EAAa,GAEbv1C,EAAS7O,KAAKuZ,UACd8qC,EAAet2C,EAAe1C,OAASwD,EAEvC7O,KAAKkhB,eACLmjC,IAGArkD,KAAKgtB,uBACLgf,EAAU3lC,SAASrG,KAAKoC,QAAQ8I,KAAKnO,IAAIuF,QAAQ4I,KAAK,MAAM5I,QAAQjL,KAAK,WAAY,KAGzF,IAAK,IAAI4W,EAAI,EAAGA,EAAI1N,EAAU0N,IAAK,CAC/Bm2C,GAAc,2BACd,IAAK,IAAIthC,EAAI,EAAGA,EAAIuhC,EAAcvhC,IAE1BshC,GADApY,IAAYlpB,EACE,gBAAkBkpB,EAAU,sFAE5B,wFAGtBoY,GAAc,OAClB,CACA,OAAOA,CACX,EAEA5Q,UAAW,SAAS2K,GAChB,IAIImG,EAJA1kD,EAAUI,KAAKJ,QACfo8B,EAAUh8B,KAAKH,QAAQga,YAAc7Z,KAAKH,QAAQga,WAAWmiB,QAC7D5gB,EAAapb,KAAKH,QAAQub,WACPpb,KAAKH,QAAQga,YAAc7Z,KAAKH,QAAQga,WAAW5Y,QAItErB,EAAUI,KAAKoC,QACRpC,KAAK6xB,gBAAuC,UAArB7xB,KAAKwxB,YACnC5xB,EAAUI,KAAK6xB,eACR7xB,KAAKgL,eAAiBgxB,EAC7Bp8B,EAAUI,KAAKwB,QACRxB,KAAKJ,QAAQmW,GAAG,SACvBnW,EAAUI,KAAKJ,QAAQ2C,SAChBvC,KAAKoC,SAAWpC,KAAKoC,QAAQiJ,SACpCzL,EAAUI,KAAKoC,SAGD,YAAdgZ,EACI+iC,GACAmG,EAAWtkD,KAAKmkD,iBACZvkD,EAAQsL,KAAK,SACXiK,QACAa,OAAOsuC,IAEb1kD,EAAQsL,KAAK,eAAeiJ,QAAQ,SAASgB,QAG7C6mB,GAAWmiB,EACXnpD,EAAME,GAAGqvD,SAAS3kD,EAASu+C,EAAQ,CAAE75C,OAAQtE,KAAKoC,QAAQkC,SAAUygB,IAAK/kB,KAAKoC,QAAQ,GAAG8E,UAAW08B,SAAS,IAE7G5uC,EAAME,GAAGqvD,SAAS3kD,EAASu+C,EAGvC,EAEAqG,QAAS,SAAS7lD,EAAM8lD,GAEpBzkD,KAAKmnB,2BACLnnB,KAAKonB,0BAEDpnB,KAAKoC,UACLpC,KAAKy0C,mBACLz0C,KAAK0Y,qBAGL1Y,KAAK4e,aACL5e,KAAK0zB,oBAGL1zB,KAAKga,oBAAsByqC,GAASzkD,KAAKq1C,cACrCoP,IACAzkD,KAAKq1C,WAAa,MAEtBr1C,KAAKga,kBAAkB7R,oBAGvBnI,KAAKsc,OAAStc,KAAKsc,MAAM1c,SACzBI,KAAKsc,MAAM5C,OAAO+qC,GAGlBzkD,KAAKkxB,qBACLlxB,KAAKqnB,sBAAqB,EAElC,EAEAq9B,iBAAkB,WACd,IAAIjU,EAASh7C,IAEb,QAAKg7C,IAEEzwC,KAAKkV,MAAM,KAAOu7B,GACrB57C,EAAEiC,SAASkJ,KAAKkV,MAAM,GAAIu7B,IACzBzwC,KAAK0+B,cACD1+B,KAAK4e,YAAY,KAAO6xB,GAAU57C,EAAEiC,SAASkJ,KAAK4e,YAAY,GAAI6xB,IAE/E,EAEA7vC,QAAS,SAASqC,GACd,IAII+f,EAKA2hC,EACAC,EAVAlkD,EAAOV,KACP5K,EAAOsL,EAAKT,WAAWi6B,OACvBjgB,EAAcvZ,EAAKb,QAAQoa,YAC3BwH,EAAgB/gB,EAAK+gB,eAAiB,CAAC,EAEvCsB,EAAUluB,EAAE6L,EAAKqiB,WACjB8hC,GAAoB,EACpBh2C,EAASnO,EAAK6Y,UACdyyB,EAAUn9B,EAASmE,GAAmBjF,GAAerN,EAAKiL,UAAUN,OAIpEpI,GAAkB,eAAbA,EAAE4F,SAA4BnI,EAAK+Z,UAAY/Z,EAAKb,QAAQga,WAAWmiB,WACpD,SAApBh8B,KAAKwxB,aAA+C,UAArBxxB,KAAKwxB,cAA4B9wB,EAAKg0B,sBAKzEh0B,EAAKk5B,mBACLl5B,EAAK+nB,qBAAqB,MAAO,OACjC/nB,EAAKk5B,kBAAmB,GAGxBnY,EAAc9V,SACdjL,EAAKiY,aAIL1V,GAAkB,WAAbA,EAAE4F,QAAuBnI,EAAK+Z,UACnC/Z,EAAK+Z,SAAS5a,QAAQizB,OAASv8B,EAAQmK,EAAK+Z,SAAS5a,QAAQizB,MAAO7vB,EAAE6T,QAAU,GAChFpW,EAAK+Z,SAAS5a,QAAQizB,MAAM9xB,OAAOvI,EAAQiI,EAAKq0B,qBAGpD9xB,EAAIA,GAAK,CAAC,EAENvC,EAAK0E,QAAQ,cAAe,CAAEyD,OAAQ5F,EAAE4F,QAAU,SAAUpC,MAAOxD,EAAEwD,MAAOqQ,MAAO7T,EAAE6T,UAIrF7T,EAAE4F,SAAWzP,IAAQsH,EAAKm5B,uBAC1Bn5B,EAAK6c,mBACL7c,EAAKwyB,uBAGTxyB,EAAKwb,cAAc,WAEdxb,EAAKoyC,0BACF74B,IAAgBvZ,EAAKgkD,oBAAuBhkD,EAAKmxB,gBAAkBnxB,EAAKmxB,eAAez8B,KAAK,kBAE5F4tB,GADA6hC,EAAoB9hC,EAAQhN,GAAG,OACIgN,EAAQxgB,SAASF,SAAS,uBAAuBoE,MAAMsc,EAAQ,IAAM/rB,KAAK2N,IAAIjE,EAAK0wB,UAAUrO,GAAU,IAE9IriB,EAAK6c,oBAGL7c,EAAKb,QAAQga,YAAcnZ,EAAKb,QAAQga,WAAWmiB,UAAYt7B,EAAK66B,iBACpE35B,aAAalB,EAAK8b,kBAClB9b,EAAK8b,iBAAmBnX,YAAW,WAC1B3E,EAAKoyC,yBACNpyC,EAAK8yC,WAAU,EAEvB,GAAG,MAEF9yC,EAAK8yC,WAAU,GAGpB9yC,EAAKolB,oBAELplB,EAAK0e,MAAQ,GAER1e,EAAKiL,QAAQN,SACd3K,EAAK0/C,aAAa1/C,EAAK+iD,eAAeruD,EAAK,GAAIyZ,IAC/Cm9B,EAAUn9B,EAASnO,EAAKiL,QAAQN,QAGpC3K,EAAK4Y,OAASzK,EAAS,GAAKnO,EAAK4Y,OAE7B5Y,EAAK4Y,SACL5Y,EAAKiY,aACLjY,EAAK4vB,cACL5vB,EAAK2vB,oBACA3vB,EAAK6xB,mBACN7xB,EAAK03C,cAAcvpC,GAEvBnO,EAAK4Y,OAASzK,EAAS,EACvBnO,EAAKqe,WAAanI,GAAUxhB,IAG5BsL,EAAK0B,UACLuiD,EAAoB3vD,EAAMwO,WAAW9C,EAAK0B,UAE9CwiD,EAAoBlkD,EAAKqyC,wBACzBryC,EAAKokD,eAAe1vD,EAAM42C,EAASn9B,GAC/BnO,EAAKb,QAAQga,YAAcnZ,EAAKb,QAAQga,WAAWmiB,SAAWh8B,KAAKgL,gBACnEtK,EAAKqyC,wBAA0B6R,GAEnClkD,EAAKqkD,qBAAqB3vD,EAAM42C,EAASn9B,GAEpCnO,EAAK6xB,oBACN7xB,EAAK8Y,UAEL9Y,EAAK6zC,0BAEL7zC,EAAKu1C,yBAELv1C,EAAKgY,oBAELhY,EAAK+zC,iBAAiB/zC,EAAK0B,SAAWuiD,IAGtCjkD,EAAKke,cAED6C,EAAcxS,KACdvO,EAAK0B,QAAQ8I,KAAK,+BAA+B9F,QAAQ,UAClD1E,EAAKkzB,cACZlzB,EAAKkzB,cAAcsf,QAAQ9tC,QAAQ,WAEnC1E,EAAKc,QAAQ2xC,IAAI,UAAU,SAASlwC,GAAKA,EAAE0vB,iBAAmB,IAC9DjyB,EAAK0B,QAAQgD,QAAQ,YAIxB1E,EAAKoyC,yBAA4BpyC,EAAKquB,cACvCruB,EAAKskD,gBAAgBhiC,EAAc6hC,GAGnCnkD,EAAKkzB,eACLlzB,EAAKkzB,cAAcqxB,iBAGnBvkD,EAAKwZ,YACLxZ,EAAKwZ,WAAWgrC,mBAGpBxkD,EAAKykD,oBAAmB,WACpBzkD,EAAKwb,cAAc,UACvB,IAEIxb,EAAK8sB,oBACL9sB,EAAKygC,yBAAwB,GAG7BzgC,EAAKb,QAAQ2a,mBACX9Z,EAAKwZ,aAAellB,EAAME,GAAGu4B,WAAWC,aAAahtB,EAAKb,QAAQqa,YAAYlK,MAAStP,EAAK8sB,sBAC7F9sB,EAAKoW,QAAQzL,QAAU3K,EAAKT,WAAW0H,kBACxCjH,EAAK0kD,oBAGJ1kD,EAAKb,QAAQ2a,mBACd9Z,EAAKmc,aAAe,CAAC,GAGrBnc,EAAK2sB,wBACL3sB,EAAK6sB,iBACL7sB,EAAKotB,oBAGTptB,EAAKigB,QAELjgB,EAAK0E,QAAQvM,IAClB,EAECmsD,gBAAiB,SAAShiC,EAAc6hC,GACpC,KAAI7hC,IAAiBluB,GAAekuB,EAAe,GAAnD,CAMA,GAFAhjB,KAAKu6B,iBAEDsqB,EACA7kD,KAAKw2B,YAAYx2B,KAAKyP,MAAMvE,KAAK,yBAAyBJ,GAAGkY,QAC1D,CACH,IAAIzc,EAAW,EACXkb,EAAgBzhB,KAAKyhB,eAAiB,CAAC,EAEvCzhB,KAAK4rC,iBAEDrlC,EADAkb,EAAcxS,KACHjP,KAAKga,kBAAkBxT,SAASxG,KAAK4rC,kBAErC5rC,KAAK4rC,iBAGpB5oB,EAAe,EAGnB,IACIgpB,EADAnlC,EAAMhS,IAGNmL,KAAK4e,cACL/X,EAAM7G,KAAK4e,YAAY1T,KAAK,aAAaJ,GAAGvE,IAEhDM,EAAMA,EAAIpF,IAAIzB,KAAKiV,MAAM5S,WAAWyI,GAAGvE,IAEnCvG,KAAKgtB,uBACLgf,EAAU3lC,SAASQ,EAAIqE,KAAK,MAAM5I,QAAQjL,KAAK,WAAY,IAC3D2rB,EAAehjB,KAAKisC,mBAAqBD,EAAU,EAAIA,EAAU,EAAI,IAIzE,IAAI3a,EAAKxqB,EAAIqE,KAAK,iDACbJ,GAAGkY,GAER,IAAKqO,EAAGhmB,QAAU2X,EAAe,EAC7B,OAGAhjB,KAAKgtB,qBACLhtB,KAAKw2B,YAAYnF,GAAI,GAAM,GAG3BrxB,KAAKw2B,YAAYnF,EAGzB,CAEIrxB,KAAKqrC,UACL5U,GAAWz2B,KAAKkV,OAAO,EAnD3B,CAqDJ,EAEAkwC,kBAAmB,WACf,IAEIC,EAFA3kD,EAAOV,KACP6qC,EAAUnqC,EAAKoW,QAEfviB,EAAKmC,EAAWgK,EAAKT,WAAWJ,QAAQg2B,OAAO/C,OAASpyB,EAAKT,WAAWJ,QAAQg2B,OAAO/C,MAAMhzB,GAAGm2B,QAAUv1B,EAAKT,WAAWJ,QAAQg2B,OAAO/C,MAAMv+B,GAEnJ8wD,EAAejvD,EAAKy0C,GAAS,SAAShkC,GACjC,IAAIy+C,EAAc5kD,EAAKouB,SAASjoB,GAAKtS,GACrC,GAAImM,EAAKmc,aAAayoC,GACnB,OAAOz+C,CAEf,IAEAnG,EAAK0oB,OAAOi8B,EAChB,EAEDnpC,cAAe,SAASqpC,GAEpBvwD,EAAME,GAAGsiB,gBAAgB1X,GAAGoc,cAAcnc,KAAKC,KAAMulD,GAEzC,YAARA,GAAuBvlD,KAAKC,YAAeD,KAAKC,WAAWJ,QAAQm8B,SACnEh8B,KAAKwlD,sBAGTxlD,KAAKylD,mBAAmBF,GAExBvlD,KAAK0lD,yBAAyBH,EAClC,EAEAC,oBAAqB,WACjB,IAAI9kD,EAAOV,KAEPU,EAAKwgB,gBACNxgB,EAAK4f,QAAQ,WAAW,WACnB,MAAO,CAAEvV,SAAUrK,EAAKuU,MAAM5S,SAAS,iBAC3C,IAEA3B,EAAKuU,MAAM/J,KAAK,kBAAkBiK,QAE1C,EAEAswC,mBAAoB,SAASF,GACzB,IAAI7kD,EAAOV,KACP8G,EAAYpG,EAAKuU,MAEjBvU,EAAKsK,gBACLlE,EAAYpG,EAAKke,YAAY1T,KAAK,UAGlCxK,EAAK4Y,QACN5Y,EAAK4f,QAAQilC,GAAK,WACb,MAAO,CACHx6C,SAAUjE,EAAUzE,SAASpL,EAAMyD,IACnCtF,KAAMP,EAAEsB,IAAIygB,GAAUlW,EAAKT,WAAWi6B,SAAS,SAASpL,GACpD,MAAO,CAAEA,SAAUA,EACvB,IAER,GAER,EAEA42B,yBAA0B,SAASH,GAC/B,IAAI7kD,EAAOV,KACP8G,EAAYpG,EAAKuU,MAEjBvU,EAAKsK,gBACJlE,EAAYpG,EAAKd,SAGlBc,EAAK4Y,QAAU5Y,EAAK6d,qBAEpB7d,EAAK4f,QAAQilC,GAAK,WACd,MAAO,CACHx6C,SAAUjE,EAAUoE,KAAK,mBACzB9V,KAAMP,EAAEsB,IAAI4gB,GAAarW,EAAKT,WAAWi6B,SAAS,SAASpL,GACvD,MAAO,CAAEA,SAAUA,EACvB,IAER,GAER,EAEAg2B,eAAgB,SAAS1vD,EAAM42C,EAASn9B,GACnC,IACIvG,EACA+C,EAGAs6C,EACAnE,EACAoE,EAPAllD,EAAOV,KAGPuI,EAAO,GACP+d,EAAiC,MAAtB5lB,EAAKsK,cAIhB6O,EAAanZ,EAAKb,QAAQga,WAC1B6mC,EAAY,CACJ/lC,YAAaja,EAAKia,YAClBC,eAAgBla,EAAKka,eACrB2D,oBAAqB7d,EAAK6d,oBAC1B4R,0BAA2BzvB,EAAKyvB,2BAU5C,GARItW,GAAcA,EAAWmiB,UAAYt7B,EAAKT,WAAWJ,QAAQm8B,UAC7Dt7B,EAAKqyC,wBAA0B,EAC3BryC,EAAK0B,UACL1B,EAAK0B,QAAQ,GAAGiB,UAAY,IAGpCsiD,EAAgBjlD,EAAKqyC,wBAA0B,EAC/C/G,EAAU1lB,EAAW0lB,EAAUh5B,GAAmBD,GAAqBrS,EAAKiL,UAAUN,OAAS2gC,EAC3Fn9B,EAAS,EAcT,IAZAm9B,EAAU1lB,EAAW0lB,EAAUn9B,EAASm9B,EAEpCtrC,EAAKua,gBACL+wB,IAGAtrC,EAAK6d,sBACL7d,EAAKsgD,8BAAgCtgD,EAAKT,WAAW+W,cAErDtW,EAAKb,QAAQga,WAAWmiB,UACxB4pB,EAAiBllD,EAAKT,WAAW4lD,WAAWx6C,QAE3C/C,EAAM,EAAG+C,EAASjW,EAAKiW,OAAQ/C,EAAM+C,EAAQ/C,IACzC5H,EAAK0hD,iBACN1hD,EAAK0hD,eAAiB,IAE1BZ,EAAgBoE,GAAkBt9C,IAAQlT,EAAKiW,OAAS,GAAKu6C,IAAmBllD,EAAKT,WAAWyH,QAChGa,GAAQ7H,EAAK2gD,cAAcjsD,EAAKkT,GAAM0jC,EAAS,EAAG1lB,EAAWw/B,GAA+BC,GAAiBrF,EAAWp6B,EAAUk7B,GAAe,QAGrJj5C,GAAQ7H,EAAK+/C,UAAUrrD,EAAMsrD,GAG7BiF,GACAjlD,EAAKuU,MAAMe,OAAOzN,GAClB3G,aAAalB,EAAKgc,sBAClBhc,EAAKgc,qBAAuBrX,YAAW,WAC/B3E,EAAKyiD,mBACLziD,EAAK89B,cAAc99B,EAAKyiD,kBACxBziD,EAAKyiD,iBAAmB,KAEhC,IACAziD,EAAKoyC,wBAA0B,MAE/BpyC,EAAKuU,MAAQD,GAActU,EAAKuU,MAAOvU,EAAKwU,MAAO3M,EAAMvI,KAAKH,QAAQ2f,SAAUxf,KAAKH,QAAQlB,KAEtG,EAEA8xB,iBAAkB,WACjB,IAIAu1B,EAEAr6C,EACAqgC,EACA3sB,EACAnT,EACAF,EACA0pB,EACAj3B,EACAwnD,EACA1a,EACAC,EACA0a,EACAC,EACAjiC,EACA7P,EACA8b,EACAi2B,EArBI1lD,EAAOV,KACX5K,EAAOsL,EAAKqe,WACZnI,EAAYlW,EAAKc,QAAQ0J,KAAKjU,EAAMyD,IACpCmU,EAASnO,EAAK6Y,UAEd+M,EAAiC,MAAtB5lB,EAAKsK,cAkBhB4L,EAAU4J,MAAK,SAAS/Z,EAAOI,GAC3Bqd,EAAarvB,EAAEgS,GACf0kC,EAAiBrnB,EAAW/P,QAAQ,SAAS5R,SAC7CipC,EAAsBD,EAAex1B,GAAG,0BACxCpK,EAAgCqH,GAAmBjF,GAAzCy9B,EAAwDl6B,GAAc5Q,EAAKiL,SAA+C4F,GAAiB7Q,EAAKiL,WAC1J0I,EAAQ6P,EAAWhZ,KAAK,iBAAsBG,OAC1Cib,GACA0/B,EAAsBxa,EAAsBua,GAAkBD,GAC9D9Z,EAAUR,EAAsB7/B,EAAQN,OAASwD,EAASwF,EAAQ1I,EAAQN,SAG1E26C,EAAsBD,GACtB/Z,EAAUrgC,EAAQN,OAASwD,EAASwF,GAGxCgL,EAAQ5Y,GAASrR,EAAKiW,OAASjW,EAAKqR,EAAQrR,EAAKiW,QAAUjW,EAAKqR,GAChEyF,EAAQmT,EAAMnT,MACdF,EAAS5V,EAAKwZ,GAAYlP,EAAKiL,UAAU,SAASK,GAAU,OAAOA,EAAOE,OAASA,CAAO,IAAG,IAAM,CAAE,EACrGk6C,IAAwBp6C,EAAO41C,sBAAuB7zC,GAAerN,EAAKiL,SAAS,GAAGwkB,4BAA4BpiB,GAAerN,EAAKiL,SAAS,GAC/I+pB,EAAW1pB,EAAO41C,oBAAsB51C,EAAO41C,oBAAsB7zC,GAAerN,EAAKiL,SAAS,GAAGwkB,0BACrG1xB,GAAQuN,EAAOsH,QAAU5S,EAAKb,QAAQ6a,aAAe9jB,GAAWoV,EAAOsH,OAAO,GAAQtH,EAAOsH,QAAUpH,GAAS,KAAOmK,GAAiBgJ,EAAMhV,MAAO2B,EAAOuH,OAAQvH,EAAOkH,OAAQlH,EAAOJ,SAE1Lq6C,EAAkBvlD,EAAKkgD,WAAWvhC,GAAO,EAAO+mC,GAChDj2B,EAA4Bqb,EAAsB9qC,EAAK87C,gCAAkC97C,EAAKyvB,0BAE1FuF,IACAj3B,SAAci3B,IAAa15B,GAAW05B,EAASuwB,GAAmBjxD,EAAM0gC,SAASA,EAAf1gC,CAAyBixD,IAG/FC,EAAchiC,EAAWf,OAAO9X,OAAS6Y,EAAWf,OAASe,EAAW3hB,SAExE4jD,EAAqBtxD,EAAEs7B,EACnBA,EAA0Bj6B,EAAO,CAAC,EAAG+vD,EAAiB,CAAE98C,WAAYkL,EAAO23B,QAASn9B,EAASwF,EAAO5V,KAAMA,KAC1GunD,EAAoBha,EAAS33B,EAAO5V,EAAM,KAAM,KAAM,KAAMO,KAG5DknD,EAAYnwC,GAAG,SACfmwC,EAAYjwC,QAAQkwC,GAGpBD,EAAYrmC,MAAMsmC,GAElBjiC,EAAWhS,QAChB,GACJ,EAEA6yC,qBAAsB,SAAS3vD,EAAM42C,EAASn9B,GAC1C,IACIvG,EACA+C,EACAm2C,EAEAoE,EALAr9C,EAAO,GAIPo9C,EAAgB,KAEhBjF,EAAY,CACR/lC,YAAa3a,KAAKoe,kBAClBxD,eAAgB5a,KAAKqe,qBACrBE,oBAAqBve,KAAKwe,0BAC1B2R,0BAA2BnwB,KAAKw8C,iCAGxC,GAAIx8C,KAAKgL,cAAe,CAEpB,IAAIkK,EAAQlV,KAAK4e,YAGjB,GAFA+mC,EAAgB3lD,KAAK+yC,wBAA0B,EAE3ClkC,EAAS,EAKT,IAJAm9B,GAAoBj+B,GAAe6B,GAAY2B,GAAiBvR,KAAK2L,WAAWN,OAC5ErL,KAAKH,QAAQga,WAAWmiB,UAC1B4pB,EAAiB5lD,KAAKC,WAAW4lD,WAAWx6C,QAEzC/C,EAAM,EAAG+C,EAASjW,EAAKiW,OAAQ/C,EAAM+C,EAAQ/C,IACjDk5C,EAAgBoE,GAAkBt9C,IAAQlT,EAAKiW,OAAS,GAAKu6C,IAAmB5lD,KAAKC,WAAWyH,QAChGa,GAAQvI,KAAKqhD,cAAcjsD,EAAKkT,GAAM0jC,EAAS,EAAG+Z,GAAiBrF,GAAW,EAAOc,GAAe,QAGrGj5C,EAAOvI,KAAKygD,UAAUrrD,EAAMsrD,GAG5BiF,EACAzwC,EAAM7S,SAAS,SAAS2T,OAAOzN,GAE/ByM,GAAcE,EAAM7S,SAAS,SAAU6S,EAAO3M,EAAMvI,KAAKH,QAAQ2f,SAAUxf,KAAKH,QAAQlB,MAG5FqB,KAAKmnB,0BACT,CACJ,EAEA8uB,uBAAwB,YACwB,IAAxCj2C,KAAKH,QAAQ0a,SAAS8rC,eACrBrmD,KAAKwB,QAAQ0J,KAAK,iBAAiBizC,OAAOn+C,KAAKC,WAAWyH,SAAW1H,KAAKC,WAAWM,WAE9F,EAEAszB,kBAAmB,SAASC,EAAQC,GAChC,IAEIzrB,EAFA2G,EAAO6kB,EAAO,GAAG7kB,KACjB5D,EAAS4D,EAAK5D,OAEdi7C,EAAQvyB,EAAO,GAAG9kB,KAClBs3C,EAAazyB,EAAOryB,IAAIsyB,GACxByyB,EAAmBD,EAAWl7C,OAC9Bo7C,EAAU,GAEd,IAAKn+C,EAAM,EAAGA,EAAM+C,GACXi7C,EAAMh+C,GADaA,IAKpB2G,EAAK3G,GAAKuF,MAAMvJ,SAChB2K,EAAK3G,GAAKuF,MAAMvJ,OAASgiD,EAAMh+C,GAAKuF,MAAMvJ,OAAS,IAI3D,IAAKgE,EAAM,EAAGA,EAAM+C,GACXi7C,EAAMh+C,GADaA,IAAO,CAK/B,IAAIo+C,EAAgBz3C,EAAK3G,GAAKlB,aAC1Bu/C,EAAgBL,EAAMh+C,GAAKlB,aAC3B9C,EAAS,EAEToiD,EAAgBC,EAChBriD,EAASoiD,EACFA,EAAgBC,IACvBriD,EAASqiD,GAGbF,EAAQjwD,KAAK8N,EACjB,CAEA,IAAKgE,EAAM,EAAGA,EAAMk+C,EAAkBl+C,IAClCi+C,EAAWj+C,GAAKuF,MAAMC,QAAUnQ,GAGpC,IAAK2K,EAAM,EAAGA,EAAM+C,EAAQ/C,IACpBm+C,EAAQn+C,KAER2G,EAAK3G,GAAKuF,MAAMvJ,OAASgiD,EAAMh+C,GAAKuF,MAAMvJ,OAAUmiD,EAAQn+C,GAAO,EAAKxL,IAIhF,IAAKwL,EAAM,EAAGA,EAAMk+C,EAAkBl+C,IAClCi+C,EAAWj+C,GAAKuF,MAAMC,QAAU,EAExC,IA6QJ,SAAS0lB,GAAgBozB,EAAMC,GAC3B,IAAIviD,EACAoiD,EAAgBE,EAAKx/C,aACrBu/C,EAAgBE,EAAKz/C,aAErBs/C,EAAgBC,EAChBriD,EAASoiD,EAAgB5pD,GAClB4pD,EAAgBC,IACvBriD,EAASqiD,EAAgB7pD,IAGzBwH,IACAsiD,EAAK/4C,MAAMvJ,OAASuiD,EAAKh5C,MAAMvJ,OAASA,EAEhD,CAEA,SAAS6yB,GAAW/rB,EAAU5W,GAC1B,IAAI8T,EAAK+C,EAAQC,EAEjB,UAAWF,IAAanP,IAAUmP,IAAa5W,EAC5C,OAAO4W,EAGV,GAAInV,EAAcmV,IAAaA,EAAS5W,OAASA,EAC7C,OAAO4W,EAGX,GAAI/U,EAAQ+U,GACR,IAAK9C,EAAM,EAAG+C,EAASD,EAASC,OAAQ/C,EAAM+C,EAAQ/C,IAGlD,UAFAgD,EAAUF,EAAS9C,MAEKrM,IAAUqP,IAAY9W,GAAU8W,EAAQ9W,OAASA,EACrE,OAAO8W,EAInB,OAAO,IACX,CAgBA,SAASmrB,GAAWvhB,EAAO4xC,GACvB,GAAK5xC,GAA0B,IAAjBA,EAAM7J,OAIpB,IAAe,IAAXy7C,EAAiB,CACjB5xC,EAAQrgB,EAAEqgB,GACV,IAAI1R,EAAaxO,EAAMwO,WAAW0R,EAAM3S,UAEvCvN,EAAM+xD,aAAa7xC,GACnBlgB,EAAMwO,WAAW0R,EAAM3S,SAAUiB,EACrC,MACI3O,EAAEqgB,GAAOi+B,IAAI,WAAW,SAASlwC,GAAKA,EAAES,gBAAkB,IAAG0B,QAAQ,QAE7E,CAMD,SAASq5C,GAAY5vC,EAAQ3C,GACzB,QAASrX,EAAEuB,KAAKyY,GAAQ,SAASuH,GAC7B,OAAOA,EAAKlK,QAAUA,CAC1B,IAAGb,MACP,CAEA,SAAS0nB,GAAiB/mB,EAAQ8mB,GAC9B,SAAK9mB,EAAOE,OAASF,EAAOkO,gBAGxB4Y,EAAMrY,WAAaqY,EAAMrY,SAASzO,EAAOE,WAGzCF,EAAOyO,WAAazO,EAAOyO,SAASqY,IAI5C,CAEA,SAASk0B,GAAepnD,GACpB,OAAO/K,EAAE+K,GAASmW,GAAG,kTACzB,CAEC,SAAS6sB,GAAW3/B,GAChB,IAAIvC,EAAOV,KACPkE,EAAgBrP,EAAEoO,EAAEiB,eACpB+iD,EAAW/iD,EAAc6R,GAAG,MAC5Bb,EAAQlV,KAAKkV,MAAMzT,IAAIzB,KAAK4e,aAC5BsQ,EAAclvB,KAAKyP,MAAMlN,SAASd,IAAI5M,EAAE,SAAUmL,KAAK4d,eACvDspC,EAAUF,GAAe/jD,EAAEyL,QAC3B2qB,EAAgBxkC,EAAEoO,EAAEyL,QAAQqH,GAAG,eAC/BrH,EAAS7Z,EAAEoO,EAAEyL,QACb4gC,EAAeprC,EAAciQ,QAAQ,SAAS,GAE9C+yC,GAAWhjD,EAAcgH,KAAKlW,EAAM4qB,aAAa,eAAevU,OAChErL,KAAKw2B,YAAYtyB,GAIjBorC,IAAiBp6B,EAAM,IAAMo6B,IAAiBp6B,EAAM,IAAMo6B,IAAiBpgB,EAAY,IAAMogB,IAAiBpgB,EAAY,IAI1HxgB,EAAOqH,GAAGne,EAAkB,IAAMD,KAIlCqI,KAAKH,QAAQoa,aACbja,KAAKw2B,YAAYtyB,GAAe,EAAOm1B,IAGvC4tB,GAAaC,GACb7hD,YAAW,WACP,IAAI8hD,EAAWtyD,EAAEG,EAAMU,oBAClByxD,EAASr3C,SAAS,cAAeq3C,EAASr3C,SAAS,mBAAuBq3C,EAASr3C,SAAS,oBAK7FpP,EAAKwU,QAAUiyC,EAASpxC,GAAGlc,KAAmBmtD,GAAehyD,EAAMU,mBAAsBb,EAAEiC,SAASw4C,EAAct6C,EAAMU,mBAExH+gC,GAAW/1B,EAAKwU,MAAM,IAAI,GAElC,IAGA+xC,IAAajyD,EAAMO,QAAQqN,OAC3BK,EAAES,iBAEV,CAED,SAASoW,GAAiBla,EAASoR,GAC/B,IAAKA,EACD,OAAO,EAGX,IAAItK,EAAS,EAMb,OAJI1R,EAAMO,QAAQ0J,QAAQwI,SACtBf,EAAS9G,EAAQsC,SAGdwE,CACX,CAyBA,SAAS0tC,GAA0B5yC,EAAS5B,GACxC,IAAIsH,EACAkgD,EAEJ,QAAK5lD,OAIL5B,EAAU/K,EAAE+K,IAEA,IAAM9I,EAAS0K,EAAQ,GAAI5B,EAAQ,MAC3CsH,EAAYtH,EAAQ8P,SAASqV,IAAMvjB,EAAQkO,SAASqV,IACpDqiC,EAAaxnD,EAAQ9J,cAAgB,GAEhCoR,GAAa,GAAKnQ,EAAK41C,IAAIzlC,IAAckgD,IAAgBrwD,EAAK6N,MAAMsC,EAAYkgD,IAAe5lD,EAAQ8C,UAMpH,CAwBA,SAAS84C,GAAiBF,GACzB,MAAO,EAAGlR,UAASvtC,UAAW,mCAAmCutC,EAAUkR,yBAEvEloD,EAAME,GAAG4J,KAAKjK,EAAE,+BAA+BoI,OAAeN,YAAmB,CAAEmC,KAAM,mBAAsBL,EACnH,WACD,CAOA,SAASsnD,GAAgB/Z,EAAS33B,EAAO5V,EAAMqjD,EAAUv1C,EAAK86C,EAAuBroD,GACpF,MAAO,QAAUqoD,EAAwB,mBAAqB96C,EAAM,IAAM,IAAM,wDAA0DpD,GAAWkL,GACjJ,mCAAqC23B,EAAU,sBAAwB8V,EADpE,wBAGH9sD,EAAME,GAAG4J,KAAKjK,EAAE,6BAA+BoI,GAAa,MAAQ6kD,EAAWnlD,GAAWC,IAAU,UAAW,CAAEkC,KAAOgjD,EAAW,iBAAmB,cAAa9iD,EAAQ,OAAS,WAAgBP,EACxM,gBACD,CAEA,SAASqnD,GAA6B9Z,GACrC,MAAO,4FACkCA,EADlC,gEAGR,CAWA,SAASp1C,GAAWyT,EAAOi9C,GAOvB,OAAQ,GAAKj9C,GACRoB,QAPW,KAOQ,SACnBA,QAPU,KAOQ,QAClBA,QALU,KAKQ,QAClBA,QARa,MAQQ,SAASgF,GAC3B,OAAI62C,EACO,KAAO72C,EAEX,QACX,IACChF,QAbY,KAaQ,QAC7B,CAQC,SAASs9B,GAAej1B,EAAGC,GACvB,OAAO/T,KAAKC,WAAW8R,QAAQ/R,KAAKC,WAAWwxB,SAAS3d,EAAEvH,MAAQvM,KAAKC,WAAW8R,QAAQ/R,KAAKC,WAAWwxB,SAAS1d,EAAExH,KACzH,CAEA,SAASy8B,GAAwBh9B,GAC7B,SAA+B,IAAtBA,EAAOu7C,YAAyBv7C,EAAOu7C,aAA0C,IAA5Bv7C,EAAOu7C,WAAWv9C,MACpF,CA9iBGhV,EAAMwyD,YACNxyD,EAAMwyD,WAAWtxD,OAAOqhB,GAAK9gB,WAG7BzB,EAAMyyD,WACNzyD,EAAMyyD,SAASvxD,OAAOqhB,GAAK9gB,WAE3B8gB,GAAK9gB,UAAUixD,uBAAyB,SAASnD,GAC7C,IAOI52B,EAPA+P,EAAO19B,KACP0G,EAAS,IAAI7R,EAAE0jC,SACft4B,EAAay9B,EAAKz9B,WAClB0nD,EAAWjqB,EAAK79B,QAAQoK,IAAI09C,SAC5BC,EAAWlqB,EAAKl8B,QAAQ0J,KAAK,oDAAoD5I,QACjFulD,EAAOhzD,EAAE,SACRoN,IAAI,CAAEuE,SAAU,WAAY6L,MAAO,IAAO0S,KAAM,MAGrD2Y,EAAKoqB,0BAA0BpqB,EAAK/xB,UACpCgiB,EAAQ+P,EAAKl8B,QAAQmsB,QAAQ1rB,IAAI,CAC7BqC,OAAQxI,GAAMoG,MAAOpG,KACtB6H,SAASkkD,IACN38C,KAAK,mBAAmBjJ,IAAI,CAAEqC,OAAQxI,GAAMoG,MAAOpG,GAAMqG,SAAU,YACzEwrB,EAAMziB,KAAK,0DAA0DjJ,IAAI,CAAEqC,OAAQxI,GAAMoG,MAAO,OAAQC,SAAU,YAClHwrB,EAAMziB,KAAK,sDAAsDgH,SACjEyb,EAAMziB,KAAK,sDAAsDjJ,IAAI,CAAE8lD,aAAc,IAErF/nD,KAAKgoD,iBAAiBzD,GAEtB,IAAIh6C,EAAOojB,EAAMziB,KAAK,oDAAoD5I,QAAQ6S,QAC9E8yC,EAAehoD,EAAW8I,OAY9B,SAASm/C,IACLL,EAAKlkD,SAAS2G,SAASC,MACvB,IAAI1K,EAAUhL,EAAEqB,OAAO,CAAC,EAAGwnC,EAAK79B,QAAQoK,IAAK,CACzCk+C,cAAc,EACd5D,SAAU,SAASP,GACfO,EAAS5qC,OAAO,CACZ5Q,KAAMi7C,EAAEj7C,KACRq/C,WAAYpE,EAAEqE,QACd9D,SAAU,GAAMP,EAAEqE,QAAUrE,EAAE5jD,WAAa,EAC3CA,WAAY4jD,EAAE5jD,YAEtB,IAEJpL,EAAMszD,QAAQC,QAAQ56B,EAAO9tB,GACxB2oD,QAAO,WACJX,EAAK31C,QACT,IACC8F,MAAK,SAASqH,GACX3Y,EAAOgyB,QAAQrZ,GACfqe,EAAKoqB,0BAA0BpqB,EAAK/xB,SAAS,EACjD,IACC8tB,MAAK,SAASgvB,GACX/hD,EAAO8xB,OAAOiwB,EAClB,GACR,CAEA,SAASC,IACL,IAAIL,EAAUpoD,EAAW8I,OACrB3I,EAAaunD,EAAW1nD,EAAWG,aAAe,EACtDmK,EAAKyL,OAAO4xC,EAASvlD,SAAS,0BAC1BgmD,EAAUjoD,EACVH,EAAW8I,KAAKs/C,EAAU,IAE1BpoD,EAAWe,OAAO,SAAU0nD,GA1C5Bf,GAAYM,IAAiBnzD,GAC7BmL,EAAWkzC,IAAI,SAAU+U,GACzBjoD,EAAW8I,KAAKk/C,KAEhBvqB,EAAK98B,UACLsnD,KAwCR,CASA,OAPIP,GACA1nD,EAAWY,KAAK,SAAU6nD,GAC1BzoD,EAAW8I,KAAK,IAEhB2/C,IAGGhiD,EAAO+xB,SAClB,EAEAlhB,GAAK9gB,UAAUqxD,0BAA4B,SAASn8C,EAASg9C,GAOzD,IANA,IACI38C,EACAu7C,EACAqB,EACAC,EAJAx9C,EAASM,EAAQN,OAMZ4C,EAAI,EAAGA,EAAI5C,EAAQ4C,IAExBs5C,GADAv7C,EAASL,EAAQsC,IACGs5C,WACfoB,EAmBG38C,EAAO88C,sBACP98C,EAAO88C,sBAAuB,EAE1B98C,EAAOC,OACPjM,KAAK0/B,WAAW1zB,GAEhBhM,KAAK2/B,WAAW3zB,IAEbA,EAAOL,SACd3L,KAAK8nD,0BAA0B97C,EAAOL,QAASg9C,IA3BlB,iBAAtB38C,EAAOu7C,aACdA,EAAav7C,EAAOu7C,WAAWt9C,KAGnC2+C,GAAmB58C,EAAOC,SAAyB,IAAfs7C,EACpCsB,EAAsB78C,EAAOC,SAAyB,IAAfs7C,GACvCA,EAAaqB,GAAmBC,IAEZ78C,EAAOC,OAGhBs7C,GAAcv7C,EAAOC,QAC5BD,EAAO88C,sBAAuB,EAC9B9oD,KAAK0/B,WAAW1zB,IACTu7C,GAAcv7C,EAAOL,SAC5B3L,KAAK8nD,0BAA0B97C,EAAOL,UANtCK,EAAO88C,sBAAuB,EAC9B9oD,KAAK2/B,WAAW3zB,IAqBhC,EAEAuL,GAAK9gB,UAAUsyD,SAAW,SAASxE,GAC/B,IAAI7mB,EAAO19B,KAEX,GAAI09B,EAAK79B,QAAQoK,IAAI++C,WAAatrB,EAAK79B,QAAQoK,IAAI++C,WAAaltD,GAC5D,OAAO4hC,EAAKgqB,uBAAuBnD,GAGvC,IAAI79C,EAAS,IAAI7R,EAAE0jC,SACft4B,EAAay9B,EAAKz9B,WAClB0nD,EAAWjqB,EAAK79B,QAAQoK,IAAI09C,SAEhC3nD,KAAKgoD,iBAAiBzD,GAGtB,IAAI0E,EAAM,IAAIj0D,EAAMszD,QAAQY,MACxBjB,EAAehoD,EAAW8I,OAe9B,SAASogD,IACJzrB,EAAKoqB,0BAA0BpqB,EAAK/xB,SACpC+xB,EAAK0rB,eAAe,CAChBlnD,MAAOw7B,EAAKl8B,QAAQU,SACrB,CACCmnD,WAAY3rB,EAAK79B,QAAQoK,IAAIo/C,aAEhC7vB,MAAK,SAASna,GACX,IAAIgpC,EAAUpoD,EAAW8I,OACrB3I,EAAaunD,EAAW1nD,EAAWG,aAAe,EAElDsuB,EAAO,CACP3lB,KAAMsW,EACN+oC,WAAYC,EACZ9D,SAAU8D,EAAUjoD,EACpBA,WAAYA,GAGhBs9B,EAAKoqB,0BAA0BpqB,EAAK/xB,SAAS,GAC7C44C,EAAS5qC,OAAO+U,GAChBu6B,EAAIjzC,OAAO0Y,EAAK3lB,MAEZs/C,EAAUjoD,EACVH,EAAW8I,KAAKs/C,EAAU,GAnC/BV,GAAYM,IAAiBnzD,GAC7BmL,EAAWe,OAAO,SAAUmoD,GAC5BlpD,EAAWkzC,IAAI,UAAU,WACrBzsC,EAAOgyB,QAAQuwB,EACnB,IAEAhpD,EAAW8I,KAAKk/C,IAEhBvhD,EAAOgyB,QAAQuwB,EA+BlB,IACCxvB,MAAK,SAASgvB,GACX/hD,EAAO8xB,OAAOiwB,EAClB,GACJ,CASA,OAPId,GACA1nD,EAAWY,KAAK,SAAUsoD,GAC1BlpD,EAAW8I,KAAK,IAEhBogD,IAGGziD,EAAO+xB,SAClB,EAEAlhB,GAAK9gB,UAAUuxD,iBAAmB,SAAS1vB,GACxC,IAAIgxB,EAAUz0D,EAAE,6EAChBy0D,EAAQrzC,QAAQjW,KAAKwB,QAAQmsB,QAAQ1rB,IAAI,CACrCuE,SAAU,WAAYue,IAAK,EAAG1S,KAAM,KAGxCrS,KAAKu7B,iBAAkB,EACvBv7B,KAAKwB,QAAQwU,OAAOszC,GAEpB,IAAIC,EAAK10D,EAAE,wCACV8O,SAAS2lD,GACTE,iBAAiB,CACdnmC,KAAM,QACNomC,WAAY,GACZ7hD,IAAK,EACLjD,IAAK,EACL0F,MAAO,IACRjV,KAAK,oBAERkjC,EAASisB,UAAS,SAASthD,GACvBsmD,EAAGl/C,MAAMpH,EAAEshD,SACf,IACCiE,QAAO,WACJxzD,EAAMuM,QAAQ+nD,GACdA,EAAQp3C,QACZ,GACH,GAwULhd,EAAGw0D,OAAOnyC,IACVriB,EAAGw0D,OAAOjpD,GAEZ,CA/naD,CA+naGxL,OAAOD,MAAMquC","sourcesContent":["import './kendo.data.js';\nimport './kendo.columnsorter.js';\nimport './kendo.editable.js';\nimport './kendo.window.js';\nimport './kendo.filtermenu.js';\nimport './kendo.filtercell.js';\nimport './kendo.columnmenu.js';\nimport './kendo.groupable.js';\nimport './kendo.pager.js';\nimport './kendo.selectable.js';\nimport './kendo.sortable.js';\nimport './kendo.reorderable.js';\nimport './kendo.resizable.js';\nimport './kendo.ooxml.js';\nimport './kendo.excel.js';\nimport './kendo.pane.js';\nimport './kendo.progressbar.js';\nimport './kendo.pdf.js';\nimport './kendo.dialog.js';\nimport './kendo.switch.js';\nimport './kendo.html.button.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\n\nvar __meta__ = {\n    id: \"grid\",\n    name: \"Grid\",\n    category: \"web\",\n    description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n    depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\" ],\n    features: [ {\n        id: \"grid-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n    }, {\n        id: \"grid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for record filtering\",\n        depends: [ \"filtermenu\" ]\n    }, {\n        id: \"grid-columnmenu\",\n        name: \"Column menu\",\n        description: \"Support for header column menu\",\n        depends: [ \"columnmenu\" ]\n    }, {\n        id: \"grid-grouping\",\n        name: \"Grouping\",\n        description: \"Support for grid grouping\",\n        depends: [ \"groupable\" ]\n    }, {\n        id: \"grid-filtercell\",\n        name: \"Row filter\",\n        description: \"Support for grid header filtering\",\n        depends: [ \"filtercell\" ]\n    }, {\n        id: \"grid-paging\",\n        name: \"Paging\",\n        description: \"Support for grid paging\",\n        depends: [ \"pager\" ]\n    }, {\n        id: \"grid-selection\",\n        name: \"Selection\",\n        description: \"Support for row selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"grid-column-reorder\",\n        name: \"Column reordering\",\n        description: \"Support for column reordering\",\n        depends: [ \"reorderable\" ]\n    }, {\n        id: \"grid-column-resize\",\n        name: \"Column resizing\",\n        description: \"Support for column resizing\",\n        depends: [ \"resizable\" ]\n    }, {\n        id: \"grid-mobile\",\n        name: \"Grid adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"grid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export grid data as Excel spreadsheet\",\n        depends: [ \"excel\" ]\n    }, {\n        id: \"grid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n    } ]\n};\n\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        DataSource = kendo.data.DataSource,\n        ObservableObject = kendo.data.ObservableObject,\n        tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n        activeElement = kendo._activeElement,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        keys = kendo.keys,\n\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        map = $.map,\n        grep = $.grep,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        push = Array.prototype.push,\n        isFunction = kendo.isFunction,\n        encode = kendo.htmlEncode,\n        isEmptyObject = $.isEmptyObject,\n        contains = $.contains,\n        math = Math,\n\n        DOT = \".\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n        DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n        SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        NAVROW = \"tr:not(.k-footer-template):visible\",\n        NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n        ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n        COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n        HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n        CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n        CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n        CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n        WRAPPER = \".k-grid\",\n        NS = \".kendoGrid\",\n        CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n        GROUPCELLCLASS = \"k-group-cell\",\n\n        EDIT = \"edit\",\n        BEFOREEDIT = \"beforeEdit\",\n        SAVE = \"save\",\n        REMOVE = \"remove\",\n        DETAILINIT = \"detailInit\",\n        FILTERMENUINIT = \"filterMenuInit\",\n        COLUMNMENUINIT = \"columnMenuInit\",\n        FILTERMENUOPEN = \"filterMenuOpen\",\n        COLUMNMENUOPEN = \"columnMenuOpen\",\n        CELLCLOSE = \"cellClose\",\n        CHANGE = \"change\",\n        COLUMNHIDE = \"columnHide\",\n        COLUMNSHOW = \"columnShow\",\n        SAVECHANGES = \"saveChanges\",\n        DATABOUND = \"dataBound\",\n        DETAILEXPAND = \"detailExpand\",\n        DETAILCOLLAPSE = \"detailCollapse\",\n        ITEM_CHANGE = \"itemchange\",\n        PAGE = \"page\",\n        PAGING = \"paging\",\n        SCROLL = \"scroll\",\n        SYNC = \"sync\",\n        LOAD_START = \"loadStart\",\n        LOAD_END = \"loadEnd\",\n\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        ACTIVE = \"k-active\",\n        FOCUSABLE = \":kendoFocusable\",\n        SELECTED = \"k-selected\",\n        CHECKBOX = \"k-checkbox\",\n        CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n        NORECORDSCLASS = \"k-grid-norecords\",\n        LINK_CLASS = \"k-link\",\n        ICON_CLASS = \"k-icon\",\n        SVG_ICON_CLASS = \"k-svg-icon\",\n        ORDER_CLASS = \"k-sort-order\",\n        SORTED_CLASS = \"k-sorted\",\n        HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n        FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n        STICKY_CELL_CLASS = \"k-grid-content-sticky k-table-td\",\n        STICKY_HEADER_CLASS = \"k-grid-header-sticky k-header\",\n        STICKY_FOOTER_CLASS = \"k-grid-footer-sticky k-table-td\",\n        STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n        ROW_RESIZER = \"k-row-resizer\",\n        ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n        GROUPING_ROW = \"k-grouping-row\",\n        RESIZE = \"resize\",\n        ROWRESIZE = \"rowResize\",\n        COLUMNRESIZE = \"columnResize\",\n        COLUMNREORDER = \"columnReorder\",\n        COLUMNLOCK = \"columnLock\",\n        COLUMNUNLOCK = \"columnUnlock\",\n        COLUMNSTICK = \"columnStick\",\n        COLUMNUNSTICK = \"columnUnstick\",\n        ROWREORDER = \"rowReorder\",\n        NAVIGATE = \"navigate\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        MOUSEUP = \"mouseup\",\n        MOUSEENTER = \"mouseenter\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEMOVE = \"mousemove\",\n        DUBLECLICK = \"dblclick\",\n        HEIGHT = \"height\",\n        WIDTH = \"width\",\n        AUTO = \"auto\",\n        TABINDEX = \"tabIndex\",\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        BOTTOM = \"bottom\",\n        CONTAINER_FOR = \"container-for\",\n        FIELD = \"field\",\n        INPUT = \"input\",\n        INCELL = \"incell\",\n        INLINE = \"inline\",\n        UNIQUE_ID = \"uid\",\n        MINCOLSPANVALUE = 1,\n        COLSPAN = \"colSpan\",\n        OVERFLOW = \"overflow\",\n        HIDDEN = \"hidden\",\n        SORT = \"sort\",\n        GROUP_SORT = \"group-sort\",\n        DELETECONFIRM = \"Are you sure you want to delete this record?\",\n        NORECORDS = \"No records available.\",\n        CONFIRMDELETE = \"Delete\",\n        CANCELDELETE = \"Cancel\",\n        COLLAPSE = \"Collapse\",\n        EXPAND = \"Expand\",\n        ID = \"id\",\n        PX = \"px\",\n        TR = \"tr\",\n        DIV = \"div\",\n\n        ARIA_LABEL = \"aria-label\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_ROWCOUNT = \"aria-rowcount\",\n        ARIA_COLCOUNT = \"aria-colcount\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_COLINDEX = \"aria-colindex\",\n        ARIA_ROWINDEX = \"aria-rowindex\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_CHECKED = \"aria-checked\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ROLE = \"role\",\n        NONE = \"none\",\n        ROW = \"row\",\n        ROWGROUP = \"rowgroup\",\n        COLUMNHEADER = \"columnheader\",\n        GRIDCELL = \"gridcell\",\n\n        formatRegExp = /(\\}|\\#)/ig,\n        templateHashRegExp = /#/ig,\n        whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n        leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        COMMANDBUTTONTMPL = ({ className, attr, text }) => `<button type=\"button\" class=\"${className}\" ${attr}>${text}</button>`,\n        SELECTCOLUMNTMPL = ({ size }) => `<input tabindex=\"-1\" class=\"k-select-checkbox ` + CHECKBOX + ` ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">`,\n        SELECTCOLUMNHEADERTMPL = ({ size }) => `<input tabindex=\"-1\" class=\"k-select-checkbox ` + CHECKBOX + ` ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">`,\n        DRAGHANDLECOLUMNTMPL = () => kendo.ui.icon(\"reorder\"),\n        SORTHEADERTMPL = ({ text }) => `<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">${text}</span></span></span>`,\n        isRtl = false,\n        browser = kendo.support.browser;\n\n    var isIE11 = browser.msie && browser.version === 11;\n    var isMac = /Mac OS/.test(navigator.userAgent);\n    var classNames = {\n        content: \"k-content\",\n        scrollContainer: \"k-scroll-container\",\n        headerCellInner: \"k-cell-inner\"\n    };\n    var GroupsPager;\n\n    if (ui.Pager) {\n        GroupsPager = ui.Pager.extend({\n            init: function(element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: {\n                name: \"GroupsPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n            }\n        });\n    }\n\n    var VirtualScrollable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._refreshHandler = that.refresh.bind(that);\n            that.setDataSource(options.dataSource);\n            that.wrap();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n            that.dataSource = dataSource;\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.options.useRanges = true;\n            that.dataSource.options.virtual = true;\n        },\n\n        options: {\n            name: \"VirtualScrollable\",\n            itemHeight: $.noop,\n            prefetch: true,\n            maxScrollHeight: 250000\n        },\n\n        events: [\n            PAGING,\n            PAGE,\n            SCROLL,\n            LOAD_START,\n            LOAD_END\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.wrapper.add(that.verticalScrollbar).off(NS);\n\n            clearTimeout(that._timeout);\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n            }\n            that.wrapper = that.element = that.verticalScrollbar = null;\n            that._refreshHandler = null;\n        },\n\n        wrap: function() {\n            var that = this,\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                scrollbar = kendo.support.scrollbar() + 1,\n                element = that.element,\n                wrapper;\n\n            element.css( {\n                width: AUTO,\n                overflow: \"hidden\"\n            }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n            that.content = element.children().first();\n            wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                .parent()\n                                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            that._wrapper();\n\n            if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", NONE);\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                    global: true,\n                    allowSelection: true,\n                    start: function(e) {\n                        e.sender.capture();\n                    },\n                    move: function(e) {\n                        that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                        kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                        .css({\n                                            width: scrollbar\n                                        }).appendTo(element)\n                                        .on(\"scroll\" + NS, that._scroll.bind(that));\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                    \"overflow-y\": SCROLL\n                });\n\n                //hide the wrapper behind the virtual scrollbar\n                that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var scrollbar = this.verticalScrollbar,\n                scrollTop = scrollbar.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                scrollTop = e.currentTarget.scrollTop,\n                dataSource = that.dataSource,\n                rowHeight = that.itemHeight,\n                skip = dataSource.skip() || 0,\n                start = that._rangeStart || skip,\n                height = that.element.innerHeight(),\n                isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n            if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n            }\n            that._prevScrollTop = that._scrollTop;\n            that._scrollTop = scrollTop - (start * rowHeight);\n            that._scrollbarTop = scrollTop;\n\n            that._scrolling = delayLoading;\n\n            if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n            }\n\n            that.trigger(SCROLL);\n\n            if (delayLoading) {\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function() {\n                    that._scrolling = false;\n                    that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n            }\n        },\n\n        scrollToTop: function() {\n            this._scrollTo(0);\n        },\n\n        scrollToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n        },\n\n        _scrollWrapperToTop: function() {\n            this.wrapper.scrollTop(0);\n        },\n\n        _scrollWrapperToBottom: function() {\n            this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n        },\n\n        _scrollWrapperOnColumnResize: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var initialScrollTop = wrapper.scrollTop();\n\n            if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                    that._wrapperScrolled = true;\n                }\n            } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n            }\n        },\n\n        _scrollTo: function(scrollTop) {\n            var that = this;\n            var scrollbar = that.verticalScrollbar;\n\n            if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n            }\n\n            that.wrapper.scrollTop(scrollTop);\n            that._scrollTop = that.wrapper.scrollTop();\n\n            scrollbar.scrollTop(scrollTop);\n            that._scrollbarTop = scrollbar.scrollTop();\n        },\n\n        _isScrolledToTop: function() {\n            return this.verticalScrollbar.scrollTop() === 0;\n        },\n\n        _isScrolledToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            var scrollTop = scrollbar.scrollTop();\n\n            return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n        },\n\n        _isWrapperScrolledToBottom: function() {\n            var wrapper = this.wrapper;\n\n            return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n        },\n\n        itemIndex: function(rowIndex) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n            return rangeStart + rowIndex;\n        },\n\n        position: function(index) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n            var pageSize = this.dataSource.pageSize();\n            var result;\n\n            if (index > rangeStart) {\n                result = index - rangeStart;\n            } else {\n                result = rangeStart - index - 1;\n            }\n\n            return result > pageSize ? pageSize : result;\n        },\n\n        scrollIntoView: function(row) {\n            var container = this.wrapper[0];\n            var containerHeight = container.clientHeight;\n            var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n            var elementOffset = row[0].offsetTop;\n            var elementHeight = row[0].offsetHeight;\n\n            if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n            } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n            }\n        },\n\n        _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n            var that = this,\n                dataSource = that.dataSource,\n                itemHeight = that.itemHeight,\n                take = dataSource.take(),\n                rangeStart = that._rangeStart || dataSource.skip() || 0,\n                currentSkip = math.floor(firstItemIndex / take) * take,\n                fetching = false,\n                prefetchAt = 0.33;\n            var scrollbar = that.verticalScrollbar;\n            var webkitCorrection = browser.webkit ? 1 : 0;\n            var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n            if (firstItemIndex < rangeStart) {\n\n                fetching = true;\n                rangeStart = math.max(0, lastItemIndex - take);\n                that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                that._page(rangeStart, take);\n\n            } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take);\n\n                //ensure the scrollbar can be scrolled to bottom with mouse drag\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else {\n                    that._scrollTop = itemHeight;\n                }\n\n                that._page(rangeStart, take);\n\n            } else if (!that._fetching && that.options.prefetch) {\n\n                if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                    dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                    dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n\n            }\n            return fetching;\n        },\n\n        fetching: function() {\n            return this._fetching;\n        },\n\n        _page: function(skip, take, callback) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                dataSource = that.dataSource,\n                isGroupPaged = dataSource._isGroupPaged();\n            callback = isFunction(callback) ? callback : $.noop;\n\n            if (that.trigger(PAGING, { skip: skip, take: take })) {\n                return;\n            }\n\n            clearTimeout(that._timeout);\n            that._fetching = true;\n            that._rangeStart = skip;\n\n            if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                that.trigger(LOAD_START);\n\n                dataSource.range(skip, take, function() {\n                    that.trigger(LOAD_END);\n                    callback();\n                    that.trigger(PAGE);\n                }, \"page\");\n            } else {\n                if (!delayLoading) {\n                    that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function() {\n                    if (!that._scrolling) {\n\n                        if (delayLoading) {\n                            that.trigger(LOAD_START);\n                        }\n\n                        dataSource.range(skip, take, function() {\n                            that.trigger(LOAD_END);\n                            callback();\n                            that.trigger(PAGE);\n                        });\n                    }\n                }, 100);\n            }\n        },\n\n        repaintScrollbar: function(shouldScrollWrapper) {\n            var that = this,\n                html = \"\",\n                maxHeight = that.options.maxScrollHeight,\n                dataSource = that.dataSource,\n                scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                wrapperElement = that.wrapper[0],\n                totalHeight,\n                idx,\n                itemHeight;\n            var wasScrolledToBottom = that._isScrolledToBottom();\n\n            itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n            var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n            totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n            for (idx = 0; idx < math.floor(totalHeight / maxHeight); idx++) {\n                html += '<div style=\"width:1px;height:' + maxHeight + 'px\"></div>';\n            }\n\n            if (totalHeight % maxHeight) {\n                html += '<div style=\"width:1px;height:' + (totalHeight % maxHeight) + 'px\"></div>';\n            }\n\n            that.verticalScrollbar.html(html);\n\n            if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n            }\n\n            if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n                that._scrollWrapperOnColumnResize();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                dataSource = that.dataSource,\n                rangeStart = that._rangeStart;\n            var action = (e || {}).action;\n            var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n            that.trigger(LOAD_END);\n            clearTimeout(that._timeout);\n\n            that.repaintScrollbar(shouldScrollWrapper);\n\n            if (that.drag) {\n                that.drag.cancel();\n            }\n\n            if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                    that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                    // reset the scrollbar position if datasource is filtered\n                    that.verticalScrollbar[0].scrollTop = 0;\n                }\n            }\n\n            that._fetching = false;\n        }\n    });\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n    }\n\n    function groupCells(count) {\n        return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n    }\n\n    function stringifyAttributes(attributes) {\n        var attr,\n            result = \" \";\n\n        if (attributes) {\n            if (typeof attributes === STRING) {\n                return attributes;\n            }\n\n            for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n        }\n        return result;\n    }\n\n    var defaultCommands = {\n        create: {\n            text: \"Add new record\",\n            className: \"k-grid-add\",\n            iconClass: \"k-i-plus\"\n        },\n        cancel: {\n            text: \"Cancel changes\",\n            className: \"k-grid-cancel-changes\",\n            iconClass: \"k-i-cancel\"\n        },\n        save: {\n            text: \"Save changes\",\n            className: \"k-grid-save-changes\",\n            iconClass: \"k-i-check\"\n        },\n        destroy: {\n            text: \"Delete\",\n            className: \"k-grid-remove-command\",\n            iconClass: \"k-i-x\"\n        },\n        edit: {\n            text: \"Edit\",\n            className: \"k-grid-edit-command\",\n            iconClass: \"k-i-pencil\",\n            themeColor: \"primary\"\n        },\n        update: {\n            text: \"Save\",\n            className: \"k-grid-save-command\",\n            iconClass: \"k-i-save\",\n            themeColor: \"primary\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-grid-cancel-command\",\n            iconClass: \"k-i-cancel-outline\"\n        },\n        excel: {\n            text: \"Export to Excel\",\n            className: \"k-grid-excel\",\n            iconClass: \"k-i-file-excel\"\n        },\n        pdf: {\n            text: \"Export to PDF\",\n            className: \"k-grid-pdf\",\n            iconClass: \"k-i-file-pdf\"\n        },\n        search: {\n            text: \"Search...\",\n            className: \"k-grid-search\"\n        }\n    };\n\n    function cursor(context, value) {\n        $('th, th .k-grid-filter-menu, th .k-link', context)\n            .add(document.body)\n            .css('cursor', value);\n    }\n\n    function reorder(selector, source, dest, before, count) {\n        var sourceIndex = source;\n        source = $();\n        count = count || 1;\n        for (var idx = 0; idx < count; idx++) {\n            source = source.add(selector.eq(sourceIndex + idx));\n        }\n\n        if (typeof dest == \"number\") {\n            source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n        } else {\n            source.appendTo(dest);\n        }\n    }\n\n    function elements(lockedContent, content, filter) {\n        return $(lockedContent).add(content).find(filter);\n    }\n\n    function attachCustomCommandEvent(context, container, commands) {\n        var idx,\n            length,\n            command,\n            commandName;\n\n        commands = !isArray(commands) ? [commands] : commands;\n\n        for (idx = 0, length = commands.length; idx < length; idx++) {\n            command = commands[idx];\n\n            if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n            }\n        }\n    }\n\n    function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n        return map(columns, function(column) {\n            column = typeof column === STRING ? { field: column } : column;\n\n            var hidden;\n            column.parentIds = parentIds;\n\n            if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n            }\n\n            var uid = kendo.guid();\n            if (locked && !column.locked) {\n                column.locked = locked;\n            }\n\n            column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n            if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                column.uid = uid;\n            } else {\n                column.uid = uid = column.headerAttributes.id;\n            }\n\n            if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n            }\n            return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n        });\n    }\n\n    function columnParent(column, columns) {\n        var parents = [];\n        columnParents(column, columns, parents);\n        return parents[parents.length - 1];\n    }\n\n    function columnParents(column, columns, parents) {\n        parents = parents || [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (column === columns[idx]) {\n                return true;\n            } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                    parents.splice(inserted, parents.length - inserted);\n                } else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function setColumnVisibility(column, visible) {\n        setVisibility(column, visible, visible);\n    }\n\n    function setVisibility(column, visible, show) {\n        var method = show ? removeHiddenStyle : addHiddenStyle;\n        column.hidden = !visible;\n        column.attributes = method(column.attributes);\n        column.footerAttributes = method(column.footerAttributes);\n        column.headerAttributes = method(column.headerAttributes);\n    }\n\n\n    function setColumnMediaVisibility(column, visible) {\n        setColumnMatchesMedia(column);\n        var hideByMedia = column._hideByMedia;\n        setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n    }\n\n    function setColumnMatchesMedia(column) {\n        column.matchesMedia = columnMatchesMedia(column);\n    }\n\n    function columnMatchesMedia(column) {\n        return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n    }\n\n    function isCellVisible() {\n        return this.style.display !== NONE;\n    }\n\n    function isElementVisible(element) {\n        return $(element)[0].style.display !== NONE;\n    }\n\n    function isVisible(column) {\n        return visibleColumns([column]).length > 0;\n    }\n\n    function visibleColumns(columns) {\n        return grep(columns, function(column) {\n            var result = !column.hidden && column.matchesMedia !== false;\n\n            if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n            }\n            return result;\n        });\n    }\n\n    function columnsWithMedia(columns) {\n        var result = [];\n        var column;\n\n        for (var i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                    throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n            }\n\n            if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n            }\n        }\n\n        return result;\n    }\n\n    function isUndefined(value) {\n        return typeof value === \"undefined\";\n    }\n\n    function toJQuery(elements) {\n        return $(elements).map(function() { return this.toArray(); });\n    }\n\n    function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n        var lockedColumnDepth = depth(lockedColumns(columns));\n        var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n        var rowSpan = cell.rowSpan;\n        if (sourceLockedColumnsCount) {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n            } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n            }\n        } else {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n            } else {\n                cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n            }\n        }\n    }\n\n    function findColumnByField(columns, field) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field == field) {\n                return columns[i];\n            }\n        }\n    }\n\n    function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n        var sourcesDepth = depth(sources);\n        var targetDepth = depth([target]);\n\n        if (sourcesDepth > targetDepth) {\n            var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n            var rows = destination.children(\":not(.k-filter-row)\");\n            $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n        }\n\n        addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n        moveCells(leafs, columns, container, destination, action);\n    }\n\n    function updateCellIndex(thead, columns, offset) {\n        offset = offset || 0;\n\n        var position;\n        var cell;\n        var allColumns = columns;\n        columns = leafColumns(columns);\n\n        var cells = {};\n        var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        for (var idx = 0, length = columns.length; idx < length; idx++) {\n            position = columnPosition(columns[idx], allColumns);\n\n            if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row)\n                    .find(\".k-header\")\n                    .filter(filter);\n            }\n\n            cell = cells[position.row].eq(position.cell);\n            cell.attr(kendo.attr(\"index\"), offset + idx);\n        }\n\n\n        return columns.length;\n    }\n\n    function depth(columns) {\n        var result = 1;\n        var max = 0;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n                if (temp > max) {\n                    max = temp;\n                }\n            }\n        }\n        return result + max;\n    }\n\n    function moveCells(leafs, columns, container, destination, action) {\n        var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n        var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n\n        var t = $();\n        var sourceIndex = sourcePosition.cell;\n        var idx;\n\n        for (idx = 0; idx < leafs.length; idx++) {\n            t = t.add(ths.eq(sourceIndex + idx));\n        }\n\n        destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n        var children = [];\n        for (idx = 0; idx < leafs.length; idx++) {\n            if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            moveCells(children, columns, container, destination, action);\n        }\n    }\n\n    function columnPosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           cellCounts[row]++;\n        }\n        return result;\n    }\n    function findParentColumnWithChildren(columns, index, source, rtl) {\n        var target;\n        var locked = !!source.locked;\n        var targetLocked;\n\n        do {\n            target = columns[index];\n            index += rtl ? 1 : -1;\n            targetLocked = !!target.locked;\n        } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n        return target;\n    }\n\n    function decorateCellWithClass(html) {\n        let element = html;\n        let classes = element.match(/class=[\"][^\"]+/g);\n        if (classes) {\n            const cssClasses = classes[0].split('\\\"').pop();\n            element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n        } else {\n            element = element.replace(\"<td\",\"<td class='k-table-td'\");\n        }\n\n        return element;\n    }\n\n    function findReorderTarget(columns, target, source, before, masterColumns) {\n        if (target.columns) {\n            target = target.columns;\n            return target[before ? 0 : target.length - 1];\n        } else {\n            var parent = columnParent(target, columns);\n            var parentColumns;\n\n            if (parent) {\n                parentColumns = parent.columns;\n            } else {\n                parentColumns = columns;\n            }\n\n            var index = inArray(target, parentColumns);\n            if (index === 0 && before) {\n                index++;\n            } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                index--;\n            } else if (index > 0 || (index === 0 && !before)) {\n                index++;\n            }\n\n            var sourceIndex = inArray(source, parentColumns);\n            target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n            var targetIndex = inArray(target, masterColumns);\n            if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n            }\n\n            if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n            }\n        }\n        return null;\n    }\n\n    function columnVisiblePosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           if (!columns[idx].hidden) {\n               cellCounts[row]++;\n           }\n        }\n        return result;\n    }\n\n    function flatColumnsInDomOrder(columns) {\n        var result = flatColumns(lockedColumns(columns));\n        return result.concat(flatColumns(nonLockedColumns(columns)));\n    }\n\n    function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n        var column = flatColumns[sourceIndex];\n        var target = flatColumns[targetIndex];\n\n        var parent = columnParent(column, columns);\n        columns = parent ? parent.columns : columns;\n\n        return inArray(target, columns);\n    }\n\n    function flatColumns(columns) {\n        var result = [];\n        var children = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n\n        }\n        if (children.length) {\n            result = result.concat(flatColumns(children));\n        }\n        return result;\n    }\n\n    function hiddenLeafColumnsCount(columns) {\n        var counter = 0;\n        var column;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            column = columns[idx];\n\n            if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n            } else if (column.hidden) {\n                counter++;\n            }\n        }\n        return counter;\n    }\n\n    function sumWidths(cols) {\n        var width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function columnsWidth(cols) {\n        var colWidth, width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            colWidth = cols[idx].style.width;\n            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function removeRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        var rowSpan;\n        for (var idx = 0; idx < cells.length; idx++) {\n            rowSpan = cells[idx].rowSpan;\n            if (rowSpan > 1) {\n                cells[idx].rowSpan = (rowSpan - count) || 1;\n            }\n        }\n    }\n\n    function addRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            cells[idx].rowSpan += count;\n        }\n    }\n\n    function removeEmptyRows(container) {\n        var rows = container.find(\"tr:not(.k-filter-row)\");\n\n        var emptyRowsCount = rows.filter(function() {\n            return !$(this).children().length;\n        }).remove().length;\n\n        var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n            }\n        }\n        return rows.length - emptyRowsCount;\n    }\n\n    function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n        var idx, row, length, children = [];\n\n        for (idx = 0, length = columns.length; idx < length; idx++) {\n            row = rows[rowIndex] || [];\n            row.push(cells.eq(offset + idx));\n            rows[rowIndex] = row;\n\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n        }\n    }\n\n    function setLeftAndRightStyles(element, left, right) {\n        element.css({\n            \"left\": left,\n            \"right\": right\n        });\n    }\n\n    function createColumnAttribute(column, attribute, property) {\n        column[attribute] = column[attribute] || {};\n        column[attribute][property] = column[attribute][property] || \"\";\n    }\n\n    function addColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        if (column[attribute][property] !== \"\") {\n            column[attribute][property] += \" \" + value;\n        } else {\n            column[attribute][property] = value;\n        }\n    }\n\n    function removeColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        column[attribute][property] = column[attribute][property].replace(value, \"\");\n    }\n\n    function lockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked;\n        });\n    }\n\n    function nonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked;\n        });\n    }\n\n    function stickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked;\n        });\n    }\n\n    function visibleStickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleNonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLeafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push(columns[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleLeafExportColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push({\n                    field: columns[idx].field,\n                    width: columns[idx].width,\n                    values: columns[idx].values\n                });\n            }\n        }\n\n        return result;\n    }\n\n    function childColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleChildColumns(columns) {\n        var result = childColumns(columns);\n\n        result = result.filter(function(e) {\n            return !e.hidden;\n        });\n\n        return result;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function getColumnsFields(columns) {\n        var result = [];\n        columns = leafColumns(columns);\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n            } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n            }\n        }\n        return result;\n    }\n\n    function editField(column) {\n        return {\n            field: column.field,\n            title: column.title,\n            format: column.format,\n            editor: column.editor,\n            values: column.values,\n            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n            label: column.title || column.field || \"\"\n        };\n    }\n\n    function leafDataCells(container) {\n        var rows = container.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        var cells = $();\n        if (rows.length > 1) {\n            cells = rows.find(\"th\")\n                .filter(filter)\n                .filter(function() { return this.rowSpan > 1; });\n        }\n\n        cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n        var indexAttr = kendo.attr(\"index\");\n        cells.sort(function(a, b) {\n            a = $(a);\n            b = $(b);\n\n            var indexA = a.attr(indexAttr);\n            var indexB = b.attr(indexAttr);\n\n            if (indexA === undefined$1) {\n                indexA = $(a).index();\n            }\n            if (indexB === undefined$1) {\n                indexB = $(b).index();\n            }\n\n            indexA = parseInt(indexA, 10);\n            indexB = parseInt(indexB, 10);\n            return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n        });\n\n        return cells;\n    }\n\n    function parentColumnsCells(cell) {\n        var container = cell.closest(\"table\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row);\n        if (level > 0) {\n            var parent = headerRows.eq(level - 1);\n            var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return !$(this).attr(\"rowspan\");\n            });\n\n            var offset = 0;\n            var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return this.colSpan > 1;\n            });\n\n            for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n            }\n\n            index += Math.max(offset - 1, 0);\n\n            offset = 0;\n            for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n                if (parentCell.attr(\"data-colspan\")) {\n                    offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                    offset += 1;\n                }\n                if (index >= idx && index < offset) {\n                    result = parentColumnsCells(parentCell).add(result);\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    function childColumnsCells(cell) {\n        var container = cell.closest(\"thead\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row) + cell[0].rowSpan;\n        var colSpanAttr = kendo.attr(\"colspan\");\n\n        if (level <= headerRows.length - 1) {\n            var child = row.next();\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var idx;\n\n            prevCells = prevCells.filter(function() {\n                return !this.rowSpan || this.rowSpan === 1;\n            });\n\n            var offset = 0;\n\n            for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n            }\n\n            var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n            idx = 0;\n\n            while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n                if (value > 1) {\n                    colSpan -= value - 1;\n                }\n                idx++;\n            }\n        }\n\n        return result;\n    }\n\n    function appendContent(tbody, table, html, empty, size) {\n        var placeholder,\n            tmp = tbody;\n\n        // necessary for AngularJS to cleanup its guts.\n        if (empty) {\n            tbody.empty();\n        }\n\n        if (tbodySupportsInnerHtml) {\n            tbody[0].innerHTML = html;\n        } else {\n            placeholder = document.createElement(DIV);\n            placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n            $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n            tbody = placeholder.firstChild.firstChild;\n            table[0].replaceChild(tbody, tmp[0]);\n            tbody = $(tbody);\n        }\n        return tbody;\n    }\n\n    function addHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style;\n\n        if (!style) {\n            style = \"display:none\";\n        } else {\n            style = style.replace(/display:[^;]*/i, \"display:none\");\n            if (!style.match(/display:/i)) {\n                style = style.replace(/(.*)?/i, \"display:none;$1\");\n            }\n        }\n\n        return extend({}, attr, { style: style });\n    }\n\n    function hasHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style || \"\";\n\n        return style.indexOf(\"display:none\") !== -1;\n    }\n\n    function removeHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style;\n\n        if (style) {\n            attr.style = style.replace(/(display\\s*:\\s*none\\s*;?)*/ig, \"\");\n        }\n\n        return attr;\n    }\n\n    function normalizeCols(table, visibleColumns, hasDetails, groups) {\n        var colgroup = table.find(\">colgroup\"),\n            width,\n            cols = map(visibleColumns, function(column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}\"/>', typeof width === STRING ? width : width + PX);\n                    }\n\n                    return \"<col />\";\n                });\n\n        if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n            cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n        }\n\n        if (colgroup.length) {\n            colgroup.remove();\n        }\n\n        colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        table.prepend(colgroup);\n    }\n\n    function normalizeHeaderCells(container, columns) {\n        var lastIndex = 0;\n        var idx , len;\n        var th = container.find(\"th:not(.k-group-cell)\");\n\n        for (idx = 0, len = columns.length; idx < len; idx ++) {\n            if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex ++;\n            }\n        }\n    }\n\n    function convertToObject(array) {\n        var result = {},\n            item,\n            idx,\n            length;\n\n        for (idx = 0, length = array.length; idx < length; idx++) {\n            item = array[idx];\n            result[item.value] = item.text;\n        }\n\n        return result;\n    }\n\n    function formatGroupValue(value, format, columnValues, encoded) {\n        var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n            groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n        groupValue = groupValue != null ? groupValue : \"\";\n\n        return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n    }\n\n    function setCellVisibility(cells, index, visible) {\n        var pad = 0,\n            state,\n            cell = cells[pad];\n\n        while (cell) {\n            state = visible ? true : cell.style.display !== NONE;\n\n            if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : NONE;\n                break;\n            }\n\n            cell = cells[++pad];\n        }\n    }\n\n    function hideColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                    cell.find(\"col\").eq(columnIndex).remove();\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n            }\n        }\n    }\n\n    function groupRows(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            result.push(item);\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n            }\n        }\n\n        return result;\n    }\n\n    function groupFooters(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n            }\n\n            result.push(item.aggregates);\n        }\n\n        return result;\n    }\n\n    function showColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row, columns;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                    normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n            }\n        }\n    }\n\n    function updateColspan(toAdd, toRemove, num) {\n        num = num || 1;\n\n        var item, idx, length;\n        for (idx = 0, length = toAdd.length; idx < length; idx++) {\n            item = toAdd.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n            item = toRemove.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n        }\n    }\n\n    function tableWidth(table) {\n        var idx, length, width = 0;\n        var cols = table.find(\">colgroup>col\");\n\n        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n            width += parseInt(cols[idx].style.width, 10);\n        }\n\n        return width;\n    }\n    var Grid = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options, events) {\n            var that = this;\n\n            options = isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (events) {\n                that._events = events;\n            }\n\n            isRtl = kendo.support.isRtl(element);\n            CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n            that._element();\n\n            that._ariaId();\n\n            that._columns($.extend(true, [], that.options.columns));\n\n            if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises)\n                    .then(function() {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n            } else {\n                that._continueInit();\n            }\n        },\n\n        _continueInit: function() {\n            var that = this;\n\n            that._dataSource();\n\n            that._stickyColumns();\n\n            that._tbody();\n\n            that._thead();\n\n            that._rowResizing();\n\n            that._groupable();\n\n            that._toolbar();\n\n            that._pageable();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._clipboard();\n\n            that._details();\n\n            that._editable();\n\n            that._attachCustomCommandsEvent();\n\n            that._adaptiveColumns();\n\n            that._minScreenSupport();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._group = that._groups() > 0;\n                that._footer();\n            }\n\n            if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n           CHANGE,\n           \"dataBinding\",\n           \"cancel\",\n           DATABOUND,\n           DETAILEXPAND,\n           DETAILCOLLAPSE,\n           DETAILINIT,\n           FILTERMENUINIT,\n           FILTERMENUOPEN,\n           COLUMNMENUINIT,\n           COLUMNMENUOPEN,\n           EDIT,\n           BEFOREEDIT,\n           SAVE,\n           REMOVE,\n           SAVECHANGES,\n           CELLCLOSE,\n           ROWRESIZE,\n           COLUMNRESIZE,\n           COLUMNREORDER,\n           COLUMNSHOW,\n           COLUMNHIDE,\n           COLUMNLOCK,\n           COLUMNUNLOCK,\n           COLUMNSTICK,\n           COLUMNUNSTICK,\n           ROWREORDER,\n           NAVIGATE,\n           \"page\",\n           \"sort\",\n           \"filter\",\n           \"group\",\n           \"groupExpand\",\n           \"groupCollapse\",\n           \"kendoKeydown\"\n        ],\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var scrollableContent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            that._pageable();\n\n            that._thead();\n\n            that._rowResizing();\n\n            if (scrollable) {\n                if (scrollable.virtual) {\n                    scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                    kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                    scrollableContent = that.tbody;\n                    kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n            }\n\n            if (that.options.groupable) {\n                that._groupable();\n            }\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n            }\n\n            if (that.options.navigatable) {\n                that._navigatable();\n            }\n\n            if (that.options.selectable) {\n                that._selectable();\n            }\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._footer();\n            }\n        },\n\n        options: {\n            name: \"Grid\",\n            columns: [],\n            toolbar: null,\n            autoBind: true,\n            filterable: false,\n            scrollable: true,\n            sortable: false,\n            selectable: false,\n            allowCopy: false,\n            navigatable: false,\n            pageable: false,\n            persistSelection: false,\n            editable: false,\n            encodeTitles: false,\n            groupable: false,\n            rowTemplate: \"\",\n            altRowTemplate: \"\",\n            search: false,\n            noRecords: false,\n            dataSource: {},\n            height: null,\n            resizable: false,\n            reorderable: false,\n            columnMenu: false,\n            detailTemplate: null,\n            columnResizeHandleWidth: 3,\n            size: \"medium\",\n            mobile: \"\",\n            loaderType: \"loadingPanel\",\n            messages: {\n                editable: {\n                    cancelDelete: CANCELDELETE,\n                    confirmation: DELETECONFIRM,\n                    confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                    create: defaultCommands.create.text,\n                    cancel: defaultCommands.cancel.text,\n                    save: defaultCommands.save.text,\n                    destroy: defaultCommands.destroy.text,\n                    edit: defaultCommands.edit.text,\n                    update: defaultCommands.update.text,\n                    canceledit: defaultCommands.canceledit.text,\n                    excel: defaultCommands.excel.text,\n                    pdf: defaultCommands.pdf.text,\n                    search: defaultCommands.search.text\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\",\n                toolbarLabel: \"grid toolbar\",\n                groupingHeaderLabel: \"grid grouping header\",\n                filterCellTitle: \"filter cell\"\n            },\n            width: null\n        },\n\n        destroy: function() {\n            var that = this,\n                element,\n                reorderableInstance;\n\n            that._angularItems(\"cleanup\");\n            that._destroyColumnAttachments();\n\n            Widget.fn.destroy.call(that);\n\n            if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n                this._navigatableTables = null;\n                this._headertables = null;\n            }\n\n            if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n            }\n\n            if (that.pager && that.pager.element) {\n                that.pager.destroy();\n            }\n\n            if (that.timer) {\n                clearTimeout(that.timer);\n            }\n\n            if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n            }\n\n            if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n            }\n\n            if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n            }\n\n            that.pager = null;\n\n            that._destroyGroupable();\n\n            reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                    that.wrapper.off(\"keydown\", that.copyHandler);\n                    that.unbind(that.copyHandler);\n                }\n                if (that.updateClipBoardState) {\n                    that.unbind(that.updateClipBoardState);\n                    that.updateClipBoardState = null;\n                }\n                if (that.clearAreaHandler) {\n                    that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n            }\n\n            that.selectable = null;\n\n            if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                    if (that._resizeHandleDocumentClickHandler) {\n                        $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                    that._resizeUserEvents.destroy();\n                    that._resizeUserEvents = null;\n                }\n                that.resizable = null;\n            }\n\n            that._destroyRowResizing();\n\n            that._destroyVirtualScrollable();\n\n            if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n            }\n\n            if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n                that._lockedContentUserEvents = null;\n            }\n\n            that._destroyEditable();\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                           .unbind(PROGRESS, that._progressHandler)\n                           .unbind(ERROR, that._errorHandler)\n                           .unbind(SORT, that._clearSortClasses);\n\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.table)\n                .add(that.thead)\n                .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n            if (that.content) {\n                element = element\n                        .add(that.content)\n                        .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n            }\n\n            if (that.lockedHeader) {\n                that._removeLockedContainers();\n            }\n\n            if (that.pane) {\n                that.pane.destroy();\n            }\n\n            if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n            }\n\n            if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n            }\n\n            that._detachColumnMediaResizeHandler();\n\n            if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n            }\n\n            that._draggableInstance = null;\n\n            if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            that._draggableRowsInstance = null;\n\n            element.off(NS);\n\n            kendo.destroy(that.wrapper);\n\n            that.rowTemplate =\n            that.altRowTemplate =\n            that.lockedRowTemplate =\n            that.lockedAltRowTemplate =\n            that.detailTemplate =\n            that.footerTemplate =\n            that.groupFooterTemplate =\n            that.lockedGroupFooterTemplate =\n            that.noRecordsTemplate = null;\n\n            that.scrollables =\n            that.thead =\n            that.tbody =\n            that.element =\n            that.table =\n            that.content =\n            that.footer =\n            that.wrapper =\n            that.lockedTable =\n            that.lockedContent =\n            that.lockedHeader =\n            that.lockedFooter =\n            that._groupableClickHandler =\n            that._groupRows =\n            that._setContentWidthHandler = null;\n        },\n\n        getOptions: function() {\n            var options = this.options;\n            options.dataSource = null;\n\n            var result = extend(true, {}, this.options);\n            result.columns = kendo.deepExtend([], this.columns);\n\n            var dataSource = this.dataSource;\n\n            var initialData = dataSource.options.data && dataSource._data;\n            dataSource.options.data = null;\n\n            result.dataSource = $.extend(true, {}, dataSource.options);\n\n            dataSource.options.data = initialData;\n\n            result.dataSource.data = initialData;\n            result.dataSource.page = dataSource.page();\n            result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n            result.dataSource.pageSize = dataSource.pageSize();\n            result.dataSource.sort = dataSource.sort();\n            result.dataSource.group = dataSource.group();\n            result.dataSource.aggregate = dataSource.aggregate();\n\n            if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n            }\n\n            if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n            }\n\n            result.$angular = undefined$1;\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            var currentOptions = this.getOptions();\n            kendo.deepExtend(currentOptions, options);\n            if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n            } else {\n              if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n              }\n            }\n            var wrapper = this.wrapper;\n            var events = this._events;\n            var element = this.element;\n\n            this.destroy();\n            this.options = null;\n            if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n            }\n            if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n            }\n            element.empty();\n\n            this.init(element, currentOptions, events);\n            this._setEvents(currentOptions);\n        },\n\n        items: function() {\n            if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n            } else {\n                return this._items(this.tbody);\n            }\n        },\n\n        _items: function(container, includeGroupRows) {\n            return container.children().filter(function() {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n            });\n        },\n\n        dataItems: function() {\n            var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n            if (this.lockedContent) {\n                var n = dataItems.length, tmp = new Array(2 * n);\n                for (var i = n; --i >= 0;) {\n                    tmp[i] = tmp[i + n] = dataItems[i];\n                }\n                dataItems = tmp;\n            }\n\n            return dataItems;\n        },\n\n        _destroyColumnAttachments: function() {\n            var that = this;\n\n            that.resizeHandle = null;\n\n            if (!that.thead) {\n                return;\n            }\n\n            this.angular(\"cleanup\", function() {\n                return { elements: that.thead.get() };\n            });\n\n            that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                    filterMenu.destroy();\n                }\n\n                if (sortable) {\n                    sortable.destroy();\n                }\n\n                if (columnMenu) {\n                    columnMenu.destroy();\n                }\n            });\n        },\n\n        _attachCustomCommandsEvent: function() {\n            var that = this,\n                columns = leafColumns(that.columns || []),\n                command,\n                idx,\n                length;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                    attachCustomCommandEvent(that, that.wrapper, command);\n                }\n            }\n        },\n\n        _aria: function() {\n            var wrapper = this.wrapper,\n                gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                table = this.table,\n                toolbar = wrapper.find(\".k-grid-toolbar\"),\n                groupingHeader = wrapper.find(\".k-grouping-header\"),\n                gridId = table.attr(ID),\n                tableTabindex = table.attr(TABINDEX),\n                tbodyId, headerGroupId, footerGroupId, tableOwned,\n                numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                trailingColumns = this._trailingColumns(),\n                virtual = this.virtualScroll,\n                pageable = this.options.pageable,\n                rowsCount;\n\n            table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n            if (gridRole) {\n                table.attr(ROLE, gridRole);\n            }\n\n            table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n            table.find(TR).attr(ROLE, ROW);\n            table.find(\"th\").attr(ROLE, COLUMNHEADER);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else if (this._hasDetails()) {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                } else {\n                    rowsCount = numberOfFixedRows + this.dataSource.total();\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            } else if (this._hasDetails()) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            }\n\n            if (rowsCount && rowsCount > 0) {\n                this._ariaRowIndex();\n            }\n\n            if ((virtual && virtual.columns) ||\n                (!table.attr(ARIA_COLCOUNT) &&\n                    (table.find(\"td:hidden\").length > 0 ||\n                    wrapper.find(\".k-grid-content-locked td:hidden\").length > 0))) {\n                        table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                        this._ariaColumnIndex();\n            }\n\n            if (!gridId) {\n                gridId = kendo.guid();\n                table.attr(ID, gridId);\n            }\n\n            if (this.pager) {\n                this.pager.element.attr(ARIA_CONTROLS, gridId);\n            }\n\n            toolbar.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.toolbarLabel,\n                \"aria-controls\": gridId\n            });\n\n            groupingHeader.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.groupingHeaderLabel,\n                \"aria-controls\": gridId\n            });\n\n            headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n            footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n            if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                this._ariaLockedContent();\n            }\n\n            if (!!headerGroupId || !!footerGroupId) {\n                tbodyId = this.tbody.attr(ID) || kendo.guid();\n                tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                this.tbody.attr(ID, tbodyId);\n                table.attr(ARIA_OWNS, tableOwned);\n            }\n\n            if (this.options.groupable) {\n                this._ariaGroupTitles();\n            }\n        },\n\n        _ariaColumnIndex: function() {\n            var trailingColumns = this._trailingColumns(),\n                dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                firstIndex = Number.MAX_VALUE,\n                lastIndex = 0,\n                lockedLastIndex = 0,\n                previousVirtual = 0,\n                nextVirtual = 0,\n                previousIndex, i, cells, dataIndex, cellsIndex,\n                eachHeaderCell = function(j, cell) {\n                    var current = cell.getAttribute(\"data-index\"),\n                        currentIndex = Number(current),\n                        lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                    if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                        firstIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                        lockedLastIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                        lastIndex = currentIndex;\n                    }\n\n                    if (current !== null) {\n                        cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                        previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                    } else {\n                        cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                        previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                    }\n                };\n\n            if (dataVirtual.length === 2) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            }\n\n            for (i = 0; i < lockedHeaderRows.length; i++) {\n                previousIndex = 0;\n                lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i < headerRows.length; i++) {\n                previousIndex = 0;\n                headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i <= lockedLastIndex; i++) {\n                dataIndex = i + trailingColumns;\n                cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n\n            for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                if (previousVirtual === 0 ) {\n                    cellsIndex = i + 1;\n                } else {\n                    cellsIndex = i - previousVirtual + 2;\n                }\n\n                dataIndex = firstIndex + i + trailingColumns;\n\n                cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n        },\n\n        _ariaGroupTitles: function() {\n            var that = this,\n                groups = that.dataSource.group(),\n                ths = that.wrapper.find(\".k-grid-header th\");\n\n            ths.each(function(i, el) {\n                if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                        el.setAttribute(\"title\", that.options.messages.groupHeader);\n                }\n            });\n\n            if (groups && groups.length > 0) {\n                groups.forEach(function(group) {\n                    var field = group.field,\n                        el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                    if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                        el.attr(\"title\", that.options.messages.ungroupHeader);\n                    }\n                });\n            }\n        },\n\n        _ariaHeaderFooter: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                groupId = \"\",\n                rowGroup;\n\n            if (table.length > 0) {\n                rowGroup = table.find(group + \", tbody\");\n                groupId = rowGroup.attr(ID) || kendo.guid();\n\n                table.attr(ROLE, NONE);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(el).attr(ROLE, role);\n                rowGroup.attr({\n                    role: ROWGROUP,\n                    id: groupId\n                });\n            }\n\n            if (lockedTable.length > 0) {\n                that._ariaLocked(type, group, el, role);\n            }\n\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            return groupId;\n        },\n\n        _ariaId: function() {\n            var id = this.element.attr(ID) || \"aria\";\n\n            if (id) {\n                this._cellId = id + \"_active_cell\";\n            }\n        },\n\n        _ariaLocked: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                rows = table.find(TR),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n\n            lockedTable.find(el).attr(ROLE, role);\n\n            rows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaLockedContent: function() {\n            var that = this,\n                table = that.table,\n                tableRows = table.find(TR),\n                lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(\"tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n            tableRows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaAddHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                table = this.table,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                this._ariaColumnIndex();\n\n                table.attr(ARIA_COLCOUNT, leafColsCount);\n            }\n        },\n\n        _ariaRemoveHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                this.table.removeAttr(ARIA_COLCOUNT);\n            }\n        },\n\n        _ariaRowIndex: function() {\n            var headerRows = this.thead.find(\">tr\"),\n                numberOfHeaderRows = headerRows.length,\n                bodyRows = this.tbody.find(\">tr\"),\n                footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                totalNumberOfItems = this.dataSource.total(),\n                previousItems = this.dataSource.skip() || 0,\n                currentIndex = 1,\n                previousMaster = false,\n                i, currentRow;\n\n            if (this._hasDetails()) {\n                totalNumberOfItems = totalNumberOfItems * 2;\n                previousItems = previousItems * 2;\n            }\n\n            for (i = 0; i < numberOfHeaderRows; i++) {\n                headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n\n            currentIndex = numberOfHeaderRows + previousItems;\n\n            for (i = 0; i < bodyRows.length; i++) {\n                currentRow = bodyRows.eq(i);\n\n                if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                    if (previousMaster) {\n                        currentIndex = currentIndex + 2;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                    }\n\n                    previousMaster = true;\n                } else {\n                    currentIndex = currentIndex + 1;\n                    previousMaster = false;\n                }\n\n                currentRow.attr(ARIA_ROWINDEX, currentIndex);\n            }\n\n            currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n            for (i = 0; i < footerRows.length; i++) {\n                footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n        },\n\n        _cellsIds: function(elements, prefix, i) {\n            var ownedCells = [];\n\n            elements.each(function(j, cell) {\n                var id = cell.getAttribute(ID) || prefix + \"_\" + i + \"_\" + j;\n\n                cell.setAttribute(ID, id);\n\n                ownedCells.push(id);\n            });\n\n            return ownedCells;\n        },\n\n        _trailingColumns: function() {\n            return this._groups() + (this._hasDetails() ? 1 : 0);\n        },\n\n        _element: function() {\n            var that = this,\n                table = that.element;\n\n            if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                    table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                    table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                    table = $(\"<table />\").appendTo(that.element);\n                }\n            }\n\n            table.addClass(\"k-grid-table k-table\");\n            table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n            that.table = table;\n\n            that._wrapper();\n        },\n\n        _createResizeHandle: function(container, th) {\n            var that = this;\n            var indicatorWidth = that.options.columnResizeHandleWidth;\n            var scrollable = that.options.scrollable;\n            var resizeHandle = that.resizeHandle;\n            var halfResizeHandle = (indicatorWidth * 3) / 2;\n            var rtlCorrection = 0;\n            var headerWrap;\n            var ieCorrection;\n            var webkitCorrection;\n            var firefoxCorrection;\n            var leftMargin;\n            var invisibleSpace;\n            var leftBorderWidth;\n            var scrollLeft;\n            var left;\n            var top;\n\n            if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n            }\n\n            if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n            }\n\n            scrollLeft = kendo.scrollLeft(container);\n\n            if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeft = scrollLeft * -1;\n            }\n\n            leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n            left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n            if (!isRtl) {\n                left += th[0].offsetWidth;\n           } else {\n                if (scrollable) {\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = -rtlCorrection;\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n            }\n\n            top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n            resizeHandle.css({\n                top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n            })\n            .data(\"th\", th)\n            .show();\n\n            resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n            });\n        },\n\n        _positionColumnResizeHandle: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                var th = $(this);\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                    return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                    // resizing multi-column headers is not supported\n                    return;\n                }\n\n                that._createResizeHandle(th.closest(DIV), th);\n            });\n        },\n\n        _resizeHandleDocumentClick: function(e) {\n            if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n            }\n\n            $(document).off(e);\n\n            this._resetResizeHandleHeader();\n            this._hideResizeHandle();\n        },\n\n        _resetResizeHandleHeader: function() {\n            var th;\n\n            if (!this.resizeHandle) {\n                return;\n            }\n\n            th = $(this.resizeHandle).data(\"th\");\n\n            if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n            }\n        },\n\n        _hideResizeHandle: function() {\n            if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\")\n                    .removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                    this.resizeHandle.off(NS).remove();\n                    this.resizeHandle = null;\n                } else {\n                    this.resizeHandle.hide();\n                }\n            }\n        },\n\n        _positionColumnResizeHandleTouch: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function(e) {\n                    var th = $(e.target);\n\n                    e.preventDefault();\n\n                    if (that.resizeHandle) {\n                        that.resizeHandle.data(\"th\")\n                            .removeClass(\"k-column-active\");\n                        that._resetResizeHandleHeader();\n                    }\n\n                    th.addClass(\"k-column-active\");\n\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                    th.find(DOT + ORDER_CLASS).hide();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                    th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                    that._createResizeHandle(th.closest(DIV), th);\n\n                    if (!that._resizeHandleDocumentClickHandler) {\n                        that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                    }\n\n                    $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n            });\n        },\n\n        resizeColumn: function(column, columnWidth) {\n            var that = this;\n            var isLocked = !!column.locked;\n            var isHidden = !!column.hidden;\n            var options = this.options;\n            var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n            var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n            var contentTable = isLocked ? that.lockedTable : that.table;\n            var footer = that.footer || $();\n            var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n            var columnMinWidth = column.minResizableWidth || 10;\n            var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n            var col;\n\n            if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n            }\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            if (options.scrollable) {\n\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n            } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n            }\n\n            if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                    if (width < 0) {\n                        width = columnWidth;\n                    }\n                    constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                    col.css('width', width);\n\n                    if (gridWidth) {\n                        if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                        } else {\n                            width = gridWidth + (columnWidth - column.width);\n                        }\n\n                        contentTable\n                            .add(header)\n                            .add(footer)\n                            .css('width', width);\n\n                        if (!isLocked) {\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n\n            that._scrollVirtualWrapperOnColumnResize();\n            } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n            }\n\n            column.width = columnWidth;\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options,\n                container,\n                columnStart,\n                columnWidth,\n                columnMinWidth,\n                gridWidth,\n                isMobile = this._isMobile,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                isLocked,\n                col, th;\n\n            if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                    that._positionColumnResizeHandleTouch(container);\n                } else {\n                    that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                    handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                    hint: function(handle) {\n                        return $('<div class=\"k-grid-resize-indicator\" />').css({\n                            height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                        });\n                    },\n                    start: function(e) {\n                        th = $(e.currentTarget).data(\"th\");\n\n                        if (isMobile) {\n                            that._hideResizeHandle();\n                        }\n\n                        var header = th.closest(\"table\"),\n                            index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                        isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                        var contentTable = isLocked ? that.lockedTable : that.table,\n                            footer = that.footer || $();\n\n                        if (that.footer && that.lockedContent) {\n                            footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                        }\n\n                        cursor(that.wrapper, 'col-resize');\n\n                        if (options.scrollable) {\n                            col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                        } else {\n                            col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                        }\n\n                        var columns = $.map(that.columns, function(a) {\n                            return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                        });\n\n                        columnStart = e.x.location;\n                        columnWidth = outerWidth(th);\n                        columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                        gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                        // fix broken UI in Chrome38+\n                        if (browser.webkit) {\n                            that.wrapper.addClass(\"k-grid-column-resizing\");\n                        }\n                    },\n                    resize: function(e) {\n                        var rtlMultiplier = isRtl ? -1 : 1,\n                            currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                        if (options.scrollable) {\n                            var footer;\n                            if (isLocked && that.lockedFooter) {\n                                footer = that.lockedFooter.children(\"table\");\n                            } else if (that.footer) {\n                                footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                            }\n                            if (!footer || !footer[0]) {\n                                footer = $();\n                            }\n                            var header = th.closest(\"table\");\n                            var contentTable = isLocked ? that.lockedTable : that.table;\n                            var constrain = false;\n                            var totalWidth = that.wrapper.width() - scrollbar;\n                            var width = currentWidth;\n\n                            if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                if (width < 0) {\n                                    width = currentWidth;\n                                }\n                                constrain = true;\n                            }\n\n                            if (width > 10 && width >= columnMinWidth) {\n                                col.css('width', width);\n\n                                if (gridWidth) {\n                                    if (constrain) {\n                                        width = totalWidth - scrollbar * 2;\n                                    } else {\n                                        width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                    }\n\n                                    contentTable\n                                        .add(header)\n                                        .add(footer)\n                                        .css('width', width);\n\n                                    if (!isLocked) {\n                                        that._footerWidth = width;\n                                    }\n                                }\n                            }\n\n                            that._scrollVirtualWrapperOnColumnResize();\n                        } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                            col.css('width', currentWidth);\n                        }\n                    },\n                    resizeend: function() {\n                        var newWidth = outerWidth(th),\n                            column,\n                            header;\n\n                        cursor(that.wrapper, \"\");\n\n                        if (browser.webkit) {\n                            that.wrapper.removeClass(\"k-grid-column-resizing\");\n                        }\n\n                        if (columnWidth != newWidth) {\n                            header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                            var index = th.attr(kendo.attr(\"index\"));\n                            if (!index) {\n                                index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                            }\n                            column = leafColumns(that.columns)[index];\n\n                            column.width = newWidth;\n\n                            that.trigger(COLUMNRESIZE, {\n                                column: column,\n                                oldWidth: columnWidth,\n                                newWidth: newWidth\n                            });\n\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._updateStickyColumns();\n                        }\n\n                        that._resetResizeHandleHeader();\n                        that._hideResizeHandle();\n                        th = null;\n                    }\n                });\n\n            }\n        },\n\n        // Row resizing functionality below\n        _addLockedRowResizing: function(tr) {\n            var index = tr.index();\n\n            return this.lockedTable.find(TR).eq(index)\n                .add(this.tbody.find(TR).eq(index));\n        },\n\n        _getMinRowHeight: function(row) {\n            var minHeight = 0;\n\n            row.each((i, el) => {\n                var currentMinHeight;\n\n                el.style.height = '';\n                currentMinHeight = outerHeight(el);\n\n                if (currentMinHeight > minHeight) {\n                    minHeight = currentMinHeight;\n                }\n            });\n\n            return minHeight;\n        },\n\n        _cacheRowHeight: function(rows, height) {\n            var that = this;\n\n            if (!that._cachedRowsHeight) {\n                that._cachedRowsHeight = {};\n            }\n\n            rows.each((i, el) => {\n                var uid = el.getAttribute(\"data-uid\");\n\n                that._cachedRowsHeight[uid] = height;\n            });\n        },\n\n        _clearCachedRowsHeight: function(rows) {\n            var that = this;\n\n            if (rows && that._cachedRowsHeight) {\n                rows.each((i, el) => {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    delete that._cachedRowsHeight[uid];\n                });\n            } else {\n                that._cachedRowsHeight = null;\n            }\n        },\n\n        _mapCachedRowsHeight: function(method, target) {\n            var input = this._cachedRowsHeight,\n                ds = this.dataSource,\n                output = {};\n\n            Object.keys(input).forEach((key) => {\n                var item = ds[method](key);\n\n                output[item[target]] = input[key];\n            });\n\n            this._cachedRowsHeight = output;\n        },\n\n        _rowResizerDblClick: function() {\n            var that = this,\n                resizer = that.rowResizer,\n                row = resizer.data(TR),\n                oldHeight = outerHeight(row),\n                newHeight, rows;\n\n            if (row.hasClass(SELECTED)) {\n                rows = that.select();\n            } else {\n                rows = row;\n            }\n\n            if (that.lockedTable) {\n                row = that._addLockedRowResizing(row);\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.lockedTable.find(DOT + SELECTED);\n                } else {\n                    rows = that.lockedTable.find(TR).eq(row.index());\n                }\n\n                rows.each((i, el) => {\n                    var rowIndex = el.rowIndex,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                        pairMinHeight = that._getMinRowHeight(rowPair);\n\n                    rowPair.css(HEIGHT, pairMinHeight);\n                });\n            } else {\n                rows.css(HEIGHT, AUTO);\n            }\n\n            that._clearCachedRowsHeight(rows);\n\n            resizer.removeClass(HOVER);\n            resizer.removeClass(ACTIVE);\n\n            newHeight = outerHeight(row);\n\n            if (oldHeight != newHeight) {\n                that.trigger(ROWRESIZE, {\n                    row,\n                    rows,\n                    oldHeight,\n                    newHeight\n                });\n            }\n        },\n\n        _setupRowResizer(resizer, row, top) {\n            resizer\n                .data(TR, row)\n                .css({\n                    top: top\n                });\n        },\n\n        _attachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer,\n                delay = 200,\n                isIn = false;\n\n            rowResizer\n                .on(MOUSEDOWN + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(HOVER);\n                        rowResizer.addClass(ACTIVE);\n                    }\n                })\n                .on(MOUSEUP + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(ACTIVE);\n                        rowResizer.addClass(HOVER);\n                    }\n                })\n                .on(MOUSEENTER + NS, () => {\n                    isIn = true;\n\n                    setTimeout(() => {\n                        if (isIn) {\n                            rowResizer.addClass(HOVER);\n                        }\n                    }, delay);\n                })\n                .on(MOUSELEAVE + NS, () => {\n                    isIn = false;\n                    rowResizer.removeClass(HOVER);\n                });\n        },\n\n        _getResizerTop: function(tr, container) {\n            var resizer = this.rowResizer,\n                inner = resizer.find(DOT + ROW_RESIZER)[0],\n                paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n            return tr.offset().top -\n                parseFloat(tr.css(\"marginTop\")) -\n                (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                inner.clientHeight -\n                paddingTop +\n                container.scrollTop();\n        },\n\n        _getResizerContainer: function() {\n            var container = this.tbody.closest(DIV);\n\n            if (this.lockedTable) {\n                container = container.closest(DOT + \"k-grid-container\");\n            }\n\n            return container;\n        },\n\n        _createRowResizer: function(e) {\n            var that = this,\n                tr = $(e.currentTarget),\n                targetHeight = e.currentTarget.clientHeight,\n                positionIntarget = e.offsetY,\n                rowResizer = that.rowResizer,\n                previousRow = tr.prev(TR + \":visible\"),\n                container = that._getResizerContainer(),\n                top;\n\n            if (!rowResizer) {\n                rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                container.append(rowResizer);\n                that._attachRowResizerEvents();\n\n                rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n            }\n\n            top = that._getResizerTop(tr, container);\n\n            if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                if (!previousRow.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, previousRow, top);\n                }\n            } else {\n                if (!tr.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                }\n            }\n        },\n\n        _detachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer;\n\n            rowResizer\n                .off(MOUSEDOWN + NS)\n                .off(MOUSEUP + NS)\n                .off(MOUSEENTER + NS)\n                .off(MOUSELEAVE + NS);\n        },\n\n        _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n            var that = this;\n\n            rows.each((i, el) => {\n                var minHeight;\n\n                if (multiSelectionLocked) {\n                    var rowIndex = el.rowIndex,\n                        pairNew = newHeight,\n                        pairMin = 0,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                    rowPair.each((i, r) => {\n                        var currentMinHeight;\n\n                        r.style.height = '';\n                        currentMinHeight = outerHeight(r);\n\n                        if (currentMinHeight > pairMin) {\n                            pairMin = currentMinHeight;\n                        }\n                    });\n\n                    if (pairNew < pairMin) {\n                        pairNew = pairMin;\n\n                        that._clearCachedRowsHeight(rowPair.eq(0));\n                    } else {\n                        that._cacheRowHeight(rowPair.eq(0), pairNew);\n                    }\n\n                    rowPair.css(HEIGHT, pairNew);\n                } else {\n                    el.style.height = '';\n                    minHeight = outerHeight(el);\n\n                    if (newHeight > minHeight) {\n                        el.style.height = newHeight + PX;\n\n                        that._cacheRowHeight($(el), newHeight);\n                    } else {\n                        that._clearCachedRowsHeight($(el));\n                    }\n                }\n            });\n        },\n\n        _rowResizing: function() {\n            var that = this,\n                options = that.options,\n                container, rowStart, rowHeight, tr;\n\n            if (options.resizable && options.resizable.rows === true) {\n                that.tbody\n                    .parent()\n                    .add(that.lockedTable)\n                    .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                if (that.rowResizing) {\n                    that.rowResizing.destroy();\n                }\n\n                container = that._getResizerContainer();\n\n                that.rowResizing = new ui.Resizable(container, {\n                    handle: DOT + ROW_RESIZER_WRAP,\n                    start: function(e) {\n                        tr = $(e.currentTarget).data(TR);\n\n                        if (that.lockedTable) {\n                            tr = that._addLockedRowResizing(tr);\n                        }\n\n                        tr.addClass(HOVER);\n\n                        that._detachRowResizerEvents();\n\n                        rowStart = e.y.location;\n                        rowHeight = outerHeight(tr);\n                    },\n                    resize: function(e) {\n                        var newHeight = rowHeight + e.y.location - rowStart,\n                            minHeight = 0;\n\n                        if (tr.length > 1) {\n                            minHeight = that._getMinRowHeight(tr);\n                        }\n\n                        if (newHeight < minHeight) {\n                            newHeight = minHeight;\n                        }\n\n                        tr.css('height', newHeight);\n\n                        that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                    },\n                    resizeend: function() {\n                        var newHeight = outerHeight(tr),\n                            multiSelectionLocked = false,\n                            rows;\n\n                        if (tr.hasClass(SELECTED)) {\n                            rows = that.select();\n\n                            if (tr.length > 1 && rows.length > tr.length) {\n                                rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                multiSelectionLocked = true;\n                            }\n                        } else {\n                            rows = tr;\n                        }\n\n                        that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                        tr.removeClass(HOVER);\n\n                        that.rowResizer.removeClass(ACTIVE);\n                        that.rowResizer.addClass(HOVER);\n                        that._attachRowResizerEvents();\n\n                        if (multiSelectionLocked) {\n                            rows = that.select();\n                        }\n\n                        if (rowHeight != newHeight) {\n                            that.trigger(ROWRESIZE, {\n                                row: tr,\n                                rows,\n                                oldHeight: rowHeight,\n                                newHeight\n                            });\n                        }\n\n                        tr = null;\n                    }\n                });\n            }\n        },\n\n        _draggable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                if (that._draggableInstance) {\n                    that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                    group: kendo.guid(),\n                    autoScroll: true,\n                    filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                    dragstart: function() {\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                            if (that.virtualScrollable) {\n                                kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                            } else {\n                                kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                            }\n                        });\n                    },\n                    dragend: function() {\n                        that._resetResizeHandleHeader();\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                    },\n                    drag: function() {\n                        that._hideResizeHandle();\n                    },\n                    hint: function(target) {\n                        var title = target.attr(kendo.attr(\"title\"));\n                        if (title) {\n                            title = kendo.htmlEncode(title);\n                        }\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                            .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                            .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                    }\n                }).data(\"kendoDraggable\");\n            }\n        },\n\n        _reorderable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                    that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                    draggable: that._draggableInstance,\n                    dropFilter: HEADERCELLS,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    inSameContainer: function(e) {\n                        return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            }\n        },\n\n        _reorderHeader: function(sources, target, before, container) {\n            var that = this;\n            var sourcePosition = columnPosition(sources[0], that.columns);\n            var destPosition = columnPosition(target, that.columns);\n            var action;\n            var ths;\n\n            var leafs = [];\n            for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                    leafs = leafs.concat(sources[idx].columns);\n                }\n            }\n            if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            }\n\n            var sourceLockedColumns = lockedColumns(sources).length;\n            var targetLockedColumns = lockedColumns([target]).length;\n\n            if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                    action = \"prepend\";\n                    moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                    action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                    moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                    target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                    if (target) {\n                        if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                            that._reorderHeader(leafs, target, before, that.thead);\n                        } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                            that._reorderHeader(leafs, target, before, that.lockedHead);\n                        } else {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                }\n            } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n            }\n\n            reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n        },\n\n        _reorderContent: function(sources, destination, before) {\n            var that = this;\n            var lockedRows = $();\n            var source = sources[0];\n            var visibleSources = visibleColumns(sources);\n            var sourceIndex = inArray(source, leafColumns(that.columns));\n            var destIndex = inArray(destination, leafColumns(that.columns));\n\n            var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n            var colDest = inArray(destination, visibleLeafColumns(that.columns));\n            var lockedCount = lockedColumns(that.columns).length;\n            var isLocked = !!destination.locked;\n            var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            var headerCol, footerCol, beforeVisibleColumn;\n            headerCol = footerCol = colDest;\n\n            if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                    headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                    beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                }\n                else {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find(\"colgroup\");\n                        headerCol = that.lockedHeader.find(\"colgroup\");\n                        footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                    }\n                }\n            }\n\n            if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n            }\n\n            if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n            }\n\n            if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n            if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                    if (lockedCount <= sourceIndex) {\n                        updateColspan(\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                            that.table.find(\">tbody>tr.k-grouping-row\"),\n                            sources.length\n                        );\n                    }\n                } else if (lockedCount > sourceIndex) {\n                    updateColspan(\n                        that.table.find(\">tbody>tr.k-grouping-row\"),\n                        that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                        sources.length\n                    );\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n        },\n\n        _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n            var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n            return inArray(closestVisibleColumn, visibleColumns(this.columns));\n        },\n\n        _autoFitLeafColumn: function(leafIndex) {\n            this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n        },\n\n        _hasReorderableRows: function() {\n            return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n        },\n\n        _draggableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            that._draggableRowsInstance = that.tbody.kendoDraggable({\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function(target) {\n                    var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                    if (selectable && that.select().length > 1) {\n                        hint.append(\"<span>\" + that.select().length + \" \" + that.options.messages.itemsSelected + \"</span>\");\n                    } else {\n                        var clone = target.closest(ITEMROW).clone();\n                        clone.find(\"td.k-command-cell\").remove();\n                        clone.find(\"td\").each(function(index, elm) {\n                            hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                        });\n                    }\n\n                    return hint;\n                }\n            }).data(\"kendoDraggable\");\n        },\n\n        _reorderableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function(sourceIndex, targetIndex) {\n                    var result = true,\n                        target = $(ITEMROW, that.content).eq(targetIndex);\n\n                    if (selectable) {\n                        result = !target.is(\".k-selected\");\n                    }\n\n                    return result;\n                },\n                inSameContainer: function(e) {\n                    if (selectable) {\n                        return !$(e.target).is(\".k-selected\");\n                    }\n\n                    return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function(reorderDropCue, dropTarget) {\n                    var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                    reorderDropCue.css({\n                        transform: \"translate(0,-50%)\",\n                        left: firstCellLeft\n                    });\n                },\n                externalDraggable: function(e) {\n                    var draggable = e.draggable;\n\n                    if (draggable) {\n                        return draggable;\n                    }\n                },\n                change: function(e) {\n                    that._triggerRowRorder(e);\n                }\n            });\n        },\n\n        _triggerRowRorder: function(e) {\n            var that = this,\n                args = {\n                    newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                    oldIndex: e.oldIndex\n                },\n                row = e.element,\n                selectable = that._checkBoxSelection ||\n                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                    rows: that.select()\n                });\n            } else {\n                args = extend(args, {\n                    row: row\n                });\n            }\n\n            if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n            }\n        },\n\n        reorderRows: function(rows, index) {\n            var that = this,\n                dataSource = that.dataSource,\n                rowsLength = that.tbody.children(ITEMROW).length,\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                items = rows.toArray().map(function(row) {\n                    return that.dataItem(row);\n                });\n\n            if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n            } else {\n                index = dataSource.indexOf(targetItem);\n            }\n\n            if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n            }\n        },\n\n        autoFitColumns: function(columns) {\n            var that = this;\n\n            columns = columns || that.columns;\n\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                    that.autoFitColumns(column.columns);\n                } else {\n                    that.autoFitColumn(column);\n                }\n            }\n        },\n\n        autoFitColumn: function(column) {\n            var that = this,\n                options = that.options,\n                columns = that.columns,\n                index,\n                th,\n                headerTable,\n                leafCols,\n                isLocked,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                col,\n                minWidth,\n                contentDiv, scrollLeft,\n                notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                menu,\n                thWidth;\n\n            //  retrieve the column object, depending on the method argument\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            leafCols = leafColumns(columns);\n            minWidth = column.minResizableWidth;\n            index = inArray(column, leafCols);\n            isLocked = column.locked;\n\n            if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n            } else {\n                headerTable = that.thead.parent();\n            }\n\n            th = headerTable.find(\"[data-index='\" + index + \"']\");\n            menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n            var contentTable = isLocked ? that.lockedTable : that.table,\n                footer = that.footer || $();\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            var footerTable = footer.find(\"table\").first();\n\n            if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n            }\n\n            // adjust column index, depending on previous hidden columns\n            for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                    break;\n                } else {\n                    if (leafCols[j].hidden) {\n                        index--;\n                    }\n                }\n            }\n\n            // get col elements\n            if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                    .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                    .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                    contentDiv = contentTable.parent();\n                    scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n            } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n            }\n\n            var tables = headerTable.add(contentTable).add(footerTable);\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n            }\n\n            var oldColumnWidth = outerWidth(th);\n\n            // reset the table and autofitted column widths\n            // if scrolling is disabled, we need some additional repainting of the table\n            col.width(\"\");\n            tables.css(\"table-layout\", \"fixed\");\n            col.width(AUTO);\n            tables.addClass(\"k-autofitting\");\n            tables.css(\"table-layout\", \"\");\n\n            thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n            // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n            var newColumnWidth = Math.ceil(Math.max(\n                thWidth,\n                outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n            )) + 1;\n\n            if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n            }\n\n            col.width(newColumnWidth);\n            column.width = newColumnWidth;\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"\");\n            }\n\n            // if all visible columns have widths, the table needs a pixel width as well\n            if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        totalWidth += parseInt(colWidth, 10);\n                    } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                        totalWidth += parseInt(cols.eq(idx).width(), 10);\n                    } else {\n                        totalWidth = 0;\n                        break;\n                    }\n                }\n\n                if (totalWidth) {\n                    tables.each(function() {\n                        this.style.width = totalWidth + PX;\n                    });\n                }\n            }\n\n            tables.removeClass(\"k-autofitting\");\n\n            if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n            }\n\n            that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n            });\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        reorderColumn: function(destIndex, column, before) {\n            var that = this,\n                parent = columnParent(column, that.columns),\n                columns = parent ? parent.columns : that.columns,\n                sourceIndex = inArray(column, columns),\n                destColumn = columns[destIndex],\n                virtualScroll = that.virtualScroll || {},\n                lockChanged,\n                isLocked = !!destColumn.locked,\n                lockedCount = lockedColumns(that.columns).length,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (sourceIndex === destIndex) {\n                return;\n            }\n\n            if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n            }\n\n            if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n            }\n\n            that._hideResizeHandle();\n\n            if (before === undefined$1) {\n                before = destIndex < sourceIndex;\n            }\n\n            var sourceColumns = [column];\n\n            that._reorderHeader(sourceColumns, destColumn, before);\n\n            if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n            }\n\n            if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n            }\n\n            if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n            }\n\n            that._reorderContent(sourceColumns, destColumn, before);\n\n            lockChanged = !!column.locked;\n            lockChanged = lockChanged != isLocked;\n            column.locked = isLocked;\n\n            columns.splice(before ? destIndex : destIndex + 1, 0, column);\n            columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n            that._updateLockedCols();\n            that._updateCols();\n            that._templates();\n\n            that._updateColumnCellIndex();\n            that._updateColumnSorters();\n\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._updateTablesWidth();\n            that._applyLockedContainersWidth();\n            that._syncLockedHeaderHeight();\n            that._syncLockedContentHeight();\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n\n            if (virtualScroll.columns) {\n                that.refresh();\n            }\n\n            if (!lockChanged) {\n                return;\n            }\n\n            if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                    column: column\n                });\n            } else {\n                that.trigger(COLUMNUNLOCK, {\n                    column: column\n                });\n            }\n        },\n\n        _updateColumnCellIndex: function() {\n            var header;\n            var offset = 0;\n\n            if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n            }\n            updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n        },\n\n        lockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.locked || column.hidden) {\n                return;\n            }\n\n            if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n            }\n\n            var index = lockedColumns(columns).length - 1;\n            this.reorderColumn(index, column, false);\n        },\n\n        unlockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.locked || column.hidden) {\n                return;\n            }\n\n            var index = lockedColumns(columns).length;\n            this.reorderColumn(index, column, true);\n        },\n\n        stickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.sticky || column.hidden) {\n                return;\n            }\n\n            if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                    return;\n                }\n            }\n\n            column.sticky = true;\n            this._updateStickyColumns();\n        },\n\n        unstickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n            }\n\n            this._removeStickyAttributes([column]);\n            this._removeStickyStyles(stickyColumns(columns));\n\n            column.sticky = false;\n            this._updateStickyColumns();\n\n            if (this._anyStickyColumns() === 0) {\n                this._templates();\n                if (this._hasFilterRow()) {\n                    this._updateStickyFilterCells();\n                }\n            }\n        },\n\n        cellIndex: function(td) {\n            var lockedColumnOffset = 0;\n\n            if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n            }\n\n            return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container);\n\n            if (!container.is(TR) && this._editMode() !== \"popup\") {\n                container = container.closest(TR);\n            }\n\n            var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(id);\n        },\n\n        _calculateColumnIndex: function(cell) {\n            var cellIndex = this.cellIndex(cell);\n            var virtualOffset = 0;\n\n            if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n            }\n\n            return cellIndex + virtualOffset;\n        },\n\n        _editable: function() {\n            var that = this,\n                editable = that.options.editable,\n                handler = function() {\n                    var target = activeElement(),\n                        cell = that._editContainer;\n\n                    if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (that.editable.end()) {\n                            that.closeCell();\n                        } else {\n                            that._scrollVirtualWrapper();\n                        }\n                    }\n                };\n\n            if (editable) {\n                this.wrapper.addClass(\"k-editable\");\n\n                var mode = that._editMode();\n                if (mode === \"incell\") {\n                    that.table.add(that.lockedTable)\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                            var target = $(e.target);\n                            if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                e.preventDefault();\n                            }\n                        });\n\n                    if (editable.update !== false) {\n                        if (isMac) {\n                            that.wrapper\n                                .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                    // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                    // this is necessary for the \"focusout\" event to be fired\n                                    $(e.target).trigger(\"focus\");\n                                })\n                                .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                    if (!$(e.target).is(\"input\")) {\n                                        $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                    }\n                                })\n                                .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                    var editContainer = that._editContainer;\n\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                        }\n\n                        that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                            filter: \"tr:not(.k-grouping-row) > td\",\n                            allowSelection: true,\n                            tap: function(e) {\n                                var td = $(e.target),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                that._mousedownOnEditCell = false;\n\n                                if (td.hasClass(\"k-hierarchy-cell\") ||\n                                    td.hasClass(\"k-detail-cell\") ||\n                                    td.hasClass(\"k-group-cell\") ||\n                                    td.hasClass(\"k-edit-cell\") ||\n                                    td.has(\".k-grid-remove-command\").length ||\n                                    (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                    $(e.target).is(\":input\")) {\n                                    return;\n                                }\n\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        $(activeElement()).trigger(\"blur\");\n                                        that.closeCell();\n                                        that.editCell(td);\n                                    } else {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }\n                        });\n\n                        that.wrapper.on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that.timer);\n                                that.timer = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            var shouldCloseCell = true;\n\n                            if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                shouldCloseCell = false;\n                            }\n\n                            that._mousedownOnEditCell = false;\n\n                            if (shouldCloseCell) {\n                                that.timer = setTimeout(function() {\n                                    handler(e);\n                                }, 1);\n                            }\n                        });\n                    }\n                } else {\n                    if (editable.update !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            that.editRow(element.closest(TR));\n                        });\n\n                        if (that._isVirtualInlineEditable()) {\n                            that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                if (that.editable && !that.editable.end()) {\n                                    that._scrollVirtualWrapper();\n                                }\n                            });\n                        }\n                    }\n                }\n\n                if (editable.destroy !== false) {\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        var element = $(this);\n                        if (!that._belongsToGrid(element)) {\n                            return;\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.removeRow(element.closest(TR));\n                    });\n                } else {\n                    //Required for the MVC server wrapper delete button\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        if (!that._belongsToGrid($(this))) {\n                            return;\n                        }\n                        e.stopPropagation();\n\n                        if (!that._confirmation()) {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            }\n        },\n\n        editCell: function(cell) {\n            cell = $(cell);\n\n            var that = this,\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                model = that._modelForContainer(cell);\n\n            that.closeCell();\n\n            if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = cell.addClass(\"k-edit-cell\")\n                    .kendoEditable({\n                        fields: editField(column),\n                        model: model,\n                        size: that.options.size,\n                        target: that,\n                        change: function(e) {\n                            if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                    }).data(\"kendoEditable\");\n\n                var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                    that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, { container: cell, model: model });\n            }\n        },\n\n        _adjustLockedHorizontalScrollBar: function() {\n            var table = this.table,\n                content = table.parent();\n\n            var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n            this.lockedContent.height(content[0].offsetHeight - scrollbar);\n        },\n\n        _syncLockedScroll: function() {\n            this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n            }\n        },\n\n        _syncLockedContentHeight: function() {\n            if (this.lockedTable) {\n                if (!this.touchScroller) {\n                    this._adjustLockedHorizontalScrollBar();\n                }\n                this._adjustRowsHeight(this.table, this.lockedTable);\n            }\n        },\n\n        _syncLockedHeaderHeight: function() {\n            if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n            }\n        },\n\n        _syncLockedFooterHeight: function() {\n            if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n            }\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n\n                    var container = that.editView ? that.editView.element : that._editContainer;\n                    var window = that._editContainer.data(\"kendoWindow\");\n\n                    if (container) {\n                        container.off(CLICK + NS, \".k-grid-cancel-command\", that._editCancelClickHandler);\n                        container.off(CLICK + NS, \".k-grid-save-command\", that._editUpdateClickHandler);\n                    }\n\n                    that._detachModelChange();\n                    that.editable.destroy();\n                    that.editable = null;\n                    if (window) {\n                        window.destroy();\n                    }\n                    that._editContainer = null;\n                    that._destroyEditView();\n                    that._editableIsClosing = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                    if (that._editableIsClosing) {\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                    }\n                    else {\n                        that._editableIsClosing = true;\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    }\n                } else {\n                    destroy();\n                }\n            }\n            if (that._confirmDialog) {\n                that._confirmDialog.close();\n                that._confirmDialog.destroy();\n                that._confirmDialog = null;\n            }\n        },\n\n        _destroyEditView: function() {\n            if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n            }\n        },\n\n        _attachModelChange: function(model) {\n            var that = this;\n\n            that._modelChangeHandler = function(e) {\n                that._modelChange({ field: e.field, model: this });\n            };\n\n            model.bind(\"change\", that._modelChangeHandler);\n        },\n\n        _detachModelChange: function() {\n            var that = this,\n                container = that._editContainer,\n                model = that._modelForContainer(container);\n\n            if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n            }\n        },\n\n        closeCell: function(isCancel) {\n            var that = this,\n                cell = that._editContainer,\n                column,\n                tr,\n                model;\n\n            if (!cell) {\n                return;\n            }\n\n            model = that._modelForContainer(cell);\n\n            if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                return;\n            }\n\n            that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n            cell.removeClass(\"k-edit-cell\");\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n            tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n            if (that.lockedContent) {\n                that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n            }\n\n            that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n            that._displayCell(cell, column, model);\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n            if (that.lockedContent) {\n                adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n            }\n        },\n\n        _displayCell: function(cell, column, dataItem) {\n            var that = this,\n                state = { storage: {}, count: 0 },\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            cell.empty().html(tmpl(dataItem));\n\n            that.angular(\"compile\", function() {\n                return {\n                    elements: cell,\n                    data: [ { dataItem: dataItem } ]\n                };\n            });\n        },\n\n        removeRow: function(row) {\n            if (!this._confirmation(row)) {\n                return;\n            }\n\n            this._removeRow(row);\n        },\n\n        _removeRow: function(row) {\n            var that = this,\n                model,\n                modelId,\n                key,\n                schema,\n                mode = that._editMode();\n\n            if (mode !== \"incell\") {\n                that.cancelRow();\n            }\n\n            row = $(row);\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row = row.hide();\n            if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n            }\n\n            model = that._modelForContainer(row);\n\n            if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                schema = that.dataSource.options.schema;\n                if (that._selectedIds && schema && schema.model) {\n                    modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                    key = model[modelId];\n                    delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                    that.dataSource.sync();\n                }\n            } else if (mode === \"incell\") {\n                that._destroyEditable();\n            }\n        },\n\n        _editMode: function() {\n            var mode = \"incell\",\n                editable = this.options.editable;\n\n            if (editable !== true) {\n                if (typeof editable == \"string\") {\n                    mode = editable;\n                } else {\n                    mode = editable.mode || mode;\n                }\n            }\n\n            return mode;\n        },\n\n        editRow: function(row) {\n            var model;\n            var that = this;\n\n            if (row instanceof ObservableObject) {\n                model = row;\n            } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n            }\n\n            var mode = that._editMode();\n            var container;\n\n            that.cancelRow();\n\n            if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                    that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                    that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                    $(row).children(DATA_CELL).each(function() {\n                        var cell = $(this);\n                        var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        model = that._modelForContainer(cell);\n\n                        if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                            that.editCell(cell);\n                            return false;\n                        }\n                    });\n                }\n\n\n                container = that.editView ? that.editView.element : that._editContainer;\n\n                if (container) {\n                    if (!this._editCancelClickHandler) {\n                        this._editCancelClickHandler = this._editCancelClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-cancel-command\", this._editCancelClickHandler);\n\n                    if (!this._editUpdateClickHandler) {\n                        this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-save-command\", this._editUpdateClickHandler);\n                }\n            }\n        },\n\n        _editUpdateClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.saveRow();\n        },\n\n        _editCancelClick: function(e) {\n            var that = this;\n            var navigatable = that.options.navigatable;\n            var model = that.editable.options.model;\n            var container = that.editView ? that.editView.element : that._editContainer;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                return;\n            }\n\n            var currentIndex = that.items().index($(that.current()).parent());\n\n            that.cancelRow();\n\n            if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                focusTable(that.table, true);\n            }\n        },\n\n        _editFields: function(columns, model) {\n            var fields = [];\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.selectable || column.command) {\n                    continue;\n                }\n                if (isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                }\n            }\n            return fields;\n        },\n\n        _createPopupEditor: function(model) {\n            var that = this;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n            var column;\n            var command;\n            var idx;\n            var length;\n            var tmpl;\n            var updateText;\n            var cancelText;\n            var updateIconClass;\n            var cancelIconClass;\n            var tempCommand;\n            var columns = leafColumns(that.columns);\n            var attr;\n            var editMenuGuid = kendo.guid();\n            var editable = that.options.editable;\n            var template = editable.template;\n            var options = isPlainObject(editable) ? editable.window : {};\n            var settings = extend({}, kendo.Template, that.options.templateSettings);\n            var state;\n            var container;\n            var buttonsHTML;\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            options = options || {};\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable) {\n                        continue;\n                    }\n                    if (!column.command) {\n                        if (that._isMobile) {\n                            html += '<li class=\"k-item k-listgroup-item\">';\n\n                            if (isColumnEditable(column, model)) {\n                                html += '<label class=\"k-label k-listgroup-form-row\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                html += '</label>';\n                            } else {\n                                state = { storage: {}, count: 0 };\n\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                if (state.count > 0) {\n                                    tmpl = tmpl.bind(state.storage);\n                                }\n\n                                html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                html += '</label>';\n                            }\n\n                            html += \"</li>\";\n                        }\n                    } else if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            }\n\n            if (command) {\n                if (isPlainObject(command)) {\n                    if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                    }\n                    if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                    }\n\n                   if (command.attr) {\n                       attr = command.attr;\n                   }\n                }\n            }\n\n            if (!that._isMobile) {\n                buttonsHTML = '<div class=\"k-edit-buttons k-actions-start\">';\n                buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\" }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\" });\n                buttonsHTML += '</div>';\n\n                html += template ? buttonsHTML + '</div>' : '</div>';\n\n                container = that._editContainer = $(html)\n                .appendTo(that.wrapper).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.commands.edit || \"Edit\",\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                            e.sender.element.trigger(\"focus\");\n                            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                e.preventDefault();\n                                return;\n                            }\n\n                            var currentIndex = that.items().index($(that.current()).parent());\n\n                            that._editableIsClosing = true;\n                            that.cancelRow();\n                            if (that.options.navigatable) {\n                                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                focusTable(that.table, true);\n                            }\n                        }\n                    }\n                }, options));\n            } else {\n                html += \"</ul></div>\";\n                that.editView = that.pane.append(\n                    '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                        '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                            '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                            'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                            (that.options.messages.commands.edit || \"Edit\") +\n                            '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                            'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                        '</div>' +\n                        '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                            html +\n                        '</div>' +\n                    '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n            }\n\n            if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                    items: that._editFields(columns, model),\n                    buttonsTemplate: () => '',\n                    formData: model\n                }).editable;\n                that._editContainer.append(buttonsHTML);\n            } else {\n                that.editable = that._editContainer\n                .kendoEditable({\n                    fields: that._isMobile ? that._editFields(columns, model) : null,\n                    model: model,\n                    clearContainer: false,\n                    target: that\n                }).data(\"kendoEditable\");\n            }\n\n            that._openPopUpEditor();\n\n            that.trigger(EDIT, { container: container, model: model });\n        },\n\n        _openPopUpEditor: function() {\n            var that = this;\n            var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n            var windowOptions = (that.options.editable || {}).window || {};\n\n            if (!this._isMobile) {\n                if (windowEditor) {\n                    if (!windowOptions.position) {\n                        windowEditor.center();\n                    }\n\n                    windowEditor.open();\n                }\n            } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n            }\n        },\n\n        _createInlineEditor: function(row, model) {\n            var that = this;\n            var column;\n            var cell;\n            var command;\n            var fields = [];\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                    cell.attr(kendo.attr(\"container-for\"), column.field);\n                    cell.empty();\n                } else if (column.command) {\n                    command = getCommand(column.command, \"edit\");\n                    if (command) {\n                        cell.empty();\n\n                        var updateText,\n                            cancelText,\n                            updateIconClass,\n                            cancelIconClass,\n                            attr;\n\n                        if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n\n                            if (command.attr) {\n                                attr = command.attr;\n                            }\n                        }\n\n                        $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                            that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                    }\n                }\n            });\n\n            that._editContainer = row;\n            that._editContainer.addClass(\"k-grid-edit-row\");\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                size: that.options.size,\n                model: model,\n                skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                clearContainer: false\n            });\n\n            if (row.length > 1) {\n\n                adjustRowHeight(row[0], row[1]);\n                that._applyLockedContainersWidth();\n            }\n\n            that.trigger(EDIT, { container: row, model: model });\n        },\n\n        cancelRow: function(notify) {\n            var that = this,\n                container = that._editContainer,\n                model;\n\n            if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                    return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                    that._displayRow(container);\n                } else {\n                    that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n            }\n        },\n\n        saveRow: function() {\n            var that = this;\n            var container = this._editContainer;\n            var model = this._modelForContainer(container);\n            var deferred = $.Deferred();\n            var valid;\n\n            if (!container || !this.editable) {\n                return deferred.resolve().promise();\n            }\n\n            valid = that.editable && that.editable.end();\n\n            if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n            }\n\n            that._clearEditableState();\n\n            return this.dataSource.sync();\n        },\n\n        _displayRow: function(row) {\n            var that = this,\n                model = that._modelForContainer(row),\n                related,\n                newRow,\n                nextRow,\n                isSelected = row.hasClass(SELECTED),\n                isAlt = row.hasClass(\"k-alt\");\n\n            if (model) {\n\n                if (that.lockedContent) {\n                    related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                    that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: row.get() }; });\n\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                if (!row.is(\":visible\")) {\n                    newRow.hide();\n                }\n                row.replaceWith(newRow);\n\n                that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                if (related && related.length) {\n                    that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                }\n\n                var angularElements = newRow;\n                var angularData = [{ dataItem: model }];\n\n                if (related && related.length) {\n                    angularElements = newRow.add(related);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: angularElements.get(),\n                        data: angularData\n                    };\n                });\n\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                    that.select(newRow.add(related));\n                }\n\n                if (related) {\n                    adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                    kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                }\n            }\n        },\n\n        _showMessage: function(messages, row) {\n            var that = this;\n\n            if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n            }\n\n            var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                    preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                    okText: messages.confirmDelete,\n                    cancel: messages.cancelDelete\n                },\n                open: function() {\n                    if (that.content) {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    }\n                },\n                close: function() {\n                    if (that.content) {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                }\n            });\n\n            confirmDialog.result\n                .done(function() {\n                    that._removeRow(row);\n                })\n                .fail(function() {\n                    var confirmDialog = that._confirmDialog;\n\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n\n            return false;\n        },\n\n        _confirmation: function(row) {\n            var that = this,\n                editable = that.options.editable,\n                confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n            if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n            }\n\n            if (confirmation !== false && confirmation != null) {\n\n                if (typeof confirmation === FUNCTION) {\n                    confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n            }\n\n            return true;\n        },\n\n        cancelChanges: function() {\n            var that = this;\n\n            if (that._cachedRowsHeight) {\n                that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                that._shouldMapHights = true;\n            }\n\n            that.dataSource.cancelChanges();\n\n            if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function() {\n                    that.virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        saveChanges: function() {\n            var that = this;\n            var valid = that.editable && that.editable.end();\n\n            if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n            } else if (!valid) {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        addRow: function() {\n            var that = this,\n                index,\n                dataSource = that.dataSource,\n                mode = that._editMode(),\n                createAt = that.options.editable.createAt || \"\",\n                pageSize = dataSource.pageSize(),\n                view = dataSource.view() || [];\n            var createAtBottom = createAt.toLowerCase() === BOTTOM;\n            var model;\n            var virtualEditable = that._isVirtualEditable();\n\n            if ((that.editable && that.editable.end()) || !that.editable) {\n                if (mode != \"incell\") {\n                    that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                    index += view.length;\n\n                    if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                        index -= 1;\n                    }\n                }\n\n                if (index < 0) {\n                    if (dataSource.page() > dataSource.totalPages()) {\n                        index = (dataSource.page() - 1) * pageSize;\n                    } else {\n                        index = 0;\n                    }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                    that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                    that._virtualAddRow();\n                } else {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                }\n            } else {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        _editModel: function(model) {\n            var that = this;\n            var createAt = that.options.editable.createAt || \"\";\n            var mode = that._editMode();\n\n            if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                    that.editRow(row);\n                } else if (mode === \"popup\") {\n                    that.editRow(model);\n                } else if (cell.length) {\n                    that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                    //scroll the containers to the bottom\n                    that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n            }\n        },\n\n        _virtualAddRow: function() {\n            var that = this;\n            var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n            that._clearEditableState();\n\n            if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n            } else {\n                that._virtualAddRowAtTop();\n            }\n        },\n\n        _virtualAddRowAtTop: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var model;\n\n            if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n                that._editModel(model);\n                virtualScrollable.scrollToTop();\n            } else {\n                that._virtualPageToTop(function() {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        _virtualAddRowAtBottom: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var index = dataSource.total();\n            var model;\n\n            if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n\n                that._virtualPageToBottom(function() {\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            } else {\n                that._virtualPageToBottom(function() {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            }\n        },\n\n        _virtualPageToTop: function(callback) {\n            var that = this;\n\n            that._virtualPage(0, that.dataSource.take(), function() {\n                callback();\n            });\n        },\n\n        _virtualPageToBottom: function(callback) {\n            var that = this;\n            var dataSource = that.dataSource;\n            var take = dataSource.take();\n            var total = dataSource.total();\n            var skip = total > take ? (total - take) : 0;\n\n            that._virtualPage(skip, take, function() {\n                callback();\n            });\n        },\n\n        _virtualPage: function(skip, take, callback) {\n            var that = this;\n\n            if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n                that.virtualScrollable._page(skip, take, callback);\n            }\n        },\n\n        _firstEditableColumnIndex: function(container) {\n            var that = this,\n                column,\n                columns = leafColumns(that.columns),\n                idx,\n                length,\n                model = that._modelForContainer(container);\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        _clickAdd: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.addRow();\n        },\n\n        _clickCancel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.cancelChanges();\n        },\n\n        _clickExcel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveAsExcel();\n        },\n\n        _clickPdf: function(e) {\n            var that = this;\n\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            var promise = that.saveAsPDF();\n\n            if (promise) {\n                promise.done(function() {\n                    that._pdfInitialized = false;\n                });\n            }\n        },\n\n        _clickSave: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveChanges();\n        },\n\n        _searchInput: function(e) {\n            var that = this,\n                input = e.currentTarget;\n\n            clearTimeout(that._searchTimeOut);\n\n            that._searchTimeOut = setTimeout(function() {\n                that._searchTimeOut = null;\n\n                var options = that.options;\n                var searchFields = options.search ? options.search.fields : null;\n                var expression = { filters: [], logic: \"or\" };\n                var value = input.value;\n\n                if (!searchFields) {\n                    searchFields = getColumnsFields(options.columns);\n                }\n\n                if (that.dataSource.options.endless) {\n                    that.dataSource.options.endless = null;\n                    that._endlessPageSize = that.dataSource.options.pageSize;\n                }\n\n                if (value) {\n                    for (var i = 0; i < searchFields.length; i++) {\n                        that._pushExpression(expression.filters, searchFields[i], value);\n                    }\n                } else {\n                    expression = {};\n                }\n\n                that.dataSource.filter(expression);\n            }, 300);\n        },\n\n        _pushExpression: function(filters, field, value) {\n            var that = this,\n                isServerFiltering = that.dataSource.options.serverFiltering,\n                defaultOperators = {\n                    string: \"contains\",\n                    number: \"gte\",\n                    date: \"gte\",\n                    enums: \"eq\",\n                    boolean: \"eq\"\n                },\n                name = field.name || field,\n                operator = field.operator,\n                modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                fieldInfo = modelInfo && modelInfo[name],\n                parseFn = fieldInfo && fieldInfo.parse,\n                expression = {\n                    field: name,\n                    operator: operator || defaultOperators.string,\n                    value: value\n                };\n\n            if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                    operator: operator || defaultOperators[fieldInfo.type],\n                    value: parseFn(value)\n                });\n            }\n\n            if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n            }\n\n            filters.push(expression);\n        },\n\n        _toolbar: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                toolbar = that.options.toolbar,\n\n                container, items;\n\n            if (toolbar) {\n                that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                that._cancelClickHandler = that._clickCancel.bind(that);\n                that._saveClickHandler = that._clickSave.bind(that);\n                that._excelClickHandler = that._clickExcel.bind(that);\n                that._pdfClickHandler = that._clickPdf.bind(that);\n                that._serachHandler = that._searchInput.bind(that);\n\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                    container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                        .prependTo(wrapper);\n\n                    if (typeof toolbar === STRING || isFunction(toolbar)) {\n                        if (typeof toolbar === STRING) {\n                            toolbar = kendo.template(toolbar).bind(that);\n                        }\n\n                        container.html(toolbar({ grid: that }));\n                        that._attachToolbarClicks();\n                    } else if (isArray(toolbar)) {\n                        items = that._processItems(toolbar);\n\n                        container.kendoToolBar({\n                            navigateOnTab: !that.options.navigatable,\n                            size: that.options.size,\n                            items: items\n                        });\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return { elements: container.get() };\n                    });\n                } else {\n                    that._attachToolbarClicks();\n                }\n\n                container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n            }\n        },\n\n        _attachToolbarClicks: function() {\n            var editable = this.options.editable,\n                container = this.wrapper.find(\".k-grid-toolbar\");\n\n            if (editable && editable.create !== false) {\n                container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                    .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                    .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n            }\n\n            container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n            container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n        },\n\n        _processItems: function(tools) {\n            var that = this,\n                items = [],\n                messages = this.options.messages.commands;\n\n            tools.map(t => {\n                var command, searchText, icon, className, inputSize, template = \"\";\n\n                if (typeof t === 'string') {\n                    command = t.toLowerCase();\n                    t = {};\n                    t.text = messages[command] || command;\n                } else {\n                    command = (t.name || t.text || \"\").toLowerCase();\n                    t.text = t.text || messages[command] || command;\n                }\n\n                if (command === \"search\") {\n                    items.push({\n                        type: \"spacer\"\n                    });\n\n                    searchText = t.text || messages.search;\n                    icon = t.icon || t.iconClass || \"search\";\n\n                    inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                    template += `<span class='k-searchbox k-input ${inputSize} k-rounded-md k-input-solid k-grid-search'>`;\n                    template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                    template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                    template += \"</span>\";\n\n                    items.push({\n                        name: \"search\",\n                        overflow: \"never\",\n                        template: template\n                    });\n                } else {\n                    if (!command && !(isPlainObject(t) && t.template)) {\n                        throw new Error(\"Custom commands should have name specified\");\n                    }\n\n                    t = extend({ type: \"button\" }, defaultCommands[command], t);\n                    className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                    t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                    t.attributes = that._processAttr(t.attr);\n                    delete t.attr;\n\n                    if (!!className) {\n                        if (t.attributes[\"class\"] === undefined$1) {\n                            t.attributes[\"class\"] = \"\";\n                        }\n\n                        t.attributes[\"class\"] += (\" \" + className);\n                    }\n\n                    if (t.template) {\n                        delete t.type;\n                    }\n\n                    if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                        t.click = that[\"_\" + command + \"ClickHandler\"];\n                    }\n\n                    items.push(t);\n                }\n            });\n\n            return items;\n        },\n\n        _processAttr: function(attr) {\n            var attributes = {},\n                attrArray;\n\n            if (typeof attr === STRING && attr.length > 0) {\n                attrArray = attr.split(\" \");\n                attrArray.map(a => {\n                    var keyValue = a.split(\"=\");\n\n                    if (keyValue.length === 2) {\n                        attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                    }\n                });\n            } else if (isPlainObject(attr)) {\n                attributes = attr;\n            }\n\n            return attributes;\n        },\n\n        _createButton: function(command) {\n            var button,\n                template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                options = { className: className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                messages = this.options.messages.commands,\n                attributeClassMatch;\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                } else if (command.className === undefined$1) {\n                    command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"\");\n                    command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                    command = extend(true, {}, command);\n                    command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                    command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                    if (isPlainObject(command.attr)) {\n                        command.attr = stringifyAttributes(command.attr);\n                    }\n\n                    if (typeof command.attr === STRING) {\n                        attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                        if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                            command.className += \" \" + attributeClassMatch[1];\n                        }\n                    }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n            }\n\n            button = kendo.template(template)(options);\n\n            if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n            } else {\n                return button;\n            }\n        },\n\n        _hasFooters: function() {\n            return !!this.footerTemplate ||\n                !!this.groupFooterTemplate ||\n                (this.footer && this.footer.length > 0) ||\n                this.wrapper.find(\".k-grid-footer\").length > 0;\n        },\n\n        _groupable: function() {\n            var that = this;\n\n            if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n            } else {\n                that._groupableClickHandler = function(e) {\n                    var element = $(this),\n                    groupRow = element.closest(TR);\n\n                    var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                    if (element.is(CARET_ALT_DOWN)) {\n                        if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                            that.collapseGroup(groupRow);\n                        }\n                    } else {\n                        if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                            that.expandGroup(groupRow);\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                };\n            }\n\n            if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            } else {\n                that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            }\n\n            that._attachGroupable();\n        },\n\n        _attachGroupable: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                groupable = that.options.groupable,\n                draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n            if (groupable && groupable.enabled !== false) {\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                    $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                    that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                    wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                    wrapper.find(filter).css(\"touch-action\", NONE);\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                    draggable: that._draggableInstance,\n                    groupContainer: \">div.k-grouping-header\",\n                    dataSource: that.dataSource,\n                    draggableElements: filter,\n                    filter: filter,\n                    size: that.options.size,\n                    allowDrag: that.options.reorderable,\n                    removeGroup: function(e) {\n                        that._showUngroupedColumn(e);\n                    },\n                    change: function(e) {\n                        if (that.trigger(\"group\", { groups: e.groups })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            that._hideGroupedColumns(e.groups);\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    }\n                }));\n\n                that._addGroupableOptionsToHeader();\n            }\n        },\n\n        _showUngroupedColumn: function(group) {\n            var columns = leafColumns(this.columns);\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                    this.showColumn(columns[i]);\n                }\n            }\n        },\n\n        _hideGroupedColumns: function(groups) {\n            if (!groups) {\n                return;\n            }\n            var columns = leafColumns(this.columns);\n            var fields = [];\n            var i;\n\n            for (i = 0; i < groups.length; i++) {\n                if (groups[i].colID) {\n                    fields.push(groups[i].colID);\n                }\n            }\n\n            for (i = 0; i < columns.length; i++) {\n                if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                    this.hideColumn(columns[i]);\n                }\n            }\n        },\n\n        _resetEndless: function() {\n            var that = this;\n            that.dataSource.options.endless = null;\n            that._endlessPageSize = that.dataSource.options.pageSize;\n            that.dataSource._skip = 0;\n            that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n            that.dataSource._page = 1;\n        },\n\n        _addGroupableOptionsToHeader: function() {\n            var that = this;\n            var columns = flatColumns(that.columns);\n            var columnFieldMap = {};\n            var field = \"\";\n            var headerCells = that._headerCells();\n            var cellFieldAttr = \"\";\n            var headerCell;\n            var columnOptions;\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n            }\n\n            for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                    headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n            }\n        },\n\n        _destroyGroupable: function() {\n            var that = this;\n\n            if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n            }\n\n            that.groupable = null;\n\n            that._removeGroupableOptionsFromHeader();\n        },\n\n        _removeGroupableOptionsFromHeader: function() {\n            var that = this;\n            var headerCells = that._headerCells();\n\n            for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n            }\n        },\n\n        _continuousItems: function(filter, cell) {\n            if (!this.lockedContent) {\n                return;\n            }\n\n            var that = this;\n\n            var elements = that.table.add(that.lockedTable);\n\n            var lockedItems = $(filter, elements[0]);\n            var nonLockedItems = $(filter, elements[1]);\n            var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n            var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n            var result = [];\n\n            for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n            }\n\n            return result;\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                cell,\n                notString = [],\n                isLocked = that._isLocked(),\n                selectable = that.options.selectable;\n\n            if (selectable) {\n\n                if (that.selectable) {\n                    that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                    notString[notString.length] = \".k-detail-row\";\n                }\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                    notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                    notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n                if (isLocked) {\n                    elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                    filter: filter,\n                    aria: true,\n                    multiple: multi,\n                    dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                    change: function(e) {\n                        var selectedValues;\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n\n                        if (that._checkBoxSelection) {\n                            selectedValues = that.selectable.value();\n                            that._uncheckCheckBoxes();\n                            that._checkRows(selectedValues);\n                            if (selectedValues.length && selectedValues.length === that.items().length) {\n                                that._toggleHeaderCheckState(true);\n                            } else {\n                                that._toggleHeaderCheckState(false);\n                            }\n                        }\n\n                        if (e.event) {\n                            that.trigger(CHANGE);\n                        }\n                    },\n                    useAllItems: isLocked && multi && cell,\n                    relatedTarget: function(items) {\n                        if (cell || !isLocked) {\n                            return;\n                        }\n\n                        var related;\n                        var result = $();\n                        for (var idx = 0, length = items.length; idx < length; idx ++) {\n                            related = that._relatedRow(items[idx]);\n\n                            if (inArray(related[0], items) < 0) {\n                                result = result.add(related);\n                            }\n                        }\n\n                        return result;\n                    },\n                    continuousItems: function() {\n                        return that._continuousItems(filter, cell);\n                    },\n                    ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                    addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                    elements.on(\"keydown\" + NS, function(e) {\n                        var current = that.current();\n                        var target = e.target;\n                        var eventObject = { event: e };\n                        var triggerChange;\n                        var lastSelection;\n                        if (!current) {\n                            return;\n                        }\n                        if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                            !current.is(\".k-edit-cell,.k-header\") &&\n                            current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            that.trigger(CHANGE);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                                if (triggerChange) {\n                                    that.trigger(CHANGE);\n                                }\n                        } else if (!cell &&\n                            ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                          ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                           (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                           (e.shiftKey && e.keyCode == keys.UP) ||\n                           (e.shiftKey && e.keyCode == keys.DOWN) ||\n                           (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            current = current.parent();\n\n                            lastSelection = that.selectable.value();\n\n                            if (isLocked) {\n                                current = current.add(that._relatedRow(current));\n                            }\n\n                            if (multi) {\n                                if (!that.selectable._lastActive) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                if (!compareElements(lastSelection, that.selectable.value())) {\n                                    that.trigger(CHANGE, eventObject);\n                                }\n                            } else if (!current.hasClass(SELECTED)) {\n                                that.selectable.clear();\n                                that.selectable.value(current);\n                                that.trigger(CHANGE);\n                            }\n                        }\n                    });\n                }\n            }\n        },\n\n        _clipboard: function() {\n            var options = this.options;\n            var selectable = options.selectable;\n            if (selectable && options.allowCopy) {\n                var grid = this;\n                if (!options.navigatable) {\n                    grid.table.attr(TABINDEX, 0);\n\n                    grid.table.add(grid.lockedTable)\n                        .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        })\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n                grid.copyHandler = grid.copySelection.bind(grid);\n                grid.updateClipBoardState = function() {\n                    if (grid.areaClipBoard) {\n                        grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                    }\n                };\n                grid.bind(\"change\",grid.updateClipBoardState);\n                grid.wrapper.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n            }\n        },\n\n        copySelectionToClipboard: function(includeHeaders) {\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n            document.execCommand('copy');\n        },\n\n        copySelection: function(e) {\n            if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                $(e.target).is(\"input:visible,textarea:visible\") ||\n                (window.getSelection && window.getSelection().toString()) ||\n                (document.selection && document.selection.createRange().text) ) {\n                return;\n            }\n\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n\n        },\n\n        _createAreaClipBoard: function() {\n            if (!this.areaClipBoard) {\n                this.areaClipBoard =\n                    $(\"<textarea />\")\n                    .css({\n                        position: \"fixed\",\n                        top: \"50%\",\n                        left: \"50%\",\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    })\n                    .appendTo(this.wrapper);\n            }\n        },\n\n        getTSV: function(includeHeaders) {\n            var grid = this;\n            var selected = grid.select();\n            var delimeter = \"\\t\";\n            var allowCopy = grid.options.allowCopy;\n            var onlyVisible = true;\n            var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n            if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n            }\n            var text = \"\";\n            if (selected.length) {\n                if (selected.eq(0).is(TR)) {\n                    selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n                if (onlyVisible) {\n                    selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n\n                $.each(selected, function(idx, cell) {\n                    cell = $(cell);\n                    field = grid._getCellField(cell, hasLockedCols);\n\n                    var tr = cell.closest(TR);\n                    var rowIndex = tr.index();\n                    var cellIndex = cell.index();\n                    if (onlyVisible) {\n                        cellIndex -= cell.prevAll(\":hidden\").length;\n                    }\n                    if (lockedCols && inLockedArea) {\n                        inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                    }\n                    if (grid._groups() && inLockedArea) {\n                        cellIndex -= grid._groups();\n                    }\n                    cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                    if (field) {\n                        fields[cellIndex] = field;\n                    }\n                    if (cellsOffset > cellIndex) {\n                        cellsOffset = cellIndex;\n                    }\n                    var cellText = cell.text();\n                    if (!result[rowIndex]) {\n                        result[rowIndex] = [];\n                    }\n                    result[rowIndex][cellIndex] = cellText;\n                });\n\n                var rowsOffset = result.length;\n                result = $.each(result, function(idx, val) {\n                    if (val) {\n                        result[idx] = val.slice(cellsOffset);\n                        if (rowsOffset > idx) {\n                            rowsOffset = idx;\n                        }\n                    }\n                });\n\n                if (includeHeaders && fields.length) {\n                    result.splice(rowsOffset, 0, fields.map(function(field) {\n                        return getTitle(field, columns);\n                    }));\n\n                    var headerIndex = result.findIndex(function(el) {\n                        return el !== undefined$1;\n                    });\n\n                    result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function(idx, val) {\n                    if (val) {\n                        text += val.join(delimeter) + \"\\r\\n\";\n                    } else {\n                        text += \"\\r\\n\";\n                    }\n                });\n            }\n            return text;\n        },\n\n        clearArea: function(e) {\n            if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                focusTable(this.table, true);\n            }\n\n            if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n            }\n        },\n\n        _adaptiveColumns: function() {\n            var that = this;\n\n            if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n                that._attachColumnMediaResizeHandler();\n            }\n        },\n\n        _anyColumnHasMediaQuery: function() {\n            return this._columnsWithMediaQuery().length;\n        },\n\n        _columnsWithMediaQuery: function() {\n            return columnsWithMedia(this.columns);\n        },\n\n        _attachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            that._detachColumnMediaResizeHandler();\n            that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n            $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n        },\n\n        _detachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n            }\n        },\n\n        _onColumnMediaResize: function() {\n            var that = this;\n            that._setColumnsMediaVisibility(that.columns);\n            that._setContentMediaWidth();\n        },\n\n        _setColumnsMediaVisibility: function(columns) {\n            var cols = columns || [];\n\n            for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n            }\n        },\n\n        _setColumnMediaVisibility: function(column) {\n            var that = this;\n\n            if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n            } else {\n                if (columnMatchesMedia(column)) {\n                    that._showColumnByMedia(column);\n\n                    if (!column.hidden) {\n                        that._setColumnsMediaVisibility(column.columns);\n                    }\n                } else {\n                    that._hideColumnByMedia(column);\n                }\n            }\n        },\n\n        _showColumnByMedia: function(column) {\n            if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _hideColumnByMedia: function(column) {\n            var initiallyHidden = column.hidden;\n\n            if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false;\n\n                // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                column.hidden = initiallyHidden;\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _setContentMediaWidth: function() {\n            var that = this;\n            var options = that.options;\n            var isLocked = that._isLocked();\n            var footer;\n\n            if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                if (isLocked && that.lockedFooter) {\n                    footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                    footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                    var currentHeaderWidth = header.css(WIDTH);\n\n                    for (var i = 0; i < headerColumnsCount; i++) {\n                        if (isElementVisible(headerColumns[i])) {\n                            var columnWidth;\n                            var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                            var colgroupChild = headerColgroup.children()[cellIndex];\n                            var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                            if (columnStyleWidth !== \"\") {\n                                columnWidth = parseFloat(columnStyleWidth);\n                            } else {\n                                // remove the header width to calculate the height of a column without fixed width\n                                header.css(WIDTH, AUTO);\n                                columnWidth = outerWidth(headerColumns.eq(i));\n                                header.css(WIDTH, currentHeaderWidth);\n                            }\n\n                            totalHeaderWidth += columnWidth;\n                        }\n                    }\n\n                    contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                    header.css('width', totalHeaderWidth);\n                    footer.css('width', totalHeaderWidth);\n                    that._updateStickyColumns();\n                }\n            }\n        },\n\n        _minScreenSupport: function() {\n            var any = this.hideMinScreenCols();\n\n            if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n            }\n        },\n\n        hideMinScreenCols: function() {\n            var cols = this.columns,\n                screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n            return this._iterateMinScreenCols(cols, screenWidth);\n        },\n\n        _iterateMinScreenCols: function(cols, screenWidth) {\n            var any = false;\n\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n                if (minWidth !== undefined$1 && minWidth !== null) {\n                    any = true;\n                    if (minWidth > screenWidth) {\n                        this.hideColumn(col);\n                    } else {\n                        this.showColumn(col);\n                    }\n                }\n                if (!col.hidden && col.columns) {\n                    any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n            }\n            return any;\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n            }\n        },\n\n        _updateStickyColumns: function() {\n            var that = this;\n            var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                    that._updateStickyFilterCells();\n                }\n            }\n        },\n\n        _updateStickyFilterCells: function() {\n            var that = this;\n            var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n            if (filterCells.length) {\n                filterCells.each(function() {\n                    var th = $(this);\n                    var column = th.data(\"column\");\n                    var style = th.attr(\"style\") || \"\";\n                    if (column.sticky) {\n                        th.attr(\"style\", style + column.stickyStyle);\n                        th.addClass(STICKY_HEADER_CLASS);\n                    } else {\n                        style = style.replace(leftRegExp, \"\");\n                        style = style.replace(rightRegExp, \"\");\n                        th.attr(\"style\", style);\n                        th.removeClass(STICKY_HEADER_CLASS);\n                    }\n                });\n            }\n        },\n\n        _anyStickyColumns: function() {\n            var that = this;\n\n            return stickyColumns(that.columns).length;\n        },\n\n        _setStickyColumns: function(updateStyles) {\n            var that = this;\n            var columns = stickyColumns(that.columns);\n            var visibleColumns = visibleStickyColumns(that.columns);\n            var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n            that._removeStickyAttributes(columns);\n            that._setStickyClassAttributes(columns);\n            that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n            if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n            }\n        },\n\n        _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n            var that = this;\n            var i;\n            var column;\n            var columnWidth;\n            var nextColumnLeft;\n            var nextColumnRight;\n            var left = isRtl ? \"right\" : \"left\";\n            var right = isRtl ? \"left\" : \"right\";\n            var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n            };\n\n            for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                stickyWidths[left][i + 1] = nextColumnLeft;\n            }\n\n            for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                stickyWidths[right][i - 1] = nextColumnRight;\n            }\n\n            return stickyWidths;\n        },\n\n        _setStickyClassAttributes: function(columns, masterIndex) {\n            var that = this;\n            var i;\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    if (!masterIndex && i) {\n                        masterIndex = i;\n                    }\n\n                    that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n            }\n        },\n\n        _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n            var that = this;\n            var i;\n            var column;\n            var stickyLeft;\n            var stickyRight;\n            var stickyStyle;\n            var childCols;\n            var childStickyWidths;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = \"left: \" + stickyLeft + \"px; right: \" + stickyRight + \"px;\";\n\n                if (column.columns) {\n                    childCols = visibleChildColumns([column]);\n                    childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                    that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                    if (updateStyles) {\n                        that._setStickyStyles(childCols, childStickyWidths);\n                    }\n                }\n\n                addColumnAttribute(column, \"attributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"headerAttributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"footerAttributes\", \"style\", stickyStyle);\n\n                column.stickyStyle = stickyStyle;\n            }\n        },\n\n        _removeStickyAttributes: function(columns) {\n            var that = this;\n            var i;\n            var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n            var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n            var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n            var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", rightRegExp);\n\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", rightRegExp);\n\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", rightRegExp);\n            }\n        },\n\n        _setStickyStyles: function(columns, stickyWidths) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var left;\n            var right;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.addClass(STICKY_HEADER_CLASS);\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                    header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                    continue;\n                }\n\n                if (that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.addClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, left, right);\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, left, right);\n                    }\n                }\n            }\n        },\n\n        _removeStickyStyles: function(columns) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                    that._removeStickyStyles(column.columns);\n                    continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.removeClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, \"\", \"\");\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, \"\", \"\");\n                    }\n                }\n            }\n        },\n\n        _getColumnHeader: function(column) {\n            var that = this;\n            var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n            return header;\n        },\n\n        _sumColumnWidth: function(column) {\n            var that = this;\n            var width = 0;\n\n            if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n            } else {\n                width = that._sumCurrentWidths([column]);\n            }\n\n            return width;\n        },\n\n        _sumCurrentWidths: function(cols) {\n            var that = this;\n            var width = 0;\n            var colWidth = 0;\n            var col;\n            var header;\n            var i;\n            var length = cols.length;\n\n            for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                    colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                    width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n            }\n\n            return width;\n        },\n\n        _belongsToGrid: function(element) {\n            return this.wrapper[0] === element.closest(WRAPPER)[0];\n        },\n\n        getSelectedData: function() {\n            var that = this;\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var result = [];\n            var visibleColumns = visibleLeafColumns(that.columns);\n\n            for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n            }\n\n            if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n            }\n\n            return result;\n        },\n\n        exportSelectedToExcel: function(includeHeaders) {\n            if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n            }\n\n            var that = this;\n            var excel = this.options.excel || {};\n            var visibleColumns = visibleLeafColumns(that.columns);\n            var exporter = new kendo.excel.ExcelExporter({});\n            var columnHandler = function() {return { autoWidth: true };};\n            var book = {\n                sheets: [{\n                    columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                    rows: [],\n                    freezePane: {},\n                    filter: false\n                }]\n            };\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var idx;\n            var exportData = [];\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var sortHandler = exportDataSort.bind(that);\n\n            for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n            }\n\n            if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n            }\n            exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n            if (exportData.length) {\n                if (hasLockedCols) {\n                    exportData = exportData.sort(sortHandler);\n                }\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n            }\n\n            if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                    workbook.options = {};\n                }\n                workbook.options.skipCustomHeight = true;\n\n                workbook.toDataURLAsync().then(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: book.fileName || excel.fileName,\n                        proxyURL: excel.proxyURL,\n                        forceProxy: excel.forceProxy\n                    });\n                });\n            }\n        },\n\n        _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n            var idx = 0;\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n            var item;\n\n            for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n                this._setExporterColumns(exporter, visibleColumns, item);\n                this._createExportRows(book, exporter, includeHeaders);\n            }\n        },\n\n        _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n\n            exporter.data = data;\n            this._setExporterColumns(exporter, visibleColumns, data[0]);\n            this._createExportRows(book, exporter, includeHeaders);\n        },\n\n        _createExportRows: function(book, exporter, includeHeaders) {\n            book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n        },\n\n        _setExporterColumns: function(exporter, columns, item) {\n            exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n            }), exporter._prepareColumn);\n        },\n\n        _mapSelectionToData: function(elements, visibleColumns, columnsFilter) {\n            var that = this;\n            var elementType = elements[0][0].nodeName;\n            var isRowSelection = elementType === 'TR';\n            var dataItem;\n            var result = {};\n            var element;\n            var curr;\n            var field;\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var column;\n\n            for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                    result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                } else {\n                    field = that._getCellField(element, hasLockedCols);\n\n                    if (!field) {\n                        continue;\n                    }\n\n                    curr = result[dataItem.uid];\n\n                    if (!curr) {\n                        curr = result[dataItem.uid] = {};\n                    }\n\n                    column = findColumnByField(visibleColumns, field);\n\n                    if (!column || (columnsFilter && !columnsFilter(column))) {\n                        continue;\n                    }\n\n                    curr[field] = dataItem[field];\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                result[id].uid = id;\n                return result[id];\n            });\n        },\n\n        _getCellField: function(cell, hasLockedCols) {\n            var grid = this;\n            var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n            var fieldAttr = kendo.attr('field');\n            var index = kendo.attr('index');\n\n            if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            } else {\n                return grid.thead.find(\"th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            }\n        },\n\n        _relatedRow: function(row) {\n            var lockedTable = this.lockedTable;\n            row = $(row);\n\n            if (!lockedTable) {\n                return row;\n            }\n\n            var table = row.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr\").index(row);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr\").eq(index);\n        },\n\n        _relatedCell: function(cell) {\n            var lockedTable = this.lockedTable;\n\n            cell = $(cell);\n\n            if (!lockedTable) {\n                return cell;\n            }\n\n            var table = cell.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr>td\").index(cell);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr>td\").index(index);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n            }\n\n            if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n                return;\n            }\n\n            if (that.options.persistSelection) {\n                that._persistSelectedRows();\n            } else {\n                that._selectedIds = {};\n            }\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable,\n                selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                cell = selectableoptions.cell;\n\n            items = that.table.add(that.lockedTable).find(items);\n            if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        if (cell) {\n                            return that._relatedCell(this);\n                        }\n                        else {\n                            return that._relatedRow(this);\n                        }\n                    }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                    selectable.value(items);\n                } else {\n                    that._checkRows(items);\n                    if (that.select().length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    }\n                }\n\n                if (!cell) {\n                    that._persistSelectedRows();\n                }\n\n                return;\n            }\n\n            return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n        },\n\n        _toggleHeaderCheckState: function(checked) {\n            var that = this;\n            if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                    .attr(ARIA_LABEL, \"Deselect all rows\");\n            } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                    .attr(ARIA_LABEL, \"Select all rows\");\n            }\n        },\n\n        _uncheckCheckBoxes: function() {\n            var that = this;\n            var tables = that.table.add(that.lockedTable);\n\n            tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n        },\n\n        _deselectCheckRows: function(items) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\");\n            items = that.table.add(that.lockedTable).find(items);\n\n            if (that._isLocked()) {\n                items = items.add(items.map(function() {\n                    return that._relatedRow(this);\n                }));\n            }\n\n            items.each(function() {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n            });\n            that._toggleHeaderCheckState(false);\n\n            that._persistSelectedRows();\n\n        },\n\n        _checkRows: function(items) {\n            items.each(function() {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                    .prop(\"checked\", true)\n                    .attr(ARIA_LABEL, \"Deselect row\")\n                    .attr(ARIA_CHECKED, true);\n            });\n        },\n\n        _persistSelectedRows: function() {\n            var that = this,\n                key,\n                dataItem,\n                allRows = that.items(),\n                dataSourceOptions = that.dataSource.options,\n                schema = dataSourceOptions.schema,\n                modelId,\n                selectedViewIds = {};\n\n            if (!schema || !schema.model || !that._data) {\n                return;\n            }\n\n            modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n            if (!modelId) {\n                return;\n            }\n\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n            }\n\n            that.select().each(function() {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n            });\n\n            for (var i = 0; i < allRows.length; i ++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n                if (selectedViewIds[key]) {\n                    that._selectedIds[key] = true;\n                } else {\n                    delete that._selectedIds[key];\n                }\n            }\n        },\n\n        selectedKeyNames: function() {\n            var that = this,\n                ids = [];\n            for (var property in that._selectedIds) {\n                ids.push(property);\n            }\n            ids.sort();\n            return ids;\n        },\n\n        _updateCurrentAttr: function(current, next) {\n            var headerId = $(current).data(\"headerId\");\n            var nextId;\n            var descId;\n\n            $(current).removeClass(FOCUSED);\n            this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n            if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(ID, headerId);\n            } else {\n                $(current).removeAttr(ID);\n            }\n\n            nextId = next.attr(ID);\n\n            if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n            }\n\n            if (!!nextId) {\n                descId = nextId;\n            } else {\n                next.attr(ID, this._cellId);\n            }\n\n            next.addClass(FOCUSED);\n            this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n            this._current = next;\n        },\n\n        _scrollCurrent: function() {\n            var current = this._current;\n            var scrollable = this.options.scrollable;\n\n            if (!current || !scrollable) {\n                return;\n            }\n\n            var row = current.parent();\n            var tableContainer = row.closest(\"table\").parent();\n\n            var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n            var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n            var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n            //adjust scroll vertically\n            if (isInContent) {\n                if (this.virtualScroll) {\n                    var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                    if (this.virtualScroll.rows) {\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._rowVirtualIndex = rowIndex;\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                } else {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n            }\n\n            if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n            }\n\n            //adjust scroll horizontally, if not inside locked tables\n            if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n            }\n        },\n\n        current: function(next) {\n            return this._setCurrent(next, true);\n        },\n\n        _setCurrent: function(next, preventTrigger, preventScroll) {\n            var current = this._current;\n\n            next = $(next);\n\n            if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(TABINDEX, -1);\n            }\n\n            if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                    var parent = next.parent();\n                    var siblings = parent.children(DATA_CELL);\n                    var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                    if (this._hasVirtualColumns()) {\n                        this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                    }\n                    this._updateCurrentAttr(current, next);\n\n                    if (!preventScroll) {\n                        this._scrollCurrent();\n                    }\n\n                    if (!preventTrigger) {\n                        this.trigger(NAVIGATE, {\n                            element: next\n                        });\n                    }\n                }\n            }\n\n            if (next && next.length) {\n                this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n            }\n\n            this._updateSelctCheckbox(current, next);\n\n            return this._current;\n        },\n\n        _removeCurrent: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current = null;\n            }\n        },\n\n        _updateSelctCheckbox: function(current, next) {\n            var nextCheckbox;\n\n            if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                    nextCheckbox.focus();\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                    focusTable(this.table, true);\n                }\n            }\n        },\n\n        _scrollTo: function(element, container) {\n            var elementToLowercase = element.tagName.toLowerCase();\n            var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n            var table = $(element).closest(\"table\")[0];\n            var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n            var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n            var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n            var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n            var bottomDistance = elementOffset + elementOffsetDir;\n            var result = 0;\n            var ieCorrection = 0;\n            var firefoxCorrection = 0;\n\n            if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                    ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                    firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n            }\n\n            containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n            if (containerScroll > elementOffset) {\n                result = elementOffset;\n            } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                    result = (bottomDistance - containerOffsetDir);\n                } else {\n                    result = elementOffset;\n                }\n            } else {\n                result = containerScroll;\n            }\n\n            result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n            container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n        },\n\n        _navigatable: function() {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            //data tables - locked and non-locked\n            var dataTables = that.table.add(that.lockedTable);\n            //header tables - locked and non-locked\n            var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n            //the over wich keys will be handled\n            var tables = dataTables;\n\n            if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables);\n            }\n\n            this._navigatableTables = tables;\n            this._headertables = headerTables;\n\n            //dettach all previous events\n            tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n            headerTables\n                .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n            //prevent propagation when clicked inside detail grid\n            dataTables\n                .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n            tables\n                //handle click on tables, will attempt to focus the table\n                .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                .on(\"focus\" + NS, that._tableFocus.bind(that))\n                .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n            that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n        },\n\n        _filterFocus: function(e) {\n            var header = e.target.closest(\"th\");\n\n            this._filterFocusable().attr(TABINDEX, 0);\n            this._setCurrent(header);\n            $(header).removeClass(FOCUSED);\n        },\n\n        _tableFocus: function() {\n            var current = this.current();\n            var table = this.lockedTable ? this.lockedTable : this.table;\n\n            //if there is already current, highlighted it\n            //otherwise highlight the first possible cell\n            if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n            } else {\n                if (this._virtualColScroll) {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n            }\n\n            this.table.attr(TABINDEX, 0);\n        },\n\n        _tableBlur: function() {\n            var current = this.current();\n\n            if (current) {\n                current.removeClass(FOCUSED);\n            }\n        },\n\n        _findCellIndex: function(columns, startIndex, reversed) {\n            var cellIndex;\n            var i;\n\n            if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            } else {\n                for (i = startIndex; i < columns.length; i++) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            }\n\n            return cellIndex;\n        },\n\n        _scrollToColumn: function(key, e) {\n            if (this._virtualCellIndex === undefined$1) {\n                return false;\n            }\n\n            var that = this;\n            var cellIndex = that._virtualCellIndex;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var scrollWidth = 0;\n\n            if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n            } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n            } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n            } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n            }\n\n            for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n            }\n\n            that._virtualCellIndex = cellIndex;\n            if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            kendo.scrollLeft(that.content, scrollWidth);\n            return true;\n        },\n\n        _tableKeyDown: function(e) {\n            var current = this.current();\n            var virtualScroll = this.virtualScroll || {};\n            var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n            var target = $(e.target);\n            var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n            if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                e.stopImmediatePropagation();\n                return;\n            }\n\n            // do not handle key down if request in progress\n            // or there isn't current set\n            if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n            }\n\n            if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                return;\n            }\n\n            if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n            }\n\n            if (!current.length) {\n                return;\n            }\n\n            var handled = false;\n\n            if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                handled = this._focusToolbar();\n            }\n\n            if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n            }\n\n            if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n            }\n\n            if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, e.currentTarget, target);\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, e.currentTarget);\n            }\n\n            if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n                //required in hierarchy\n                e.stopPropagation();\n            }\n        },\n\n        _focusToolbar: function() {\n            var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n            if (focusable.length > 0) {\n                focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.collapseGroup(row);\n                } else {\n                    this.collapseRow(row);\n                }\n            } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n               this._moveColumn(current, true);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                        if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.lockedTable[0], row[0])) {\n                                next = next.prevAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).last();\n                        } else {\n                            next = this._tabNext(current, currentTable, true);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container);\n\n                        next = this._prevHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.expandGroup(row);\n                } else {\n                    this.expandRow(row);\n                }\n             } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                this._moveColumn(current, false);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                       if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.table[0], row[0])) {\n                                next = next.nextAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).first();\n                        } else {\n                            next = this._tabNext(current, currentTable, false);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container, true);\n\n                        next = this._nextHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveUp: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n               next = current.parent();\n               next = next.prevAll(ITEMROW).first();\n               next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n               next = this._prevVerticalCell(container, current);\n               if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next[0]) {\n                      focusTable(this.table, true);\n                  }\n               }\n            }\n\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n\n            return true;\n        },\n\n        _moveDown: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index + 1);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n                next = this._nextVerticalCell(container, current);\n                if (!next[0]) {\n                    this._lastCellIndex = 0;\n                    container = this._verticalContainer(container);\n\n                    next = this._nextVerticalCell(container, current);\n                    if (next[0]) {\n                        focusTable(this.table, true);\n                    }\n                }\n            }\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n            return true;\n        },\n\n        _moveColumn: function(current, isLeft) {\n            var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n            var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n            var oldIndex = elements.index($(current));\n            var offset = isLeft ? - 1 : 1;\n            var column = columns[oldIndex];\n            var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n            if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                    newIndex: newIndex,\n                    oldIndex: oldIndex,\n                    column: column\n                });\n            }\n        },\n\n        _handleHome: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var prev;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.HOME);\n                return true;\n            }\n\n            if (ctrl) {\n                if (this.lockedTable) {\n                    prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                    prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n            } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                prev = row.children(DATA_CELL).first();\n            }\n\n            if (prev && prev.length) {\n                this._setCurrent(prev);\n                return true;\n            }\n        },\n\n        _handleEnd: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var next;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.END);\n                return true;\n            }\n\n            if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n            } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                next = row.children(DATA_CELL).last();\n            }\n\n            if (next && next.length) {\n                this._setCurrent(next);\n                return true;\n            }\n        },\n\n        _handlePageDown: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() + 1);\n\n            return true;\n        },\n\n        _handlePageUp: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() - 1);\n\n            return true;\n        },\n\n        _handleTabKey: function(current, currentTable, shiftKey, target) {\n            var isInCell = this.options.editable && this._editMode() == \"incell\";\n            var cell, filterFocusable;\n\n            if (!isInCell ||\n                current.is(\"th\") ||\n                (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n            }\n\n            cell = $(activeElement()).closest(\".k-edit-cell\");\n\n            if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n            }\n\n            cell = this._tabNext(current, currentTable, shiftKey);\n\n            if (cell[0] === current[0]) {\n                return false;\n            }\n\n            if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleEscKey: function(current) {\n            var active = activeElement();\n            var isInCell = this._editMode() == \"incell\";\n\n            if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                    // return focus back to the table\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (isInCell) {\n                this.closeCell(true);\n            } else {\n                var currentIndex = $(current).parent().index();\n                if (active) {\n                    active.blur();\n                }\n                this.cancelRow(true);\n                if (currentIndex >= 0) {\n                    this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n            }\n\n            focusTable(this.table, true);\n\n            return true;\n        },\n\n        _toggleCurrent: function(current, editable, hasDetails) {\n            var row = current.parent();\n\n            if (current.is(\".k-command-cell\")) {\n                return false;\n            }\n\n            if (row.is(DOT + GROUPING_ROW)) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            if (!editable && hasDetails) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleSpaceKey: function(current, ctrlKey) {\n            var that = this;\n\n            if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                return;\n            }\n\n            var descriptors = that.groupable.descriptors();\n            var field = current.attr(kendo.attr(\"field\"));\n            var aggregates = that.groupable.aggregates();\n\n            if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                    field: field,\n                    dir: \"asc\",\n                    aggregates: aggregates || []\n                });\n            } else {\n                descriptors = $.grep(descriptors, function(item)\n                {\n                    return item.field !== field;\n                });\n            }\n\n            that.dataSource.group(descriptors);\n\n            return true;\n        },\n\n        _handleEnterKey: function(current, currentTable, target) {\n            var editable = this.options.editable && this.options.editable.update !== false;\n            var container = target.closest(\"td\");\n            var hasDetails = this._hasDetails();\n            var link, filterFocusable;\n\n            if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n            }\n\n            if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                    return false;\n                } else if (link.length) {\n                    link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                    filterFocusable = this._filterFocusable();\n                    filterFocusable.attr(TABINDEX, 0);\n                    current.find(\":kendoFocusable\").first().focus();\n                } else {\n                    current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n            }\n            if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n            }\n\n            var focusable = current.find(\":kendoFocusable\").first();\n            if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n\n                return true;\n            }\n\n            if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                    container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _nextHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.nextAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).first();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).first();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _prevHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.prevAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        var columns = lockedColumns(this.columns);\n                        mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).last();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _currentDataIndex: function(table, current) {\n            var index = current.attr(\"data-index\");\n\n            if (!index) {\n                return undefined$1;\n            }\n\n            var lockedColumnsCount = lockedColumns(this.columns).length;\n            if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n            }\n\n            return index;\n        },\n\n        _prevVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n\n            //current is in the header, but not at the last level of multi-level columns\n            if (index || current.hasClass(\"k-header\")) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n            }\n\n            //check this out\n            index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n\n            //if current is inside filter row\n            if (row.hasClass(\"k-filter-row\")) {\n                return leafDataCells(container).filter(isCellVisible).eq(index);\n            }\n\n            //move up to header container\n            if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                    index = this._virtualCellIndex;\n                }\n                //is there filter row in the header container\n                row = container.find(\"tr.k-filter-row:visible\");\n                if (!row[0]) {\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                        index--;\n                    }\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n            } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n            }\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _nextVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n            var virtualScroll = this.virtualScroll || {};\n            var colspan;\n\n            //current is in the header, but not at the last level of multi-level columns\n            //and we are not changing the table\n            if (rowIndex != -1 && index === undefined$1 && current.hasClass(\"k-header\")) {\n                return childColumnsCells(current).eq(1);\n            }\n\n            index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n            index = Math.max(index, this._lastCellIndex || 0);\n\n            //move down to data container\n            if (rowIndex == -1) {\n                row = rows.eq(0);\n                if (virtualScroll.columns) {\n                    colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                    index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                }\n                // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                    index++;\n                }\n            } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n            }\n\n            var tmpIndex = index;\n            //in case of last level of multi-level columns the index should be updated depending on the hidden columns\n            if (this._currentDataIndex(container, current) !== undefined$1) {\n                var currentRowCells = row.children(\":not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var hiddenColumns = currentRowCells.filter(\":hidden\");\n                for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                    if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                        tmpIndex--;\n                    }\n                }\n            }\n            index = tmpIndex;\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _verticalContainer: function(container, up) {\n            var table = container.parent();\n            var length = this._navigatableTables.length;\n            var step = Math.floor(length / 2);\n            var index = inArray(table[0], this._navigatableTables);\n\n            if (up) {\n                step *= -1;\n            }\n            index += step;\n\n            if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n            }\n\n            return table.find(up ? \">thead\" : \">tbody\");\n        },\n\n        _filterFocusable: function() {\n            return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n        },\n\n        _horizontalContainer: function(container, right) {\n            var length = this._navigatableTables.length;\n            if (length <= 2) {\n                return container;\n            }\n\n            var table = container.parent();\n            var index = inArray(table[0], this._navigatableTables);\n\n            index += right ? 1 : -1;\n\n            if (right && (index == 2 || index == length)) {\n                return container;\n            }\n\n            if (!right && (index == 1 || index < 0)) {\n                return container;\n            }\n\n            return this._navigatableTables.eq(index).find(\"thead, tbody\");\n        },\n\n        _tabNext: function(current, currentTable, back) {\n            var switchRow = true;\n            var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n            if (!next.length) {\n                next = current.parent();\n                if (this.lockedTable) {\n                    switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                    next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                    if (this._hasVirtualColumns()) {\n                        return current;\n                    }\n                    next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n                if (back) {\n                    next = next.children(DATA_CELL).last();\n                } else {\n                    next = next.children(DATA_CELL).first();\n                }\n            }\n\n            return next;\n        },\n\n        _handleEditing: function(current, next, table) {\n            var that = this,\n                active = $(activeElement()),\n                mode = that._editMode(),\n                isIE = browser.msie,\n                editContainer = that._editContainer,\n                focusable,\n                editable = that.options.editable && that.options.editable.update !== false,\n                isEdited;\n\n            table = $(table);\n            if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n            } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n            }\n\n            if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                    active.trigger(\"blur\");\n                    if (isIE) {\n                        //IE10 with jQuery 1.9.x does not trigger blur handler\n                        //numeric textbox does trigger change\n                        active.trigger(\"blur\");\n                    }\n                }\n\n                if (!that.editable) {\n                    focusTable(that.table);\n                    return;\n                }\n\n                if (that.editable.end()) {\n                    if (mode == \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.saveRow();\n                        isEdited = true;\n                    }\n                } else {\n                    if (mode == \"incell\") {\n                        that._setCurrent(editContainer);\n                    } else {\n                        that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                    }\n                    focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                    if (focusable) {\n                        focusable.focus();\n                    }\n                    return;\n                }\n            }\n\n            if (next) {\n                that._setCurrent(next);\n            }\n\n            focusTable(that.table, true);\n\n            if (!editable) {\n                return;\n            }\n\n            if ((!isEdited && !next) || next) {\n                if (mode === INCELL) {\n                    if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                        that.editCell(that.current());\n                    }\n                } else {\n                    that.editRow(that.current().parent());\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                table = that.table,\n                height = that.options.height,\n                width = that.options.width,\n                wrapper = that.element;\n\n            if (!wrapper.is(DIV)) {\n               wrapper = wrapper.wrap(\"<div/>\").parent();\n            }\n\n            that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n            if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, AUTO);\n            }\n\n            if (width) {\n                that.wrapper.css(WIDTH, width);\n            }\n\n            that._initMobile();\n        },\n\n        _initMobile: function() {\n            var options = this.options;\n            var that = this;\n\n            this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                options.mobile === \"phone\" ||\n                                options.mobile === \"tablet\";\n\n            if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                    '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                    'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                )\n                .parent();\n\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                    this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                    this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\";\n\n                // Grid transitions should not propagate to the view\n                that.wrapper.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n                this.view.bind(\"showStart\", function() {\n                    if (that._isLocked()) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    }\n                });\n            }\n        },\n\n        _createPane: function(html) {\n            var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n\n            return pane;\n        },\n\n        _tbody: function() {\n            var that = this,\n                table = that.table,\n                tbody;\n\n            tbody = table.find(\">tbody\");\n\n            if (!tbody.length) {\n                tbody = $(\"<tbody class='k-table-tbody'/>\").appendTo(table);\n            }\n\n            that.tbody = tbody;\n        },\n\n        _scrollable: function() {\n            var that = this,\n                header,\n                table,\n                options = that.options,\n                scrollable = options.scrollable,\n                hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                headerWrap;\n\n            if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                    header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                }\n\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                table.width(that.table[0].style.width);\n\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                    that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                    that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                that.content.wrap(\"<div class='k-grid-container' />\").parent();\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                    that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n\n                    that.table.css({\n                        width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                    });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n\n                that.scrollables = headerWrap.add(that.content);\n\n                // the footer may exists if rendered from the server\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                    that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                    if (that._scrollLeft !== this.scrollLeft) {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                    }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                        if (that.lockedContent) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (virtualScroll.columns && isScrollingLeft) {\n                            that.refresh();\n                        }\n                    });\n                } else {\n                    var endless = scrollable.endless;\n                    var originalPageSize = that.dataSource.options.pageSize;\n                    if (endless) {\n                        that._endlessPageSize = originalPageSize;\n                    }\n                    that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                        if (that.lockedContent && e.currentTarget == that.content[0]) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (endless) {\n                            if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                !that._endlessFetchInProgress &&\n                                that._endlessPageSize < that.dataSource.total()) {\n                                that._skipRerenderItemsCount = that._endlessPageSize;\n                                that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                that.dataSource.options.endless = true;\n                                that._endlessFetchInProgress = true;\n                                that.dataSource.pageSize(that._endlessPageSize);\n                            }\n                        }\n\n                        if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                              that._virtualColScroll = true;\n                              that._cacheEditableState();\n                              that.refresh();\n                              that._restoreEditableState();\n                              that._virtualColScroll = false;\n                        }\n\n                        if (that.rowResizer) {\n                            that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                        }\n                    });\n\n                    var touchScroller = that.content.data(\"kendoTouchScroller\");\n                    if (touchScroller) {\n                        touchScroller.destroy();\n                    }\n\n                    touchScroller = kendo.touchScroller(that.content);\n                    if (touchScroller && touchScroller.movable) {\n                        that.touchScroller = touchScroller;\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(that.scrollables, -e.sender.x);\n                            if (that.lockedContent) {\n                                that.lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n\n                        that.one(DATABOUND, function(e) {\n                            e.sender.wrapper.addClass(\"k-grid-backface\");\n                        });\n                    }\n                }\n            }\n        },\n\n        _createVirtualScrollable: function() {\n            var that = this;\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function() { return that._averageRowHeight(); },\n                page: function() {\n                    that._restoreEditableState();\n                },\n                scroll: function() {\n                    that._focusEditable();\n                },\n                loadStart: function() {\n                    that._progress(true);\n                },\n                loadEnd: function() {\n                    that._progress(false);\n                }\n            });\n\n            that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n        },\n\n        _onVirtualPaging: function() {\n            var that = this;\n\n            that._cacheEditableState();\n\n            if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n            }\n        },\n\n        _isVirtualEditable: function() {\n            return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n        },\n\n        _isVirtualInlineEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INLINE;\n        },\n\n        _isVirtualIncellEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INCELL;\n        },\n\n        _isVirtualPopupEditable: function() {\n            return this.virtualScrollable && this._editMode() === \"popup\";\n        },\n\n        _hasVirtualColumns: function() {\n            return (this.virtualScroll || {}).columns ? true : false;\n        },\n\n        _scrollVirtualWrapper: function() {\n            var that = this;\n            var scrollable = that.virtualScrollable;\n\n            if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                    scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                    scrollable._scrollWrapperToTop();\n                }\n            }\n        },\n\n        _scrollVirtualWrapperOnColumnResize: function() {\n            var virtualScrollable = this.virtualScrollable;\n\n            if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n            }\n        },\n\n        _restoreEditableState: function() {\n            var that = this;\n            var editableState = that._editableState || {};\n            var editedModel = editableState.model;\n            var dataSource = that.dataSource;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var row;\n            var cell;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                    that._shouldClearEditableState = false;\n                    that.editRow(editedModel);\n                    if (!virtualColumns) {\n                        that._focusEditable();\n                    }\n                } else if (that._editMode() === INCELL) {\n                    row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                    cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                    if (cell[0]) {\n                        that._shouldClearEditableState = false;\n                        that.editCell(cell);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    }\n                }\n            }\n\n            that._shouldClearEditableState = true;\n        },\n\n        _focusEditable: function() {\n            var that = this;\n            var editedField = (that._editableState || {}).field;\n            var editContainer = that._editContainer;\n\n            if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n            }\n        },\n\n        _canFocusEditable: function() {\n            var that = this;\n            var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n            (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n            return result;\n        },\n\n        _cacheEditableState: function() {\n            var that = this;\n            var editContainer = that._editContainer;\n            var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var active;\n            var widget;\n            var value;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                    //change event is not fired if the editable container is scrolled\n                    //out of the virtual view with the mousewheel right after editing\n                    active.change();\n\n                    widget = kendo.widgetInstance(active, kendo.ui);\n\n                    if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                        value = active.val();\n\n                        if (active.is(\"[type='checkbox'\")) {\n                            value = active.is(\":checked\");\n                        }\n\n                        widget.value(value);\n                        widget.trigger(CHANGE);\n                    }\n                }\n\n                if (that._editMode() === INLINE) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                    };\n                } else if (that._editMode() === INCELL) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: editContainer.attr(kendo.attr(FIELD))\n                    };\n                }\n            }\n        },\n\n        _clearSortClasses: function() {\n            var that = this,\n                content = that.content || that.table,\n                lockedContent = that.lockedContent;\n\n            if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n\n            if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n        },\n\n        _clearEditableState: function() {\n            var that = this;\n\n            if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                that._editableState = null;\n            }\n        },\n\n        _destroyVirtualScrollable: function() {\n            var that = this;\n\n            that._clearEditableState();\n\n            if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = null;\n        },\n\n        _destroyRowResizing: function() {\n            if (this.rowResizing) {\n                this.rowResizing.destroy();\n\n                this.rowResizing = null;\n            }\n\n            if (this.rowResizer) {\n                this._detachRowResizerEvents();\n                this.rowResizer.off(DUBLECLICK + NS);\n                this.rowResizer = null;\n                this._clearCachedRowsHeight();\n            }\n        },\n\n        _renderNoRecordsContent: function() {\n            var that = this;\n\n            if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                    that.angular(\"cleanup\", function() {\n                        return { elements: noRecordsElement.get() };\n                    });\n\n                    noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    noRecordsElement = $(that.noRecordsTemplate({ grid: that })).insertAfter(that.table);\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: noRecordsElement.get(),\n                            data: [{}]\n                        };\n                    });\n                }\n            }\n        },\n\n        _setContentWidth: function(scrollLeft) {\n            var that = this,\n                hiddenDivClass = 'k-grid-content-expander',\n                hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                resizable = that.resizable,\n                expander;\n\n            if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    if (!expander[0]) {\n                        expander = $(hiddenDiv).appendTo(that.table.parent());\n                        if (resizable) {\n                            resizable.bind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n                    if (that.thead) {\n                        expander.width(that.thead.width());\n                        if (!isNaN(parseFloat(scrollLeft, 10))) {\n                            kendo.scrollLeft(that.content, scrollLeft);\n                        }\n                    }\n                } else if (expander[0]) {\n                    expander.remove();\n                    if (resizable) {\n                        resizable.unbind(\"resize\", that._setContentWidthHandler);\n                    }\n                }\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n\n                // workaround IE does not show vertical scrollbar for elements without width\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                    that.table[0].style.width = \"1px\";\n                }\n            }\n        },\n\n        _applyLockedContainersWidth: function() {\n            if (this.options.scrollable && this.lockedHeader) {\n                var headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0) {\n                    width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                    width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(width);\n\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                headerTable.add(this.table).width(nonLockedColsWidth);\n\n                //https://github.com/telerik/kendo-ui-core/issues/377\n                if (this.virtualScrollable && !isIE11) {\n                    contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                    this.lockedFooter.width(width);\n                    footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                    footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                    footerWrap.children().first().width(nonLockedColsWidth);\n                }\n            }\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height,\n                header = that.wrapper.children(\".k-grid-header\"),\n                scrollbar = kendo.support.scrollbar();\n            var scrollableHeight = (options.scrollable || {}).height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                    // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                    that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                    height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                    height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                var isGridHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(AUTO);\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        if (that.lockedContent) {\n                            scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                            that.lockedContent.height(height - scrollbar);\n                        }\n\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                }\n            }\n        },\n\n        _averageRowHeight: function() {\n            var that = this,\n                itemsCount = that._items(that.tbody, true).length,\n                rowHeight = that._rowHeight;\n\n            if (itemsCount === 0) {\n                return rowHeight;\n            }\n\n            if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n            }\n\n            var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n            if (rowHeight !== currentRowHeight) {\n                that._measures ++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n            }\n            return rowHeight;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                pageable,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (isPlainObject(dataSource)) {\n                extend(dataSource, { table: that.table, fields: that.columns });\n\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                    dataSource.pageSize = pageable.pageSize;\n                }\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                .unbind(PROGRESS, that._progressHandler)\n                                .unbind(ERROR, that._errorHandler)\n                                .unbind(SORT, that._sortHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler)\n                                .bind(SORT, that._sortHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _modelChange: function(e) {\n            var that = this,\n                tbody = that.tbody,\n                model = e.model,\n                row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                relatedRow,\n                cell,\n                column,\n                isAlt = row.hasClass(\"k-alt\"),\n                tmp,\n                idx = that._items(tbody).index(row),\n                isLocked = that.lockedContent,\n                selectable,\n                selectableRow,\n                childCells,\n                originalCells,\n                length;\n\n            if (isLocked) {\n                relatedRow = that._relatedRow(row);\n            }\n\n            if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (column.field === e.field) {\n                        if (!cell.hasClass(\"k-edit-cell\")) {\n                            that._displayCell(cell, column, model);\n                        } else {\n                            cell.addClass(\"k-dirty-cell\");\n                        }\n                    }\n                });\n\n            } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                    tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                    selectableRow = selectableRow.add(relatedRow);\n\n                    relatedRow.replaceWith(tmp);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: selectableRow.get() }; });\n\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                row.replaceWith(tmp);\n\n                tmp = that._items(tbody).eq(idx);\n\n                var angularData = [ { dataItem: model } ];\n\n                if (isLocked) {\n                    row = row.add(relatedRow);\n\n                    relatedRow = that._relatedRow(tmp)[0];\n                    adjustRowHeight(tmp[0], relatedRow);\n\n                    tmp = tmp.add(relatedRow);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: tmp.get(),\n                        data: angularData\n                     };\n                });\n\n                selectable = that.options.selectable;\n                if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                   that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                    column = that.columns[idx];\n\n                    cell = childCells.eq(idx);\n                    if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                        cell.addClass(SELECTED);\n                    }\n                }\n\n                that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pagerWrap,\n                pageable = that.options.pageable,\n                size = that.options.size,\n                navigatable = that.options.navigatable;\n\n            if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                    pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                    pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                    pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                    that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                    that.pager = pageable;\n                } else {\n                    if (that.dataSource._groupPaging) {\n                        that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    } else {\n                        that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    }\n                }\n\n                that.pager.bind(\"pageChange\", function(e) {\n                    if (that.trigger(\"page\", { page: e.index })) {\n                        e.preventDefault();\n                    }\n                });\n\n                that._togglePagerVisibility();\n            }\n        },\n\n        _footer: function() {\n            var that = this,\n                aggregates = that.dataSource.aggregates(),\n                html = \"\",\n                footerTemplate = that.footerTemplate,\n                options = that.options,\n                footerWrap,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n\n                if (footer.length) {\n                    var tmp = html;\n\n                    that.angular(\"cleanup\", function() {\n                        return { elements: footer.get() };\n                    });\n\n                    footer.replaceWith(tmp);\n                    footer = that.footer = tmp;\n                } else {\n                    if (options.scrollable) {\n                        footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                    } else {\n                        footer = that.footer = html.insertAfter(that.tbody);\n                    }\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: footer.find(\"td:not(.k-group-cell, .k-hierarchy-cell)\").get(),\n                        data: map(that.columns, function(col) {\n                            return {\n                                column: col,\n                                aggregate: aggregates[col.field]\n                            };\n                        })\n                    };\n                });\n\n            } else if (footer && !that.footer) {\n                that.footer = footer;\n            }\n\n            if (footer.length) {\n                if (options.scrollable) {\n                    footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                    that.scrollables = $(\n                        that.scrollables\n                            .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                            .toArray()\n                    ).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                    footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                    var offset = kendo.scrollLeft(that.content);\n\n                    if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                        offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                    }\n                    kendo.scrollLeft(footerWrap, offset);\n                }\n            }\n\n            if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n                that._applyLockedContainersWidth();\n                that._syncLockedFooterHeight();\n            }\n        },\n\n        _wrapFooter: function(footerRow) {\n            var that = this,\n                html = \"\",\n                table,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n            if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                table = html.find(\"table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that._appendCols(table);\n                html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                return html;\n            }\n\n            return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n        },\n\n        _columnMenu: function() {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                column,\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                sortable,\n                filterable,\n                cells,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0,\n                hasLockableColumns = grep(that.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0,\n                hasStickableColumns = grep(that.columns, function(item) {\n                    return item.stickable === true;\n                }).length > 0,\n                isMobile = this._isMobile,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                stickCallback = function(e) {\n                    that.trigger(COLUMNSTICK, { column: e.column });\n                },\n                unstickCallback = function(e) {\n                    that.trigger(COLUMNUNSTICK, { column: e.column });\n                },\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                $angular = options.$angular;\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    var cell = cells.eq(idx);\n\n                    if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        menu = cell.data(\"kendoColumnMenu\");\n                        if (menu) {\n                            menu.destroy();\n                        }\n\n                        sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                            compare: (column.sortable || {}).compare\n                        }) : false;\n\n                        filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                        if (column.filterable && column.filterable.dataSource) {\n                            filterable.forceUnique = false;\n                            filterable.checkSource = column.filterable.dataSource;\n                        }\n\n                        if (filterable) {\n                            filterable.format = column.format;\n                        }\n\n                        menuOptions = {\n                            dataSource: that.dataSource,\n                            values: column.values,\n                            columns: columnMenu.columns,\n                            sortable: sortable,\n                            filterable: filterable,\n                            messages: columnMenu.messages,\n                            owner: that,\n                            closeCallback: closeCallback,\n                            init: initCallback,\n                            open: openCallback,\n                            stick: stickCallback,\n                            unstick: unstickCallback,\n                            pane: that.pane,\n                            sort: sortHandler,\n                            filtering: filterHandler,\n                            filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                            hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                            hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                            encodeTitles: that.options.encodeTitles,\n                            componentType: columnMenu.componentType,\n                            appendTo: DOT + classNames.headerCellInner\n                        };\n\n                        if ($angular) {\n                            menuOptions.$angular = $angular;\n                        }\n\n                        cell.kendoColumnMenu(menuOptions);\n                    }\n                }\n            }\n        },\n\n        _headerCells: function() {\n            return $(this.thead).find(\"th\").filter(function() {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n            });\n        },\n\n        _hasFilterMenu: function() {\n            var filterable = this.options.filterable;\n            if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n            }\n\n            return filterable;\n        },\n\n        _filterable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                filterMenu,\n                cells,\n                cell,\n                filterInit = function(e) {\n                    that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterOpen = function(e) {\n                    that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                },\n                filterable = that._hasFilterMenu();\n\n            if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead);//that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    cell = cells.eq(idx);\n\n                    if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        filterMenu = cell.data(\"kendoFilterMenu\");\n\n                        if (filterMenu) {\n                            filterMenu.destroy();\n                        }\n\n                        filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                        if (filterMenu) {\n                           filterMenu.destroy();\n                        }\n\n                        var columnFilterable = columns[idx].filterable;\n\n                        var options = extend({},\n                            filterable,\n                            columnFilterable,\n                            {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            }\n                        );\n\n                        if (columnFilterable && columnFilterable.messages) {\n                            options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                        }\n                        if (columnFilterable && columnFilterable.dataSource) {\n                            options.forceUnique = false;\n                            options.checkSource = columnFilterable.dataSource;\n                        }\n\n                        if (columnFilterable && columnFilterable.multi) {\n                            cell.kendoFilterMultiCheck(options);\n                        } else {\n                            cell.kendoFilterMenu(options);\n                        }\n                    }\n                }\n            }\n        },\n\n        _filterRow: function() {\n            var that = this;\n            if (!that._hasFilterRow()) {\n               return;\n            }\n\n            var settings;\n            var $angular = that.options.$angular;\n            var columns = leafColumns(that.columns),\n                filterable = that.options.filterable,\n                rowheader = that.thead.find(\".k-filter-row\"),\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n\n            this._updateHeader(that._groups());\n\n            for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                    td.hide();\n                }\n                rowheader.append(td);\n                if (field && col.filterable !== false) {\n                    var cellOptions = col.filterable && col.filterable.cell || {};\n\n                    suggestDataSource = that.options.dataSource;\n                    if (suggestDataSource instanceof DataSource) {\n                        suggestDataSource = that.options.dataSource.options;\n                    }\n\n                    var messages = extend(true, {}, filterable.messages);\n                    if (col.filterable) {\n                        extend(true, messages, col.filterable.messages);\n                    }\n\n                    if (cellOptions.enabled === false) {\n                        td.html(\"&nbsp;\");\n                        continue;\n                    }\n                    if (cellOptions.dataSource) {\n                        suggestDataSource = cellOptions.dataSource;\n                        customDataSource = true;\n                    }\n                    if (col.filterable && col.filterable.operators) {\n                        operators = col.filterable.operators;\n                    }\n\n                    settings = {\n                        column: col,\n                        dataSource: that.dataSource,\n                        suggestDataSource: suggestDataSource,\n                        customDataSource: customDataSource,\n                        field: field,\n                        messages: messages,\n                        size: that.options.size,\n                        values: col.values,\n                        template: cellOptions.template,\n                        delay: cellOptions.delay,\n                        inputWidth: cellOptions.inputWidth,\n                        suggestionOperator: cellOptions.suggestionOperator,\n                        minLength: cellOptions.minLength,\n                        dataTextField: cellOptions.dataTextField,\n                        operator: cellOptions.operator,\n                        operators: operators,\n                        showOperators: cellOptions.showOperators,\n                        change: filterHandler\n                    };\n\n                    if ($angular) {\n                        settings.$angular = $angular;\n                    }\n\n                    $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                        .appendTo(td)\n                        .kendoFilterCell(settings);\n                } else {\n                    td.html(\"&nbsp;\");\n                }\n                td.data(\"column\", col);\n            }\n\n            this._filterFocusable().attr(TABINDEX, -1);\n        },\n\n        _sortable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                column,\n                sorterInstance,\n                cell,\n                sortable = that.options.sortable,\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                    }\n                };\n\n\n            if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.destroy();\n                        }\n\n                        cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                            .kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: that.dataSource,\n                                    aria: true,\n                                    filter: \":not(.k-column-active)\",\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n                cells = null;\n            }\n        },\n\n        _columns: function(columns) {\n            var that = this,\n                table = that.table,\n                encoded,\n                cols = table.find(\"col\"),\n                lockedCols,\n                headerRows = that.element.find('thead tr'),\n                dataSource = that.options.dataSource,\n                draggableColumns;\n\n            // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n            columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                   field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                    field: field,\n                    type: type,\n                    title: title,\n                    sortable: sortable !== \"false\",\n                    filterable: filterable !== \"false\",\n                    groupable: groupable !== \"false\",\n                    menu: menu !== \"false\",\n                    columnMenu: columnMenu !== \"false\",\n                    template: th.attr(kendo.attr(\"template\")),\n                    width: cols.eq(idx).css(WIDTH)\n                };\n            });\n\n            encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n            if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                    throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n            }\n\n            if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n            }\n\n            that.columns = normalizeColumns(columns, encoded);\n\n            if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n            }\n\n            draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n            if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                    draggableColumns[i].headerAttributes = $.extend({\n                        \"aria-label\": that.options.messages.dragHandleLabel\n                    }, draggableColumns[i].headerAttributes);\n                }\n            }\n\n            that._foreignKeyBindings(that.columns);\n        },\n\n        _foreignKeyBindings: function(columns) {\n            var that = this;\n            var length = columns.length;\n            var column;\n\n            for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                    that._fetchForeignKeyValues(column);\n                }\n            }\n        },\n\n        _fetchForeignKeyValues: function(column) {\n            var that = this;\n            var promise = $.Deferred();\n\n            that._hasBoundForeignKey = true;\n            column.dataSource = DataSource.create(column.dataSource);\n\n            if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n            }\n\n            that._foreignKeyPromises.push(promise);\n            column.dataSource.fetch().then(function() {\n                var data = column.dataSource.data();\n                column.values = data.map(function(item) {\n                    return {\n                        value: item[column.dataValueField],\n                        text: item[column.dataTextField]\n                    };\n                });\n                promise.resolve();\n            });\n\n        },\n\n        _updateColumnIDs: function(columns, tr) {\n\n            if (!columns.length) {\n                return;\n            }\n\n            var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n            var id;\n            for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(ID);\n                if (id) {\n                    columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                }\n            }\n\n            this._updateColumnIDs(childColumns(columns), tr.next());\n        },\n\n        _headerCheckboxClick: function(e) {\n            var that = this,\n                checkBox = $(e.target),\n                checked = checkBox.prop(\"checked\");\n\n            if (!that._belongsToGrid(checkBox)) {\n                return;\n            }\n\n            if (checked) {\n                that.select(that.items());\n            } else {\n                that.clearSelection();\n            }\n\n            that.trigger(CHANGE);\n        },\n\n        _checkboxClick: function(e) {\n            var that = this,\n                row = $(e.target).closest(TR),\n                isSelecting = !row.hasClass(SELECTED);\n\n            if (!that._belongsToGrid(row)) {\n                return;\n            }\n\n            if (isSelecting) {\n                that.select(row);\n            } else {\n                that._deselectCheckRows(row);\n            }\n            that.trigger(CHANGE);\n        },\n\n        _groups: function() {\n            var group = this.dataSource.group();\n\n            return group ? group.length : 0;\n        },\n\n        _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                idx,\n                length = columns.length,\n                template,\n                state = { storage: {}, count: 0 },\n                column,\n                type,\n                hasDetails = that._hasDetails(),\n                groups = that._groups();\n\n            var fieldAttr = kendo.attr(\"field\");\n            var field;\n            var classAttribute;\n            let rowTemplateFunc;\n\n            if (!rowTemplate) {\n                rowTemplateFunc = (data) => {\n                    var uid = length ? ` ${kendo.attr(\"uid\")}=\"${kendo.getter(\"uid\")(data)}\"` : '';\n                    var rowTemplateResult = `<tr class=\"${alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row '}k-master-row\"${uid}>`;\n\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplateResult += groupCells(groups);\n                    }\n\n                    if (hasDetails) {\n                        rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($(`<a href=\"#\" ${ARIA_LABEL}=\"${EXPAND}\" tabindex=\"-1\"></a>`), { icon: `caret-alt-${isRtl ? \"left\" : \"right\"}` }) + '</td>';\n                    }\n\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        field = column.field;\n\n                        if (that._editMode() === INCELL && field) {\n                            column.attributes = column.attributes || {};\n\n                            if (that.virtualScroll) {\n                                column.attributes[fieldAttr] = field;\n                            }\n\n                            let dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                            column.attributes[\"class\"] = (column.attributes[\"class\"] || \"\");\n\n                            if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                                column.attributes[\"class\"] += dirtyCellTemplate;\n                            }\n                        }\n\n                        if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                            column.attributes = removeHiddenStyle(column.attributes);\n                        } else if (!column.colSpan && column.hidden) {\n                            column.attributes = addHiddenStyle(column.attributes);\n                        }\n\n                        if (column.command) {\n                            column.attributes = column.attributes || {};\n                            classAttribute = column.attributes[\"class\"];\n\n                            if (typeof classAttribute !== \"undefined\") {\n                                if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                    column.attributes[\"class\"] += \" k-command-cell\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-command-cell\";\n                            }\n                        }\n\n                        if (column.draggable) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                            } else {\n                                column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                            }\n\n                            if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                            }\n\n                            if (typeof column.attributes.style !== \"undefined\") {\n                                column.attributes.style += \" cursor: move;\";\n                            } else {\n                                column.attributes.style = \"cursor: move;\";\n                            }\n                        }\n\n                        let attributes = column.attributes instanceof Function ? column.attributes(data) : column.attributes;\n                        let columnAttributes = stringifyAttributes(attributes);\n                        let colSpanAttributes = '';\n\n                        if (column.colSpan) {\n                            if (column.colSpan > 1) {\n                                colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                            }\n                            colSpanAttributes += ` colSpan=\"${column.colSpan}\"`;\n                        }\n                        rowTemplateResult += decorateCellWithClass(`<td${columnAttributes}${colSpanAttributes}>`);\n                        rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                        rowTemplateResult += \"</td>\";\n                    }\n\n                    rowTemplateResult += \"</tr>\";\n                    return rowTemplateResult;\n                };\n            }\n\n            rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n            if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n            }\n\n            return rowTemplate;\n        },\n\n        _dirtyCellTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? ' k-dirty-cell' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _headerCellText: function(column) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.headerTemplate,\n                type = typeof(template),\n                text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n            if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n            } else if (type === STRING) {\n                text = template;\n            }\n            return text;\n        },\n\n        _cellTmpl: function(column, state) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.template,\n                field = column.field,\n                // html = \"\",\n                idx,\n                length,\n                format = column.format,\n                type = typeof template,\n                columnValues = column.values;\n\n            if (column.command) {\n                if (isArray(column.command)) {\n                    return (data) => {\n                        let html = \"\";\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                            } else {\n                                html += that._createButton(column.command[idx]);\n                            }\n                        }\n                        return html;\n                    };\n                }\n                return () => that._createButton(column.command);\n            }\n\n            if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n            }\n\n            if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n            }\n\n            return (data) => {\n                let html = that._dirtyIndicatorTemplate(field)(data);\n\n                if (type === FUNCTION) {\n                    state.storage[\"tmpl\" + state.count] = template;\n                    html += template(data);\n                    state.count++;\n                } else if (type === STRING) {\n                    html += kendo.template(template, settings)(data);\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                    var v = convertToObject(columnValues);\n                    var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                    html += f != null ? f : '';\n                } else {\n                    let fieldValue = '';\n                    if (field) {\n                        field = kendo.getter(field)(data);\n                        fieldValue = field == null ? '' : field;\n                    }\n\n                    if (format) {\n                        fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                    }\n\n                    html += column.encoded ? encode(fieldValue) : fieldValue;\n                }\n\n                return html;\n            };\n        },\n\n        _dirtyIndicatorTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _virtualCols: function(columns) {\n            var that = this;\n            var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n            var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n            var tableWidth = outerWidth(that.content);\n            var sumOfWidths = sumWidths(columns);\n            var colsToRender = [];\n            var firstColspan = 0;\n            var lastColspan = 0;\n            var hiddenColumns = 0;\n            var idx = 0;\n            var widthOfHiddenColumns = 0;\n            var considerNext;\n\n            for (idx = 0; idx < columns.length; idx++) {\n                considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                    if (widths[idx]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[idx];\n                } else {\n                    firstColspan = 1 + hiddenColumns;\n                    break;\n                }\n            }\n\n            hiddenColumns = 0;\n            widthOfHiddenColumns = 0;\n\n            for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                    if (widths[i]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[i];\n                } else {\n                    lastColspan = 1 + hiddenColumns;\n                    for (var j = idx; j <= i; j++) {\n                        if (columns[j].locked) {\n                            continue;\n                        }\n                        colsToRender.push(columns[j]);\n                        if (columns[j].colSpan) {\n                            delete columns[j].colSpan;\n                        }\n                    }\n                    colsToRender[0].colSpan = firstColspan;\n                    colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                    break;\n                }\n            }\n\n            if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n            }\n\n            that.virtualCols = colsToRender;\n\n            return colsToRender;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                dataSource = that.dataSource,\n                groups = dataSource.group(),\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                aggregates = dataSource.aggregate(),\n                columnLeafs = leafColumns(that.columns),\n                columnsLocked = leafColumns(lockedColumns(that.columns)),\n                leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                    throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n            } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n            }\n\n            if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || (() => \"\"));\n            }\n\n            if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n            }\n\n            if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                }\n            }\n\n            if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n            } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n            }\n\n            if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n            }\n        },\n\n        _noRecordsTmpl: function() {\n            var wrapper = '<div class=\"{0}\">{1}</div>';\n            var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n            var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ' style=\"margin:0 auto;position:static;\"' : '';\n            var state = { storage: {}, count: 0 };\n            var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var template;\n            // var html = \"\";\n            var type;\n            var tmpl;\n            let resultTemplate;\n\n            if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n            } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n            }\n\n            type = typeof template;\n            if (type === \"function\") {\n                let currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                state.count++;\n                resultTemplate = (data) => kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data));\n\n            } else if (type === \"string\") {\n                resultTemplate = this.options.noRecords.template ?\n                    kendo.format(wrapper, NORECORDSCLASS, template)\n                    : () => kendo.format(wrapper, NORECORDSCLASS, template);\n            }\n\n            tmpl = kendo.template(resultTemplate, settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            return tmpl;\n        },\n\n        _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                // html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                groups = that._groups(),\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column;\n\n            let footerTemplateFunction = (data) => {\n                let html = '<tr class=\"' + rowClass + '\">';\n\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                }\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        html += template(data);\n                        count++;\n                    } else {\n                        html += \"&nbsp;\";\n                    }\n\n                    html += \"</td>\";\n                }\n\n                html += '</tr>';\n                return html;\n            };\n\n            let resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n            if (count > 0) {\n                return resultTemplate.bind(storage);\n            }\n\n            return resultTemplate;\n        },\n\n        _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column,\n                headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                groupHeaderColumnTemplateClass;\n\n            if (headerTemplateIndex < 0) {\n                return;\n            }\n            var groupHeaderTemplFunc = (data) => {\n                var resultHtml = '<tr class=\"' + rowClass + '\">';\n\n                if (!skipGroupCells) {\n                    for (var i = 0; i < data.groupCells; i++) {\n                        resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                    }\n                }\n\n                if (that._hasDetails()) {\n                    resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                    return resultHtml;\n                    // return kendo.template(resultHtml, settings);\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE) {\n                    headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                }\n                else {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                }\n\n                for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    if (column.sticky) {\n                        groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                        if (!groupHeaderColumnTemplateClass) {\n                            groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                        }\n\n                        resultHtml += \"<td class='k-table-td \" + STICKY_CELL_CLASS + \" \" + groupHeaderColumnTemplateClass + \"' style='\" + (column.stickyStyle || '') + \"'>\";\n                    } else {\n                        resultHtml += \"<td class='k-table-td'>\";\n                    }\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        resultHtml += storage[\"tmpl\" + count](data);\n                        count++;\n                    } else {\n                        resultHtml += \"&nbsp;\";\n                    }\n\n                    resultHtml += \"</td>\";\n                }\n\n                resultHtml += '</tr>';\n\n                return resultHtml;\n            };\n\n            html = kendo.template(groupHeaderTemplFunc, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _detailTmpl: function(template) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                templateFunctionStorage = {},\n                templateFunctionCount = 0,\n                groups = that._groups(),\n                colspan = visibleColumns(leafColumns(that.columns)).length,\n                type = typeof template;\n\n            let detailTemplateFunction = (data) => {\n                let html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n\n                html += `<td role=\"gridcell\" class=\"k-hierarchy-cell k-table-td\"></td><td role=\"gridcell\" class=\"k-table-td k-detail-cell\"${colspan ? ` colspan=\"${colspan}\"` : ''}>`;\n                if (type === FUNCTION) {\n                    templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                    html += template(data);\n                    templateFunctionCount++;\n                } else {\n                    html += kendo.template(template, settings)(data);\n                }\n\n                html += \"</td></tr>\";\n                return html;\n            };\n\n            let resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n            if (templateFunctionCount > 0) {\n                return resultTemplate.bind(templateFunctionStorage);\n            }\n\n            return resultTemplate;\n        },\n\n        _hasDetails: function() {\n            var that = this;\n\n            return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n        },\n        _hasFilterRow: function() {\n            var filterable = this.options.filterable;\n            var hasFiltering = filterable &&\n                    typeof filterable.mode == STRING &&\n                    filterable.mode.indexOf(ROW) != -1;\n            var columns = this.columns;\n            var columnsWithoutFiltering = $.grep(columns, function(col) {\n                return col.filterable === false;\n            });\n\n            if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n            }\n\n            return hasFiltering;\n        },\n\n        _details: function() {\n            var that = this;\n\n            if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n            }\n\n            that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n                e.preventDefault();\n                return false;\n            });\n        },\n\n        _toggleDetails: function(button, omitAnimation) {\n            var that = this,\n            cell = button.closest(\"td.k-hierarchy-cell\"),\n            expanding = button.is(CARET_ALT_RIGHT),\n            masterRow = button.closest(\"tr.k-master-row\"),\n            masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n            detailRow,\n            detailTemplate = that.detailTemplate,\n            data,\n            hasDetails = that._hasDetails(),\n            ariaLabelText = expanding ? COLLAPSE : EXPAND,\n            ariaExpandText = expanding ? true : false;\n\n            if (!expanding) {\n                kendo.ui.icon(button, { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            } else {\n                kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n            }\n\n            button.attr(ARIA_LABEL, ariaLabelText);\n\n            cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n            detailRow = masterRow.next();\n\n            if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n\n                detailRow = $(detailTemplate(data))\n                    .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                    .insertAfter(masterRow);\n\n                if (masterRowIndex || masterRowIndex === 0) {\n                    detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: detailRow.get(),\n                        data: [ { dataItem: data } ]\n                    };\n                });\n\n                that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n            }\n\n            that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n            if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n            } else {\n                detailRow.toggle(expanding);\n            }\n        },\n\n        dataItem: function(tr) {\n            tr = $(tr)[0];\n            if (!tr) {\n                return null;\n            }\n\n            var rows = this.tbody.children(),\n                classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                idx = tr.sectionRowIndex,\n                j, correctIdx;\n\n            correctIdx = idx;\n\n            for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                    correctIdx--;\n                }\n            }\n\n            return this._data[correctIdx];\n        },\n\n        expandRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        collapseRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        _createHeaderCells: function(columns, rowSpan) {\n            var that = this,\n                idx,\n                th,\n                text,\n                html = \"\",\n                length,\n                title,\n                columnMenu = that.options.columnMenu,\n                sortable = that.options.sortable,\n                filterable = that._hasFilterMenu(),\n                messages = that.options.messages,\n                leafs = leafColumns(that.columns),\n                groups = that.dataSource.group(),\n                field;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n\n                let index = inArray(th, leafs);\n                let currentTh = \"\";\n\n                if (th.selectable) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                    currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : \"\";\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += \">\" + text + \"</th>\";\n                } else {\n                    if (th.field) {\n                        field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                    }\n\n                    currentTh += \"<th scope='col' \" + field;\n                    if ((columnMenu && th.field && th.menu !== false)) {\n                        currentTh += \" aria-haspopup='menu'\";\n                    } else if (filterable && th.filterable !== false && !th.command) {\n                        currentTh += \" aria-haspopup='dialog'\";\n                    }\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (columns[idx].colSpan > 1) {\n                        currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    } else if (columns[idx].colSpan === 1) {\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    }\n\n                    if (title) {\n                        title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                        currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                    }\n\n                    if (th.groupable !== undefined$1) {\n                        currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                    }\n\n                    if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                        currentTh += \"title='\";\n                        currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                        currentTh += \"' \";\n                    }\n\n                    if (th.aggregates && th.aggregates.length) {\n                        currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += stringifyAttributes(th.headerAttributes);\n\n                    if (sortable) {\n                        text = kendo.template(SORTHEADERTMPL)({ text: text });\n                    }\n\n                    currentTh += \">\" + text + \"</th>\";\n                }\n                html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n            }\n            return html;\n        },\n\n        _appendLockedColumnContent: function() {\n            var columns = this.columns,\n                idx,\n                colgroup = this.table.find(\"colgroup\"),\n                cols = colgroup.find(COLGROUP),\n                length,\n                lockedCols = $(),\n                skipHiddenCount = 0,\n                container,\n                colSpan,\n                spanIdx,\n                colOffset = 0;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n\n                    if (isVisible(columns[idx])) {\n                        colSpan = 1;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    } else {\n                        skipHiddenCount ++;\n                    }\n                }\n            }\n\n            container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n            // detach is required for IE8, otherwise it switches to compatibility mode\n            colgroup.detach();\n            container.find(\"colgroup\").append(lockedCols);\n            colgroup.insertBefore(this.table.find(\"tbody\"));\n\n            this.lockedContent = container.insertBefore(this.content);\n            this.lockedTable = container.children(\"table\");\n            this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n        },\n\n        _appendLockedColumnFooter: function() {\n            var that = this;\n            var footer = that.footer;\n            var cells = footer.find(\".k-footer-template>td\");\n            var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n            var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n            var idx, length;\n            var groups = that._groups();\n            var lockedCells = $(), lockedCols = $();\n\n            html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n            lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n            for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n            }\n\n            lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n            for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n            }\n\n            lockedCells.appendTo(html.find(TR));\n            lockedCols.appendTo(html.find(\"colgroup\"));\n            that.lockedFooter = html.prependTo(footer);\n        },\n\n        _appendLockedColumnHeader: function(container) {\n            var that = this,\n                columns = this.columns,\n                idx,\n                html,\n                length,\n                colgroup,\n                tr,\n                trFilter,\n                table,\n                header,\n                filtercellCells,\n                rows = [],\n                skipHiddenCount = 0,\n                cols = $(),\n                hasFilterRow = that._hasFilterRow(),\n                filterCellOffset = 0,\n                filterCells = $(),\n                cell,\n                leafColumnsCount = 0,\n                cells = $();\n\n            colgroup = that.thead.prev().find(COLGROUP);\n            header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var colOffset = 0;\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                    cell = header.eq(idx);\n                    leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                    if (isVisible(columns[idx])) {\n                        var colSpan = null;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    }\n\n                    mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                    leafColumnsCount = leafColumnsCount || 1;\n                    for (var j = 0; j < leafColumnsCount; j++) {\n                        filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                    }\n                    filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                    skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                    skipHiddenCount++;\n                }\n            }\n\n            if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\" style=\"width:1px\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                table = $(html);\n\n                table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                    cells = toJQuery(rows[idx]);\n                    tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n                if (rows.length < count) {\n                    removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n\n                return true;\n            }\n            return false;\n        },\n\n        _removeLockedContainers: function() {\n            var elements = this.lockedHeader\n                .add(this.lockedContent)\n                .add(this.lockedFooter);\n\n            kendo.destroy(elements);\n            elements.off(NS).remove();\n\n            this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n            this.selectable = null;\n        },\n\n        _thead: function() {\n            var that = this,\n                columns = that.columns,\n                hasDetails = that._hasDetails() && columns.length,\n                hasFilterRow = that._hasFilterRow(),\n                idx,\n                html = \"\",\n                thead = that.table.find(\">thead\"),\n                hasTHead = that.element.find(\"thead\").first().length > 0,\n                headerContent = that.options.messages.expandCollapseColumnHeader,\n                tr;\n\n            if (!thead.length) {\n                thead = $(\"<thead class='k-table-thead' role='rowgroup'/>\").insertBefore(that.tbody);\n            }\n\n            if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n            } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n            } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n            }\n\n            if (!tr.length) {\n                tr = thead.children().first();\n                if (!tr.length) {\n                   var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                   that._prepareColumns(rows, columns);\n\n                   for (idx = 0; idx < rows.length; idx++) {\n                       html += \"<tr class='k-table-row'>\";\n                       if (hasDetails) {\n                           html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                       }\n                       html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                       html += \"</tr>\";\n                   }\n\n                   tr = $(html);\n                }\n            } else {\n                for (idx = 0; idx < columns.length; idx++) {\n\t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n\t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n\t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n\t\t\t\t\t\tcell[0].style.display = NONE;\n\t\t\t\t\t}\n               }\n\n               that._updateHeadersAttr(childColumns(columns));\n\t\t\t}\n\n            if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row k-table-row\");\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                    filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                if (existingFilterRow.length) {\n                    kendo.destroy(existingFilterRow);\n                    existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n            }\n\n            if (!tr.children().length) {\n                html = \"\";\n                if (hasDetails) {\n                    html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n\n                tr.html(html);\n            } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n            }\n\n            tr.find(\"th\").addClass(\"k-header\");\n\n            if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n            }\n\n            tr.find(\"script\").remove().end().prependTo(thead);\n\n            if (that.thead) {\n                that._destroyColumnAttachments();\n            }\n\n            this.angular(\"cleanup\", function() {\n                return {\n                    elements: thead.find(\"th\" + NAVCELL).get()\n                };\n            });\n\n            this.angular(\"compile\", function() {\n                return {\n                    elements: thead.find(HEADERCELLS).get(),\n                    data: map(columns, function(col) { return { column: col }; })\n                };\n            });\n\n            that.thead = thead;\n\n            that._sortable();\n\n            that._filterable();\n\n            that._filterRow();\n\n            that._scrollable();\n\n            that._columnMenu();\n\n            var syncHeight;\n            var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n            if (hasLockedColumns) {\n\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                    that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                        move: function(e) {\n                            that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that._updateLockedCols();\n            }\n\n            that._updateCols();\n\n            that._updateColumnCellIndex();\n\n            that._updateFirstColumnClass();\n\n            that._resizable();\n\n            that._draggable();\n\n            that._reorderable();\n\n            that._updateHeader(that._groups());\n\n            that._updateStickyColumns();\n\n            if (hasLockedColumns) {\n                if (syncHeight) {\n                    that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n            }\n\n            if (that.groupable) {\n                that._attachGroupable();\n            }\n        },\n\n        _retrieveFirstColumn: function(columns, rows) {\n            var result = $();\n\n            if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                    column = column.columns[0];\n                    rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n            }\n\n            return result;\n        },\n\n        _updateFirstColumnClass: function() {\n            var that = this,\n                columns = that.columns || [],\n                hasDetails = that._hasDetails() && columns.length;\n\n            if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            }\n        },\n\n        _prepareColumns: function(rows, columns, parentCell, parentRow) {\n            var row = parentRow || rows[rows.length - 1];\n\n            var childRow = rows[row.index + 1];\n            var totalColSpan = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                var cell = { column: columns[idx], colSpan: 0 };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                    if (!childRow) {\n                        childRow = { rowSpan: 0, cells: [], index: rows.length };\n                        rows.push(childRow);\n                    }\n                    cell.colSpan = columns[idx].columns.length;\n                    this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                    totalColSpan += cell.colSpan - 1;\n                    row.rowSpan = rows.length - row.index;\n                }\n            }\n            if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var content = this.content;\n\n            if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n            }\n\n            var scrollTop = content.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight &&\n                    (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                    content[0].scrollTop > 0 && delta > 0)) {\n                    e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _isLocked: function() {\n            return this.lockedHeader != null;\n        },\n\n        _updateHeaderCols: function() {\n            var table = this.thead.parent().add(this.table);\n\n            if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n            }\n        },\n\n        _updateColumnSorters: function() {\n            var that = this;\n            var cells = leafDataCells(that.thead);\n            var columns = leafColumns(that.columns);\n            var column;\n            var cell;\n            var sorterInstance;\n\n            if (!that.options.sortable) {\n                return;\n            }\n\n            for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                        sorterInstance.refresh();\n                    }\n                }\n            }\n        },\n\n        _updateHeadersAttr: function(columns) {\n            if (!columns.length) {\n                return;\n            }\n\n            var that = this;\n\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                    var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                    th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n            }\n\n            that._updateHeadersAttr(childColumns(columns));\n        },\n\n        _updateCols: function(table) {\n            table = table || this.thead.parent().add(this.table);\n\n            this._appendCols(table, this._isLocked());\n        },\n\n        _updateLockedCols: function(table) {\n            if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _appendCols: function(table, locked) {\n            if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _autoColumns: function(schema) {\n            if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n\n                schema = schema.toJSON();\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                    that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                }\n\n                that._thead();\n\n                that._templates();\n            }\n        },\n\n        _setRowCachedHeight: function(row, uid) {\n            var cachedHeights = this._cachedRowsHeight,\n                cachedHeight = cachedHeights[uid],\n                $row;\n\n            if (cachedHeight) {\n                $row = $(row);\n                $row[0].style.height = cachedHeight + \"px\";\n                row = $row.prop(\"outerHTML\");\n            }\n\n            return row;\n        },\n\n        _rowsHtml: function(data, templates) {\n            var that = this,\n                html = \"\",\n                idx,\n                rowTemplate = templates.rowTemplate,\n                altRowTemplate = templates.altRowTemplate,\n                cachedHeights = that._cachedRowsHeight,\n                length, row;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                    that._skipRerenderItemsCount--;\n                } else {\n                    if (idx % 2) {\n                        row = altRowTemplate(data[idx]);\n                    } else {\n                        row = rowTemplate(data[idx]);\n                    }\n\n                    if (cachedHeights) {\n                        row = that._setRowCachedHeight(row, data[idx].uid);\n                    }\n\n                    html += row;\n                }\n                that._data.push(data[idx]);\n            }\n\n            return html;\n        },\n\n        _groupData: function(group, skipFooter, firstColumn) {\n            var that = this,\n                footerDefaults = that._groupAggregatesDefaultObject || {},\n                groupItems = group.items,\n                aggregates = extend({}, footerDefaults, group.aggregates),\n                headerData = extend({}, {\n                    field: group.field,\n                    value: group.value,\n                    items: groupItems,\n                    aggregates: aggregates\n                }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                footerData = {};\n\n            if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                    footerData[aggregate] = extend({}, aggregates[aggregate],\n                        { group: { field: group.field, value: group.value, items: groupItems } }\n                    );\n                }\n            }\n            return extend({}, footerData, headerData);\n        },\n\n        _removeGroupIfEmpty: function(row) {\n            var that = this,\n                itemsCount,\n                subgroupsCount,\n                length = that.dataSource._group.length;\n\n            for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                    row.hide();\n                }\n\n            }\n        },\n\n        _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n            var that = this,\n                html = \"\",\n                idx,\n                length,\n                isLocked = that.lockedContent != null,\n                field = group.field,\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                firstColumn = visibleColumns(that.columns)[0],\n                firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                groupItems = group.currentItems || group.items,\n                groups = that._groups(),\n                groupFooterTemplate = templates.groupFooterTemplate,\n                groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                groupData,\n                isGroupPaged = that.dataSource._isGroupPaged(),\n                expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n            if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n            }\n\n            if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n            }\n            if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n            }\n\n            if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                    html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                    group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                    group.excludeHeader = false;\n                }\n            } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            if (expanded) {\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n            }\n\n            if (groupFooterTemplate) {\n\n                if (skipLastGroup) {\n                    if (!inArray(group.value, that._skippedGroups)) {\n                        that._skippedGroups.push(group.value);\n                    }\n                } else {\n                    if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                        that._skippedGroups.shift();\n                    }\n                    if (!that._skipRerenderItemsCount) {\n                        html += groupFooterTemplate(groupData);\n                    }\n                }\n            }\n            return html;\n        },\n\n        collapseGroup: function(group) {\n            var level,\n                that = this,\n                groupToCollapse = group,\n                groupable = this.options.groupable,\n                showFooter = groupable.showFooter,\n                footerCount = showFooter ? 0 : 1,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                tr;\n\n            group = $(group);\n            level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterCollapse;\n\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"collapseGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_DOWN).length) {\n                kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            }\n\n            group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n            group = group.nextAll(TR);\n\n            var toHide = [];\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                    footerCount--;\n                }\n\n                if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                    break;\n                }\n\n                if (relatedGroup.length) {\n                    toHide.push(relatedGroup[idx]);\n                }\n                toHide.push(tr[0]);\n            }\n\n            $(toHide).hide();\n\n            if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function() {\n                    that.content.scroll();\n                    that._groupToCollapse = groupToCollapse;\n                });\n            }\n        },\n\n        expandGroup: function(group) {\n                group = $(group);\n\n            var that = this,\n                showFooter = that.options.groupable.showFooter,\n                level,\n                tr,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                footersVisibility = [],\n                groupsCount = 1;\n\n                level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterExpand;\n\n                that.dataSource._groupsState[groupUid] = true;\n                if (groupObject.items && groupObject.items.length) {\n                    groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"expandGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_RIGHT).length) {\n                kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n            }\n\n            group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n            group = group.nextAll(TR);\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n                if (offset <= level) {\n                    break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n\n                    if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        that.expandGroup(tr);\n                    }\n\n                    if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        tr.next().show();\n                        relatedGroup.eq(idx + 1).show();\n                    }\n                }\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    if (showFooter) {\n                        footersVisibility.push(tr.is(\":visible\"));\n                    }\n                    groupsCount ++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                    if (showFooter) {\n                        var toggleVisibility = footersVisibility.pop();\n                        tr.toggle(toggleVisibility);\n                        relatedGroup.eq(idx).toggle(toggleVisibility);\n                    }\n                    if (groupsCount == 1) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                    } else {\n                        groupsCount --;\n                    }\n                }\n            }\n\n            if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n            (!that.options.scrollable.endless && this._isLocked())) {\n                that._syncLockedContentHeight();\n            }\n        },\n\n        _updateHeader: function(groups) {\n            var that = this,\n                container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                rows = container.children(\"tr:not(:first)\").filter(function() {\n                    return !$(this).children(\":visible\").length;\n                });\n\n            if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                if (that.element.is(\":visible\")) {\n                    rows.find(\"th.k-group-cell\").hide();\n                }\n            } else if (groups < length) {\n                container.find(TR).each(function() {\n                    $(this).find(\".k-group-cell\").eq(groups).remove();\n                    $(this).find(\".k-group-cell\").slice(groups).remove();\n                });\n            }\n            if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n            }\n        },\n\n        _firstDataItem: function(data, grouped) {\n            if (data && grouped) {\n                if (data.hasSubgroups) {\n                    data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                    data = data.items[0];\n                }\n            }\n            return data;\n        },\n\n        _updateTablesWidth: function() {\n            var that = this,\n                tables;\n\n            if (!that._isLocked()) {\n                return;\n            }\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                .add(that.thead.parent())\n                .add(that.table);\n\n            that._footerWidth = tableWidth(tables.eq(0));\n            tables.width(that._footerWidth);\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                .add(that.lockedHeader.find(\">table\"))\n                .add(that.lockedTable);\n\n            tables.width(tableWidth(tables.eq(0)));\n        },\n\n        hideColumn: function(column) {\n            var that = this,\n                cell,\n                tables,\n                idx,\n                cols,\n                colWidth,\n                position,\n                width = 0,\n                headerCellIndex,\n                length,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                virtualScroll = that.virtualScroll || {},\n                columns = that.columns,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                columnIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnVisiblePosition(column, columns);\n\n                setColumnVisibility(column, false);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                   this.hideColumn(column.columns[idx]);\n                }\n\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n\n                return;\n            }\n\n            columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n            setColumnVisibility(column, false);\n\n            that._setParentsVisibility(column, false);\n\n            that._templates();\n\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnIndex;\n            if (that.lockedHeader && visibleLocked > columnIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= visibleLocked;\n            }\n\n            cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n            cell[0].style.display = NONE;\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNHIDE, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && visibleLocked > columnIndex) {\n                hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n            } else {\n                hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._syncLockedFooterHeight();\n            } else {\n                cols = that.thead.prev().find(\"col\");\n                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n\n                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                that._footerWidth = null;\n\n                if (width) {\n                    tables.each(function() {\n                        this.style.width = width + PX;\n                    });\n\n                    that._footerWidth = width;\n                    that._setContentWidth();\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaAddHiddenColIndex();\n            that.trigger(COLUMNHIDE, { column: column });\n        },\n\n        _setParentsVisibility: function(column, visible) {\n            var that = this;\n            var columns = that.columns;\n            var idx;\n            var parents = [];\n            var parent;\n            var position;\n            var cell;\n            var colSpan;\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            var predicate = visible ?\n                function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n            if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                    parent = parents[idx];\n                    position = columnPosition(parent, columns);\n                    cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                    if (predicate(parent)) {\n                        setColumnVisibility(parent, visible);\n                        cell[0].style.display = visible ? \"\" : NONE;\n                    }\n\n                    if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                        colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                        cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                    }\n                }\n            }\n        },\n\n        _updateContentWidth: function() {\n            var that = this;\n            var tables = that.table.add(that.thead.parent());\n\n            tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n            });\n            that.refresh();\n        },\n\n        showColumn: function(column) {\n            var that = this,\n                idx,\n                length,\n                cell,\n                tables,\n                width,\n                headerCellIndex,\n                position,\n                colWidth,\n                cols,\n                columns = that.columns,\n                virtualScroll = that.virtualScroll || {},\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                columnIndex,\n                originalColumn,\n                columnLeafIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                columnIndex = column;\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            } else {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item.field === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            }\n\n            if (!column || isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnPosition(column, columns);\n                originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                setColumnVisibility(column, true);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                    if (!originalColumn.columns[idx].hidden) {\n                        this.showColumn(column.columns[idx]);\n                    }\n                }\n\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n\n                return;\n            }\n\n            columnLeafIndex = inArray(column, leafColumns(columns));\n\n            setColumnVisibility(column, true);\n\n            that._setParentsVisibility(column, true);\n\n            that._templates();\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnLeafIndex;\n            if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= lockedColumnsCount;\n            }\n\n            cell = leafDataCells(container).eq(headerCellIndex);\n            cell[0].style.display = \"\";\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNSHOW, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n            } else {\n                showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            } else {\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                if (!column.width) {\n                    tables.width(\"\");\n                } else {\n                    width = 0;\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth.indexOf(\"%\") > -1) {\n                            width = 0;\n                            break;\n                        }\n                        width += parseInt(colWidth, 10);\n                    }\n\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaRemoveHiddenColIndex();\n            that.trigger(COLUMNSHOW, { column: column });\n        },\n\n        _columnVisibilitySetter: function(column) {\n            var col = column || {};\n\n            if (isUndefined(col.media)) {\n                return setColumnVisibility;\n            } else {\n                return setColumnMediaVisibility;\n            }\n        },\n\n\n        _buildSkeleton: function() {\n            var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n            var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n            var loaderHTML = \"\";\n            var colspan;\n            var groups = this._groups();\n            var columnsCount = visibleColumns.length + groups;\n\n            if (this._hasDetails()) {\n                columnsCount++;\n            }\n\n            if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n            }\n\n            for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr class='k-table-row'>\";\n                for (var j = 0; j < columnsCount; j++) {\n                    if (colspan && !j) {\n                        loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    } else {\n                        loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    }\n                }\n                loaderHTML += \"</tr>\";\n            }\n            return loaderHTML;\n        },\n\n        _progress: function(toggle) {\n            var element = this.element;\n            var endless = this.options.scrollable && this.options.scrollable.endless;\n            var loaderType = this.options.loaderType;\n            var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n            var skeleton;\n\n            if (isVirtualization) {\n                element = this.content;\n            } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n            } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n            } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n            } else if (this.content && this.content.length) {\n                element = this.content;\n            }\n\n            if (loaderType == \"skeleton\") {\n                if (toggle) {\n                    skeleton = this._buildSkeleton();\n                        element.find(\"tbody\")\n                         .empty()\n                         .append(skeleton);\n                } else {\n                    element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n            } else {\n                if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content[0].offsetTop, opacity: true });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            }\n        },\n\n        _resize: function(size, force) {\n\n            this._syncLockedContentHeight();\n            this._syncLockedHeaderHeight();\n\n            if (this.content) {\n                this._setContentWidth();\n                this._setContentHeight();\n            }\n\n            if (this.lockedTable) {\n                this._syncLockedScroll();\n            }\n\n            if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                    this._rowHeight = null;\n                }\n                this.virtualScrollable.repaintScrollbar();\n            }\n\n            if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n            }\n\n            if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n            }\n        },\n\n        _isActiveInTable: function() {\n            var active = activeElement();\n\n            if (!active) { return false; }\n\n            return this.table[0] === active ||\n                $.contains(this.table[0], active) ||\n                (this._isLocked() &&\n                    (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                );\n        },\n\n        refresh: function(e) {\n            var that = this,\n                data = that.dataSource.view(),\n                navigatable = that.options.navigatable,\n                virtualScroll = that.virtualScroll || {},\n                currentIndex,\n                current = $(that.current()),\n                isCurrentInHeader = false,\n                groups = that._groups(),\n                colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                contentScrollLeft,\n                cachedItemsToSkip;\n\n            if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                    return;\n                }\n            }\n\n            if (that._shouldMapHights) {\n                that._mapCachedRowsHeight(\"get\", \"uid\");\n                that._shouldMapHights = false;\n            }\n\n            if (virtualScroll.columns) {\n                that._templates();\n            }\n\n            //someone remove the edited item\n            if (e && e.action === \"remove\" && that.editable &&\n                that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n            }\n\n            e = e || {};\n\n            if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n                that._clearEditableState();\n            }\n\n            that._angularItems(\"cleanup\");\n\n            if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                    isCurrentInHeader = current.is(\"th\");\n                    currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                }\n                that._destroyEditable();\n            }\n\n            if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function() {\n                    if (!that._endlessFetchInProgress) {\n                        that._progress(false);\n                    }\n                }, 250);\n            } else {\n                 that._progress(false);\n            }\n\n            that._hideResizeHandle();\n\n            that._data = [];\n\n            if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n                colspan = groups + that.columns.length;\n            }\n\n            that._group = groups > 0 || that._group;\n\n            if (that._group) {\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                if (!that._virtualColScroll) {\n                    that._updateHeader(groups);\n                }\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n            }\n\n            if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n            }\n            cachedItemsToSkip = that._skipRerenderItemsCount;\n            that._renderContent(data, colspan, groups);\n            if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                that._skipRerenderItemsCount = cachedItemsToSkip;\n            }\n            that._renderLockedContent(data, colspan, groups);\n\n            if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n            }\n\n            if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                    that.touchScroller.movable.trigger(\"change\");\n                } else {\n                    that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                    that.content.trigger(\"scroll\");\n                }\n            }\n\n            if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n            }\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            }\n\n            if (that.selectable) {\n                that.selectable.resetTouchEvents();\n            }\n\n            that._muteAngularRebind(function() {\n                that._angularItems(\"compile\");\n            });\n\n            if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n            }\n\n            if (that.options.persistSelection &&\n                ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n            }\n\n            if (!that.options.persistSelection) {\n                that._selectedIds = {};\n            }\n\n            if (that._hasReorderableRows()) {\n                that._draggableRows();\n                that._reorderableRows();\n            }\n\n            that._aria();\n\n            that.trigger(DATABOUND);\n       },\n\n        _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n            if (currentIndex === undefined$1 || currentIndex < 0) {\n                return;\n            }\n\n            this._removeCurrent();\n\n            if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n            } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                    if (virtualScroll.rows) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        rowIndex = this._rowVirtualIndex;\n                    }\n                } else {\n                    currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                    row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                    currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                    .eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    this._setCurrent(td, true, true);\n\n                } else {\n                    this._setCurrent(td);\n                }\n\n            }\n\n            if (this._current) {\n                focusTable(this.table, true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this,\n                allRows = that.items(),\n                selectedRows,\n                id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n            selectedRows = grep(allRows, function(row) {\n                 var dataItemKey = that.dataItem(row)[id];\n                 if (that._selectedIds[dataItemKey]) {\n                    return row;\n                 }\n            });\n\n            that.select(selectedRows);\n        },\n\n       _angularItems: function(cmd) {\n\n           kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n\n           if (cmd === \"cleanup\" && (!this.dataSource || !this.dataSource.options.endless)) {\n               this._cleanupDetailItems();\n           }\n\n           this._angularGroupItems(cmd);\n\n           this._angularGroupFooterItems(cmd);\n       },\n\n       _cleanupDetailItems: function() {\n           var that = this;\n\n           if (that._hasDetails()) {\n              that.angular(\"cleanup\", function() {\n                   return { elements: that.tbody.children(\".k-detail-row\") };\n               });\n\n               that.tbody.find(\".k-detail-cell\").empty();\n           }\n       },\n\n       _angularGroupItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n               container = that.lockedTable.find(\"tbody\");\n           }\n\n           if (that._group) {\n              that.angular(cmd, function() {\n                   return {\n                       elements: container.children(DOT + GROUPING_ROW),\n                       data: $.map(groupRows(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _angularGroupFooterItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n                container = that.element;\n           }\n\n           if (that._group && that.groupFooterTemplate) {\n\n               that.angular(cmd, function() {\n                   return {\n                       elements: container.find(\".k-group-footer\"),\n                       data: $.map(groupFooters(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _renderContent: function(data, colspan, groups) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                isLocked = that.lockedContent != null,\n                endlessAppend = null,\n                skipLastGroup,\n                flatViewLength,\n                scrollable = that.options.scrollable,\n                templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n            if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n                if (that.content) {\n                    that.content[0].scrollTop = 0;\n                }\n            }\n            endlessAppend = that._skipRerenderItemsCount > 0;\n            colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n            if (groups > 0) {\n\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                    colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                    that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n                if (that.options.scrollable.endless) {\n                    flatViewLength = that.dataSource.flatView().length;\n                }\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (!that._skippedGroups) {\n                        that._skippedGroups = [];\n                    }\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                    html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n            } else {\n                html += that._rowsHtml(data, templates);\n            }\n\n            if (endlessAppend) {\n                that.tbody.append(html);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function() {\n                    if (that._groupToCollapse) {\n                        that.collapseGroup(that._groupToCollapse);\n                        that._groupToCollapse = null;\n                    }\n                });\n                that._endlessFetchInProgress = null;\n            } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular, this.options.size);\n            }\n       },\n\n       _renderGroupRows: function() {\n        var that = this,\n        data = that._groupRows,\n        groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n        groups = that._groups(),\n        groupRowBuilderFunc,\n        isLocked = that.lockedContent != null,\n        columns,\n        colspan,\n        group,\n        field,\n        column,\n        template,\n        text,\n        groupHeaderData,\n        tableContainer,\n        isInLockedContainer,\n        prevElement,\n        newGroupRowElement,\n        currentRow,\n        level,\n        groupHeaderColumnTemplate,\n        firstColumnGroupData;\n\n        groupRows.each(function(index, row) {\n            currentRow = $(row);\n            tableContainer = currentRow.closest(\"table\").parent();\n            isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n            columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n            level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n            if (isLocked) {\n                groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n            }\n            else {\n                groupRowBuilderFunc = groupRowBuilder;\n                colspan = columns.length + groups - level;\n            }\n\n            group = index >= data.length ? data[index - data.length] : data[index];\n            field = group.field;\n            column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n            firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n            template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n            text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n            groups = groups;\n            groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n            groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n            if (template) {\n                text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n            }\n\n            prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n            newGroupRowElement = $(groupHeaderColumnTemplate ?\n                groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n            );\n\n            if (prevElement.is(\"tbody\")) {\n                prevElement.prepend(newGroupRowElement);\n            }\n            else {\n                prevElement.after(newGroupRowElement);\n            }\n                currentRow.remove();\n           });\n       },\n\n       _renderLockedContent: function(data, colspan, groups) {\n           var html = \"\",\n               idx,\n               length,\n               skipLastGroup,\n               endlessAppend = null,\n               flatViewLength,\n               templates = {\n                   rowTemplate: this.lockedRowTemplate,\n                   altRowTemplate: this.lockedAltRowTemplate,\n                   groupFooterTemplate: this.lockedGroupFooterTemplate,\n                   groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n               };\n\n           if (this.lockedContent) {\n\n               var table = this.lockedTable;\n               endlessAppend = this._skipRerenderItemsCount > 0;\n\n               if (groups > 0) {\n                   colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                   if (this.options.scrollable.endless) {\n                     flatViewLength = this.dataSource.flatView().length;\n                   }\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                   }\n               } else {\n                   html = this._rowsHtml(data, templates);\n               }\n\n               if (endlessAppend) {\n                   table.children(\"tbody\").append(html);\n               } else {\n                   appendContent(table.children(\"tbody\"), table, html, this.options.$angular, this.options.size);\n               }\n\n               this._syncLockedContentHeight();\n           }\n       },\n\n       _togglePagerVisibility: function() {\n           if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n            }\n       },\n\n       _adjustRowsHeight: function(table1, table2) {\n           var rows = table1[0].rows,\n               length = rows.length,\n               idx,\n               rows2 = table2[0].rows,\n               containers = table1.add(table2),\n               containersLength = containers.length,\n               heights = [];\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               if (rows[idx].style.height) {\n                   rows[idx].style.height = rows2[idx].style.height = \"\";\n               }\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               var offsetHeight1 = rows[idx].offsetHeight;\n               var offsetHeight2 = rows2[idx].offsetHeight;\n               var height = 0;\n\n               if (offsetHeight1 > offsetHeight2) {\n                   height = offsetHeight1;\n               } else if (offsetHeight1 < offsetHeight2) {\n                   height = offsetHeight2;\n               }\n\n               heights.push(height);\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = NONE;\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (heights[idx]) {\n                   //add one to resolve row misalignment in IE\n                   rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n               }\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"\";\n           }\n       }\n   });\n\n   if (kendo.ExcelMixin) {\n       kendo.ExcelMixin.extend(Grid.prototype);\n   }\n\n   if (kendo.PDFMixin) {\n       kendo.PDFMixin.extend(Grid.prototype);\n\n       Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n           var grid = this;\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n           var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n           var cont = $(\"<div>\")\n               .css({ position: \"absolute\", left: -10000, top: -10000 });\n           var clone;\n\n           grid.toggleUnexportableColumns(grid.columns);\n           clone = grid.wrapper.clone().css({\n               height: AUTO, width: AUTO\n           }).appendTo(cont);\n           clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n           clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n           clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n           clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n           this._initPDFProgress(progress);\n\n           var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.one(\"change\", draw);\n                   dataSource.page(startingPage);\n               } else {\n                   grid.refresh();\n                   draw();\n               }\n           }\n\n           function draw() {\n               cont.appendTo(document.body);\n               var options = $.extend({}, grid.options.pdf, {\n                   _destructive: true,\n                   progress: function(p) {\n                       progress.notify({\n                           page: p.page,\n                           pageNumber: p.pageNum,\n                           progress: 0.5 + p.pageNum / p.totalPages / 2,\n                           totalPages: p.totalPages\n                       });\n                   }\n               });\n               kendo.drawing.drawDOM(clone, options)\n                   .always(function() {\n                       cont.remove();\n                   })\n                   .then(function(group) {\n                       result.resolve(group);\n                       grid.toggleUnexportableColumns(grid.columns, true);\n                   })\n                   .fail(function(err) {\n                       result.reject(err);\n                   });\n           }\n\n           function renderPage() {\n               var pageNum = dataSource.page();\n               var totalPages = allPages ? dataSource.totalPages() : 1;\n               body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n               if (pageNum < totalPages) {\n                   dataSource.page(pageNum + 1);\n               } else {\n                   dataSource.unbind(\"change\", renderPage);\n                   resolve();\n               }\n           }\n\n           if (allPages) {\n               dataSource.bind(\"change\", renderPage);\n               dataSource.page(1);\n           } else {\n               renderPage();\n           }\n\n           return result.promise();\n       };\n\n       Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n           var length = columns.length;\n           var column;\n           var exportable;\n           var visibleInExport;\n           var visibleInExportOnly;\n\n           for (var i = 0; i < length; i++) {\n               column = columns[i];\n               exportable = column.exportable;\n               if (!restore) {\n                   if (typeof column.exportable === \"object\") {\n                       exportable = column.exportable.pdf;\n                   }\n\n                   visibleInExport = !column.hidden && exportable !== false;\n                   visibleInExportOnly = column.hidden && exportable === true;\n                   exportable = visibleInExport || visibleInExportOnly;\n\n                   if (!exportable && !column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.hideColumn(column);\n                   } else if (exportable && column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.showColumn(column);\n                   } else if (exportable && column.columns) {\n                       this.toggleUnexportableColumns(column.columns);\n                   }\n               } else {\n                   if (column._toggledDuringExport) {\n                       column._toggledDuringExport = false;\n\n                       if (column.hidden) {\n                           this.showColumn(column);\n                       } else {\n                           this.hideColumn(column);\n                       }\n                   } else if (column.columns) {\n                       this.toggleUnexportableColumns(column.columns, restore);\n                   }\n               }\n           }\n       };\n\n       Grid.prototype._drawPDF = function(progress) {\n           var grid = this;\n\n           if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n               return grid._drawPDF_autoPageBreak(progress);\n           }\n\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n\n           this._initPDFProgress(progress);\n\n           // This group will be our document containing all pages\n           var doc = new kendo.drawing.Group();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.unbind(\"change\", exportPage);\n                   dataSource.one(\"change\", function() {\n                       result.resolve(doc);\n                   });\n\n                   dataSource.page(startingPage);\n               } else {\n                   result.resolve(doc);\n               }\n           }\n\n           function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n                grid._drawPDFShadow({\n                    width: grid.wrapper.width()\n                }, {\n                    avoidLinks: grid.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                    var args = {\n                        page: group,\n                        pageNumber: pageNum,\n                        progress: pageNum / totalPages,\n                        totalPages: totalPages\n                    };\n\n                    grid.toggleUnexportableColumns(grid.columns, true);\n                    progress.notify(args);\n                    doc.append(args.page);\n\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        resolve();\n                    }\n                })\n                .fail(function(err) {\n                    result.reject(err);\n                });\n            }\n\n            if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n            } else {\n                exportPage();\n            }\n\n            return result.promise();\n        };\n\n        Grid.prototype._initPDFProgress = function(deferred) {\n           var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n           loading.prepend(this.wrapper.clone().css({\n               position: \"absolute\", top: 0, left: 0\n           }));\n\n           this._pdfInitialized = true;\n           this.wrapper.append(loading);\n\n           var pb = $(\"<div class='k-loading-pdf-progress'>\")\n           .appendTo(loading)\n           .kendoProgressBar({\n               type: \"chunk\",\n               chunkCount: 10,\n               min: 0,\n               max: 1,\n               value: 0\n           }).data(\"kendoProgressBar\");\n\n           deferred.progress(function(e) {\n               pb.value(e.progress);\n           })\n           .always(function() {\n               kendo.destroy(loading);\n               loading.remove();\n           });\n        };\n   }\n\n   function syncTableHeight(table1, table2) {\n       table1 = table1[0];\n       table2 = table2[0];\n\n       if (table1.rows.length !== table2.rows.length) {\n           var lockedHeigth = table1.offsetHeight;\n           var tableHeigth = table2.offsetHeight;\n\n           var row;\n           var diff;\n           if (lockedHeigth > tableHeigth) {\n               row = table2.rows[table2.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table2.rows[table2.rows.length - 2];\n               }\n\n               diff = lockedHeigth - tableHeigth;\n           } else {\n               row = table1.rows[table1.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table1.rows[table1.rows.length - 2];\n               }\n\n               diff = tableHeigth - lockedHeigth;\n           }\n           row.style.height = row.offsetHeight + diff + PX;\n       }\n   }\n\n   function adjustRowHeight(row1, row2) {\n       var height;\n       var offsetHeight1 = row1.offsetHeight;\n       var offsetHeight2 = row2.offsetHeight;\n\n       if (offsetHeight1 > offsetHeight2) {\n           height = offsetHeight1 + PX;\n       } else if (offsetHeight1 < offsetHeight2) {\n           height = offsetHeight2 + PX;\n       }\n\n       if (height) {\n           row1.style.height = row2.style.height = height;\n       }\n   }\n\n   function getCommand(commands, name) {\n       var idx, length, command;\n\n       if (typeof commands === STRING && commands === name) {\n          return commands;\n       }\n\n       if (isPlainObject(commands) && commands.name === name) {\n           return commands;\n       }\n\n       if (isArray(commands)) {\n           for (idx = 0, length = commands.length; idx < length; idx++) {\n               command = commands[idx];\n\n               if ((typeof command === STRING && command === name) || (command.name === name)) {\n                   return command;\n               }\n           }\n       }\n       return null;\n   }\n\n   function compareElements(element, toCompare) {\n       if (element.length !== toCompare.length) {\n           return false;\n       }\n\n       for (var i = 0; i < element.length; i++) {\n           if (element[i] !== toCompare[i]) {\n               return false;\n           }\n       }\n\n       return true;\n   }\n\n   function focusTable(table, direct) {\n       if (!table || table.length === 0) {\n           return;\n       }\n\n       if (direct === true) {\n           table = $(table);\n           var scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n            kendo.scrollLeft(table.parent(), scrollLeft);\n        } else {\n            $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n        }\n    }\n\n   function isColumnGroupable(grid, column) {\n       return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n   }\n\n   function isGroupedBy(groups, field) {\n       return !!$.grep(groups, function(item) {\n           return item.field === field;\n       }).length;\n   }\n\n   function isColumnEditable(column, model) {\n       if (!column.field || column.selectable) {\n           return false;\n       }\n       if (model.editable && !model.editable(column.field)) {\n           return false;\n       }\n       if (column.editable && !column.editable(model)) {\n           return false;\n       }\n       return true;\n   }\n\n   function isInputElement(element) {\n       return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n   }\n\n    function tableClick(e) {\n        var that = this,\n            currentTarget = $(e.currentTarget),\n            isHeader = currentTarget.is(\"th\"),\n            table = this.table.add(this.lockedTable),\n            headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n            isInput = isInputElement(e.target),\n            preventScroll = $(e.target).is('.k-checkbox'),\n            target = $(e.target),\n            currentTable = currentTarget.closest(\"table\")[0];\n\n        if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n            this._setCurrent(currentTarget);\n            return;\n        }\n\n        if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n            return;\n        }\n\n        if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n            return;\n        }\n\n        if (this.options.navigatable) {\n            this._setCurrent(currentTarget, false, preventScroll);\n        }\n\n        if (isHeader || !isInput) {\n            setTimeout(function() {\n                var activeEl = $(kendo._activeElement());\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                    return;\n                }\n\n                //Only if input element is not selected yet and it is not descendant of the grid's table\n                if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                    //DOMElement.focus() only for header, because IE doesn't really focus the table\n                    focusTable(that.table[0], true);\n                }\n            });\n        }\n\n        if (isHeader && !kendo.support.touch) {\n            e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n        }\n    }\n\n   function leftMostPosition(element, rtl) {\n       if (!rtl) {\n           return 0;\n       }\n\n       var result = 0;\n\n       if (kendo.support.browser.webkit) {\n           result = element.width();\n       }\n\n       return result;\n   }\n\n   function parseVirtualSettings(options) {\n        var asLowerString;\n\n        if (typeof options === \"string\") {\n            asLowerString = options.toLowerCase();\n            if (asLowerString === \"true\") {\n                return {\n                    rows: true\n                };\n            } else {\n                return {\n                    rows: asLowerString.indexOf(\"rows\") > -1,\n                    columns: asLowerString.indexOf(\"columns\") > -1\n                };\n            }\n\n        } else if (options === true) {\n            return {\n                rows: true\n            };\n        }\n   }\n\n   function isElementVisibleInWrapper(wrapper, element) {\n       var offsetTop;\n       var halfHeight;\n\n       if (!wrapper) {\n         return false;\n       }\n\n       element = $(element);\n\n       if (element[0] && contains(wrapper[0], element[0])) {\n           offsetTop = element.offset().top - wrapper.offset().top;\n           halfHeight = element.outerHeight() / 2;\n\n           if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n               return true;\n           }\n       }\n\n       return false;\n   }\n\n   function isInEdit(cell) {\n       return cell &&\n           (cell.hasClass(\"k-edit-cell\") ||\n            cell.parent().hasClass(\"k-grid-edit-row\"));\n   }\n\n    function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n        var html;\n\n        if (groupHeaderColumnTemplate) {\n            html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text\n            }));\n        } else {\n            html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n        }\n\n        return html;\n    }\n\n   function groupCellBuilder(headerTemplateIndex) {\n    return ({ colspan, text }) => `<td class=\"k-table-td\" colspan=\"${colspan + headerTemplateIndex}\">` +\n    '<p class=\"k-reset\">' +\n        kendo.ui.icon($(`<a href=\"\\\\#\" tabindex=\"-1\" ${ARIA_LABEL}=\"${COLLAPSE}\"></a>`), { icon: \"caret-alt-down\" }) + text +\n    '</p></td>';\n   }\n\n   function groupCellLockedContentBuilder(headerTemplateIndex) {\n    return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n    '<p class=\"k-reset\">&nbsp;</p></td>';\n   }\n\n   function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n    return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n        '<p class=\"k-reset\">' +\n        kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + text +\n    '</p></td></tr>';\n   }\n\n   function groupRowLockedContentBuilder(colspan) {\n    return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n        '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n   }\n\n   function toggleRow(row, visible) {\n       row = $(row)[0];\n       if (visible) {\n           row.style.display = \"\";\n       } else {\n           row.style.display = NONE;\n       }\n   }\n\n   function htmlEncode(value, backslashEscapeQuotes) {\n       var ampRegExp = /&/g,\n           ltRegExp = /</g,\n           quoteRegExp = /\"/g,\n           aposRegExp = /'/g,\n           gtRegExp = />/g;\n\n       return (\"\" + value)\n           .replace(ampRegExp, \"&amp;\")\n           .replace(ltRegExp, \"&lt;\")\n           .replace(gtRegExp, \"&gt;\")\n           .replace(quoteRegExp, function(match) {\n               if (backslashEscapeQuotes) {\n                   return \"\\\\\" + match;\n               }\n               return \"&quot;\";\n           })\n           .replace(aposRegExp, \"&#39;\");\n   }\n\n   function getTitle(field, columns) {\n        return columns.filter(function(col) {\n            return col.field === field;\n        })[0].title || field;\n    }\n\n    function exportDataSort(a, b) {\n        return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n    }\n\n    function isExcelExportableColumn(column) {\n        return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n    }\n\n   ui.plugin(Grid);\n   ui.plugin(VirtualScrollable);\n\n})(window.kendo.jQuery);\n"]}