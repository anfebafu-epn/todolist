{"version":3,"file":"kendo.dataviz.core.js","names":["$","window","kendo","dataviz","drawing","util","Path","Group","Class","support","geometry","Rect","Circle","geometryTransform","transform","Segment","deepExtend","isFunction","__common_getter_js","getter","ARC","AXIS_LABEL_CLICK","BLACK","BOTTOM","CENTER","CIRCLE","CROSS","DATE","DEFAULT_FONT","DEFAULT_PRECISION","FORMAT_REGEX","HEIGHT","INSIDE","LEFT","MAX_VALUE","Number","MIN_VALUE","NONE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","OBJECT","OUTSIDE","RIGHT","ROUNDED_RECT","STRING","TOP","TRIANGLE","WHITE","WIDTH","X","Y","constants","COORD_PRECISION","DEFAULT_HEIGHT","DEFAULT_WIDTH","END","HIGHLIGHT_ZINDEX","START","VALUE","DEFAULT_SERIES_OPACITY","isArray","value","Array","SPACE_REGEX","alignPathToPixel","path","offset","options","stroke","defined","width","i","segments","length","anchor","round","translate","clockwise","angle1","angle2","x","y","isNumber","isNaN","isString","isObject","styleValue","SIZE_STYLES_REGEX","isSizeField","field","test","getSpacing","defaultSpacing","spacing","top","right","bottom","left","current","compile","template","TemplateService","extend","getTemplate","content","grep","array","callback","result","idx","push","register","userImplementation","HashMap","this","_map","inArray","indexOf","prototype","get","name","_key","set","Date","getTime","TRIGGER","InstanceObserver","init","observer","handlers","handlerMap","trigger","args","isDefaultPrevented","callObserver","fnName","len","arguments","apply","requiresHandlers","names","map","browser","ref","append","bindEvents","deg","elementOffset","elementSize","eventCoordinates","eventElement","hashKey","last","limitValue","objectKey","rad","unbindEvents","valueOrDefault","FontLoader","setDefaultOptions","type","proto","sparseArrayLimits","arr","min","max","isFinite","Math","undefined","fetchFonts","fonts","state","depth","document","Object","keys","forEach","key","loadFonts","promises","font","load","e","logToConsole","Promise","all","then","preloadFonts","Matrix","matrixRegexp","transformMatrix","element","getComputedStyle","unit","matrixString","match","members","split","parseFloat","Function","bind","concat","parseMatrix","DELETED","LegacySet","values","_index","_values","slice","filter","item","has","add","delete","index","clear","defineProperties","fn","size","SetWrapper","_set","Set","from","autoMajorUnit","diff","abs","scale","pow","floor","log","relativeValue","Point","clone","equals","point","rotate","center","degrees","theta","cosT","cos","sinT","sin","cx","cy","multiply","a","distanceTo","dx","dy","sqrt","onCircle","angle","radius","radians","Box","x1","y1","x2","y2","box","height","move","wrap","targetBox","wrapPoint","arrayPoint","snapTo","axis","alignTo","targetCenter","shrink","dw","dh","expand","pad","padding","unpad","containsPoint","points","getHash","join","overlaps","rotation","r1","rotatePoint","r2","r3","r4","toRect","hasSize","align","alignment","c1","c2","sizeFunc","Ring","innerRadius","startAngle","middle","setRadius","newRadius","radianAngle","ax","ay","adjacentBox","distance","sector","midAndle","midPoint","hw","hh","sa","ca","p","endAngle","vector","startPoint","startVector","endPoint","endVector","dist","getBBox","angles","allAngles","sort","numericComparer","startAngleIndex","endAngleIndex","b","Sector","call","ShapeBuilder","createRing","arc","Arc","radiusX","radiusY","fromArc","close","innerEnd","pointAt","lineTo","ChartElement","children","initUserOptions","reflow","currentChild","destroy","animation","getRoot","parent","getSender","service","getService","sender","chartService","translateChildren","childrenCount","arguments$1","renderVisual","visible","createVisual","addVisual","renderChildren","createAnimation","renderComplete","visual","chartElement","appendVisual","zIndex","Animation","create","childVisual","noclip","clipRoot","stackRoot","stackVisual","isStackRoot","pos","visuals","sibling","insert","traverse","child","closest","matched","hasHighlight","highlight","createHighlight","toggleHighlight","show","opacity","this$1$1","customVisual","_highlight","highlightOptions","fill","color","highlightVisualArgs","series","dataItem","category","percentage","runningTotal","total","createGradientOverlay","gradientOptions","overlay","createGradient","closed","elements","supportsPointInactiveOpacity","BoxElement","margin","shrinkToFit","hasSetSize","borderWidth","border","reflowPaddingBox","vAlign","paddingBox","contentBox","hasBox","background","fromRect","visualStyle","dashType","cursor","ShapeElement","pointData","getElement","halfWidth","halfHeight","style","fromPoints","MultiPath","moveTo","rect","borderRadius","setCornerRadius","createElement","visualOptions","RADIAL","GRADIENTS","glass","stops","sharpBevel","roundedBevel","roundedGlass","supportVML","sharpGlass","bubbleShadow","boxDiff","r","s","c","d","f","g","h","boxes","RootElement","rootOptions","parseInt","gradients","currentBox","createBackground","drawingGradient","hashCode","gradient","LinearGradient","usedSpace","currentStops","currentStop","innerRadialStops","RadialGradient","cleanGradients","_observers","FloatElement","_initDirection","vertical","groupAxis","elementAxis","groupSizeField","elementSizeField","groupSpacing","elementSpacing","vSpacing","reflowChildren","ref$1","groupOptions","groups","groupsSize","maxGroupElementsSize","groupsCount","groupsStart","alignStart","groupStart","groupIdx","group","groupElements","elementStart","groupElementsCount","elementSize$$1","groupElementStart","groupSize","elementBox","maxSize","start","groupElementsSize","DrawingText","Text","measureText","baseline","topLeft","rectToBox","origin","bottomRight","ROWS_SPLIT_REGEX","TextBox","data","_initContainer","_autoReflow","rows","String","floatElement","textOptions","container","rowIdx","text","trim","visualFn","_boxReflow","visualBox","visualContext","clippedBBox","normalBox","rotatedBox","rotationTransform","context","getDefaultVisual","boxCenter","Title","_textBox","position","collapseVerticalMargins","items","prevBox","buildTitle","defaultOptions","title","titleOptions","orderTitles","titles","reverse","AxisLabel","format","culture","click","widget","alignRotation","bbox","matrix","rotationMatrix","rotationOrigin","alignAxis","distanceAxis","axisAnchor","transformCopy","topRight","bottomLeft","alignEnd","distanceLeft","distanceRight","alignCenter","Note","fields","render","hide","label","icon","childAlias","noteTemplate","auto","aliasFor","marker","wrapperBox","lineStart","line","linePoints","createLine","defaultVisual","eventArgs","preventDefault","over","out","current$1","toString","parseDate","firstDay","IntlService","implementation","FORMAT_REPLACE_REGEX","FormatService","intlService","_intlService","formatString","intl","localeAuto","locale","replace","placeholderFormat","substring","current$2","ChartService","chart","rtl","Boolean","notify","isPannable","pannable","lock","DomEventsBuilder","events","services","createAxisTick","tickOptions","tickX","tickY","tick","createAxisGridLine","gridLine","lineEnd","Axis","labels","majorTickSize","minorTickSize","minorTicks","minorTickType","majorTicks","majorTickType","initFields","_deferLabels","createLabels","createTitle","createNotes","labelsRange","skip","labelsCount","normalizeLabelRotation","labelOptions","step","clearLabels","autoRotateLabels","range","labelContext","count","createAxisLabel","clearTitle","lineBox","mirror","axisX","axisY","lineWidth","visualSize","notes","parseNoteValue","note","createPlotBands","gridLinesVisual","gridLines","_gridLines","createTicks","lineGroup","majorUnit","tickLineOptions","tickPositions","skipUnit","getMajorTickPositions","getMinorTickPositions","minorUnit","_alignLines","_lineGroup","getActualTickSize","tickSize","_backgroundPath","plotBands","plotArea","_plotbandGroup","altAxis","pane","axes","slotX","slotY","getSlot","to","createPlotBandLabel","bandRect","textbox","labelTemplate","createGridLines","minorGridLines","majorGridLines","axisLineVisible","linePos","lineOptions","sizeFn","titleSize","space","boxSize","maxLabelSize","labelSize","arrangeTitle","arrangeLabels","arrangeNotes","getLabelsTickPositions","labelTickIndex","labelsBetweenTicks","tickIx","firstTickPosition","nextTickPosition","positionStart","positionEnd","positionLabel","labelBox","labelOffset","labelX","labelY","autoRotateLabelAngle","slotWidth","limit","labelAngle","idx$1","slot","shouldRenderNote","noteSlot","secondAxis","axisLabelText","tmpl","defaultText","maxLabelOffset","end","lastLabel","offsetField","startPosition","endPosition","maxStartOffset","maxEndOffset","startTick","endTick","limitRange","rangeSize","minValue","maxValue","valueRange","seriesMin","seriesMax","lineDir","lineInfo","lineSize","axisDir","axisOrigin","pointOffset","scaleToDelta","rawScale","justified","prepareUserOptions","axisCrossingValue","MILLISECONDS","SECONDS","MINUTES","HOURS","DAYS","WEEKS","MONTHS","YEARS","TIME_PER_SECOND","TIME_PER_MINUTE","TIME_PER_HOUR","TIME_PER_DAY","TIME_PER_WEEK","TIME_PER_MONTH","TIME_PER_YEAR","TIME_PER_UNIT","years","months","weeks","days","hours","minutes","seconds","milliseconds","absoluteDateDiff","getTimezoneOffset","addTicks","date","ticks","toDate","startOfWeek","weekStartDay","daysToSubtract","day","getDay","adjustDST","getHours","setHours","addDuration","dateValue","getFullYear","getMonth","getDate","roundedDate","setMinutes","tzDiff","addHours","getSeconds","setSeconds","getMilliseconds","setMilliseconds","floorDate","ceilDate","dateComparer","dateDiff","toTime","dateEquals","timeIndex","baseUnit","dateIndex","baseUnitStep","startDate","duration","parseDates","dates","CategoryAxis","_ticks","categoriesHash","copy","categories","srcCategories","definedMin","definedMax","ceil","rangeIndices","totalRange","totalRangeIndices","roundedRange","_seriesMax","scaleOptions","hideOutOfRangeLabels","valueAxis","firstLabel","getTicks","labelTicks","tickIndices","stepSize","indices","getTickPositions","positions","cache","hash","_hash","hasMinor","filterOutOfRangePositions","inRange","startIndex","endIndex","slotBox","singleSlot","p1","p2","limitSlot","limittedSlot","categoryIndex","pointCategoryIndex","startValue","getCategory","totalIndex","categoryAt","categoriesCount","translateRange","delta","scaleRange","minDelta","maxDelta","zoomRange","totalMin","totalMax","dataItems","hideOutOfRangeNotes","pan","pointsRange","diffStart","diffEnd","rangeMin","rangeMax","_categoriesMap","currentRangeIndices","totalCount","mapCategories","map$$1","COORDINATE_LIMIT","DateLabelFormats","ZERO_THRESHOLD","BASE_UNITS","FIT","categoryRange","_range","EmptyDateRange","displayIndices","displayRange","valueIndex","valuesCount","dateAt","DateRange","roundToBaseUnit","lowerEnd","roundToTotalStep","expandEnd","justifyEnd","valueStart","displayStart","next","valueEnd","displayEnd","_indices","minIdx","maxIdx","upper","roundedStep","autoBaseUnit","startUnit","startStep","unitSteps","nextStep","categoryLimits","span","autoBaseUnitSteps","maxDateGroups","autoUnit","autoUnitIx","units","totalUnits","shift","initUnit","toLowerCase","lastCategory","minDiff","categoryIx","defaultBaseUnit","DateCategoryAxis","dataRange","_parsed","panning","userSetBaseUnit","userSetBaseUnitStep","maxDivisions","divisionOptions","dataRangeOptions","divisionRange","rangeLabels","last$$1","splice","isEmpty","totalLimits","panRange","datesRange","indicesRange","fit","autoBaseUnitStep","maxDiff","rangeDiff","baseUnitIndex","stepIndex","createRangeLabels","arrangeRangeLabels","position$1","autoRotateRangeLabels","hideOverlappingLabels","firstRangeLabel","clip","lastRangeLabel","i$1","rangeLabel","unitFormat","dateFormats","createLabel","rotateLabel","dateRange","limitCoordinate","MIN_VALUE_RANGE$1","NumericAxis","autoOptions","narrowRange","autoMin","narrow","axisMin","autoAxisMin","autoMax","axisMax","autoAxisMax","roundToMajorUnit","remainderClose","autoAxisOptions","totalOptions","totalAxisOptions","userOptions","userSetMin","userSetMax","clearNullValues","userSetLimits","axisOptions","totalMajorUnit","getDivisions","stepValue","divisions","skipStep","getValue","endValue","isValidRange","divisor","ratio","remainder","DateValueAxis","timeUnits","baseUnitTime","userMajorUnit","actualUnits","unitsToAdd","head","tail","applyDefaults","axisCrossingValues","dir","limittedRange","MIN_VALUE_RANGE$2","LogarithmicAxis","base","logMaxRemainder","autoAxisMax$1","autoAxisMin$1","throwNegativeValuesError","initRange","logMin","logMax","floorMax","traverseMajorTicksPositions","tickPosition","traverseMinorTicksPositions","power","minorOptions","_minorIntervalOptions","minorStep","info","Error","GridLinesMixin","majorAngles","minorAngles","skipMajor","majorGridLineAngles","renderMajorGridLines","minorGridLineAngles","renderMinorGridLines","renderGridLines","radiusCallback","circle","gridLineAngles","skipAngles","divs","intervals","altAxisVisible","alpha","intervalAngle","RadarCategoryAxis","reflowLabels","measureBox","skipOption","stepOption","divCount","divAngle","majorIntervals","minorIntervals","interval","minorAngle","minorRadius","band","plotBandSlot","ring","totalDivs","slotAngle","fromValue","slotStart","PolarAxis","instanceOptions","tmp","atan2","PI","RadarNumericAxisMixin","polarAxis","bandStyle","shape","plotBandPoints","innerPoints","outerPoints","innerCircle","outerCircle","radarMajorGridLinePositions","radarMinorGridLinePositions","tickRadius","angleIx","angularDistance","gamma","beta","axisType","RadarNumericAxis","minorSkipStep","RadarLogarithmicAxis","CurveProcessor","process","dataPoints","removeDuplicates","initialControlPoint","lastControlPoint","p0","pop","tangent","controlOut","firstControlPoint","secondControlPoint","controlPoints","tangent$1","cp0","controlPoints$1","cp1","controlPoints$2","tangent$2","invertAxis","lineFunction","calculateFunction","isLine","xField","yField","restrict","switchOrientation","monotonic","isMonotonicByField","numberSign","oldXField","restrictControlPoint","cp","p3","t1","t2","xValue","yValue","controlPoint","Gradients","addClass","classes","classArray","className","removeClass","convertableToNumber","elementStyles","styles","stylesArray","field$1","hasClasses","classNames","interpolateValue","progress","mousewheelDelta","wheelDelta","webkit","devicePixelRatio","detail","find","predicate","elementScale","parentElement","parentMatrix","multiplyCopy","autoTextColor","Color","isDark","createHashSet","supported","defaultErrorHandler","error","INSERT","DELETE","BACKSPACE","TAB","ENTER","ESC","UP","DOWN","HOME","SPACEBAR","PAGEUP","PAGEDOWN","F2","F10","F12","NUMPAD_PLUS","NUMPAD_MINUS","NUMPAD_DOT","lteDateIndex","sortedDates","low","high","currentDate","jQuery","draw","SASS_THEMES","ExportMixin","skipLegacy","exportVisual","exportSVG","exportImage","exportPDF","svg","imageDataURL","Surface","exportGroup","canvas","css","display","appendTo","body","surface","image","_rootElement","toDataURL","remove","calendars","standard","Point2D","Box2D","mwDelta","originalEvent","__meta__","id","description","depends","hidden"],"sources":["kendo.dataviz.core.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.drawing.js';\n\n/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n\n(function($) {\n/* eslint-disable space-before-blocks, space-before-function-paren, curly */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar drawing = kendo.drawing;\nvar util = drawing.util;\nvar Path = drawing.Path;\nvar Group = drawing.Group;\nvar Class = kendo.Class;\nvar support = kendo.support;\nvar geometry = kendo.geometry;\nvar Rect = geometry.Rect;\nvar Circle = geometry.Circle;\nvar geometryTransform = geometry.transform;\nvar Segment = geometry.Segment;\nvar dataviz = kendo.dataviz;\n\nvar deepExtend = kendo.deepExtend;\nvar isFunction = kendo.isFunction;\nvar __common_getter_js = kendo.getter;\n\nvar ARC = \"arc\";\nvar AXIS_LABEL_CLICK = \"axisLabelClick\";\nvar BLACK = \"#000\";\nvar BOTTOM = \"bottom\";\nvar CENTER = \"center\";\nvar CIRCLE = \"circle\";\nvar COORD_PRECISION = 3;\nvar CROSS = \"cross\";\nvar DATE = \"date\";\nvar DEFAULT_FONT = \"12px sans-serif\";\nvar DEFAULT_HEIGHT = 400;\nvar DEFAULT_PRECISION = 10;\nvar DEFAULT_WIDTH = 600;\nvar END = \"end\";\nvar FORMAT_REGEX = /\\{\\d+:?/;\nvar HEIGHT = \"height\";\nvar HIGHLIGHT_ZINDEX = 100;\nvar INSIDE = \"inside\";\nvar LEFT = \"left\";\nvar MAX_VALUE = Number.MAX_VALUE;\nvar MIN_VALUE = -Number.MAX_VALUE;\nvar NONE = \"none\";\nvar NOTE_CLICK = \"noteClick\";\nvar NOTE_HOVER = \"noteHover\";\nvar NOTE_LEAVE = \"noteLeave\";\nvar OBJECT = \"object\";\nvar OUTSIDE = \"outside\";\nvar RIGHT = \"right\";\nvar ROUNDED_RECT = \"roundedRect\";\nvar START = \"start\";\nvar STRING = \"string\";\nvar TOP = \"top\";\nvar TRIANGLE = \"triangle\";\nvar VALUE = \"value\";\nvar WHITE = \"#fff\";\nvar WIDTH = \"width\";\nvar X = \"x\";\nvar Y = \"y\";\nvar DEFAULT_SERIES_OPACITY = 1;\n\nvar constants = {\n\tARC: ARC,\n\tAXIS_LABEL_CLICK: AXIS_LABEL_CLICK,\n\tBLACK: BLACK,\n\tBOTTOM: BOTTOM,\n\tCENTER: CENTER,\n\tCIRCLE: CIRCLE,\n\tCOORD_PRECISION: COORD_PRECISION,\n\tCROSS: CROSS,\n\tDATE: DATE,\n\tDEFAULT_FONT: DEFAULT_FONT,\n\tDEFAULT_HEIGHT: DEFAULT_HEIGHT,\n\tDEFAULT_PRECISION: DEFAULT_PRECISION,\n\tDEFAULT_WIDTH: DEFAULT_WIDTH,\n\tEND: END,\n\tFORMAT_REGEX: FORMAT_REGEX,\n\tHEIGHT: HEIGHT,\n\tHIGHLIGHT_ZINDEX: HIGHLIGHT_ZINDEX,\n\tINSIDE: INSIDE,\n\tLEFT: LEFT,\n\tMAX_VALUE: MAX_VALUE,\n\tMIN_VALUE: MIN_VALUE,\n\tNONE: NONE,\n\tNOTE_CLICK: NOTE_CLICK,\n\tNOTE_HOVER: NOTE_HOVER,\n\tNOTE_LEAVE: NOTE_LEAVE,\n\tOBJECT: OBJECT,\n\tOUTSIDE: OUTSIDE,\n\tRIGHT: RIGHT,\n\tROUNDED_RECT: ROUNDED_RECT,\n\tSTART: START,\n\tSTRING: STRING,\n\tTOP: TOP,\n\tTRIANGLE: TRIANGLE,\n\tVALUE: VALUE,\n\tWHITE: WHITE,\n\tWIDTH: WIDTH,\n\tX: X,\n\tY: Y,\n\tDEFAULT_SERIES_OPACITY: DEFAULT_SERIES_OPACITY\n};\n\nfunction isArray(value) {\n    return Array.isArray(value);\n}\n\nfunction addClass(element, classes) {\n    var classArray = isArray(classes) ? classes : [ classes ];\n\n    for (var idx = 0; idx < classArray.length; idx++) {\n        var className = classArray[idx];\n        if (element.className.indexOf(className) === -1) {\n            element.className += \" \" + className;\n        }\n    }\n}\n\nvar SPACE_REGEX = /\\s+/g;\n\nfunction removeClass(element, className) {\n    if (element && element.className) {\n        element.className = element.className.replace(className, \"\").replace(SPACE_REGEX, \" \");\n    }\n}\n\nfunction alignPathToPixel(path) {\n    var offset = 0.5;\n    if (path.options.stroke && kendo.drawing.util.defined(path.options.stroke.width)) {\n        if (path.options.stroke.width % 2 === 0) {\n            offset = 0;\n        }\n    }\n\n    for (var i = 0; i < path.segments.length; i++) {\n        path.segments[i].anchor().round(0).translate(offset, offset);\n    }\n\n    return path;\n}\n\nfunction clockwise(angle1, angle2) {\n    // True if angle2 is clockwise of angle1\n    // assuming angles grow in clock-wise direction\n    // (as in the pie and radar charts)\n    return -angle1.x * angle2.y + angle1.y * angle2.x < 0;\n}\n\nfunction isNumber(value) {\n    return typeof value === \"number\" && !isNaN(value);\n}\n\nfunction isString(value) {\n    return typeof value === STRING;\n}\n\nfunction convertableToNumber(value) {\n    return isNumber(value) || (isString(value) && isFinite(value));\n}\n\nfunction isObject(value) {\n    return typeof value === \"object\";\n}\n\nfunction styleValue(value) {\n    if (isNumber(value)) {\n        return value + \"px\";\n    }\n    return value;\n}\n\nvar SIZE_STYLES_REGEX = /width|height|top|left|bottom|right/i;\n\nfunction isSizeField(field) {\n    return SIZE_STYLES_REGEX.test(field);\n}\n\nfunction elementStyles(element, styles) {\n    var stylesArray = isString(styles) ? [ styles ] : styles;\n\n    if (isArray(stylesArray)) {\n        var result = {};\n        var style = window.getComputedStyle(element);\n\n        for (var idx = 0; idx < stylesArray.length; idx++) {\n            var field = stylesArray[idx];\n            result[field] = isSizeField(field) ? parseFloat(style[field]) : style[field];\n        }\n\n        return result;\n    } else if (isObject(styles)) {\n        for (var field$1 in styles) {\n            element.style[field$1] = styleValue(styles[field$1]);\n        }\n    }\n}\n\nfunction getSpacing(value, defaultSpacing) {\n    if (defaultSpacing === void 0) { defaultSpacing = 0; }\n\n    var spacing = { top: 0, right: 0, bottom: 0, left: 0 };\n\n    if (typeof(value) === \"number\") {\n        spacing[TOP] = spacing[RIGHT] = spacing[BOTTOM] = spacing[LEFT] = value;\n    } else {\n        spacing[TOP] = value[TOP] || defaultSpacing;\n        spacing[RIGHT] = value[RIGHT] || defaultSpacing;\n        spacing[BOTTOM] = value[BOTTOM] || defaultSpacing;\n        spacing[LEFT] = value[LEFT] || defaultSpacing;\n    }\n\n    return spacing;\n}\n\nvar current = {\n    compile: function(template) {\n        return template;\n    }\n};\n\nvar TemplateService = Class.extend({\n\n});\n\nTemplateService.register = function(userImplementation) {\n    current = userImplementation;\n};\n\nTemplateService.compile = function(template, options) {\n    return current.compile(template, options);\n};\n\nfunction getTemplate(options) {\n    if (options === void 0) { options = {}; }\n\n    var template;\n    if (options.template) {\n        options.template = template = TemplateService.compile(options.template);\n    } else if (isFunction(options.content)) {\n        template = options.content;\n    }\n\n    return template;\n}\n\nfunction grep(array, callback) {\n    var length = array.length;\n    var result = [];\n    for (var idx = 0; idx < length; idx++) {\n        if (callback(array[idx])) {\n            result .push(array[idx]);\n        }\n    }\n\n    return result;\n}\n\nfunction hasClasses(element, classNames) {\n    if (element.className) {\n        var names = classNames.split(\" \");\n        for (var idx = 0; idx < names.length; idx++) {\n            if (element.className.indexOf && element.className.indexOf(names[idx]) !== -1) {\n                return true;\n            }\n        }\n    }\n}\n\nvar HashMap = function HashMap() {\n    this._map = {};\n};\n\nHashMap.prototype.get = function get (name) {\n    return this._map[this._key(name)];\n};\n\nHashMap.prototype.set = function set (name, value) {\n    this._map[this._key(name)] = value;\n};\n\nHashMap.prototype._key = function _key (name) {\n    return name instanceof Date ? name.getTime() : name;\n};\n\nfunction inArray(value, array) {\n    if (array) {\n        return array.indexOf(value) !== -1;\n    }\n}\n\nfunction interpolateValue(start, end, progress) {\n    return kendo.drawing.util.round(start + (end - start) * progress, COORD_PRECISION);\n}\n\nvar TRIGGER = 'trigger';\n\nvar InstanceObserver = Class.extend({\n    init: function(observer, handlers) {\n        this.observer = observer;\n        this.handlerMap = deepExtend({}, this.handlerMap, handlers);\n    },\n\n    trigger: function(name, args) {\n        var ref = this;\n        var observer = ref.observer;\n        var handlerMap = ref.handlerMap;\n        var isDefaultPrevented;\n        if (handlerMap[name]) {\n            isDefaultPrevented = this.callObserver(handlerMap[name], args);\n        } else if (observer[TRIGGER]) {\n            isDefaultPrevented = this.callObserver(TRIGGER, name, args);\n        }\n\n        return isDefaultPrevented;\n    },\n\n    callObserver: function(fnName) {\n        var args = [], len = arguments.length - 1;\n        while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n        return this.observer[fnName].apply(this.observer, args);\n    },\n\n    requiresHandlers: function(names) {\n        var this$1$1 = this;\n\n        if (this.observer.requiresHandlers) {\n            return this.observer.requiresHandlers(names);\n        }\n\n        for (var idx = 0; idx < names.length; idx++) {\n            if (this$1$1.handlerMap[names[idx]]) {\n                return true;\n            }\n        }\n    }\n});\n\nfunction map(array, callback) {\n    var length = array.length;\n    var result = [];\n    for (var idx = 0; idx < length; idx++) {\n        var value = callback(array[idx]);\n        if (kendo.drawing.util.defined(value)) {\n            result.push(value);\n        }\n    }\n    return result;\n}\n\nvar browser = support.browser || {};\n\nfunction mousewheelDelta(e) {\n    var delta = 0;\n\n    if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n\n        if (browser.webkit) {\n            // Webkit browsers scale the delta by twice the device resolution.\n            // Possibly related to https://bugs.webkit.org/show_bug.cgi?id=196339\n            //\n            // Low device resolutions (e.g. zoom-out to 30%) also behave strangely.\n            delta = delta / (2 * Math.max(window.devicePixelRatio, 0.625));\n        }\n    } else if (e.detail) {\n        delta = e.detail / 3;\n    }\n\n    delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\n    return delta;\n}\n\nvar ref = kendo.drawing.util;\nvar append = ref.append;\nvar bindEvents = ref.bindEvents;\nvar defined = ref.defined;\nvar deg = ref.deg;\nvar elementOffset = ref.elementOffset;\nvar elementSize = ref.elementSize;\nvar eventCoordinates = ref.eventCoordinates;\nvar eventElement = ref.eventElement;\nvar hashKey = ref.hashKey;\nvar last = ref.last;\nvar limitValue = ref.limitValue;\nvar objectKey = ref.objectKey;\nvar rad = ref.rad;\nvar round = ref.round;\nvar unbindEvents = ref.unbindEvents;\nvar valueOrDefault = ref.valueOrDefault;\n\nvar FontLoader = Class.extend({\n\n});\n\nFontLoader.fetchFonts = function(options, fonts, state) {\n    if (state === void 0) { state = { depth: 0 }; }\n\n    var MAX_DEPTH = 5;\n\n    if (!options || state.depth > MAX_DEPTH || !document.fonts) {\n        return;\n    }\n\n    Object.keys(options).forEach(function(key) {\n        var value = options[key];\n        if (key === \"dataSource\" || key[0] === \"$\" || !value) {\n            return;\n        }\n\n        if (key === \"font\") {\n            fonts.push(value);\n        } else if (typeof value === \"object\") {\n            state.depth++;\n            FontLoader.fetchFonts(value, fonts, state);\n            state.depth--;\n        }\n    });\n};\n\nFontLoader.loadFonts = function(fonts, callback) {\n    var promises = [];\n\n    if (fonts.length > 0 && document.fonts) {\n        try {\n            promises = fonts.map(function(font) {\n                return document.fonts.load(font);\n            });\n        } catch (e) {\n            // Silence font-loading errors\n            kendo.logToConsole(e);\n        }\n\n        Promise.all(promises).then(callback, callback);\n    } else {\n        callback();\n    }\n};\n\nFontLoader.preloadFonts = function(options, callback) {\n    var fonts = [];\n    FontLoader.fetchFonts(options, fonts);\n\n    FontLoader.loadFonts(fonts, callback);\n};\n\nfunction setDefaultOptions(type, options) {\n    var proto = type.prototype;\n    if (proto.options) {\n        proto.options = deepExtend({}, proto.options, options);\n    } else {\n        proto.options = options;\n    }\n}\n\nfunction sparseArrayLimits(arr) {\n    var min = MAX_VALUE;\n    var max = MIN_VALUE;\n\n    for (var idx = 0, length = arr.length; idx < length; idx++) {\n        var value = arr[idx];\n        if (value !== null && isFinite(value)) {\n            min = Math.min(min, value);\n            max = Math.max(max, value);\n        }\n    }\n\n    return {\n        min: min === MAX_VALUE ? undefined : min,\n        max: max === MIN_VALUE ? undefined : max\n    };\n}\n\nfunction find(array, predicate) {\n    for (var i = 0; i < array.length; i++) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n}\n\nvar Matrix = geometry.Matrix;\nvar matrixRegexp = /matrix\\((.*)\\)/;\n\nfunction parseMatrix(matrixString) {\n    var match = matrixString.match(matrixRegexp);\n    if (match === null || match.length !== 2) {\n        return Matrix.unit();\n    }\n\n    var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n    return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n}\n\nfunction transformMatrix(element) {\n    var transform = getComputedStyle(element).transform;\n\n    if (transform === 'none') {\n        return Matrix.unit();\n    }\n\n    return parseMatrix(transform);\n}\n\nfunction elementScale(element) {\n    if (!element) {\n        return Matrix.unit();\n    }\n\n    var matrix = transformMatrix(element);\n    var parent = element.parentElement;\n    while (parent) {\n        var parentMatrix = transformMatrix(parent);\n        matrix = matrix.multiplyCopy(parentMatrix);\n        parent = parent.parentElement;\n    }\n\n    matrix.b = matrix.c = matrix.e = matrix.f = 0;\n    return matrix;\n}\n\nfunction autoTextColor(color) {\n    var isDark = new kendo.Color(color).isDark();\n    if (isDark) {\n        return WHITE;\n    }\n\n    return BLACK;\n}\n\nvar DELETED = {};\n\nvar LegacySet = Class.extend({\n    init: function(values) {\n        var this$1$1 = this;\n\n        this._index = {};\n        this._values = values ? values.slice(0) : [];\n\n        for (var i = 0; i < this._values.length; i++) {\n            this$1$1._index[this$1$1._values[i]] = i;\n        }\n    },\n\n    values: function() {\n        return this._values.filter(function (item) { return item !== DELETED; });\n    },\n\n    has: function(value) {\n        return this._index[value] !== undefined;\n    },\n\n    add: function(value) {\n        if (!this.has(value)) {\n            this._index[value] = this._values.length;\n            this._values.push(value);\n        }\n    },\n\n    delete: function(value) {\n        var index = this._index[value];\n        if (index !== undefined) {\n            this._values[index] = DELETED;\n            delete this._index[value];\n        }\n    },\n\n    clear: function() {\n        this._index = {};\n        this._values = [];\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(LegacySet.fn, {\n        size: {\n            get: function() {\n                return this._values.length;\n            }\n        }\n    });\n}\n\nvar SetWrapper = Class.extend({\n    init: function(values) {\n        this._set = new Set(values);\n    },\n\n    values: function() {\n        return Array.from(this._set);\n    },\n\n    has: function(value) {\n        return this._set.has(value);\n    },\n\n    add: function(value) {\n        this._set.add(value);\n    },\n\n    delete: function(value) {\n        this._set.delete(value);\n    },\n\n    clear: function() {\n        this._set.clear();\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(SetWrapper.fn, {\n        size: {\n            get: function() {\n                return this._set.size;\n            }\n        }\n    });\n}\n\n// TODO: Drop LegacySet when removing support for IE10\nvar supportsSet = function () {\n    var supported = false;\n\n    if (typeof Set === 'function') {\n        var set = new Set([1]);\n        supported = set.has(1);\n    }\n\n    return supported;\n};\n\nfunction createHashSet(values) {\n    if (supportsSet()) {\n        return new SetWrapper(values);\n    }\n\n    return new LegacySet(values);\n}\n\nfunction defaultErrorHandler(error) {\n    throw error;\n}\n\nvar keys = {\n    INSERT: 45,\n    DELETE: 46,\n    BACKSPACE: 8,\n    TAB: 9,\n    ENTER: 13,\n    ESC: 27,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    END: 35,\n    HOME: 36,\n    SPACEBAR: 32,\n    PAGEUP: 33,\n    PAGEDOWN: 34,\n    F2: 113,\n    F10: 121,\n    F12: 123,\n    NUMPAD_PLUS: 107,\n    NUMPAD_MINUS: 109,\n    NUMPAD_DOT: 110\n};\n\nfunction autoMajorUnit(min, max) {\n    var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n    if (diff === 0) {\n        if (max === 0) {\n            return 0.1;\n        }\n\n        diff = Math.abs(max);\n    }\n\n    var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n    var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n    var scaleMultiplier = 1;\n\n    if (relativeValue < 1.904762) {\n        scaleMultiplier = 0.2;\n    } else if (relativeValue < 4.761904) {\n        scaleMultiplier = 0.5;\n    } else if (relativeValue < 9.523809) {\n        scaleMultiplier = 1;\n    } else {\n        scaleMultiplier = 2;\n    }\n\n    return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n}\n\nvar Point = Class.extend({\n    init: function(x, y) {\n\n        this.x = x || 0;\n        this.y = y || 0;\n    },\n\n    clone: function() {\n        return new Point(this.x, this.y);\n    },\n\n    equals: function(point) {\n        return point && this.x === point.x && this.y === point.y;\n    },\n\n    rotate: function(center, degrees) {\n        var theta = rad(degrees);\n        var cosT = Math.cos(theta);\n        var sinT = Math.sin(theta);\n        var cx = center.x;\n        var cy = center.y;\n        var ref = this;\n        var x = ref.x;\n        var y = ref.y;\n\n        this.x = round(\n            cx + (x - cx) * cosT + (y - cy) * sinT,\n            COORD_PRECISION\n        );\n\n        this.y = round(\n            cy + (y - cy) * cosT - (x - cx) * sinT,\n            COORD_PRECISION\n        );\n\n        return this;\n    },\n\n    multiply: function(a) {\n\n        this.x *= a;\n        this.y *= a;\n\n        return this;\n    },\n\n    distanceTo: function(point) {\n        var dx = this.x - point.x;\n        var dy = this.y - point.y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n});\n\nPoint.onCircle = function(center, angle, radius) {\n    var radians = rad(angle);\n\n    return new Point(\n        center.x - radius * Math.cos(radians),\n        center.y - radius * Math.sin(radians)\n    );\n};\n\nvar Box = Class.extend({\n    init: function(x1, y1, x2, y2) {\n\n        this.x1 = x1 || 0;\n        this.y1 = y1 || 0;\n        this.x2 = x2 || 0;\n        this.y2 = y2 || 0;\n    },\n\n    equals: function(box) {\n        return this.x1 === box.x1 && this.x2 === box.x2 &&\n            this.y1 === box.y1 && this.y2 === box.y2;\n    },\n\n    width: function() {\n        return this.x2 - this.x1;\n    },\n\n    height: function() {\n        return this.y2 - this.y1;\n    },\n\n    translate: function(dx, dy) {\n        this.x1 += dx;\n        this.x2 += dx;\n        this.y1 += dy;\n        this.y2 += dy;\n\n        return this;\n    },\n\n    move: function(x, y) {\n        var height = this.height();\n        var width = this.width();\n\n        if (defined(x)) {\n            this.x1 = x;\n            this.x2 = this.x1 + width;\n        }\n\n        if (defined(y)) {\n            this.y1 = y;\n            this.y2 = this.y1 + height;\n        }\n\n        return this;\n    },\n\n    wrap: function(targetBox) {\n        this.x1 = Math.min(this.x1, targetBox.x1);\n        this.y1 = Math.min(this.y1, targetBox.y1);\n        this.x2 = Math.max(this.x2, targetBox.x2);\n        this.y2 = Math.max(this.y2, targetBox.y2);\n\n        return this;\n    },\n\n    wrapPoint: function(point) {\n        var arrayPoint = isArray(point);\n        var x = arrayPoint ? point[0] : point.x;\n        var y = arrayPoint ? point[1] : point.y;\n        this.wrap(new Box(x, y, x, y));\n\n        return this;\n    },\n\n    snapTo: function(targetBox, axis) {\n\n        if (axis === X || !axis) {\n            this.x1 = targetBox.x1;\n            this.x2 = targetBox.x2;\n        }\n\n        if (axis === Y || !axis) {\n            this.y1 = targetBox.y1;\n            this.y2 = targetBox.y2;\n        }\n\n        return this;\n    },\n\n    alignTo: function(targetBox, anchor) {\n        var height = this.height();\n        var width = this.width();\n        var axis = anchor === TOP || anchor === BOTTOM ? Y : X;\n        var offset = axis === Y ? height : width;\n\n        if (anchor === CENTER) {\n            var targetCenter = targetBox.center();\n            var center = this.center();\n\n            this.x1 += targetCenter.x - center.x;\n            this.y1 += targetCenter.y - center.y;\n        } else if (anchor === TOP || anchor === LEFT) {\n            this[axis + 1] = targetBox[axis + 1] - offset;\n        } else {\n            this[axis + 1] = targetBox[axis + 2];\n        }\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    shrink: function(dw, dh) {\n\n        this.x2 -= dw;\n        this.y2 -= dh;\n\n        return this;\n    },\n\n    expand: function(dw, dh) {\n        this.shrink(-dw, -dh);\n        return this;\n    },\n\n    pad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        this.x1 -= spacing.left;\n        this.x2 += spacing.right;\n        this.y1 -= spacing.top;\n        this.y2 += spacing.bottom;\n\n        return this;\n    },\n\n    unpad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        spacing.left = -spacing.left;\n        spacing.top = -spacing.top;\n        spacing.right = -spacing.right;\n        spacing.bottom = -spacing.bottom;\n\n        return this.pad(spacing);\n    },\n\n    clone: function() {\n        return new Box(this.x1, this.y1, this.x2, this.y2);\n    },\n\n    center: function() {\n        return new Point(\n            this.x1 + this.width() / 2,\n            this.y1 + this.height() / 2\n        );\n    },\n\n    containsPoint: function(point) {\n\n        return point.x >= this.x1 && point.x <= this.x2 &&\n               point.y >= this.y1 && point.y <= this.y2;\n    },\n\n    points: function() {\n        return [\n            new Point(this.x1, this.y1),\n            new Point(this.x2, this.y1),\n            new Point(this.x2, this.y2),\n            new Point(this.x1, this.y2)\n        ];\n    },\n\n    getHash: function() {\n        return [ this.x1, this.y1, this.x2, this.y2 ].join(\",\");\n    },\n\n    overlaps: function(box) {\n        return !(box.y2 < this.y1 || this.y2 < box.y1 || box.x2 < this.x1 || this.x2 < box.x1);\n    },\n\n    rotate: function(rotation) {\n        var width = this.width();\n        var height = this.height();\n        var ref = this.center();\n        var cx = ref.x;\n        var cy = ref.y;\n\n        var r1 = rotatePoint(0, 0, cx, cy, rotation);\n        var r2 = rotatePoint(width, 0, cx, cy, rotation);\n        var r3 = rotatePoint(width, height, cx, cy, rotation);\n        var r4 = rotatePoint(0, height, cx, cy, rotation);\n\n        width = Math.max(r1.x, r2.x, r3.x, r4.x) - Math.min(r1.x, r2.x, r3.x, r4.x);\n        height = Math.max(r1.y, r2.y, r3.y, r4.y) - Math.min(r1.y, r2.y, r3.y, r4.y);\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    toRect: function() {\n        return new Rect([ this.x1, this.y1 ], [ this.width(), this.height() ]);\n    },\n\n    hasSize: function() {\n        return this.width() !== 0 && this.height() !== 0;\n    },\n\n    align: function(targetBox, axis, alignment) {\n        var c1 = axis + 1;\n        var c2 = axis + 2;\n        var sizeFunc = axis === X ? WIDTH : HEIGHT;\n        var size = this[sizeFunc]();\n\n        if (inArray(alignment, [ LEFT, TOP ])) {\n            this[c1] = targetBox[c1];\n            this[c2] = this[c1] + size;\n        } else if (inArray(alignment, [ RIGHT, BOTTOM ])) {\n            this[c2] = targetBox[c2];\n            this[c1] = this[c2] - size;\n        } else if (alignment === CENTER) {\n            this[c1] = targetBox[c1] + (targetBox[sizeFunc]() - size) / 2;\n            this[c2] = this[c1] + size;\n        }\n    }\n});\n\nfunction rotatePoint(x, y, cx, cy, angle) {\n    var theta = rad(angle);\n\n    return new Point(\n        cx + (x - cx) * Math.cos(theta) + (y - cy) * Math.sin(theta),\n        cy - (x - cx) * Math.sin(theta) + (y - cy) * Math.cos(theta)\n    );\n}\n\nvar Ring = Class.extend({\n    init: function(center, innerRadius, radius, startAngle, angle) {\n\n        this.center = center;\n        this.innerRadius = innerRadius;\n        this.radius = radius;\n        this.startAngle = startAngle;\n        this.angle = angle;\n    },\n\n    clone: function() {\n        return new Ring(this.center, this.innerRadius, this.radius, this.startAngle, this.angle);\n    },\n\n    middle: function() {\n        return this.startAngle + this.angle / 2;\n    },\n\n    setRadius: function(newRadius, innerRadius) {\n        if (innerRadius) {\n            this.innerRadius = newRadius;\n        } else {\n            this.radius = newRadius;\n        }\n\n        return this;\n    },\n\n    point: function(angle, innerRadius) {\n        var radianAngle = rad(angle);\n        var ax = Math.cos(radianAngle);\n        var ay = Math.sin(radianAngle);\n        var radius = innerRadius ? this.innerRadius : this.radius;\n        var x = round(this.center.x - (ax * radius), COORD_PRECISION);\n        var y = round(this.center.y - (ay * radius), COORD_PRECISION);\n\n        return new Point(x, y);\n    },\n\n    adjacentBox: function(distance, width, height) {\n        var sector = this.clone().expand(distance);\n        var midAndle = sector.middle();\n        var midPoint = sector.point(midAndle);\n        var hw = width / 2;\n        var hh = height / 2;\n        var sa = Math.sin(rad(midAndle));\n        var ca = Math.cos(rad(midAndle));\n        var x = midPoint.x - hw;\n        var y = midPoint.y - hh;\n\n        if (Math.abs(sa) < 0.9) {\n            x += hw * -ca / Math.abs(ca);\n        }\n\n        if (Math.abs(ca) < 0.9) {\n            y += hh * -sa / Math.abs(sa);\n        }\n\n        return new Box(x, y, x + width, y + height);\n    },\n\n    containsPoint: function(p) {\n        var center = this.center;\n        var innerRadius = this.innerRadius;\n        var radius = this.radius;\n        var startAngle = this.startAngle;\n        var endAngle = this.startAngle + this.angle;\n        var dx = p.x - center.x;\n        var dy = p.y - center.y;\n        var vector = new Point(dx, dy);\n        var startPoint = this.point(startAngle);\n        var startVector = new Point(startPoint.x - center.x, startPoint.y - center.y);\n        var endPoint = this.point(endAngle);\n        var endVector = new Point(endPoint.x - center.x, endPoint.y - center.y);\n        var dist = round(dx * dx + dy * dy, COORD_PRECISION);\n\n        return (startVector.equals(vector) || clockwise(startVector, vector)) &&\n               !clockwise(endVector, vector) &&\n               dist >= innerRadius * innerRadius && dist <= radius * radius;\n    },\n\n    getBBox: function() {\n        var this$1$1 = this;\n\n        var box = new Box(MAX_VALUE, MAX_VALUE, MIN_VALUE, MIN_VALUE);\n        var startAngle = round(this.startAngle % 360);\n        var endAngle = round((startAngle + this.angle) % 360);\n        var innerRadius = this.innerRadius;\n        var allAngles = [ 0, 90, 180, 270, startAngle, endAngle ].sort(numericComparer);\n        var startAngleIndex = allAngles.indexOf(startAngle);\n        var endAngleIndex = allAngles.indexOf(endAngle);\n        var angles;\n\n        if (startAngle === endAngle) {\n            angles = allAngles;\n        } else {\n            if (startAngleIndex < endAngleIndex) {\n                angles = allAngles.slice(startAngleIndex, endAngleIndex + 1);\n            } else {\n                angles = [].concat(\n                    allAngles.slice(0, endAngleIndex + 1),\n                    allAngles.slice(startAngleIndex, allAngles.length)\n                );\n            }\n        }\n\n        for (var i = 0; i < angles.length; i++) {\n            var point = this$1$1.point(angles[i]);\n            box.wrapPoint(point);\n            box.wrapPoint(point, innerRadius);\n        }\n\n        if (!innerRadius) {\n            box.wrapPoint(this.center);\n        }\n\n        return box;\n    },\n\n    expand: function(value) {\n        this.radius += value;\n        return this;\n    }\n});\n\nfunction numericComparer(a, b) {\n    return a - b;\n}\n\nvar Sector = Ring.extend({\n    init: function(center, radius, startAngle, angle) {\n        Ring.fn.init.call(this, center, 0, radius, startAngle, angle);\n    },\n\n    expand: function(value) {\n        return Ring.fn.expand.call(this, value);\n    },\n\n    clone: function() {\n        return new Sector(this.center, this.radius, this.startAngle, this.angle);\n    },\n\n    setRadius: function(newRadius) {\n        this.radius = newRadius;\n\n        return this;\n    }\n});\n\nvar DIRECTION_ANGLE = 0.001; //any value that will make the endAngle bigger than the start angle will work here.\n\nvar ShapeBuilder = Class.extend({\n    createRing: function(sector, options) {\n        var startAngle = sector.startAngle + 180;\n        var endAngle = sector.angle + startAngle;\n\n        //required in order to avoid reversing the arc direction in cases like 0.000000000000001 + 100 === 100\n        if (sector.angle > 0 && startAngle === endAngle) {\n            endAngle += DIRECTION_ANGLE;\n        }\n\n        var center = new geometry.Point(sector.center.x, sector.center.y);\n        var radius = Math.max(sector.radius, 0);\n        var innerRadius = Math.max(sector.innerRadius, 0);\n        var arc = new geometry.Arc(center, {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: radius,\n            radiusY: radius\n        });\n        var path = Path.fromArc(arc, options).close();\n\n        if (innerRadius) {\n            arc.radiusX = arc.radiusY = innerRadius;\n            var innerEnd = arc.pointAt(endAngle);\n            path.lineTo(innerEnd.x, innerEnd.y);\n            path.arc(endAngle, startAngle, innerRadius, innerRadius, true);\n        } else {\n            path.lineTo(center.x, center.y);\n        }\n\n        return path;\n    }\n});\n\nShapeBuilder.current = new ShapeBuilder();\n\nvar ChartElement = Class.extend({\n    init: function(options) {\n\n        this.children = [];\n\n        this.options = deepExtend({}, this.options, this.initUserOptions(options));\n    },\n\n    initUserOptions: function(options) {\n        return options;\n    },\n\n    reflow: function(targetBox) {\n        var children = this.children;\n        var box;\n\n        for (var i = 0; i < children.length; i++) {\n            var currentChild = children[i];\n            currentChild.reflow(targetBox);\n\n            box = box ? box.wrap(currentChild.box) : currentChild.box.clone();\n        }\n\n        this.box = box || targetBox;\n    },\n\n    destroy: function() {\n        var children = this.children;\n\n        if (this.animation) {\n            this.animation.destroy();\n        }\n\n        for (var i = 0; i < children.length; i++) {\n            children[i].destroy();\n        }\n    },\n\n    getRoot: function() {\n        var parent = this.parent;\n\n        return parent ? parent.getRoot() : null;\n    },\n\n    getSender: function() {\n        var service = this.getService();\n        if (service) {\n            return service.sender;\n        }\n    },\n\n    getService: function() {\n        var element = this;\n        while (element) {\n            if (element.chartService) {\n                return element.chartService;\n            }\n            element = element.parent;\n        }\n    },\n\n    translateChildren: function(dx, dy) {\n        var children = this.children;\n        var childrenCount = children.length;\n\n        for (var i = 0; i < childrenCount; i++) {\n            children[i].box.translate(dx, dy);\n        }\n    },\n\n    append: function() {\n        var arguments$1 = arguments;\n        var this$1$1 = this;\n\n        for (var i = 0; i < arguments.length; i++) {\n            var item = arguments$1[i];\n            this$1$1.children.push(item);\n            item.parent = this$1$1;\n        }\n    },\n\n    renderVisual: function() {\n        if (this.options.visible === false) {\n            return;\n        }\n\n        this.createVisual();\n\n        this.addVisual();\n\n        this.renderChildren();\n\n        this.createAnimation();\n        this.renderComplete();\n    },\n\n    addVisual: function() {\n        if (this.visual) {\n            this.visual.chartElement = this;\n\n            if (this.parent) {\n                this.parent.appendVisual(this.visual);\n            }\n        }\n    },\n\n    renderChildren: function() {\n        var children = this.children;\n        var length = children.length;\n        for (var i = 0; i < length; i++) {\n            children[i].renderVisual();\n        }\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: this.options.zIndex,\n            visible: valueOrDefault(this.options.visible, true)\n        });\n    },\n\n    createAnimation: function() {\n        if (this.visual && this.options.animation) {\n            this.animation = drawing.Animation.create(\n                this.visual, this.options.animation\n            );\n        }\n    },\n\n    appendVisual: function(childVisual) {\n        if (!childVisual.chartElement) {\n            childVisual.chartElement = this;\n        }\n\n        if (childVisual.options.noclip) {\n            this.clipRoot().visual.append(childVisual);\n        } else if (defined(childVisual.options.zIndex)) {\n            this.stackRoot().stackVisual(childVisual);\n        } else if (this.isStackRoot) {\n            this.stackVisual(childVisual);\n        } else if (this.visual) {\n            this.visual.append(childVisual);\n        } else {\n            // Allow chart elements without visuals to\n            // pass through child visuals\n            this.parent.appendVisual(childVisual);\n        }\n    },\n\n    clipRoot: function() {\n        if (this.parent) {\n            return this.parent.clipRoot();\n        }\n\n        return this;\n    },\n\n    stackRoot: function() {\n        if (this.parent) {\n            return this.parent.stackRoot();\n        }\n\n        return this;\n    },\n\n    stackVisual: function(childVisual) {\n        var zIndex = childVisual.options.zIndex || 0;\n        var visuals = this.visual.children;\n        var length = visuals.length;\n        var pos;\n\n        for (pos = 0; pos < length; pos++) {\n            var sibling = visuals[pos];\n            var here = valueOrDefault(sibling.options.zIndex, 0);\n            if (here > zIndex) {\n                break;\n            }\n        }\n\n        this.visual.insert(pos, childVisual);\n    },\n\n    traverse: function(callback) {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            var child = children[i];\n\n            callback(child);\n            if (child.traverse) {\n                child.traverse(callback);\n            }\n        }\n    },\n\n    closest: function(match) {\n        var element = this;\n        var matched = false;\n\n        while (element && !matched) {\n            matched = match(element);\n\n            if (!matched) {\n                element = element.parent;\n            }\n        }\n\n        if (matched) {\n            return element;\n        }\n    },\n\n    renderComplete: function() {},\n\n    hasHighlight: function() {\n        var options = (this.options || {}).highlight;\n        return !(!this.createHighlight || (options && options.visible === false));\n    },\n\n    toggleHighlight: function(show, opacity) {\n        var this$1$1 = this;\n\n        var options = (this.options || {}).highlight || {};\n        var customVisual = options.visual;\n        var highlight = this._highlight;\n\n        if (!highlight) {\n            var highlightOptions = {\n                fill: {\n                    color: WHITE,\n                    opacity: opacity || 0.2\n                },\n                stroke: {\n                    color: WHITE,\n                    width: 1,\n                    opacity: opacity || 0.2\n                }\n            };\n\n            if (customVisual) {\n                highlight = this._highlight = customVisual(\n                    $.extend(this.highlightVisualArgs(), {\n                        createVisual: function () { return this$1$1.createHighlight(highlightOptions); },\n                        sender: this.getSender(),\n                        series: this.series,\n                        dataItem: this.dataItem,\n                        category: this.category,\n                        value: this.value,\n                        percentage: this.percentage,\n                        runningTotal: this.runningTotal,\n                        total: this.total\n                    }\n                ));\n\n                if (!highlight) {\n                    return;\n                }\n            } else {\n                highlight = this._highlight = this.createHighlight(highlightOptions);\n            }\n\n            if (!defined(highlight.options.zIndex)) {\n                highlight.options.zIndex = valueOrDefault(options.zIndex, this.options.zIndex);\n            }\n\n            this.appendVisual(highlight);\n        }\n\n        highlight.visible(show);\n    },\n\n    createGradientOverlay: function(element, options, gradientOptions) {\n        var overlay = new Path($.extend({\n            stroke: {\n                color: \"none\"\n            },\n            fill: this.createGradient(gradientOptions),\n            closed: element.options.closed\n        }, options));\n\n        overlay.segments.elements(element.segments.elements());\n\n        return overlay;\n    },\n\n    createGradient: function(options) {\n        if (this.parent) {\n            return this.parent.createGradient(options);\n        }\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return true;\n    }\n});\n\nChartElement.prototype.options = { };\n\nvar BoxElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.options.margin = getSpacing(this.options.margin);\n        this.options.padding = getSpacing(this.options.padding);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var width = options.width;\n        var height = options.height;\n        var shrinkToFit = options.shrinkToFit;\n        var hasSetSize = width && height;\n        var margin = options.margin;\n        var padding = options.padding;\n        var borderWidth = options.border.width;\n        var box;\n\n        var reflowPaddingBox = function () {\n            this$1$1.align(targetBox, X, options.align);\n            this$1$1.align(targetBox, Y, options.vAlign);\n            this$1$1.paddingBox = box.clone().unpad(margin).unpad(borderWidth);\n        };\n\n        var contentBox = targetBox.clone();\n        if (hasSetSize) {\n            contentBox.x2 = contentBox.x1 + width;\n            contentBox.y2 = contentBox.y1 + height;\n        }\n\n        if (shrinkToFit) {\n            contentBox.unpad(margin).unpad(borderWidth).unpad(padding);\n        }\n\n        ChartElement.fn.reflow.call(this, contentBox);\n\n        if (hasSetSize) {\n            box = this.box = new Box(0, 0, width, height);\n        } else {\n            box = this.box;\n        }\n\n        if (shrinkToFit && hasSetSize) {\n            reflowPaddingBox();\n            contentBox = this.contentBox = this.paddingBox.clone().unpad(padding);\n        } else {\n            contentBox = this.contentBox = box.clone();\n            box.pad(padding).pad(borderWidth).pad(margin);\n            reflowPaddingBox();\n        }\n\n        this.translateChildren(\n            box.x1 - contentBox.x1 + margin.left + borderWidth + padding.left,\n            box.y1 - contentBox.y1 + margin.top + borderWidth + padding.top\n        );\n\n        var children = this.children;\n        for (var i = 0; i < children.length; i++) {\n            var item = children[i];\n            item.reflow(item.box);\n        }\n    },\n\n    align: function(targetBox, axis, alignment) {\n        this.box.align(targetBox, axis, alignment);\n    },\n\n    hasBox: function() {\n        var options = this.options;\n        return options.border.width || options.background;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        if (options.visible && this.hasBox()) {\n            this.visual.append(Path.fromRect(\n                this.paddingBox.toRect(),\n                this.visualStyle()\n            ));\n        }\n    },\n\n    visualStyle: function() {\n        var options = this.options;\n        var border = options.border || {};\n\n        return {\n            stroke: {\n                width: border.width,\n                color: border.color,\n                opacity: valueOrDefault(border.opacity, options.opacity),\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            cursor: options.cursor\n        };\n    }\n});\n\nsetDefaultOptions(BoxElement, {\n    align: LEFT,\n    vAlign: TOP,\n    margin: {},\n    padding: {},\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    background: \"\",\n    shrinkToFit: false,\n    width: 0,\n    height: 0,\n    visible: true\n});\n\nvar ShapeElement = BoxElement.extend({\n    init: function(options, pointData) {\n        BoxElement.fn.init.call(this, options);\n\n        this.pointData = pointData;\n    },\n\n    getElement: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.paddingBox;\n        var type = options.type;\n        var rotation = options.rotation;\n        var center = box.center();\n        var halfWidth = box.width() / 2;\n        var halfHeight = box.height() / 2;\n\n        if (!options.visible || !this.hasBox()) {\n            return null;\n        }\n\n        var style = this.visualStyle();\n        var element;\n\n        if (type === CIRCLE) {\n            element = new drawing.Circle(\n                new Circle([\n                    round(box.x1 + halfWidth, COORD_PRECISION),\n                    round(box.y1 + halfHeight, COORD_PRECISION)\n                ], Math.min(halfWidth, halfHeight)),\n                style\n            );\n        } else if (type === TRIANGLE) {\n            element = Path.fromPoints([\n                [ box.x1 + halfWidth, box.y1 ],\n                [ box.x1, box.y2 ],\n                [ box.x2, box.y2 ]\n            ], style).close();\n        } else if (type === CROSS) {\n            element = new drawing.MultiPath(style);\n\n            element.moveTo(box.x1, box.y1).lineTo(box.x2, box.y2);\n            element.moveTo(box.x1, box.y2).lineTo(box.x2, box.y1);\n        } else {\n            var rect = box.toRect();\n            if (type === ROUNDED_RECT) {\n                var borderRadius = valueOrDefault(options.borderRadius, rect.width() / 5);\n                rect.setCornerRadius(borderRadius);\n            }\n\n            element = Path.fromRect(rect, style);\n        }\n\n        if (rotation) {\n            element.transform(geometryTransform()\n                .rotate(-rotation, [ center.x, center.y ])\n            );\n        }\n\n        element.options.zIndex = options.zIndex;\n\n        return element;\n    },\n\n    createElement: function() {\n        var this$1$1 = this;\n\n        var customVisual = this.options.visual;\n        var pointData = this.pointData || {};\n        var visual;\n\n        if (customVisual) {\n            visual = customVisual({\n                value: pointData.value,\n                dataItem: pointData.dataItem,\n                sender: this.getSender(),\n                series: pointData.series,\n                category: pointData.category,\n                rect: this.paddingBox.toRect(),\n                options: this.visualOptions(),\n                createVisual: function () { return this$1$1.getElement(); }\n            });\n        } else {\n            visual = this.getElement();\n        }\n\n        return visual;\n    },\n\n    visualOptions: function() {\n        var options = this.options;\n        return {\n            background: options.background,\n            border: options.border,\n            margin: options.margin,\n            padding: options.padding,\n            type: options.type,\n            size: options.width,\n            visible: options.visible\n        };\n    },\n\n    createVisual: function() {\n        this.visual = this.createElement();\n    }\n});\n\nsetDefaultOptions(ShapeElement, {\n    type: CIRCLE,\n    align: CENTER,\n    vAlign: CENTER\n});\n\nvar LINEAR = \"linear\";\nvar RADIAL = \"radial\";\n\nvar GRADIENTS = {\n    glass: {\n        type: LINEAR,\n        rotation: 0,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.25,\n            color: WHITE,\n            opacity: 0.3\n        }, {\n            offset: 1,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    sharpBevel: {\n        type: RADIAL,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0.55\n        }, {\n            offset: 0.65,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.95,\n            color: WHITE,\n            opacity: 0.25\n        } ]\n    },\n    roundedBevel: {\n        type: RADIAL,\n        stops: [ {\n            offset: 0.33,\n            color: WHITE,\n            opacity: 0.06\n        }, {\n            offset: 0.83,\n            color: WHITE,\n            opacity: 0.2\n        }, {\n            offset: 0.95,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    roundedGlass: {\n        type: RADIAL,\n        supportVML: false,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.5,\n            color: WHITE,\n            opacity: 0.3\n        }, {\n            offset: 0.99,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    sharpGlass: {\n        type: RADIAL,\n        supportVML: false,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0.2\n        }, {\n            offset: 0.15,\n            color: WHITE,\n            opacity: 0.15\n        }, {\n            offset: 0.17,\n            color: WHITE,\n            opacity: 0.35\n        }, {\n            offset: 0.85,\n            color: WHITE,\n            opacity: 0.05\n        }, {\n            offset: 0.87,\n            color: WHITE,\n            opacity: 0.15\n        }, {\n            offset: 0.99,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    bubbleShadow: {\n        type: RADIAL,\n        center: [ 0.5, 0.5 ],\n        radius: 0.5\n    }\n};\n\nfunction boxDiff(r, s) {\n    if (r.x1 === s.x1 && r.y1 === s.y1 && r.x2 === s.x2 && r.y2 === s.y2) {\n        return s;\n    }\n\n    var a = Math.min(r.x1, s.x1);\n    var b = Math.max(r.x1, s.x1);\n    var c = Math.min(r.x2, s.x2);\n    var d = Math.max(r.x2, s.x2);\n    var e = Math.min(r.y1, s.y1);\n    var f = Math.max(r.y1, s.y1);\n    var g = Math.min(r.y2, s.y2);\n    var h = Math.max(r.y2, s.y2);\n    var boxes = [];\n\n    // X = intersection, 0-7 = possible difference areas\n    // h +-+-+-+\n    // . |5|6|7|\n    // g +-+-+-+\n    // . |3|X|4|\n    // f +-+-+-+\n    // . |0|1|2|\n    // e +-+-+-+\n    // . a b c d\n\n    // we'll always have rectangles 1, 3, 4 and 6\n    boxes[0] = new Box(b, e, c, f);\n    boxes[1] = new Box(a, f, b, g);\n    boxes[2] = new Box(c, f, d, g);\n    boxes[3] = new Box(b, g, c, h);\n\n    // decide which corners\n    if (r.x1 === a && r.y1 === e || s.x1 === a && s.y1 === e) { // corners 0 and 7\n        boxes[4] = new Box(a, e, b, f);\n        boxes[5] = new Box(c, g, d, h);\n    } else { // corners 2 and 5\n        boxes[4] = new Box(c, e, d, f);\n        boxes[5] = new Box(a, g, b, h);\n    }\n\n    return grep(boxes, function(box) {\n        return box.height() > 0 && box.width() > 0;\n    })[0];\n}\n\nvar RootElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        var rootOptions = this.options;\n        rootOptions.width = parseInt(rootOptions.width, 10);\n        rootOptions.height = parseInt(rootOptions.height, 10);\n\n        this.gradients = {};\n    },\n\n    reflow: function() {\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var currentBox = new Box(0, 0, options.width, options.height);\n\n        this.box = currentBox.unpad(options.margin);\n\n        for (var i = 0; i < children.length; i++) {\n            children[i].reflow(currentBox);\n            currentBox = boxDiff(currentBox, children[i].box) || new Box();\n        }\n    },\n\n    createVisual: function() {\n        this.visual = new Group();\n        this.createBackground();\n    },\n\n    createBackground: function() {\n        var options = this.options;\n        var border = options.border || {};\n        var box = this.box.clone().pad(options.margin).unpad(border.width);\n\n        var background = Path.fromRect(box.toRect(), {\n            stroke: {\n                color: border.width ? border.color : \"\",\n                width: border.width,\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            zIndex: -10\n        });\n\n        this.visual.append(background);\n    },\n\n    getRoot: function() {\n        return this;\n    },\n\n    createGradient: function(options) {\n        var gradients = this.gradients;\n        var hashCode = objectKey(options);\n        var gradient = GRADIENTS[options.gradient];\n        var drawingGradient;\n\n        if (gradients[hashCode]) {\n            drawingGradient = gradients[hashCode];\n        } else {\n            var gradientOptions = $.extend({}, gradient, options);\n            if (gradient.type === \"linear\") {\n                drawingGradient = new drawing.LinearGradient(gradientOptions);\n            } else {\n                if (options.innerRadius) {\n                    gradientOptions.stops = innerRadialStops(gradientOptions);\n                }\n                drawingGradient = new drawing.RadialGradient(gradientOptions);\n                drawingGradient.supportVML = gradient.supportVML !== false;\n            }\n            gradients[hashCode] = drawingGradient;\n        }\n\n        return drawingGradient;\n    },\n\n    cleanGradients: function() {\n        var gradients = this.gradients;\n        for (var hashCode in gradients) {\n            gradients[hashCode]._observers = [];//add clear observers method in drawing ObserversMixin\n        }\n    },\n\n    size: function() {\n        var options = this.options;\n        return new Box(0, 0, options.width, options.height);\n    }\n});\n\nsetDefaultOptions(RootElement, {\n    width: DEFAULT_WIDTH,\n    height: DEFAULT_HEIGHT,\n    background: WHITE,\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    margin: getSpacing(5),\n    zIndex: -2\n});\n\nfunction innerRadialStops(options) {\n    var stops = options.stops;\n    var usedSpace = ((options.innerRadius / options.radius) * 100);\n    var length = stops.length;\n    var currentStops = [];\n\n    for (var i = 0; i < length; i++) {\n        var currentStop = $.extend({}, stops[i]);\n        currentStop.offset = (currentStop.offset * (100 - usedSpace) + usedSpace) / 100;\n        currentStops.push(currentStop);\n    }\n\n    return currentStops;\n}\n\nvar FloatElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n        this._initDirection();\n    },\n\n    _initDirection: function() {\n        var options = this.options;\n        if (options.vertical) {\n            this.groupAxis = X;\n            this.elementAxis = Y;\n            this.groupSizeField = WIDTH;\n            this.elementSizeField = HEIGHT;\n            this.groupSpacing = options.spacing;\n            this.elementSpacing = options.vSpacing;\n        } else {\n            this.groupAxis = Y;\n            this.elementAxis = X;\n            this.groupSizeField = HEIGHT;\n            this.elementSizeField = WIDTH;\n            this.groupSpacing = options.vSpacing;\n            this.elementSpacing = options.spacing;\n        }\n    },\n\n    reflow: function(targetBox) {\n        this.box = targetBox.clone();\n        this.reflowChildren();\n    },\n\n    reflowChildren: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var elementAxis = ref.elementAxis;\n        var groupAxis = ref.groupAxis;\n        var elementSizeField = ref.elementSizeField;\n        var groupSizeField = ref.groupSizeField;\n        var ref$1 = this.groupOptions();\n        var groups = ref$1.groups;\n        var groupsSize = ref$1.groupsSize;\n        var maxGroupElementsSize = ref$1.maxGroupElementsSize;\n        var groupsCount = groups.length;\n        var groupsStart = box[groupAxis + 1] + this.alignStart(groupsSize, box[groupSizeField]());\n\n        if (groupsCount) {\n            var groupStart = groupsStart;\n\n            for (var groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                var group = groups[groupIdx];\n                var groupElements = group.groupElements;\n                var elementStart = box[elementAxis + 1];\n                var groupElementsCount = groupElements.length;\n\n                for (var idx = 0; idx < groupElementsCount; idx++) {\n                    var element = groupElements[idx];\n                    var elementSize$$1 = this$1$1.elementSize(element);\n                    var groupElementStart = groupStart + this$1$1.alignStart(elementSize$$1[groupSizeField], group.groupSize);\n\n                    var elementBox = new Box();\n                    elementBox[groupAxis + 1] = groupElementStart;\n                    elementBox[groupAxis + 2] = groupElementStart + elementSize$$1[groupSizeField];\n                    elementBox[elementAxis + 1] = elementStart;\n                    elementBox[elementAxis + 2] = elementStart + elementSize$$1[elementSizeField];\n\n                    element.reflow(elementBox);\n\n                    elementStart += elementSize$$1[elementSizeField] + this$1$1.elementSpacing;\n                }\n                groupStart += group.groupSize + this$1$1.groupSpacing;\n            }\n            box[groupAxis + 1] = groupsStart;\n            box[groupAxis + 2] = groupsStart + groupsSize;\n            box[elementAxis + 2] = box[elementAxis + 1] + maxGroupElementsSize;\n        }\n    },\n\n    alignStart: function(size, maxSize) {\n        var start = 0;\n        var align = this.options.align;\n        if (align === RIGHT || align === BOTTOM) {\n            start = maxSize - size;\n        } else if (align === CENTER) {\n            start = (maxSize - size) / 2;\n        }\n        return start;\n    },\n\n    groupOptions: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var children = ref.children;\n        var elementSizeField = ref.elementSizeField;\n        var groupSizeField = ref.groupSizeField;\n        var elementSpacing = ref.elementSpacing;\n        var groupSpacing = ref.groupSpacing;\n        var maxSize = round(box[elementSizeField]());\n        var childrenCount = children.length;\n        var groups = [];\n\n        var groupSize = 0;\n        var groupElementsSize = 0;\n        var groupsSize = 0;\n        var maxGroupElementsSize = 0;\n        var groupElements = [];\n\n        for (var idx = 0; idx < childrenCount; idx++) {\n            var element = children[idx];\n            if (!element.box) {\n                element.reflow(box);\n            }\n\n            var elementSize$$1 = this$1$1.elementSize(element);\n            if (this$1$1.options.wrap && round(groupElementsSize + elementSpacing + elementSize$$1[elementSizeField]) > maxSize) {\n                groups.push({\n                    groupElements: groupElements,\n                    groupSize: groupSize,\n                    groupElementsSize: groupElementsSize\n                });\n                maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n                groupsSize += groupSpacing + groupSize;\n                groupSize = 0;\n                groupElementsSize = 0;\n                groupElements = [];\n            }\n            groupSize = Math.max(groupSize, elementSize$$1[groupSizeField]);\n            if (groupElementsSize > 0) {\n                groupElementsSize += elementSpacing;\n            }\n            groupElementsSize += elementSize$$1[elementSizeField];\n            groupElements.push(element);\n        }\n\n        groups.push({\n            groupElements: groupElements,\n            groupSize: groupSize,\n            groupElementsSize: groupElementsSize\n        });\n        maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n        groupsSize += groupSize;\n\n        return {\n            groups: groups,\n            groupsSize: groupsSize,\n            maxGroupElementsSize: maxGroupElementsSize\n        };\n    },\n\n    elementSize: function(element) {\n        return {\n            width: element.box.width(),\n            height: element.box.height()\n        };\n    },\n\n    createVisual: function() {}\n});\n\nsetDefaultOptions(FloatElement, {\n    vertical: true,\n    wrap: true,\n    vSpacing: 0,\n    spacing: 0\n});\n\nvar DrawingText = drawing.Text;\n\nvar Text = ChartElement.extend({\n    init: function(content, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.content = content;\n\n        // Calculate size\n        this.reflow(new Box());\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var size = options.size = util.measureText(this.content, { font: options.font });\n\n        this.baseline = size.baseline;\n\n        this.box = new Box(targetBox.x1, targetBox.y1,\n                targetBox.x1 + size.width, targetBox.y1 + size.height);\n    },\n\n    createVisual: function() {\n        var ref = this.options;\n        var font = ref.font;\n        var color = ref.color;\n        var opacity = ref.opacity;\n        var cursor = ref.cursor;\n\n        this.visual = new DrawingText(this.content, this.box.toRect().topLeft(), {\n            font: font,\n            fill: { color: color, opacity: opacity },\n            cursor: cursor\n        });\n    }\n});\n\nsetDefaultOptions(Text, {\n    font: DEFAULT_FONT,\n    color: BLACK\n});\n\nfunction rectToBox(rect) {\n    var origin = rect.origin;\n    var bottomRight = rect.bottomRight();\n\n    return new Box(origin.x, origin.y, bottomRight.x, bottomRight.y);\n}\n\nvar ROWS_SPLIT_REGEX = /\\n/m;\n\nvar TextBox = BoxElement.extend({\n    init: function(content, options, data) {\n        BoxElement.fn.init.call(this, options);\n        this.content = content;\n        this.data = data;\n\n        this._initContainer();\n        if (this.options._autoReflow !== false) {\n            this.reflow(new Box());\n        }\n    },\n\n    _initContainer: function() {\n        var options = this.options;\n        var rows = String(this.content).split(ROWS_SPLIT_REGEX);\n        var floatElement = new FloatElement({ vertical: true, align: options.align, wrap: false });\n        var textOptions = deepExtend({ }, options, { opacity: 1, animation: null });\n\n        this.container = floatElement;\n        this.append(floatElement);\n\n        for (var rowIdx = 0; rowIdx < rows.length; rowIdx++) {\n            var text = new Text(rows[rowIdx].trim(), textOptions);\n            floatElement.append(text);\n        }\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var visualFn = options.visual;\n        this.container.options.align = options.align;\n\n        if (visualFn && !this._boxReflow) {\n            var visualBox = targetBox;\n            if (!visualBox.hasSize()) {\n                this._boxReflow = true;\n                this.reflow(visualBox);\n                this._boxReflow = false;\n                visualBox = this.box;\n            }\n            var visual = this.visual = visualFn(this.visualContext(visualBox));\n\n            if (visual) {\n                visualBox = rectToBox(visual.clippedBBox() || new Rect());\n\n                visual.options.zIndex = options.zIndex;\n            }\n\n            this.box = this.contentBox = this.paddingBox = visualBox;\n        } else {\n            BoxElement.fn.reflow.call(this, targetBox);\n\n            if (options.rotation) {\n                var margin = getSpacing(options.margin);\n                var box = this.box.unpad(margin);\n\n                this.targetBox = targetBox;\n                this.normalBox = box.clone();\n\n                box = this.rotate();\n                box.translate(margin.left - margin.right, margin.top - margin.bottom);\n\n                this.rotatedBox = box.clone();\n\n                box.pad(margin);\n            }\n        }\n    },\n\n    createVisual: function() {\n        var options = this.options;\n\n        this.visual = new Group({\n            transform: this.rotationTransform(),\n            zIndex: options.zIndex,\n            noclip: options.noclip\n        });\n\n        if (this.hasBox()) {\n            var box = Path.fromRect(this.paddingBox.toRect(), this.visualStyle());\n            this.visual.append(box);\n        }\n    },\n\n    renderVisual: function() {\n        if (!this.options.visible) {\n            return;\n        }\n\n        if (this.options.visual) {\n            var visual = this.visual;\n            if (visual && !defined(visual.options.noclip)) {\n                visual.options.noclip = this.options.noclip;\n            }\n            this.addVisual();\n            this.createAnimation();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    },\n\n    visualContext: function(targetBox) {\n        var this$1$1 = this;\n\n        var context = {\n            text: this.content,\n            rect: targetBox.toRect(),\n            sender: this.getSender(),\n            options: this.options,\n            createVisual: function () {\n                this$1$1._boxReflow = true;\n                this$1$1.reflow(targetBox);\n                this$1$1._boxReflow = false;\n                return this$1$1.getDefaultVisual();\n            }\n        };\n        if (this.data) {\n            $.extend(context, this.data);\n        }\n\n        return context;\n    },\n\n    getDefaultVisual: function() {\n        this.createVisual();\n        this.renderChildren();\n        var visual = this.visual;\n        delete this.visual;\n        return visual;\n    },\n\n    rotate: function() {\n        var options = this.options;\n        this.box.rotate(options.rotation);\n        this.align(this.targetBox, X, options.align);\n        this.align(this.targetBox, Y, options.vAlign);\n        return this.box;\n    },\n\n    rotationTransform: function() {\n        var rotation = this.options.rotation;\n        if (!rotation) {\n            return null;\n        }\n\n        var ref = this.normalBox.center();\n        var cx = ref.x;\n        var cy = ref.y;\n        var boxCenter = this.rotatedBox.center();\n\n        return geometryTransform()\n                   .translate(boxCenter.x - cx, boxCenter.y - cy)\n                   .rotate(rotation, [ cx, cy ]);\n    }\n});\n\nvar Title = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this._textBox = new TextBox(this.options.text, $.extend({}, this.options, {\n            vAlign: this.options.position\n        }));\n\n        this.append(this._textBox);\n    },\n\n    reflow: function(targetBox) {\n        ChartElement.fn.reflow.call(this, targetBox);\n        this.box.snapTo(targetBox, X);\n    }\n});\n\nTitle.buildTitle = function(options, defaultOptions) {\n    var titleOptions = options;\n\n    if (typeof options === \"string\") {\n        titleOptions = { text: options };\n    }\n\n    titleOptions = $.extend({ visible: true }, defaultOptions, titleOptions);\n\n    var title;\n    if (titleOptions && titleOptions.visible && titleOptions.text) {\n        title = new Title(titleOptions);\n    }\n\n    return title;\n};\n\nTitle.orderTitles = function(titles) {\n    var items = [].concat(titles);\n    var top = items.filter(function (item) { return item && item.options.position !== BOTTOM; });\n    var bottom = items.filter(function (item) { return item && item.options.position === BOTTOM; });\n\n    collapseVerticalMargins(top);\n    collapseVerticalMargins(bottom);\n\n    bottom.reverse();\n    return top.concat(bottom);\n};\n\nfunction collapseVerticalMargins(items) {\n    for (var i = 1; i < items.length; i++) {\n        var box = items[i]._textBox;\n        var prevBox = items[i - 1]._textBox;\n        prevBox.options.margin = $.extend(getSpacing(prevBox.options.margin), { bottom: 0 });\n        box.options.margin = $.extend(getSpacing(box.options.margin), { top: 0 });\n    }\n}\n\nsetDefaultOptions(Title, {\n    color: BLACK,\n    position: TOP,\n    align: CENTER,\n    margin: getSpacing(5),\n    padding: getSpacing(5)\n});\n\nvar AxisLabel = TextBox.extend({\n    init: function(value, text, index, dataItem, options) {\n        TextBox.fn.init.call(this, text, options);\n\n        this.text = text;\n        this.value = value;\n        this.index = index;\n        this.dataItem = dataItem;\n        this.reflow(new Box());\n    },\n\n    visualContext: function(targetBox) {\n        var context = TextBox.fn.visualContext.call(this, targetBox);\n\n        context.value = this.value;\n        context.dataItem = this.dataItem;\n        context.format = this.options.format;\n        context.culture = this.options.culture;\n\n        return context;\n    },\n\n    click: function(widget, e) {\n\n        widget.trigger(AXIS_LABEL_CLICK, {\n            element: eventElement(e),\n            value: this.value,\n            text: this.text,\n            index: this.index,\n            dataItem: this.dataItem,\n            axis: this.parent.options\n        });\n    },\n\n    rotate: function() {\n        if (this.options.alignRotation !== CENTER) {\n            var box = this.normalBox.toRect();\n            var transform = this.rotationTransform();\n\n            this.box = rectToBox(box.bbox(transform.matrix()));\n        } else {\n            TextBox.fn.rotate.call(this);\n        }\n\n        return this.box;\n    },\n\n    rotationTransform: function() {\n        var options = this.options;\n        var rotation = options.rotation;\n        if (!rotation) {\n            return null;\n        }\n\n        if (options.alignRotation === CENTER) {\n            return TextBox.fn.rotationTransform.call(this);\n        }\n\n        var rotationMatrix = geometryTransform().rotate(rotation).matrix();\n        var box = this.normalBox.toRect();\n        var rect = this.targetBox.toRect();\n\n        var rotationOrigin = options.rotationOrigin || TOP;\n        var alignAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? X : Y;\n        var distanceAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? Y : X;\n        var axisAnchor = rotationOrigin === TOP || rotationOrigin === LEFT ? rect.origin : rect.bottomRight();\n\n        var topLeft = box.topLeft().transformCopy(rotationMatrix);\n        var topRight = box.topRight().transformCopy(rotationMatrix);\n        var bottomRight = box.bottomRight().transformCopy(rotationMatrix);\n        var bottomLeft = box.bottomLeft().transformCopy(rotationMatrix);\n        var rotatedBox = Rect.fromPoints(topLeft, topRight, bottomRight, bottomLeft);\n\n        var translate = {};\n        translate[distanceAxis] = rect.origin[distanceAxis] - rotatedBox.origin[distanceAxis];\n\n        var distanceLeft = Math.abs(topLeft[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n        var distanceRight = Math.abs(topRight[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n\n        var alignStart, alignEnd;\n\n        if (round(distanceLeft, DEFAULT_PRECISION) === round(distanceRight, DEFAULT_PRECISION)) {\n            alignStart = topLeft;\n            alignEnd = topRight;\n        } else if (distanceRight < distanceLeft) {\n            alignStart = topRight;\n            alignEnd = bottomRight;\n        } else {\n            alignStart = topLeft;\n            alignEnd = bottomLeft;\n        }\n\n        var alignCenter = alignStart[alignAxis] + (alignEnd[alignAxis] - alignStart[alignAxis]) / 2;\n        translate[alignAxis] = rect.center()[alignAxis] - alignCenter;\n\n        return geometryTransform()\n            .translate(translate.x, translate.y)\n            .rotate(rotation);\n    }\n});\n\nsetDefaultOptions(AxisLabel, {\n    _autoReflow: false\n});\n\nvar DEFAULT_ICON_SIZE = 7;\nvar DEFAULT_LABEL_COLOR = \"#fff\";\n\nvar Note = BoxElement.extend({\n    init: function(fields, options, chartService) {\n        BoxElement.fn.init.call(this, options);\n\n        this.fields = fields;\n        this.chartService = chartService;\n\n        this.render();\n    },\n\n    hide: function() {\n        this.options.visible = false;\n    },\n\n    show: function() {\n        this.options.visible = true;\n    },\n\n    render: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n\n        if (options.visible) {\n            var label = options.label;\n            var icon = options.icon;\n            var box = new Box();\n            var childAlias = function () { return this$1$1; };\n            var size = icon.size;\n            var text = this.fields.text;\n            var width, height;\n\n            if (defined(label) && label.visible) {\n                var noteTemplate = getTemplate(label);\n                if (noteTemplate) {\n                    text = noteTemplate(this.fields);\n                } else if (label.format) {\n                    text = this.chartService.format.auto(label.format, text);\n                }\n\n                if (!label.color) {\n                    label.color = label.position === INSIDE ? DEFAULT_LABEL_COLOR : icon.background;\n                }\n\n                this.label = new TextBox(text, deepExtend({}, label));\n                this.label.aliasFor = childAlias;\n\n                if (label.position === INSIDE && !defined(size)) {\n                    if (icon.type === CIRCLE) {\n                        size = Math.max(this.label.box.width(), this.label.box.height());\n                    } else {\n                        width = this.label.box.width();\n                        height = this.label.box.height();\n                    }\n                    box.wrap(this.label.box);\n                }\n            }\n\n            icon.width = width || size || DEFAULT_ICON_SIZE;\n            icon.height = height || size || DEFAULT_ICON_SIZE;\n\n            var marker = new ShapeElement(deepExtend({}, icon));\n            marker.aliasFor = childAlias;\n\n            this.marker = marker;\n            this.append(marker);\n\n            if (this.label) {\n                this.append(this.label);\n            }\n\n            marker.reflow(new Box());\n            this.wrapperBox = box.wrap(marker.box);\n        }\n    },\n\n    reflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var marker = ref.marker;\n        var wrapperBox = ref.wrapperBox;\n        var center = targetBox.center();\n        var length = options.line.length;\n        var position = options.position;\n\n        // TODO: Review\n        if (options.visible) {\n            var lineStart, box, contentBox;\n\n            if (inArray(position, [ LEFT, RIGHT ])) {\n                if (position === LEFT) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(-length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x1, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x2, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x2, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x1, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            } else {\n                if (position === BOTTOM) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y2 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y1 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, -length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y1 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y2 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            }\n\n            if (marker) {\n                marker.reflow(contentBox);\n            }\n\n            if (label) {\n                label.reflow(contentBox);\n                if (marker) {\n                    if (options.label.position === OUTSIDE) {\n                        label.box.alignTo(marker.box, position);\n                    }\n                    label.reflow(label.box);\n                }\n            }\n\n            this.contentBox = contentBox;\n            this.targetBox = targetBox;\n            this.box = box || contentBox;\n        }\n    },\n\n    createVisual: function() {\n        BoxElement.fn.createVisual.call(this);\n        this.visual.options.noclip = this.options.noclip;\n\n        if (this.options.visible) {\n            this.createLine();\n        }\n    },\n\n    renderVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var customVisual = options.visual;\n        if (options.visible && customVisual) {\n            this.visual = customVisual($.extend(this.fields, {\n                sender: this.getSender(),\n                rect: this.targetBox.toRect(),\n                options: {\n                    background: options.background,\n                    border: options.background,\n                    icon: options.icon,\n                    label: options.label,\n                    line: options.line,\n                    position: options.position,\n                    visible: options.visible\n                },\n                createVisual: function () {\n                    this$1$1.createVisual();\n                    this$1$1.renderChildren();\n                    var defaultVisual = this$1$1.visual;\n                    delete this$1$1.visual;\n                    return defaultVisual;\n                }\n            }));\n            this.addVisual();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createLine: function() {\n        var options = this.options.line;\n\n        if (this.linePoints) {\n            var path = Path.fromPoints(this.linePoints, {\n                stroke: {\n                    color: options.color,\n                    width: options.width,\n                    dashType: options.dashType\n                }\n            });\n\n            alignPathToPixel(path);\n            this.visual.append(path);\n        }\n    },\n\n    click: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_CLICK, args)) {\n            e.preventDefault();\n        }\n    },\n\n    over: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_HOVER, args)) {\n            e.preventDefault();\n        }\n    },\n\n    out: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        widget.trigger(NOTE_LEAVE, args);\n    },\n\n    eventArgs: function(e) {\n        var options = this.options;\n\n        return $.extend(this.fields, {\n            element: eventElement(e),\n            text: defined(options.label) ? options.label.text : \"\",\n            visual: this.visual\n        });\n    }\n});\n\nsetDefaultOptions(Note, {\n    icon: {\n        visible: true,\n        type: CIRCLE\n    },\n    label: {\n        position: INSIDE,\n        visible: true,\n        align: CENTER,\n        vAlign: CENTER\n    },\n    line: {\n        visible: true\n    },\n    visible: true,\n    position: TOP,\n    zIndex: 2\n});\n\nvar defaultImplementation = {\n    format: function (format, value) { return value; },\n\n    toString: function (value) { return value; },\n\n    parseDate: function (value) { return new Date(value); },\n\n    firstDay: function () { return 0; }\n};\n\nvar current$1 = defaultImplementation;\n\nvar IntlService = Class.extend({\n\n});\n\nIntlService.register = function(userImplementation) {\n    current$1 = userImplementation;\n};\n\nif (Object.defineProperties) {\n    Object.defineProperties(IntlService, {\n        implementation: {\n            get: function() {\n                return current$1;\n            }\n        }\n    });\n}\n\nvar FORMAT_REPLACE_REGEX = /\\{(\\d+)(:[^\\}]+)?\\}/g;\n\nvar FormatService = Class.extend({\n    init: function(intlService) {\n        this._intlService = intlService;\n    },\n\n    auto: function(formatString) {\n        var values = [], len = arguments.length - 1;\n        while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];\n\n        var intl = this.intl;\n\n        if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n            return intl.format.apply(intl, [ formatString ].concat( values ));\n        }\n\n        return intl.toString(values[0], formatString);\n    },\n\n    localeAuto: function(formatString, values, locale) {\n        var intl = this.intl;\n        var result;\n\n        if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n            result = formatString.replace(FORMAT_REPLACE_REGEX, function(match, index, placeholderFormat) {\n                var value = values[parseInt(index, 10)];\n\n                return intl.toString(value, placeholderFormat ? placeholderFormat.substring(1) : \"\", locale);\n            });\n        } else {\n            result = intl.toString(values[0], formatString, locale);\n        }\n\n        return result;\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(FormatService.fn, {\n        intl: {\n            get: function() {\n                return this._intlService || IntlService.implementation;\n            },\n            set: function(value) {\n                this._intlService = value;\n            }\n        }\n    });\n}\n\nvar ChartService = Class.extend({\n    init: function(chart, context) {\n        if (context === void 0) { context = {}; }\n\n        this._intlService = context.intlService;\n        this.sender = context.sender || chart;\n        this.format = new FormatService(context.intlService);\n        this.chart = chart;\n        this.rtl = Boolean(context.rtl);\n    },\n\n    notify: function(name, args) {\n        if (this.chart) {\n            this.chart.trigger(name, args);\n        }\n    },\n\n    isPannable: function(axis) {\n        var pannable = ((this.chart || {}).options || {}).pannable;\n        return pannable && pannable.lock !== axis;\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(ChartService.fn, {\n        intl: {\n            get: function() {\n                return this._intlService || IntlService.implementation;\n            },\n            set: function(value) {\n                this._intlService = value;\n                this.format.intl = value;\n            }\n        }\n    });\n}\n\nvar current$2;\n\nvar DomEventsBuilder = Class.extend({\n\n});\n\nDomEventsBuilder.register = function(userImplementation) {\n    current$2 = userImplementation;\n};\n\nDomEventsBuilder.create = function(element, events) {\n    if (current$2) {\n        return current$2.create(element, events);\n    }\n};\n\nvar services = {\n\tChartService: ChartService,\n\tDomEventsBuilder: DomEventsBuilder,\n\tFormatService: FormatService,\n\tIntlService: IntlService,\n\tTemplateService: TemplateService\n};\n\nfunction createAxisTick(options, tickOptions) {\n    var tickX = options.tickX;\n    var tickY = options.tickY;\n    var position = options.position;\n\n    var tick = new Path({\n        stroke: {\n            width: tickOptions.width,\n            color: tickOptions.color\n        }\n    });\n\n    if (options.vertical) {\n        tick.moveTo(tickX, position)\n            .lineTo(tickX + tickOptions.size, position);\n    } else {\n        tick.moveTo(position, tickY)\n            .lineTo(position, tickY + tickOptions.size);\n    }\n\n    alignPathToPixel(tick);\n\n    return tick;\n}\n\nfunction createAxisGridLine(options, gridLine) {\n    var lineStart = options.lineStart;\n    var lineEnd = options.lineEnd;\n    var position = options.position;\n\n    var line = new Path({\n        stroke: {\n            width: gridLine.width,\n            color: gridLine.color,\n            dashType: gridLine.dashType\n        }\n    });\n\n    if (options.vertical) {\n        line.moveTo(lineStart, position)\n            .lineTo(lineEnd, position);\n    } else {\n        line.moveTo(position, lineStart)\n            .lineTo(position, lineEnd);\n    }\n\n    alignPathToPixel(line);\n\n    return line;\n}\n\nvar Axis = ChartElement.extend({\n    init: function(options, chartService) {\n        if (chartService === void 0) { chartService = new ChartService(); }\n\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!this.options.visible) {\n            this.options = deepExtend({}, this.options, {\n                labels: {\n                    visible: false\n                },\n                line: {\n                    visible: false\n                },\n                margin: 0,\n                majorTickSize: 0,\n                minorTickSize: 0\n            });\n        }\n\n        this.options.minorTicks = deepExtend({}, {\n            color: this.options.line.color,\n            width: this.options.line.width,\n            visible: this.options.minorTickType !== NONE\n        }, this.options.minorTicks, {\n            size: this.options.minorTickSize,\n            align: this.options.minorTickType\n        });\n\n        this.options.majorTicks = deepExtend({}, {\n            color: this.options.line.color,\n            width: this.options.line.width,\n            visible: this.options.majorTickType !== NONE\n        }, this.options.majorTicks, {\n            size: this.options.majorTickSize,\n            align: this.options.majorTickType\n        });\n\n        this.initFields();\n\n        if (!this.options._deferLabels) {\n            this.createLabels();\n        }\n\n        this.createTitle();\n        this.createNotes();\n    },\n\n    initFields: function() {\n    },\n\n    labelsRange: function() {\n        return {\n            min: this.options.labels.skip,\n            max: this.labelsCount()\n        };\n    },\n\n    normalizeLabelRotation: function(labelOptions) {\n        var rotation = labelOptions.rotation;\n\n        if (isObject(rotation)) {\n            labelOptions.alignRotation = rotation.align;\n            labelOptions.rotation = rotation.angle;\n        }\n    },\n\n    createLabels: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var align = options.vertical ? RIGHT : CENTER;\n        var labelOptions = deepExtend({ }, options.labels, {\n            align: align,\n            zIndex: options.zIndex\n        });\n        var step = Math.max(1, labelOptions.step);\n\n        this.clearLabels();\n\n        if (labelOptions.visible) {\n            this.normalizeLabelRotation(labelOptions);\n            if (labelOptions.rotation === \"auto\") {\n                labelOptions.rotation = 0;\n                options.autoRotateLabels = true;\n            }\n\n            var range = this.labelsRange();\n            for (var idx = range.min; idx < range.max; idx += step) {\n                var labelContext = { index: idx, count: range.max };\n                var label = this$1$1.createAxisLabel(idx, labelOptions, labelContext);\n                if (label) {\n                    this$1$1.append(label);\n                    this$1$1.labels.push(label);\n                }\n            }\n        }\n    },\n\n    clearLabels: function() {\n        this.children = grep(this.children, function (child) { return !(child instanceof AxisLabel); });\n        this.labels = [];\n    },\n\n    clearTitle: function() {\n        var this$1$1 = this;\n\n        if (this.title) {\n            this.children = grep(this.children, function (child) { return child !== this$1$1.title; });\n            this.title = undefined;\n        }\n    },\n\n    clear: function() {\n        this.clearLabels();\n        this.clearTitle();\n    },\n\n    lineBox: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var axisX = mirror ? box.x1 : box.x2;\n        var axisY = mirror ? box.y2 : box.y1;\n        var lineWidth = options.line.width || 0;\n\n        return vertical ?\n            new Box(axisX, box.y1, axisX, box.y2 - lineWidth) :\n            new Box(box.x1, axisY, box.x2 - lineWidth, axisY);\n    },\n\n    createTitle: function() {\n        var options = this.options;\n        var titleOptions = deepExtend({\n            rotation: options.vertical ? -90 : 0,\n            text: \"\",\n            zIndex: 1,\n            visualSize: true\n        }, options.title);\n\n        if (titleOptions.visible && titleOptions.text) {\n            var title = new TextBox(titleOptions.text, titleOptions);\n            this.append(title);\n            this.title = title;\n        }\n    },\n\n    createNotes: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var notes = options.notes;\n        var items = notes.data || [];\n\n        this.notes = [];\n\n        for (var i = 0; i < items.length; i++) {\n            var item = deepExtend({}, notes, items[i]);\n            item.value = this$1$1.parseNoteValue(item.value);\n\n            var note = new Note({\n                value: item.value,\n                text: item.label.text,\n                dataItem: item\n            }, item, this$1$1.chartService);\n\n            if (note.options.visible) {\n                if (defined(note.options.position)) {\n                    if (options.vertical && !inArray(note.options.position, [ LEFT, RIGHT ])) {\n                        note.options.position = options.reverse ? LEFT : RIGHT;\n                    } else if (!options.vertical && !inArray(note.options.position, [ TOP, BOTTOM ])) {\n                        note.options.position = options.reverse ? BOTTOM : TOP;\n                    }\n                } else {\n                    if (options.vertical) {\n                        note.options.position = options.reverse ? LEFT : RIGHT;\n                    } else {\n                        note.options.position = options.reverse ? BOTTOM : TOP;\n                    }\n                }\n                this$1$1.append(note);\n                this$1$1.notes.push(note);\n            }\n        }\n    },\n\n    parseNoteValue: function(value) {\n        return value;\n    },\n\n    renderVisual: function() {\n        ChartElement.fn.renderVisual.call(this);\n\n        this.createPlotBands();\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        this.createBackground();\n        this.createLine();\n    },\n\n    gridLinesVisual: function() {\n        var gridLines = this._gridLines;\n        if (!gridLines) {\n            gridLines = this._gridLines = new Group({\n                zIndex: -2\n            });\n            this.appendVisual(this._gridLines);\n        }\n\n        return gridLines;\n    },\n\n    createTicks: function(lineGroup) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var mirror = options.labels.mirror;\n        var majorUnit = options.majorTicks.visible ? options.majorUnit : 0;\n        var tickLineOptions = {\n            // TODO\n            // _alignLines: options._alignLines,\n            vertical: options.vertical\n        };\n\n        function render(tickPositions, tickOptions, skipUnit) {\n            var count = tickPositions.length;\n            var step = Math.max(1, tickOptions.step);\n\n            if (tickOptions.visible) {\n                for (var i = tickOptions.skip; i < count; i += step) {\n                    if (defined(skipUnit) && (i % skipUnit === 0)) {\n                        continue;\n                    }\n\n                    tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n                    tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n                    tickLineOptions.position = tickPositions[i];\n\n                    lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n                }\n            }\n        }\n\n        render(this.getMajorTickPositions(), options.majorTicks);\n        render(this.getMinorTickPositions(), options.minorTicks, majorUnit / options.minorUnit);\n    },\n\n    createLine: function() {\n        var options = this.options;\n        var line = options.line;\n        var lineBox = this.lineBox();\n\n        if (line.width > 0 && line.visible) {\n            var path = new Path({\n                stroke: {\n                    width: line.width,\n                    color: line.color,\n                    dashType: line.dashType\n                }\n\n                /* TODO\n                zIndex: line.zIndex,\n                */\n            });\n\n            path.moveTo(lineBox.x1, lineBox.y1)\n                .lineTo(lineBox.x2, lineBox.y2);\n\n            if (options._alignLines) {\n                alignPathToPixel(path);\n            }\n\n            var group = this._lineGroup = new Group();\n            group.append(path);\n\n            this.visual.append(group);\n            this.createTicks(group);\n        }\n    },\n\n    getActualTickSize: function() {\n        var options = this.options;\n        var tickSize = 0;\n\n        if (options.majorTicks.visible && options.minorTicks.visible) {\n            tickSize = Math.max(options.majorTicks.size, options.minorTicks.size);\n        } else if (options.majorTicks.visible) {\n            tickSize = options.majorTicks.size;\n        } else if (options.minorTicks.visible) {\n            tickSize = options.minorTicks.size;\n        }\n\n        return tickSize;\n    },\n\n    createBackground: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var background = options.background;\n\n        if (background) {\n            this._backgroundPath = Path.fromRect(box.toRect(), {\n                fill: {\n                    color: background\n                },\n                stroke: null\n            });\n\n            this.visual.append(this._backgroundPath);\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var plotBands = options.plotBands || [];\n        var vertical = options.vertical;\n        var plotArea = this.plotArea;\n\n        if (plotBands.length === 0) {\n            return;\n        }\n\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        var altAxis = grep(this.pane.axes, function (axis) { return axis.options.vertical !== this$1$1.options.vertical; })[0];\n\n        for (var idx = 0; idx < plotBands.length; idx++) {\n            var item = plotBands[idx];\n            var slotX = (void 0), slotY = (void 0);\n            var labelOptions = item.label;\n            var label = (void 0);\n\n            if (vertical) {\n                slotX = (altAxis || plotArea.axisX).lineBox();\n                slotY = this$1$1.getSlot(item.from, item.to, true);\n            } else {\n                slotX = this$1$1.getSlot(item.from, item.to, true);\n                slotY = (altAxis || plotArea.axisY).lineBox();\n            }\n\n            if (labelOptions) {\n                labelOptions.vAlign = labelOptions.position || LEFT;\n                label = this$1$1.createPlotBandLabel(\n                    labelOptions,\n                    item,\n                    new Box(\n                        slotX.x1,\n                        slotY.y1,\n                        slotX.x2,\n                        slotY.y2\n                    )\n\n                );\n            }\n\n            if (slotX.width() !== 0 && slotY.height() !== 0) {\n                var bandRect = new Rect(\n                    [ slotX.x1, slotY.y1 ],\n                    [ slotX.width(), slotY.height() ]\n                );\n\n                var path = Path.fromRect(bandRect, {\n                    fill: {\n                        color: item.color,\n                        opacity: item.opacity\n                    },\n                    stroke: null\n                });\n\n                group.append(path);\n                if (label) {\n                    group.append(label);\n                }\n            }\n        }\n\n        this.appendVisual(group);\n    },\n\n    createPlotBandLabel: function(label, item, box) {\n\n        if (label.visible === false) {\n            return null;\n        }\n\n        var text = label.text;\n        var textbox;\n\n        if (defined(label) && label.visible) {\n            var labelTemplate = getTemplate(label);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text, item: item });\n            } else if (label.format) {\n                text = this.chartService.format.auto(label.format, text);\n            }\n\n            if (!label.color) {\n                label.color = this.options.labels.color;\n            }\n        }\n\n        textbox = new TextBox(text, label);\n        textbox.reflow(box);\n        textbox.renderVisual();\n\n        return textbox.visual;\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var minorUnit = options.minorUnit;\n        var vertical = options.vertical;\n        var axisLineVisible = altAxis.options.line.visible;\n        var majorUnit = majorGridLines.visible ? options.majorUnit : 0;\n        var lineBox = altAxis.lineBox();\n        var linePos = lineBox[vertical ? \"y1\" : \"x1\"];\n        var lineOptions = {\n            lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n            lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n            vertical: vertical\n        };\n        var majorTicks = [];\n\n        var container = this.gridLinesVisual();\n\n        function render(tickPositions, gridLine, skipUnit) {\n            var count = tickPositions.length;\n            var step = Math.max(1, gridLine.step);\n\n            if (gridLine.visible) {\n                for (var i = gridLine.skip; i < count; i += step) {\n                    var pos = round(tickPositions[i]);\n                    if (!inArray(pos, majorTicks)) {\n                        if (i % skipUnit !== 0 && (!axisLineVisible || linePos !== pos)) {\n                            lineOptions.position = pos;\n                            container.append(createAxisGridLine(lineOptions, gridLine));\n\n                            majorTicks.push(pos);\n                        }\n                    }\n                }\n            }\n        }\n\n        render(this.getMajorTickPositions(), majorGridLines);\n        render(this.getMinorTickPositions(), minorGridLines, majorUnit / minorUnit);\n\n        return container.children;\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var title = ref.title;\n        var vertical = options.vertical;\n        var count = labels.length;\n        var sizeFn = vertical ? WIDTH : HEIGHT;\n        var titleSize = title ? title.box[sizeFn]() : 0;\n        var space = this.getActualTickSize() + options.margin + titleSize;\n        var rootBox = (this.getRoot() || {}).box || box;\n        var boxSize = rootBox[sizeFn]();\n        var maxLabelSize = 0;\n\n        for (var i = 0; i < count; i++) {\n            var labelSize = labels[i].box[sizeFn]();\n            if (labelSize + space <= boxSize) {\n                maxLabelSize = Math.max(maxLabelSize, labelSize);\n            }\n        }\n\n        if (vertical) {\n            this.box = new Box(\n                box.x1, box.y1,\n                box.x1 + maxLabelSize + space, box.y2\n            );\n        } else {\n            this.box = new Box(\n                box.x1, box.y1,\n                box.x2, box.y1 + maxLabelSize + space\n            );\n        }\n\n        this.arrangeTitle();\n        this.arrangeLabels();\n        this.arrangeNotes();\n    },\n\n    getLabelsTickPositions: function() {\n        return this.getMajorTickPositions();\n    },\n\n    labelTickIndex: function(label) {\n        return label.index;\n    },\n\n    arrangeLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var labelsBetweenTicks = this.labelsBetweenTicks();\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var tickPositions = this.getLabelsTickPositions();\n\n        for (var idx = 0; idx < labels.length; idx++) {\n            var label = labels[idx];\n            var tickIx = this$1$1.labelTickIndex(label);\n            var labelSize = vertical ? label.box.height() : label.box.width();\n            var firstTickPosition = tickPositions[tickIx];\n            var nextTickPosition = tickPositions[tickIx + 1];\n            var positionStart = (void 0), positionEnd = (void 0);\n\n            if (vertical) {\n                if (labelsBetweenTicks) {\n                    var middle = firstTickPosition + (nextTickPosition - firstTickPosition) / 2;\n                    positionStart = middle - (labelSize / 2);\n                } else {\n                    positionStart = firstTickPosition - (labelSize / 2);\n                }\n\n                positionEnd = positionStart;\n            } else {\n                if (labelsBetweenTicks) {\n                    positionStart = firstTickPosition;\n                    positionEnd = nextTickPosition;\n                } else {\n                    positionStart = firstTickPosition - (labelSize / 2);\n                    positionEnd = positionStart + labelSize;\n                }\n            }\n\n            this$1$1.positionLabel(label, mirror, positionStart, positionEnd);\n        }\n    },\n\n    positionLabel: function(label, mirror, positionStart, positionEnd) {\n        if (positionEnd === void 0) { positionEnd = positionStart; }\n\n        var options = this.options;\n        var vertical = options.vertical;\n        var lineBox = this.lineBox();\n        var labelOffset = this.getActualTickSize() + options.margin;\n        var labelBox;\n\n        if (vertical) {\n            var labelX = lineBox.x2;\n\n            if (mirror) {\n                labelX += labelOffset;\n                label.options.rotationOrigin = LEFT;\n            } else {\n                labelX -= labelOffset + label.box.width();\n                label.options.rotationOrigin = RIGHT;\n            }\n\n            labelBox = label.box.move(labelX, positionStart);\n        } else {\n            var labelY = lineBox.y1;\n\n            if (mirror) {\n                labelY -= labelOffset + label.box.height();\n                label.options.rotationOrigin = BOTTOM;\n            } else {\n                labelY += labelOffset;\n                label.options.rotationOrigin = TOP;\n            }\n\n            labelBox = new Box(\n                positionStart, labelY,\n                positionEnd, labelY + label.box.height()\n            );\n        }\n\n        label.reflow(labelBox);\n    },\n\n    autoRotateLabelAngle: function(labelBox, slotWidth) {\n        if (labelBox.width() < slotWidth) {\n            return 0;\n        }\n\n        if (labelBox.height() > slotWidth) {\n            return -90;\n        }\n\n        return -45;\n    },\n\n    autoRotateLabels: function() {\n        var this$1$1 = this;\n\n        if (!this.options.autoRotateLabels || this.options.vertical) {\n            return false;\n        }\n\n        var tickPositions = this.getMajorTickPositions();\n        var labels = this.labels;\n        var limit = Math.min(labels.length, tickPositions.length - 1);\n        var angle = 0;\n\n        for (var idx = 0; idx < limit; idx++) {\n            var width = Math.abs(tickPositions[idx + 1] - tickPositions[idx]);\n            var labelBox = labels[idx].box;\n            var labelAngle = this$1$1.autoRotateLabelAngle(labelBox, width);\n\n            if (labelAngle !== 0) {\n                angle = labelAngle;\n            }\n\n            if (angle === -90) {\n                break;\n            }\n        }\n\n        if (angle !== 0) {\n            for (var idx$1 = 0; idx$1 < labels.length; idx$1++) {\n                labels[idx$1].options.rotation = angle;\n                labels[idx$1].reflow(new Box());\n            }\n\n            return true;\n        }\n    },\n\n    arrangeTitle: function() {\n        var ref = this;\n        var options = ref.options;\n        var title = ref.title;\n        var mirror = options.labels.mirror;\n        var vertical = options.vertical;\n\n        if (title) {\n            if (vertical) {\n                title.options.align = mirror ? RIGHT : LEFT;\n                title.options.vAlign = title.options.position;\n            } else {\n                title.options.align = title.options.position;\n                title.options.vAlign = mirror ? TOP : BOTTOM;\n            }\n\n            title.reflow(this.box);\n        }\n    },\n\n    arrangeNotes: function() {\n        var this$1$1 = this;\n\n        for (var idx = 0; idx < this.notes.length; idx++) {\n            var item = this$1$1.notes[idx];\n            var value = item.options.value;\n            var slot = (void 0);\n\n            if (defined(value)) {\n                if (this$1$1.shouldRenderNote(value)) {\n                    item.show();\n                } else {\n                    item.hide();\n                }\n\n                slot = this$1$1.noteSlot(value);\n            } else {\n                item.hide();\n            }\n\n            item.reflow(slot || this$1$1.lineBox());\n        }\n    },\n\n    noteSlot: function(value) {\n        return this.getSlot(value);\n    },\n\n    alignTo: function(secondAxis) {\n        var lineBox = secondAxis.lineBox();\n        var vertical = this.options.vertical;\n        var pos = vertical ? Y : X;\n\n        this.box.snapTo(lineBox, pos);\n        if (vertical) {\n            this.box.shrink(0, this.lineBox().height() - lineBox.height());\n        } else {\n            this.box.shrink(this.lineBox().width() - lineBox.width(), 0);\n        }\n        this.box[pos + 1] -= this.lineBox()[pos + 1] - lineBox[pos + 1];\n        this.box[pos + 2] -= this.lineBox()[pos + 2] - lineBox[pos + 2];\n    },\n\n    axisLabelText: function(value, options, context) {\n        var this$1$1 = this;\n\n        var text;\n        var tmpl = getTemplate(options);\n        var defaultText = function () {\n            if (!options.format) {\n                return value;\n            }\n\n            return this$1$1.chartService.format.localeAuto(\n                options.format, [ value ], options.culture\n            );\n        };\n\n        if (tmpl) {\n            var templateContext = $.extend({}, context, {\n                get text() { return defaultText(); },\n                value: value,\n                format: options.format,\n                culture: options.culture\n            });\n\n            text = tmpl(templateContext);\n        } else {\n            text = defaultText();\n        }\n\n        return text;\n    },\n\n    slot: function(from , to, limit) {\n        var slot = this.getSlot(from, to, limit);\n        if (slot) {\n            return slot.toRect();\n        }\n    },\n\n    contentBox: function() {\n        var box = this.box.clone();\n        var labels = this.labels;\n        if (labels.length) {\n            var axis = this.options.vertical ? Y : X;\n            if (this.chartService.isPannable(axis)) {\n                var offset = this.maxLabelOffset();\n                box[axis + 1] -= offset.start;\n                box[axis + 2] += offset.end;\n            } else {\n                if (labels[0].options.visible) {\n                    box.wrap(labels[0].box);\n                }\n                var lastLabel = labels[labels.length - 1];\n                if (lastLabel.options.visible) {\n                    box.wrap(lastLabel.box);\n                }\n            }\n        }\n\n        return box;\n    },\n\n    maxLabelOffset: function() {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var labelsBetweenTicks = this.labelsBetweenTicks();\n        var tickPositions = this.getLabelsTickPositions();\n        var offsetField = vertical ? Y : X;\n        var labels = this.labels;\n        var startPosition = reverse ? 1 : 0;\n        var endPosition = reverse ? 0 : 1;\n        var maxStartOffset = 0;\n        var maxEndOffset = 0;\n\n        for (var idx = 0; idx < labels.length; idx++) {\n            var label = labels[idx];\n            var tickIx = this$1$1.labelTickIndex(label);\n            var startTick = (void 0), endTick = (void 0);\n\n            if (labelsBetweenTicks) {\n                startTick = tickPositions[tickIx + startPosition];\n                endTick = tickPositions[tickIx + endPosition];\n            } else {\n                startTick = endTick = tickPositions[tickIx];\n            }\n\n            maxStartOffset = Math.max(maxStartOffset, startTick - label.box[offsetField + 1]);\n            maxEndOffset = Math.max(maxEndOffset, label.box[offsetField + 2] - endTick);\n        }\n\n        return {\n            start: maxStartOffset,\n            end: maxEndOffset\n        };\n    },\n\n    limitRange: function(from, to, min, max, offset) {\n        var options = this.options;\n\n        if ((from < min && offset < 0 && (!defined(options.min) || options.min <= min)) || (max < to && offset > 0 && (!defined(options.max) || max <= options.max))) {\n            return null;\n        }\n\n        if ((to < min && offset > 0) || (max < from && offset < 0)) {\n            return {\n                min: from,\n                max: to\n            };\n        }\n\n        var rangeSize = to - from;\n        var minValue = from;\n        var maxValue = to;\n\n        if (from < min && offset < 0) {\n            minValue = limitValue(from, min, max);\n            maxValue = limitValue(from + rangeSize, min + rangeSize, max);\n        } else if (to > max && offset > 0) {\n            maxValue = limitValue(to, min, max);\n            minValue = limitValue(to - rangeSize, min, max - rangeSize);\n        }\n\n        return {\n            min: minValue,\n            max: maxValue\n        };\n    },\n\n    valueRange: function() {\n        return {\n            min: this.seriesMin,\n            max: this.seriesMax\n        };\n    },\n\n    lineDir: function() {\n        /*\n         * Axis line direction:\n         *   * Vertical: up.\n         *   * Horizontal: right.\n         */\n\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        return (vertical ? -1 : 1) * (reverse ? -1 : 1);\n    },\n\n    lineInfo: function() {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var lineBox = this.lineBox();\n        var lineSize = vertical ? lineBox.height() : lineBox.width();\n        var axis = vertical ? Y : X;\n        var axisDir = this.lineDir();\n        var startEdge = axisDir === 1 ? 1 : 2;\n        var axisOrigin = axis + startEdge.toString();\n        var lineStart = lineBox[axisOrigin];\n\n        return {\n            axis: axis,\n            axisOrigin: axisOrigin,\n            axisDir: axisDir,\n            lineBox: lineBox,\n            lineSize: lineSize,\n            lineStart: lineStart\n        };\n    },\n\n    pointOffset: function(point) {\n        var ref = this.lineInfo();\n        var axis = ref.axis;\n        var axisDir = ref.axisDir;\n        var axisOrigin = ref.axisOrigin;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var relative = axisDir > 0 ? point[axis] - lineBox[axisOrigin] : lineBox[axisOrigin] - point[axis];\n        var offset = relative / lineSize;\n\n        return offset;\n    },\n\n    scaleToDelta: function(rawScale, range) {\n        // Scale >= 1 would result in axis range of 0.\n        // Scale <= -1 would reverse the scale direction.\n        var MAX_SCALE = 0.999;\n        var scale = limitValue(rawScale, -MAX_SCALE, MAX_SCALE);\n\n        var delta;\n        if (scale > 0) {\n            delta = range * Math.min(1, scale);\n        } else {\n            delta = range - (range / (1 + scale));\n        }\n\n        return delta;\n    },\n\n    labelsBetweenTicks: function() {\n        return !this.options.justified;\n    },\n\n    prepareUserOptions: function() {\n    }\n});\n\nsetDefaultOptions(Axis, {\n    labels: {\n        visible: true,\n        rotation: 0,\n        mirror: false,\n        step: 1,\n        skip: 0\n    },\n    line: {\n        width: 1,\n        color: BLACK,\n        visible: true\n    },\n    title: {\n        visible: true,\n        position: CENTER\n    },\n    majorTicks: {\n        align: OUTSIDE,\n        size: 4,\n        skip: 0,\n        step: 1\n    },\n    minorTicks: {\n        align: OUTSIDE,\n        size: 3,\n        skip: 0,\n        step: 1\n    },\n    axisCrossingValue: 0,\n    majorTickType: OUTSIDE,\n    minorTickType: NONE,\n    majorGridLines: {\n        skip: 0,\n        step: 1\n    },\n    minorGridLines: {\n        visible: false,\n        width: 1,\n        color: BLACK,\n        skip: 0,\n        step: 1\n    },\n    // TODO: Move to line or labels options\n    margin: 5,\n    visible: true,\n    reverse: false,\n    justified: true,\n    notes: {\n        label: {\n            text: \"\"\n        }\n    },\n\n    _alignLines: true,\n    _deferLabels: false\n});\n\nvar MILLISECONDS = \"milliseconds\";\nvar SECONDS = \"seconds\";\nvar MINUTES = \"minutes\";\nvar HOURS = \"hours\";\nvar DAYS = \"days\";\nvar WEEKS = \"weeks\";\nvar MONTHS = \"months\";\nvar YEARS = \"years\";\n\nvar TIME_PER_MILLISECOND = 1;\nvar TIME_PER_SECOND = 1000;\nvar TIME_PER_MINUTE = 60 * TIME_PER_SECOND;\nvar TIME_PER_HOUR = 60 * TIME_PER_MINUTE;\nvar TIME_PER_DAY = 24 * TIME_PER_HOUR;\nvar TIME_PER_WEEK = 7 * TIME_PER_DAY;\nvar TIME_PER_MONTH = 31 * TIME_PER_DAY;\nvar TIME_PER_YEAR = 365 * TIME_PER_DAY;\nvar TIME_PER_UNIT = {\n    \"years\": TIME_PER_YEAR,\n    \"months\": TIME_PER_MONTH,\n    \"weeks\": TIME_PER_WEEK,\n    \"days\": TIME_PER_DAY,\n    \"hours\": TIME_PER_HOUR,\n    \"minutes\": TIME_PER_MINUTE,\n    \"seconds\": TIME_PER_SECOND,\n    \"milliseconds\": TIME_PER_MILLISECOND\n};\n\nfunction absoluteDateDiff(a, b) {\n    var diff = a.getTime() - b;\n    var offsetDiff = a.getTimezoneOffset() - b.getTimezoneOffset();\n\n    return diff - (offsetDiff * TIME_PER_MINUTE);\n}\n\nfunction addTicks(date, ticks) {\n    return new Date(date.getTime() + ticks);\n}\n\nfunction toDate(value) {\n    var result;\n\n    if (value instanceof Date) {\n        result = value;\n    } else if (value) {\n        result = new Date(value);\n    }\n\n    return result;\n}\n\nfunction startOfWeek(date, weekStartDay) {\n    if (weekStartDay === void 0) { weekStartDay = 0; }\n\n    var daysToSubtract = 0;\n    var day = date.getDay();\n\n    if (!isNaN(day)) {\n        while (day !== weekStartDay) {\n            if (day === 0) {\n                day = 6;\n            } else {\n                day--;\n            }\n\n            daysToSubtract++;\n        }\n    }\n\n    return addTicks(date, -daysToSubtract * TIME_PER_DAY);\n}\n\nfunction adjustDST(date, hours) {\n    if (hours === 0 && date.getHours() === 23) {\n        date.setHours(date.getHours() + 2);\n        return true;\n    }\n\n    return false;\n}\n\nfunction addHours(date, hours) {\n    var roundedDate = new Date(date);\n\n    roundedDate.setMinutes(0, 0, 0);\n\n    var tzDiff = (date.getTimezoneOffset() - roundedDate.getTimezoneOffset()) * TIME_PER_MINUTE;\n\n    return addTicks(roundedDate, tzDiff + hours * TIME_PER_HOUR);\n}\n\nfunction addDuration(dateValue, value, unit, weekStartDay) {\n    var result = dateValue;\n\n    if (dateValue) {\n        var date = toDate(dateValue);\n        var hours = date.getHours();\n\n        if (unit === YEARS) {\n            result = new Date(date.getFullYear() + value, 0, 1);\n            adjustDST(result, 0);\n        } else if (unit === MONTHS) {\n            result = new Date(date.getFullYear(), date.getMonth() + value, 1);\n            adjustDST(result, hours);\n        } else if (unit === WEEKS) {\n            result = addDuration(startOfWeek(date, weekStartDay), value * 7, DAYS);\n            adjustDST(result, hours);\n        } else if (unit === DAYS) {\n            result = new Date(date.getFullYear(), date.getMonth(), date.getDate() + value);\n            adjustDST(result, hours);\n        } else if (unit === HOURS) {\n            result = addHours(date, value);\n        } else if (unit === MINUTES) {\n            result = addTicks(date, value * TIME_PER_MINUTE);\n\n            if (result.getSeconds() > 0) {\n                result.setSeconds(0);\n            }\n        } else if (unit === SECONDS) {\n            result = addTicks(date, value * TIME_PER_SECOND);\n        } else if (unit === MILLISECONDS) {\n            result = addTicks(date, value);\n        }\n\n        if (unit !== MILLISECONDS && result.getMilliseconds() > 0) {\n            result.setMilliseconds(0);\n        }\n    }\n\n    return result;\n}\n\nfunction floorDate(date, unit, weekStartDay) {\n    return addDuration(toDate(date), 0, unit, weekStartDay);\n}\n\nfunction ceilDate(dateValue, unit, weekStartDay) {\n    var date = toDate(dateValue);\n\n    if (date && floorDate(date, unit, weekStartDay).getTime() === date.getTime()) {\n        return date;\n    }\n\n    return addDuration(date, 1, unit, weekStartDay);\n}\n\nfunction dateComparer(a, b) {\n    if (a && b) {\n        return a.getTime() - b.getTime();\n    }\n\n    return -1;\n}\n\nfunction dateDiff(a, b) {\n    return a.getTime() - b;\n}\n\nfunction toTime(value) {\n    if (isArray(value)) {\n        var result = [];\n        for (var idx = 0; idx < value.length; idx++) {\n            result.push(toTime(value[idx]));\n        }\n\n        return result;\n    } else if (value) {\n        return toDate(value).getTime();\n    }\n}\n\nfunction dateEquals(a, b) {\n    if (a && b) {\n        return toTime(a) === toTime(b);\n    }\n\n    return a === b;\n}\n\nfunction timeIndex(date, start, baseUnit) {\n    return absoluteDateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n}\n\nfunction dateIndex(value, start, baseUnit, baseUnitStep) {\n    var date = toDate(value);\n    var startDate = toDate(start);\n    var index;\n\n    if (baseUnit === MONTHS) {\n        index = (date.getMonth() - startDate.getMonth() + (date.getFullYear() - startDate.getFullYear()) * 12) +\n            timeIndex(date, new Date(date.getFullYear(), date.getMonth()), DAYS) / new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n    } else if (baseUnit === YEARS) {\n        index = date.getFullYear() - startDate.getFullYear() + dateIndex(date, new Date(date.getFullYear(), 0), MONTHS, 1) / 12;\n    } else if (baseUnit === DAYS || baseUnit === WEEKS) {\n        index = timeIndex(date, startDate, baseUnit);\n    } else {\n        index = dateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n    }\n\n    return index / baseUnitStep;\n}\n\nfunction duration(a, b, unit) {\n    var diff;\n\n    if (unit === YEARS) {\n        diff = b.getFullYear() - a.getFullYear();\n    } else if (unit === MONTHS) {\n        diff = duration(a, b, YEARS) * 12 + b.getMonth() - a.getMonth();\n    } else if (unit === DAYS) {\n        diff = Math.floor(dateDiff(b, a) / TIME_PER_DAY);\n    } else {\n        diff = Math.floor(dateDiff(b, a) / TIME_PER_UNIT[unit]);\n    }\n\n    return diff;\n}\n\nfunction lteDateIndex(date, sortedDates) {\n    var low = 0;\n    var high = sortedDates.length - 1;\n    var index;\n\n    while (low <= high) {\n        index = Math.floor((low + high) / 2);\n        var currentDate = sortedDates[index];\n\n        if (currentDate < date) {\n            low = index + 1;\n            continue;\n        }\n\n        if (currentDate > date) {\n            high = index - 1;\n            continue;\n        }\n\n        while (dateEquals(sortedDates[index - 1], date)) {\n            index--;\n        }\n\n        return index;\n    }\n\n    if (sortedDates[index] <= date) {\n        return index;\n    }\n\n    return index - 1;\n}\n\nfunction parseDate(intlService, date) {\n    var result;\n    if (isString(date)) {\n        result = intlService.parseDate(date) || toDate(date);\n    } else {\n        result = toDate(date);\n    }\n    return result;\n}\n\nfunction parseDates(intlService, dates) {\n    if (isArray(dates)) {\n        var result = [];\n        for (var idx = 0; idx < dates.length; idx++) {\n            result.push(parseDate(intlService, dates[idx]));\n        }\n\n        return result;\n    }\n\n    return parseDate(intlService, dates);\n}\n\nfunction firstDay(options, intlService) {\n    if (isNumber(options.weekStartDay)) {\n        return options.weekStartDay;\n    }\n\n    if (intlService && intlService.firstDay) {\n        return intlService.firstDay();\n    }\n\n    return 0;\n}\n\nvar MIN_CATEGORY_POINTS_RANGE = 0.01;\nvar MIN_CATEGORY_RANGE = 0.1;\n\nfunction indexOf(value, arr) {\n    if (value instanceof Date) {\n        var length = arr.length;\n        for (var idx = 0; idx < length; idx++) {\n            if (dateEquals(arr[idx], value)) {\n                return idx;\n            }\n        }\n\n        return -1;\n    }\n\n    return arr.indexOf(value);\n}\n\nvar CategoryAxis = Axis.extend({\n    initFields: function() {\n        this._ticks = {};\n    },\n\n    categoriesHash: function() {\n        return \"\";\n    },\n\n    clone: function() {\n        var copy = new CategoryAxis($.extend({}, this.options, {\n            categories: this.options.srcCategories\n        }), this.chartService);\n        copy.createLabels();\n\n        return copy;\n    },\n\n    initUserOptions: function(options) {\n        var categories = options.categories || [];\n        var definedMin = defined(options.min);\n        var definedMax = defined(options.max);\n        options.srcCategories = options.categories = categories;\n\n        if ((definedMin || definedMax) && categories.length) {\n            var min = definedMin ? Math.floor(options.min) : 0;\n            var max;\n\n            if (definedMax) {\n                max = options.justified ? Math.floor(options.max) + 1 : Math.ceil(options.max);\n            } else {\n                max = categories.length;\n            }\n\n            options.categories = options.categories.slice(min, max);\n        }\n\n        return options;\n    },\n\n    rangeIndices: function() {\n        var options = this.options;\n        var length = options.categories.length || 1;\n        var min = isNumber(options.min) ? options.min % 1 : 0;\n        var max;\n\n        if (isNumber(options.max) && options.max % 1 !== 0 && options.max < this.totalRange().max) {\n            max = length - (1 - options.max % 1);\n        } else {\n            max = length - (options.justified ? 1 : 0);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    totalRangeIndices: function(limit) {\n        var options = this.options;\n        var min = isNumber(options.min) ? options.min : 0;\n        var max;\n\n        if (isNumber(options.max)) {\n            max = options.max;\n        } else if (isNumber(options.min)) {\n            max = min + options.categories.length;\n        } else {\n            max = this.totalRange().max || 1;\n        }\n\n        if (limit) {\n            var totalRange = this.totalRange();\n            min = limitValue(min, 0, totalRange.max);\n            max = limitValue(max, 0, totalRange.max);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    range: function() {\n        var options = this.options;\n        var min = isNumber(options.min) ? options.min : 0;\n        var max = isNumber(options.max) ? options.max : this.totalRange().max;\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    roundedRange: function() {\n        return this.range();\n    },\n\n    totalRange: function() {\n        var options = this.options;\n        return { min: 0, max: Math.max(this._seriesMax || 0, options.srcCategories.length) - (options.justified ? 1 : 0) };\n    },\n\n    scaleOptions: function() {\n        var ref = this.rangeIndices();\n        var min = ref.min;\n        var max = ref.max;\n        var lineBox = this.lineBox();\n        var size = this.options.vertical ? lineBox.height() : lineBox.width();\n        var scale = size / ((max - min) || 1);\n\n        return {\n            scale: scale * (this.options.reverse ? -1 : 1),\n            box: lineBox,\n            min: min,\n            max: max\n        };\n    },\n\n    arrangeLabels: function() {\n        Axis.fn.arrangeLabels.call(this);\n        this.hideOutOfRangeLabels();\n    },\n\n    hideOutOfRangeLabels: function() {\n        var ref = this;\n        var box = ref.box;\n        var labels = ref.labels;\n\n        if (labels.length > 0) {\n            var valueAxis = this.options.vertical ? Y : X;\n            var start = box[valueAxis + 1];\n            var end = box[valueAxis + 2];\n            var firstLabel = labels[0];\n            var lastLabel = last(labels);\n\n            if (firstLabel.box[valueAxis + 1] > end || firstLabel.box[valueAxis + 2] < start) {\n                firstLabel.options.visible = false;\n            }\n            if (lastLabel.box[valueAxis + 1] > end || lastLabel.box[valueAxis + 2] < start) {\n                lastLabel.options.visible = false;\n            }\n        }\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTicks().majorTicks;\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTicks().minorTicks;\n    },\n\n    getLabelsTickPositions: function() {\n        return this.getTicks().labelTicks;\n    },\n\n    tickIndices: function(stepSize) {\n        var ref = this.rangeIndices();\n        var min = ref.min;\n        var max = ref.max;\n        var limit = Math.ceil(max);\n        var current = Math.floor(min);\n        var indices = [];\n\n        while (current <= limit) {\n            indices.push(current);\n            current += stepSize;\n        }\n\n        return indices;\n    },\n\n    getTickPositions: function(stepSize) {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var min = ref$1.min;\n        var pos = box[(vertical ? Y : X) + (reverse ? 2 : 1)];\n        var indices = this.tickIndices(stepSize);\n        var positions = [];\n\n        for (var idx = 0; idx < indices.length; idx++) {\n            positions.push(pos + round(scale * (indices[idx] - min), COORD_PRECISION));\n        }\n\n        return positions;\n    },\n\n    getTicks: function() {\n        var options = this.options;\n        var cache = this._ticks;\n        var range = this.rangeIndices();\n        var lineBox = this.lineBox();\n        var hash = lineBox.getHash() + range.min + \",\" + range.max + options.reverse + options.justified;\n\n        if (cache._hash !== hash) {\n            var hasMinor = options.minorTicks.visible || options.minorGridLines.visible;\n            cache._hash = hash;\n            cache.labelTicks = this.getTickPositions(1);\n            cache.majorTicks = this.filterOutOfRangePositions(cache.labelTicks, lineBox);\n            cache.minorTicks = hasMinor ? this.filterOutOfRangePositions(this.getTickPositions(0.5), lineBox) : [];\n        }\n\n        return cache;\n    },\n\n    filterOutOfRangePositions: function(positions, lineBox) {\n        if (!positions.length) {\n            return positions;\n        }\n\n        var axis = this.options.vertical ? Y : X;\n        var inRange = function (position) { return lineBox[axis + 1] <= position && position <= lineBox[axis + 2]; };\n\n        var end = positions.length - 1;\n        var startIndex = 0;\n        while (!inRange(positions[startIndex]) && startIndex <= end) {\n            startIndex++;\n        }\n\n        var endIndex = end;\n\n        while (!inRange(positions[endIndex]) && endIndex >= 0) {\n            endIndex--;\n        }\n\n        return positions.slice(startIndex, endIndex + 1);\n    },\n\n    lineInfo: function() {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var lineBox = this.lineBox();\n        var lineSize = vertical ? lineBox.height() : lineBox.width();\n        var axis = vertical ? Y : X;\n        var axisDir = reverse ? -1 : 1;\n        var startEdge = axisDir === 1 ? 1 : 2;\n        var axisOrigin = axis + startEdge.toString();\n        var lineStart = lineBox[axisOrigin];\n\n        return {\n            axis: axis,\n            axisOrigin: axisOrigin,\n            axisDir: axisDir,\n            lineBox: lineBox,\n            lineSize: lineSize,\n            lineStart: lineStart\n        };\n    },\n\n    lineDir: function() {\n        /*\n         *  Category axis line direction:\n         *    * Vertical: down.\n         *    * Horizontal: right.\n         */\n\n        var ref = this.options;\n        var reverse = ref.reverse;\n        return reverse ? -1 : 1;\n    },\n\n    getSlot: function(from, to, limit) {\n        var options = this.options;\n        var reverse = options.reverse;\n        var justified = options.justified;\n        var ref = this.scaleOptions();\n        var scale = ref.scale;\n        var box = ref.box;\n        var min = ref.min;\n        var ref$1 = this.lineInfo();\n        var valueAxis = ref$1.axis;\n        var lineStart = ref$1.lineStart;\n\n        var slotBox = box.clone();\n        var singleSlot = !defined(to);\n\n        var start = valueOrDefault(from, 0);\n        var end = valueOrDefault(to, start);\n        end = Math.max(end - 1, start);\n\n        // Fixes transient bug caused by iOS 6.0 JIT\n        // (one can never be too sure)\n        end = Math.max(start, end);\n\n        var p1 = lineStart + (start - min) * scale;\n        var p2 = lineStart + (end + 1 - min) * scale;\n\n        if (singleSlot && justified) {\n            p2 = p1;\n        }\n\n        if (limit) {\n            p1 = limitValue(p1, box[valueAxis + 1], box[valueAxis + 2]);\n            p2 = limitValue(p2, box[valueAxis + 1], box[valueAxis + 2]);\n        }\n\n        slotBox[valueAxis + 1] = reverse ? p2 : p1;\n        slotBox[valueAxis + 2] = reverse ? p1 : p2;\n\n        return slotBox;\n    },\n\n    limitSlot: function(slot) {\n        var vertical = this.options.vertical;\n        var valueAxis = vertical ? Y : X;\n        var lineBox = this.lineBox();\n        var limittedSlot = slot.clone();\n\n        limittedSlot[valueAxis + 1] = limitValue(slot[valueAxis + 1], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n        limittedSlot[valueAxis + 2] = limitValue(slot[valueAxis + 2], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n\n        return limittedSlot;\n    },\n\n    slot: function(from, to, limit) {\n        var min = Math.floor(this.options.min || 0);\n        var start = from;\n        var end = to;\n\n        if (typeof start === \"string\") {\n            start = this.categoryIndex(start);\n        } else if (isNumber(start)) {\n            start -= min;\n        }\n\n        if (typeof end === \"string\") {\n            end = this.categoryIndex(end);\n        } else if (isNumber(end)) {\n            end -= min;\n        }\n\n        return Axis.fn.slot.call(this, start, end, limit);\n    },\n\n    pointCategoryIndex: function(point) {\n        var ref = this.options;\n        var reverse = ref.reverse;\n        var justified = ref.justified;\n        var vertical = ref.vertical;\n        var valueAxis = vertical ? Y : X;\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var min = ref$1.min;\n        var max = ref$1.max;\n        var startValue = reverse ? max : min;\n        var lineStart = box[valueAxis + 1];\n        var lineEnd = box[valueAxis + 2];\n        var pos = point[valueAxis];\n\n        if (pos < lineStart || pos > lineEnd) {\n            return null;\n        }\n\n        var value = startValue + (pos - lineStart) / scale;\n        var diff = value % 1;\n\n        if (justified) {\n            value = Math.round(value);\n        } else if (diff === 0 && value > 0) {\n            value--;\n        }\n\n        return Math.floor(value);\n    },\n\n    getCategory: function(point) {\n        var index = this.pointCategoryIndex(point);\n\n        if (index === null) {\n            return null;\n        }\n\n        return this.options.categories[index];\n    },\n\n    categoryIndex: function(value) {\n        return this.totalIndex(value) - Math.floor(this.options.min || 0);\n    },\n\n    categoryAt: function(index, total) {\n        var options = this.options;\n\n        return (total ? options.srcCategories : options.categories)[index];\n    },\n\n    categoriesCount: function() {\n        return (this.options.categories || []).length;\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var size = options.vertical ? lineBox.height() : lineBox.width();\n        var range = options.categories.length;\n        var scale = size / range;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        return {\n            min: offset,\n            max: range + offset\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var rangeIndices = this.totalRangeIndices();\n        var range = rangeIndices.max - rangeIndices.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = rangeIndices.min + minDelta;\n        var max = rangeIndices.max - maxDelta;\n\n        if (max - min < MIN_CATEGORY_RANGE) {\n            max = min + MIN_CATEGORY_RANGE;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var ref = this.totalRange();\n        var totalMin = ref.min;\n        var totalMax = ref.max;\n        var range = this.scaleRange(scale, cursor);\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax)\n        };\n    },\n\n    labelsCount: function() {\n        var labelsRange = this.labelsRange();\n\n        return labelsRange.max - labelsRange.min;\n    },\n\n    labelsRange: function() {\n        var options = this.options;\n        var justified = options.justified;\n        var labelOptions = options.labels;\n        var ref = this.totalRangeIndices(true);\n        var min = ref.min;\n        var max = ref.max;\n        var start = Math.floor(min);\n\n        if (!justified) {\n            min = Math.floor(min);\n            max = Math.ceil(max);\n        } else {\n            min = Math.ceil(min);\n            max = Math.floor(max);\n        }\n\n        var skip;\n\n        if (min > labelOptions.skip) {\n            skip = labelOptions.skip + labelOptions.step * Math.ceil((min - labelOptions.skip) / labelOptions.step);\n        } else {\n            skip = labelOptions.skip;\n        }\n\n        return {\n            min: skip - start,\n            max: (options.categories.length ? max + (justified ? 1 : 0) : 0) - start\n        };\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var dataItem = options.dataItems ? options.dataItems[index] : null;\n        var category = valueOrDefault(options.categories[index], \"\");\n\n        labelContext.dataItem = dataItem;\n        var text = this.axisLabelText(category, labelOptions, labelContext);\n\n        return new AxisLabel(category, text, index, dataItem, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.totalRangeIndices();\n\n        return Math.floor(range.min) <= value && value <= Math.ceil(range.max);\n    },\n\n    noteSlot: function(value) {\n        var options = this.options;\n        var index = value - Math.floor(options.min || 0);\n        return this.getSlot(index);\n    },\n\n    arrangeNotes: function() {\n        Axis.fn.arrangeNotes.call(this);\n        this.hideOutOfRangeNotes();\n    },\n\n    hideOutOfRangeNotes: function() {\n        var ref = this;\n        var notes = ref.notes;\n        var box = ref.box;\n        if (notes && notes.length) {\n            var valueAxis = this.options.vertical ? Y : X;\n            var start = box[valueAxis + 1];\n            var end = box[valueAxis + 2];\n\n            for (var idx = 0; idx < notes.length; idx++) {\n                var note = notes[idx];\n                if (note.box && (end < note.box[valueAxis + 1] || note.box[valueAxis + 2] < start)) {\n                    note.hide();\n                }\n            }\n        }\n    },\n\n    pan: function(delta) {\n        var range = this.totalRangeIndices(true);\n        var ref = this.scaleOptions();\n        var scale = ref.scale;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n        var totalRange = this.totalRange();\n        var min = range.min + offset;\n        var max = range.max + offset;\n\n        return this.limitRange(min, max, 0, totalRange.max, offset);\n    },\n\n    pointsRange: function(start, end) {\n        var ref = this.options;\n        var reverse = ref.reverse;\n        var vertical = ref.vertical;\n        var valueAxis = vertical ? Y : X;\n        var range = this.totalRangeIndices(true);\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var lineStart = box[valueAxis + (reverse ? 2 : 1)];\n\n        var diffStart = start[valueAxis] - lineStart;\n        var diffEnd = end[valueAxis] - lineStart;\n\n        var min = range.min + diffStart / scale;\n        var max = range.min + diffEnd / scale;\n        var rangeMin = Math.min(min, max);\n        var rangeMax = Math.max(min, max);\n\n        if (rangeMax - rangeMin >= MIN_CATEGORY_POINTS_RANGE) {\n            return {\n                min: rangeMin,\n                max: rangeMax\n            };\n        }\n    },\n\n    valueRange: function() {\n        return this.range();\n    },\n\n    totalIndex: function(value) {\n        var options = this.options;\n        var index = this._categoriesMap ?\n            this._categoriesMap.get(value) : indexOf(value, options.srcCategories);\n\n        return index;\n    },\n\n    currentRangeIndices: function() {\n        var options = this.options;\n        var min = 0;\n\n        if (isNumber(options.min)) {\n            min = Math.floor(options.min);\n        }\n\n        var max;\n        if (isNumber(options.max)) {\n            max = options.justified ? Math.floor(options.max) : Math.ceil(options.max) - 1;\n        } else {\n            max = this.totalCount() - 1;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    mapCategories: function() {\n        if (!this._categoriesMap) {\n            var map$$1 = this._categoriesMap = new HashMap();\n            var srcCategories = this.options.srcCategories;\n            for (var idx = 0; idx < srcCategories.length; idx++) {\n                map$$1.set(srcCategories[idx], idx);\n            }\n        }\n    },\n\n    totalCount: function() {\n        return Math.max(this.options.srcCategories.length, this._seriesMax || 0);\n    }\n});\n\nsetDefaultOptions(CategoryAxis, {\n    type: \"category\",\n    vertical: false,\n    majorGridLines: {\n        visible: false,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        zIndex: 1\n    },\n    justified: false,\n    _deferLabels: true\n});\n\nvar COORDINATE_LIMIT = 300000;\n\nvar DateLabelFormats = {\n    milliseconds: \"HH:mm:ss.fff\",\n    seconds: \"HH:mm:ss\",\n    minutes: \"HH:mm\",\n    hours: \"HH:mm\",\n    days: \"M/d\",\n    weeks: \"M/d\",\n    months: \"MMM 'yy\",\n    years: \"yyyy\"\n};\n\nvar ZERO_THRESHOLD = 0.2;\n\nvar AUTO = \"auto\";\nvar BASE_UNITS = [\n    MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS\n];\nvar FIT = \"fit\";\n\nfunction categoryRange(categories) {\n    var range = categories._range;\n    if (!range) {\n        range = categories._range = sparseArrayLimits(categories);\n        range.min = toDate(range.min);\n        range.max = toDate(range.max);\n    }\n\n    return range;\n}\n\nvar EmptyDateRange = Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n\n    displayIndices: function() {\n        return {\n            min: 0,\n            max: 1\n        };\n    },\n\n    displayRange: function() {\n        return {};\n    },\n\n    total: function() {\n        return {};\n    },\n\n    valueRange: function() {\n        return {};\n    },\n\n    valueIndex: function() {\n        return -1;\n    },\n\n    values: function() {\n        return [];\n    },\n\n    totalIndex: function() {\n        return -1;\n    },\n\n    valuesCount: function() {\n        return 0;\n    },\n\n    totalCount: function() {\n        return 0;\n    },\n\n    dateAt: function() {\n        return null;\n    }\n});\n\nvar DateRange = Class.extend({\n    init: function(start, end, options) {\n        this.options = options;\n        options.baseUnitStep = options.baseUnitStep || 1;\n\n        var roundToBaseUnit = options.roundToBaseUnit;\n        var justified = options.justified;\n\n        this.start = addDuration(start, 0, options.baseUnit, options.weekStartDay);\n        var lowerEnd = this.roundToTotalStep(end);\n        var expandEnd = !justified && dateEquals(end, lowerEnd) && !options.justifyEnd;\n\n        this.end = this.roundToTotalStep(end, !justified, expandEnd ? 1 : 0);\n\n        var min = options.min || start;\n        this.valueStart = this.roundToTotalStep(min);\n        this.displayStart = roundToBaseUnit ? this.valueStart : min;\n\n        var max = options.max;\n        if (!max) {\n            this.valueEnd = lowerEnd;\n            this.displayEnd = roundToBaseUnit || expandEnd ? this.end : end;\n        } else {\n            var next = !justified && dateEquals(max, this.roundToTotalStep(max)) ? -1 : 0;\n            this.valueEnd = this.roundToTotalStep(max, false, next);\n            this.displayEnd = roundToBaseUnit ? this.roundToTotalStep(max, !justified) : options.max;\n        }\n\n        if (this.valueEnd < this.valueStart) {\n            this.valueEnd = this.valueStart;\n        }\n        if (this.displayEnd <= this.displayStart) {\n            this.displayEnd = this.roundToTotalStep(this.displayStart, false, 1);\n        }\n    },\n\n    displayRange: function() {\n        return {\n            min: this.displayStart,\n            max: this.displayEnd\n        };\n    },\n\n    displayIndices: function() {\n        if (!this._indices) {\n            var options = this.options;\n\n            var baseUnit = options.baseUnit;\n            var baseUnitStep = options.baseUnitStep;\n\n            var minIdx = dateIndex(this.displayStart, this.valueStart, baseUnit, baseUnitStep);\n            var maxIdx = dateIndex(this.displayEnd, this.valueStart, baseUnit, baseUnitStep);\n\n            this._indices = { min: minIdx, max: maxIdx };\n        }\n\n        return this._indices;\n    },\n\n    total: function() {\n        return {\n            min: this.start,\n            max: this.end\n        };\n    },\n\n    totalCount: function() {\n        var last$$1 = this.totalIndex(this.end);\n\n        return last$$1 + (this.options.justified ? 1 : 0);\n    },\n\n    valueRange: function() {\n        return {\n            min: this.valueStart,\n            max: this.valueEnd\n        };\n    },\n\n    valueIndex: function(value) {\n        var options = this.options;\n        return Math.floor(dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep));\n    },\n\n    totalIndex: function(value) {\n        var options = this.options;\n        return Math.floor(dateIndex(value, this.start, options.baseUnit, options.baseUnitStep));\n    },\n\n    dateIndex: function(value) {\n        var options = this.options;\n        return dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep);\n    },\n\n    valuesCount: function() {\n        var maxIdx = this.valueIndex(this.valueEnd);\n\n        return maxIdx + 1;\n    },\n\n    values: function() {\n        var values = this._values;\n        if (!values) {\n            var options = this.options;\n            var range = this.valueRange();\n            this._values = values = [];\n\n            for (var date = range.min; date <= range.max;) {\n                values.push(date);\n                date = addDuration(date, options.baseUnitStep, options.baseUnit, options.weekStartDay);\n            }\n        }\n\n        return values;\n    },\n\n    dateAt: function(index, total) {\n        var options = this.options;\n\n        return addDuration(total ? this.start : this.valueStart, options.baseUnitStep * index, options.baseUnit, options.weekStartDay);\n    },\n\n    roundToTotalStep: function(value, upper, next) {\n        var ref = this.options;\n        var baseUnit = ref.baseUnit;\n        var baseUnitStep = ref.baseUnitStep;\n        var weekStartDay = ref.weekStartDay;\n        var start = this.start;\n\n        var step = dateIndex(value, start, baseUnit, baseUnitStep);\n        var roundedStep = upper ? Math.ceil(step) : Math.floor(step);\n\n        if (next) {\n            roundedStep += next;\n        }\n\n        return addDuration(start, roundedStep * baseUnitStep, baseUnit, weekStartDay);\n    }\n});\n\nfunction autoBaseUnit(options, startUnit, startStep) {\n    var categoryLimits = categoryRange(options.categories);\n    var span = (options.max || categoryLimits.max) - (options.min || categoryLimits.min);\n    var autoBaseUnitSteps = options.autoBaseUnitSteps;\n    var maxDateGroups = options.maxDateGroups;\n    var autoUnit = options.baseUnit === FIT;\n    var autoUnitIx = startUnit ? BASE_UNITS.indexOf(startUnit) : 0;\n    var baseUnit = autoUnit ? BASE_UNITS[autoUnitIx++] : options.baseUnit;\n    var units = span / TIME_PER_UNIT[baseUnit];\n    var totalUnits = units;\n    var unitSteps, step, nextStep;\n\n    while (!step || units >= maxDateGroups) {\n        unitSteps = unitSteps || autoBaseUnitSteps[baseUnit].slice(0);\n\n        do {\n            nextStep = unitSteps.shift();\n        } while (nextStep && startUnit === baseUnit && nextStep < startStep);\n\n        if (nextStep) {\n            step = nextStep;\n            units = totalUnits / step;\n        } else if (baseUnit === last(BASE_UNITS)) {\n            step = Math.ceil(totalUnits / maxDateGroups);\n            break;\n        } else if (autoUnit) {\n            baseUnit = BASE_UNITS[autoUnitIx++] || last(BASE_UNITS);\n            totalUnits = span / TIME_PER_UNIT[baseUnit];\n            unitSteps = null;\n        } else {\n            if (units > maxDateGroups) {\n                step = Math.ceil(totalUnits / maxDateGroups);\n            }\n            break;\n        }\n    }\n\n    options.baseUnitStep = step;\n    options.baseUnit = baseUnit;\n}\n\nfunction defaultBaseUnit(options) {\n    var categories = options.categories;\n    var count = defined(categories) ? categories.length : 0;\n    var minDiff = MAX_VALUE;\n    var lastCategory, unit;\n\n    for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n        var category = categories[categoryIx];\n\n        if (category && lastCategory) {\n            var diff = absoluteDateDiff(category, lastCategory);\n            if (diff > 0) {\n                minDiff = Math.min(minDiff, diff);\n\n                if (minDiff >= TIME_PER_YEAR) {\n                    unit = YEARS;\n                } else if (minDiff >= TIME_PER_MONTH - TIME_PER_DAY * 3) {\n                    unit = MONTHS;\n                } else if (minDiff >= TIME_PER_WEEK) {\n                    unit = WEEKS;\n                } else if (minDiff >= TIME_PER_DAY) {\n                    unit = DAYS;\n                } else if (minDiff >= TIME_PER_HOUR) {\n                    unit = HOURS;\n                } else if (minDiff >= TIME_PER_MINUTE) {\n                    unit = MINUTES;\n                } else {\n                    unit = SECONDS;\n                }\n            }\n        }\n\n        lastCategory = category;\n    }\n\n    options.baseUnit = unit || DAYS;\n}\n\nfunction initUnit(options) {\n    var baseUnit = (options.baseUnit || \"\").toLowerCase();\n    var useDefault = baseUnit !== FIT && !inArray(baseUnit, BASE_UNITS);\n\n    if (useDefault) {\n        defaultBaseUnit(options);\n    }\n\n    if (baseUnit === FIT || options.baseUnitStep === AUTO) {\n        autoBaseUnit(options);\n    }\n\n    return options;\n}\n\nvar DateCategoryAxis = CategoryAxis.extend({\n    clone: function() {\n        var copy = new DateCategoryAxis($.extend({}, this.options), this.chartService);\n        copy.createLabels();\n\n        return copy;\n    },\n\n    categoriesHash: function() {\n        var start = this.dataRange.total().min;\n        return this.options.baseUnit + this.options.baseUnitStep + start;\n    },\n\n    initUserOptions: function(options) {\n        return options;\n    },\n\n    initFields: function() {\n        CategoryAxis.fn.initFields.call(this);\n\n        var chartService = this.chartService;\n        var intlService = chartService.intl;\n        var options = this.options;\n\n        var categories = options.categories || [];\n        if (!categories._parsed) {\n            categories = parseDates(intlService, categories);\n            categories._parsed = true;\n        }\n\n        options = deepExtend({\n            roundToBaseUnit: true\n        }, options, {\n            categories: categories,\n            min: parseDate(intlService, options.min),\n            max: parseDate(intlService, options.max),\n            weekStartDay: firstDay(options, intlService)\n        });\n\n        if (chartService.panning && chartService.isPannable(options.vertical ? Y : X)) {\n            options.roundToBaseUnit = false;\n        }\n\n        options.userSetBaseUnit = options.userSetBaseUnit || options.baseUnit;\n        options.userSetBaseUnitStep = options.userSetBaseUnitStep || options.baseUnitStep;\n\n        this.options = options;\n        options.srcCategories = categories;\n\n        if (categories.length > 0) {\n            var range = categoryRange(categories);\n            var maxDivisions = options.maxDivisions;\n\n            this.dataRange = new DateRange(range.min, range.max, initUnit(options));\n\n            if (maxDivisions) {\n                var dataRange = this.dataRange.displayRange();\n\n                var divisionOptions = $.extend({}, options, {\n                    justified: true,\n                    roundToBaseUnit: false,\n                    baseUnit: 'fit',\n                    min: dataRange.min,\n                    max: dataRange.max,\n                    maxDateGroups: maxDivisions\n                });\n\n                var dataRangeOptions = this.dataRange.options;\n\n                autoBaseUnit(divisionOptions, dataRangeOptions.baseUnit, dataRangeOptions.baseUnitStep);\n\n                this.divisionRange = new DateRange(range.min, range.max, divisionOptions);\n            } else {\n                this.divisionRange = this.dataRange;\n            }\n\n        } else {\n            options.baseUnit = options.baseUnit || DAYS;\n            this.dataRange = this.divisionRange = new EmptyDateRange(options);\n        }\n\n        this.rangeLabels = [];\n    },\n\n    tickIndices: function(stepSize) {\n        var ref = this;\n        var dataRange = ref.dataRange;\n        var divisionRange = ref.divisionRange;\n        var valuesCount = divisionRange.valuesCount();\n\n        if (!this.options.maxDivisions || !valuesCount) {\n            return CategoryAxis.fn.tickIndices.call(this, stepSize);\n        }\n\n        var indices = [];\n        var values = divisionRange.values();\n        var offset = 0;\n\n        if (!this.options.justified) {\n            values = values.concat(divisionRange.dateAt(valuesCount));\n            offset = 0.5;//align ticks to the center of not justified categories\n        }\n\n        for (var idx = 0; idx < values.length; idx++) {\n            indices.push(dataRange.dateIndex(values[idx]) + offset);\n            if (stepSize !== 1 && idx >= 1) {\n                var last$$1 = indices.length - 1;\n                indices.splice(idx, 0, indices[last$$1 - 1] + (indices[last$$1] - indices[last$$1 - 1]) * stepSize);\n            }\n        }\n\n        return indices;\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        var categories = this.options.categories || [];\n\n        return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0 && categories.length;\n    },\n\n    parseNoteValue: function(value) {\n        return parseDate(this.chartService.intl, value);\n    },\n\n    noteSlot: function(value) {\n        return this.getSlot(value);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var baseUnit = options.baseUnit;\n        var weekStartDay = options.weekStartDay;\n        var vertical = options.vertical;\n        var lineBox = this.lineBox();\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var range = this.range();\n        var scale = size / (range.max - range.min);\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if (range.min && range.max) {\n            var from = addTicks(options.min || range.min, offset);\n            var to = addTicks(options.max || range.max, offset);\n\n            range = {\n                min: addDuration(from, 0, baseUnit, weekStartDay),\n                max: addDuration(to, 0, baseUnit, weekStartDay)\n            };\n        }\n\n        return range;\n    },\n\n    labelsRange: function() {\n        return {\n            min: this.options.labels.skip,\n            max: this.divisionRange.valuesCount()\n        };\n    },\n\n    pan: function(delta) {\n        if (this.isEmpty()) {\n            return null;\n        }\n\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var size = options.vertical ? lineBox.height() : lineBox.width();\n        var ref = this.dataRange.displayRange();\n        var min = ref.min;\n        var max = ref.max;\n        var totalLimits = this.dataRange.total();\n        var scale = size / (max - min);\n        var offset = round(delta / scale, DEFAULT_PRECISION) * (options.reverse ? -1 : 1);\n        var from = addTicks(min, offset);\n        var to = addTicks(max, offset);\n\n        var panRange = this.limitRange(toTime(from), toTime(to), toTime(totalLimits.min), toTime(totalLimits.max), offset);\n\n        if (panRange) {\n            panRange.min = toDate(panRange.min);\n            panRange.max = toDate(panRange.max);\n            panRange.baseUnit = options.baseUnit;\n            panRange.baseUnitStep = options.baseUnitStep || 1;\n            panRange.userSetBaseUnit = options.userSetBaseUnit;\n            panRange.userSetBaseUnitStep = options.userSetBaseUnitStep;\n\n            return panRange;\n        }\n    },\n\n    pointsRange: function(start, end) {\n        if (this.isEmpty()) {\n            return null;\n        }\n\n        var pointsRange = CategoryAxis.fn.pointsRange.call(this, start, end);\n        var datesRange = this.dataRange.displayRange();\n        var indicesRange = this.dataRange.displayIndices();\n        var scale = dateDiff(datesRange.max, datesRange.min) / (indicesRange.max - indicesRange.min);\n        var options = this.options;\n\n        var min = addTicks(datesRange.min, pointsRange.min * scale);\n        var max = addTicks(datesRange.min, pointsRange.max * scale);\n\n        return {\n            min: min,\n            max: max,\n            baseUnit: options.userSetBaseUnit || options.baseUnit,\n            baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        if (this.isEmpty()) {\n            return {};\n        }\n\n        var options = this.options;\n        var fit = options.userSetBaseUnit === FIT;\n        var totalLimits = this.dataRange.total();\n        var ref = this.dataRange.displayRange();\n        var rangeMin = ref.min;\n        var rangeMax = ref.max;\n\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = rangeMax - rangeMin;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = Math.round(position * delta);\n        var maxDelta = Math.round((1 - position) * delta);\n\n        var ref$1 = this.dataRange.options;\n        var baseUnit = ref$1.baseUnit;\n        var min = new Date(rangeMin.getTime() + minDelta);\n        var max = new Date(rangeMax.getTime() - maxDelta);\n\n        if (fit) {\n            var autoBaseUnitSteps = options.autoBaseUnitSteps;\n            var maxDateGroups = options.maxDateGroups;\n\n            var maxDiff = last(autoBaseUnitSteps[baseUnit]) * maxDateGroups * TIME_PER_UNIT[baseUnit];\n            var rangeDiff = dateDiff(rangeMax, rangeMin);\n            var diff = dateDiff(max, min);\n            var baseUnitIndex = BASE_UNITS.indexOf(baseUnit);\n            var autoBaseUnitStep, ticks;\n\n            if (diff < TIME_PER_UNIT[baseUnit] && baseUnit !== MILLISECONDS) {\n                baseUnit = BASE_UNITS[baseUnitIndex - 1];\n                autoBaseUnitStep = last(autoBaseUnitSteps[baseUnit]);\n                ticks = (rangeDiff - (maxDateGroups - 1) * autoBaseUnitStep * TIME_PER_UNIT[baseUnit]) / 2;\n                min = addTicks(rangeMin, ticks);\n                max = addTicks(rangeMax, -ticks);\n\n            } else if (diff > maxDiff && baseUnit !== YEARS) {\n                var stepIndex = 0;\n\n                do {\n                    baseUnitIndex++;\n                    baseUnit = BASE_UNITS[baseUnitIndex];\n                    stepIndex = 0;\n                    ticks = 2 * TIME_PER_UNIT[baseUnit];\n                    do {\n                        autoBaseUnitStep = autoBaseUnitSteps[baseUnit][stepIndex];\n                        stepIndex++;\n                    } while (stepIndex < autoBaseUnitSteps[baseUnit].length && ticks * autoBaseUnitStep < rangeDiff);\n                } while (baseUnit !== YEARS && ticks * autoBaseUnitStep < rangeDiff);\n\n                ticks = (ticks * autoBaseUnitStep - rangeDiff) / 2;\n                if (ticks > 0) {\n                    min = addTicks(rangeMin, -ticks);\n                    max = addTicks(rangeMax, ticks);\n                    min = addTicks(min, limitValue(max, totalLimits.min, totalLimits.max) - max);\n                    max = addTicks(max, limitValue(min, totalLimits.min, totalLimits.max) - min);\n                }\n            }\n        }\n\n        if (min && max && dateDiff(max, min) > 0) {\n            return {\n                min: min,\n                max: max,\n                baseUnit: options.userSetBaseUnit || options.baseUnit,\n                baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n            };\n        }\n    },\n\n    zoomRange: function(scale, cursor) {\n        var totalLimits = this.dataRange.total();\n        var range = this.scaleRange(scale, cursor);\n\n        if (range) {\n            if (range.min < totalLimits.min) {\n                range.min = totalLimits.min;\n            }\n            if (range.max > totalLimits.max) {\n                range.max = totalLimits.max;\n            }\n        }\n\n        return range;\n    },\n\n    range: function() {\n        return this.dataRange.displayRange();\n    },\n\n    createLabels: function() {\n        CategoryAxis.fn.createLabels.call(this);\n        this.createRangeLabels();\n    },\n\n    clearLabels: function() {\n        CategoryAxis.fn.clearLabels.call(this);\n        this.rangeLabels = [];\n    },\n\n    arrangeLabels: function() {\n        this.arrangeRangeLabels();\n        CategoryAxis.fn.arrangeLabels.call(this);\n    },\n\n    arrangeRangeLabels: function() {\n        var ref = this;\n        var options = ref.options;\n        var rangeLabels = ref.rangeLabels;\n        if (rangeLabels.length === 0) {\n            return;\n        }\n\n        var lineBox = this.lineBox();\n        var vertical = options.vertical;\n        var mirror = options.rangeLabels.mirror || options.labels.mirror;\n\n        var firstLabel = rangeLabels[0];\n        if (firstLabel) {\n            var position = vertical ? lineBox.y1 - (firstLabel.box.height() / 2) : lineBox.x1;\n            this.positionLabel(firstLabel, mirror, position);\n        }\n\n        var lastLabel = rangeLabels[1];\n        if (lastLabel) {\n            var position$1 = vertical ? lineBox.y2 - (lastLabel.box.height() / 2) : lineBox.x2;\n            this.positionLabel(lastLabel, mirror, position$1);\n        }\n    },\n\n    autoRotateLabels: function() {\n        CategoryAxis.fn.autoRotateLabels.call(this);\n        this.autoRotateRangeLabels();\n    },\n\n    hideOutOfRangeLabels: function() {\n        CategoryAxis.fn.hideOutOfRangeLabels.call(this);\n        this.hideOverlappingLabels();\n    },\n\n    hideOverlappingLabels: function() {\n        var ref = this;\n        var rangeLabels = ref.rangeLabels;\n        var labels = ref.labels;\n        if (rangeLabels.length === 0) {\n            return;\n        }\n\n        function clip(rangeLabel, label) {\n            if (!label.options.visible || label.box.overlaps(rangeLabel.box)) {\n                label.options.visible = false;\n                return true;\n            }\n\n            return false;\n        }\n\n        var firstRangeLabel = rangeLabels[0];\n        if (firstRangeLabel && firstRangeLabel.options.visible) {\n            for (var i = 0; i < labels.length; i++) {\n                var overlaps = clip(firstRangeLabel, labels[i]);\n                if (!overlaps) {\n                    break;\n                }\n            }\n        }\n\n        var lastRangeLabel = rangeLabels[1];\n        if (lastRangeLabel && lastRangeLabel.options.visible) {\n            for (var i$1 = labels.length - 1; i$1 > 0; --i$1) {\n                var overlaps$1 = clip(lastRangeLabel, labels[i$1]);\n                if (!overlaps$1) {\n                    break;\n                }\n            }\n        }\n    },\n\n    contentBox: function() {\n        var box = CategoryAxis.fn.contentBox.call(this);\n        var rangeLabels = this.rangeLabels;\n\n        for (var i = 0; i < rangeLabels.length; i++) {\n            var label = rangeLabels[i];\n            if (label.options.visible) {\n                box.wrap(label.box);\n            }\n        }\n\n        return box;\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        if (labelContext === void 0) { labelContext = {}; }\n\n        var options = this.options;\n        var dataItem = options.dataItems && !options.maxDivisions ? options.dataItems[index] : null;\n        var date = this.divisionRange.dateAt(index);\n        var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n\n        labelOptions.format = labelOptions.format || unitFormat;\n        labelContext.dataItem = dataItem;\n\n        var text = this.axisLabelText(date, labelOptions, labelContext);\n        if (text) {\n            return new AxisLabel(date, text, index, dataItem, labelOptions);\n        }\n    },\n\n    createRangeLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this.divisionRange;\n        var displayStart = ref.displayStart;\n        var displayEnd = ref.displayEnd;\n        var options = this.options;\n        var labelOptions = $.extend({}, options.labels, options.rangeLabels, {\n            align: CENTER,\n            zIndex: options.zIndex\n        });\n\n        if (labelOptions.visible !== true) {\n            return;\n        }\n\n        this.normalizeLabelRotation(labelOptions);\n        labelOptions.alignRotation = CENTER;\n\n        if (labelOptions.rotation === \"auto\") {\n            labelOptions.rotation = 0;\n            options.autoRotateRangeLabels = true;\n        }\n\n        var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n        labelOptions.format = labelOptions.format || unitFormat;\n\n        var createLabel = function (index, date, text) {\n            if (text) {\n                var label = new AxisLabel(date, text, index, null, labelOptions);\n                this$1$1.append(label);\n                this$1$1.rangeLabels.push(label);\n            }\n        };\n\n        var startText = this.axisLabelText(displayStart, labelOptions, { index: 0, count: 2 });\n        createLabel(0, displayStart, startText);\n\n        var endText = this.axisLabelText(displayEnd, labelOptions, { index: 1, count: 2 });\n        createLabel(1, displayEnd, endText);\n    },\n\n    autoRotateRangeLabels: function() {\n        var this$1$1 = this;\n\n        var labels = this.rangeLabels;\n        if (!this.options.autoRotateRangeLabels || this.options.vertical || labels.length !== 2) {\n            return;\n        }\n\n        var rotateLabel = function (label, tickPositions, index) {\n            var width = Math.abs(tickPositions[index + 1] - tickPositions[index]) * 2;\n            var angle = this$1$1.autoRotateLabelAngle(label.box, width);\n            if (angle !== 0) {\n                label.options.rotation = angle;\n                label.reflow(new Box());\n            }\n        };\n\n        var tickPositions = this.getMajorTickPositions();\n        rotateLabel(labels[0], tickPositions, 0);\n        rotateLabel(labels[1], tickPositions, tickPositions.length - 2);\n    },\n\n    categoryIndex: function(value) {\n        return this.dataRange.valueIndex(value);\n    },\n\n    slot: function(from, to, limit) {\n        var dateRange = this.dataRange;\n        var start = from;\n        var end = to;\n\n        if (start instanceof Date) {\n            start = dateRange.dateIndex(start);\n        }\n\n        if (end instanceof Date) {\n            end = dateRange.dateIndex(end);\n        }\n\n        var slot = this.getSlot(start, end, limit);\n        if (slot) {\n            return slot.toRect();\n        }\n    },\n\n    getSlot: function(a, b, limit) {\n        var start = a;\n        var end = b;\n\n        if (typeof start === OBJECT) {\n            start = this.categoryIndex(start);\n        }\n\n        if (typeof end === OBJECT) {\n            end = this.categoryIndex(end);\n        }\n\n        return CategoryAxis.fn.getSlot.call(this, start, end, limit);\n    },\n\n    valueRange: function() {\n        var options = this.options;\n        var range = categoryRange(options.srcCategories);\n\n        return {\n            min: toDate(range.min),\n            max: toDate(range.max)\n        };\n    },\n\n    categoryAt: function(index, total) {\n        return this.dataRange.dateAt(index, total);\n    },\n\n    categoriesCount: function() {\n        return this.dataRange.valuesCount();\n    },\n\n    rangeIndices: function() {\n        return this.dataRange.displayIndices();\n    },\n\n    labelsBetweenTicks: function() {\n        return !this.divisionRange.options.justified;\n    },\n\n    prepareUserOptions: function() {\n        if (this.isEmpty()) {\n            return;\n        }\n\n        this.options.categories = this.dataRange.values();\n    },\n\n    getCategory: function(point) {\n        var index = this.pointCategoryIndex(point);\n\n        if (index === null) {\n            return null;\n        }\n\n        return this.dataRange.dateAt(index);\n    },\n\n    totalIndex: function(value) {\n        return this.dataRange.totalIndex(value);\n    },\n\n    currentRangeIndices: function() {\n        var range = this.dataRange.valueRange();\n        return {\n            min: this.dataRange.totalIndex(range.min),\n            max: this.dataRange.totalIndex(range.max)\n        };\n    },\n\n    totalRange: function() {\n        return this.dataRange.total();\n    },\n\n    totalCount: function() {\n        return this.dataRange.totalCount();\n    },\n\n    isEmpty: function() {\n        return !this.options.srcCategories.length;\n    },\n\n    roundedRange: function() {\n        if (this.options.roundToBaseUnit !== false || this.isEmpty()) {\n            return this.range();\n        }\n\n        var options = this.options;\n        var datesRange = categoryRange(options.srcCategories);\n\n        var dateRange = new DateRange(datesRange.min, datesRange.max, $.extend({}, options, {\n            justified: false,\n            roundToBaseUnit: true,\n            justifyEnd: false\n        }));\n\n        return dateRange.displayRange();\n    }\n});\n\nsetDefaultOptions(DateCategoryAxis, {\n    type: DATE,\n    labels: {\n        dateFormats: DateLabelFormats\n    },\n    rangeLabels: {\n        visible: false\n    },\n    autoBaseUnitSteps: {\n        milliseconds: [ 1, 10, 100 ],\n        seconds: [ 1, 2, 5, 15, 30 ],\n        minutes: [ 1, 2, 5, 15, 30 ],\n        hours: [ 1, 2, 3 ],\n        days: [ 1, 2, 3 ],\n        weeks: [ 1, 2 ],\n        months: [ 1, 2, 3, 6 ],\n        years: [ 1, 2, 3, 5, 10, 25, 50 ]\n    },\n    maxDateGroups: 10\n});\n\nfunction autoAxisMin(min, max, narrow) {\n    if (!min && !max) {\n        return 0;\n    }\n\n    var axisMin;\n\n    if (min >= 0 && max >= 0) {\n        var minValue = min === max ? 0 : min;\n\n        var diff = (max - minValue) / max;\n        if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n            return 0;\n        }\n\n        axisMin = Math.max(0, minValue - ((max - minValue) / 2));\n    } else {\n        axisMin = min;\n    }\n\n    return axisMin;\n}\n\nfunction autoAxisMax(min, max, narrow) {\n    if (!min && !max) {\n        return 1;\n    }\n\n    var axisMax;\n\n    if (min <= 0 && max <= 0) {\n        var maxValue = min === max ? 0 : max;\n\n        var diff = Math.abs((maxValue - min) / maxValue);\n        if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n            return 0;\n        }\n\n        axisMax = Math.min(0, maxValue - ((min - maxValue) / 2));\n    } else {\n        axisMax = max;\n    }\n\n    return axisMax;\n}\n\nfunction floor(value, step) {\n    return round(Math.floor(value / step) * step, DEFAULT_PRECISION);\n}\n\nfunction ceil(value, step) {\n    return round(Math.ceil(value / step) * step, DEFAULT_PRECISION);\n}\n\nfunction limitCoordinate(value) {\n    return Math.max(Math.min(value, COORDINATE_LIMIT), -COORDINATE_LIMIT);\n}\n\nvar MIN_VALUE_RANGE$1 = Math.pow(10, -DEFAULT_PRECISION + 1);\n\nvar NumericAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, options, chartService) {\n        Axis.fn.init.call(this, $.extend({}, options, {\n            seriesMin: seriesMin,\n            seriesMax: seriesMax\n        }), chartService);\n    },\n\n    initUserOptions: function(options) {\n        var autoOptions = autoAxisOptions(options.seriesMin, options.seriesMax, options);\n        this.totalOptions = totalAxisOptions(autoOptions, options);\n\n        return axisOptions(autoOptions, options);\n    },\n\n    initFields: function() {\n        this.totalMin = this.totalOptions.min;\n        this.totalMax = this.totalOptions.max;\n        this.totalMajorUnit = this.totalOptions.majorUnit;\n        this.seriesMin = this.options.seriesMin;\n        this.seriesMax = this.options.seriesMax;\n    },\n\n    clone: function() {\n        return new NumericAxis(\n            this.seriesMin,\n            this.seriesMax,\n            $.extend({}, this.options),\n            this.chartService\n        );\n    },\n\n    startValue: function() {\n        return 0;\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    getDivisions: function(stepValue) {\n        if (stepValue === 0) {\n            return 1;\n        }\n\n        var options = this.options;\n        var range = options.max - options.min;\n\n        return Math.floor(round(range / stepValue, COORD_PRECISION)) + 1;\n    },\n\n    getTickPositions: function(unit, skipUnit) {\n        var options = this.options;\n        var ref = this.lineInfo();\n        var axisDir = ref.axisDir;\n        var axisOrigin = ref.axisOrigin;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var range = options.max - options.min;\n        var scale = lineSize / range;\n        var step = unit * scale;\n        var divisions = this.getDivisions(unit);\n        var positions = [];\n        var pos = lineBox[axisOrigin];\n        var skipStep = 0;\n\n        if (skipUnit) {\n            skipStep = skipUnit / unit;\n        }\n\n        for (var idx = 0; idx < divisions; idx++) {\n            if (idx % skipStep !== 0) {\n                positions.push(round(pos, COORD_PRECISION));\n            }\n\n            pos = pos + step * axisDir;\n        }\n\n        return positions;\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTickPositions(this.options.minorUnit);\n    },\n\n    getSlot: function(a, b, limit) {\n        if (limit === void 0) { limit = false; }\n\n        var options = this.options;\n        var ref = this.lineInfo();\n        var axis = ref.axis;\n        var axisDir = ref.axisDir;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var lineStart = ref.lineStart;\n        var step = axisDir * (lineSize / (options.max - options.min));\n\n        var start = valueOrDefault(a, b || 0);\n        var end = valueOrDefault(b, a || 0);\n\n        if (limit) {\n            start = limitValue(start, options.min, options.max);\n            end = limitValue(end, options.min, options.max);\n        }\n\n        var p1 = Math.min(start, end) - options.min;\n        var p2 = Math.max(start, end) - options.min;\n\n        var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n        slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n        slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n        return slotBox;\n    },\n\n    getValue: function(point) {\n        var options = this.options;\n        var max = Number(options.max);\n        var min = Number(options.min);\n        var offset = this.pointOffset(point);\n        var valueOffset = offset * (max - min);\n\n        if (offset < 0 || offset > 1) {\n            return null;\n        }\n\n        var value = min + valueOffset;\n        return round(value, DEFAULT_PRECISION);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var vertical = options.vertical;\n        var reverse = options.reverse;\n        var max = options.max;\n        var min = options.min;\n        var ref = this.lineInfo();\n        var lineSize = ref.lineSize;\n        var range = max - min;\n        var scale = lineSize / range;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        return {\n            min: min + offset,\n            max: max + offset,\n            offset: offset\n        };\n    },\n\n    labelsCount: function() {\n        return this.getDivisions(this.options.majorUnit);\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var value = round(options.min + (index * options.majorUnit), DEFAULT_PRECISION);\n        var text = this.axisLabelText(value, labelOptions, labelContext);\n\n        return new AxisLabel(value, text, index, null, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        return range.min <= value && value <= range.max;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta);\n        return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        if (this.isValidRange(min, max)) {\n            return {\n                min: min,\n                max: max\n            };\n        }\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = this.options.max - this.options.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = round(this.options.min + minDelta, DEFAULT_PRECISION);\n        var max = round(this.options.max - maxDelta, DEFAULT_PRECISION);\n\n        if (max - min < MIN_VALUE_RANGE$1) {\n            max = min + MIN_VALUE_RANGE$1;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var ref = this;\n        var totalMin = ref.totalMin;\n        var totalMax = ref.totalMax;\n        var range = this.scaleRange(scale, cursor);\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax),\n            narrowRange: false\n        };\n    },\n\n    isValidRange: function(min, max) {\n        return max - min > MIN_VALUE_RANGE$1;\n    }\n});\n\nfunction autoAxisOptions(seriesMin, seriesMax, options) {\n    var narrowRange = options.narrowRange;\n\n    var autoMin = autoAxisMin(seriesMin, seriesMax, narrowRange);\n    var autoMax = autoAxisMax(seriesMin, seriesMax, narrowRange);\n\n    var majorUnit = autoMajorUnit(autoMin, autoMax);\n    var autoOptions = {\n        majorUnit: majorUnit\n    };\n\n    if (options.roundToMajorUnit !== false) {\n        if (autoMin < 0 && remainderClose(autoMin, majorUnit, 1 / 3)) {\n            autoMin -= majorUnit;\n        }\n\n        if (autoMax > 0 && remainderClose(autoMax, majorUnit, 1 / 3)) {\n            autoMax += majorUnit;\n        }\n    }\n\n    autoOptions.min = floor(autoMin, majorUnit);\n    autoOptions.max = ceil(autoMax, majorUnit);\n\n    return autoOptions;\n}\n\nfunction totalAxisOptions(autoOptions, options) {\n    return {\n        min: defined(options.min) ? Math.min(autoOptions.min, options.min) : autoOptions.min,\n        max: defined(options.max) ? Math.max(autoOptions.max, options.max) : autoOptions.max,\n        majorUnit: autoOptions.majorUnit\n    };\n}\n\nfunction clearNullValues(options, fields) {\n    for (var idx = 0; idx < fields.length; idx++) {\n        var field = fields[idx];\n        if (options[field] === null) {\n            options[field] = undefined;\n        }\n    }\n}\n\nfunction axisOptions(autoOptions, userOptions) {\n    var options = userOptions;\n    var userSetMin, userSetMax;\n\n    if (userOptions) {\n        clearNullValues(userOptions, [ 'min', 'max' ]);\n\n        userSetMin = defined(userOptions.min);\n        userSetMax = defined(userOptions.max);\n\n        var userSetLimits = userSetMin || userSetMax;\n\n        if (userSetLimits) {\n            if (userOptions.min === userOptions.max) {\n                if (userOptions.min > 0) {\n                    userOptions.min = 0;\n                } else {\n                    userOptions.max = 1;\n                }\n            }\n        }\n\n        if (userOptions.majorUnit) {\n            autoOptions.min = floor(autoOptions.min, userOptions.majorUnit);\n            autoOptions.max = ceil(autoOptions.max, userOptions.majorUnit);\n        } else if (userSetLimits) {\n            options = deepExtend(autoOptions, userOptions);\n\n            // Determine an auto major unit after min/max have been set\n            autoOptions.majorUnit = autoMajorUnit(options.min, options.max);\n        }\n    }\n\n    autoOptions.minorUnit = (options.majorUnit || autoOptions.majorUnit) / 5;\n\n    var result = deepExtend(autoOptions, options);\n    if (result.min >= result.max) {\n        if (userSetMin && !userSetMax) {\n            result.max = result.min + result.majorUnit;\n        } else if (!userSetMin && userSetMax) {\n            result.min = result.max - result.majorUnit;\n        }\n    }\n\n    return result;\n}\n\nfunction remainderClose(value, divisor, ratio) {\n    var remainder = round(Math.abs(value % divisor), DEFAULT_PRECISION);\n    var threshold = divisor * (1 - ratio);\n\n    return remainder === 0 || remainder > threshold;\n}\n\nsetDefaultOptions(NumericAxis, {\n    type: \"numeric\",\n    min: 0,\n    max: 1,\n    vertical: true,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        format: \"#.####################\"\n    },\n    zIndex: 1\n});\n\nvar MIN_VALUE_RANGE = 1000;\n\nvar DateValueAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, axisOptions, chartService) {\n        var min = toDate(seriesMin);\n        var max = toDate(seriesMax);\n\n        var intlService = chartService.intl;\n        var options = axisOptions || {};\n        options = deepExtend(options || {}, {\n            min: parseDate(intlService, options.min),\n            max: parseDate(intlService, options.max),\n            axisCrossingValue: parseDates(intlService, options.axisCrossingValues || options.axisCrossingValue),\n            weekStartDay: firstDay(options, intlService)\n        });\n        options = applyDefaults(min, max, options);\n\n        Axis.fn.init.call(this, options, chartService);\n\n        this.intlService = intlService;\n        this.seriesMin = min;\n        this.seriesMax = max;\n\n        var weekStartDay = options.weekStartDay || 0;\n        this.totalMin = toTime(floorDate(toTime(min) - 1, options.baseUnit, weekStartDay));\n        this.totalMax = toTime(ceilDate(toTime(max) + 1, options.baseUnit, weekStartDay));\n    },\n\n    clone: function() {\n        return new DateValueAxis(this.seriesMin, this.seriesMax, $.extend({}, this.options), this.chartService);\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    getDivisions: function(stepValue) {\n        var options = this.options;\n\n        return Math.floor(\n            duration(options.min, options.max, options.baseUnit) / stepValue + 1\n        );\n    },\n\n    getTickPositions: function(step) {\n        var options = this.options;\n        var ref = this.lineInfo();\n        var dir = ref.axisDir;\n        var lineSize = ref.lineSize;\n        var start = ref.lineStart;\n        var divisions = this.getDivisions(step);\n        var timeRange = dateDiff(options.max, options.min);\n        var scale = lineSize / timeRange;\n        var weekStartDay = options.weekStartDay || 0;\n\n        var positions = [ start ];\n        for (var i = 1; i < divisions; i++) {\n            var date = addDuration(options.min, i * step, options.baseUnit, weekStartDay);\n            var pos = start + dateDiff(date, options.min) * scale * dir;\n\n            positions.push(round(pos, COORD_PRECISION));\n        }\n\n        return positions;\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTickPositions(this.options.minorUnit);\n    },\n\n    getSlot: function(a, b, limit) {\n        return NumericAxis.prototype.getSlot.call(\n            this, parseDate(this.intlService, a), parseDate(this.intlService, b), limit\n        );\n    },\n\n    getValue: function(point) {\n        var value = NumericAxis.prototype.getValue.call(this, point);\n\n        return value !== null ? toDate(value) : null;\n    },\n\n    labelsCount: function() {\n        return this.getDivisions(this.options.majorUnit);\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var offset = index * options.majorUnit;\n        var weekStartDay = options.weekStartDay || 0;\n        var date = options.min;\n\n        if (offset > 0) {\n            date = addDuration(date, offset, options.baseUnit, weekStartDay);\n        }\n\n        var unitFormat = labelOptions.dateFormats[options.baseUnit];\n        labelOptions.format = labelOptions.format || unitFormat;\n\n        var text = this.axisLabelText(date, labelOptions, labelContext);\n        return new AxisLabel(date, text, index, null, labelOptions);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var vertical = options.vertical;\n        var reverse = options.reverse;\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var range = this.range();\n        var scale = size / dateDiff(range.max, range.min);\n\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        var from = addTicks(options.min, offset);\n        var to = addTicks(options.max, offset);\n\n        return {\n            min: from,\n            max: to,\n            offset: offset\n        };\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n\n        return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta, true);\n        var limittedRange = this.limitRange(toTime(range.min), toTime(range.max), this.totalMin, this.totalMax, range.offset);\n\n        if (limittedRange) {\n            return {\n                min: toDate(limittedRange.min),\n                max: toDate(limittedRange.max)\n            };\n        }\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        return {\n            min: toDate(min),\n            max: toDate(max)\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = this.options.max - this.options.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = toDate(toTime(this.options.min) + minDelta);\n        var max = toDate(toTime(this.options.max) - maxDelta);\n\n        if (max - min < MIN_VALUE_RANGE) {\n            max = toDate(toTime(min) + MIN_VALUE_RANGE);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var range = this.scaleRange(scale, cursor);\n        var min = toDate(limitValue(toTime(range.min), this.totalMin, this.totalMax));\n        var max = toDate(limitValue(toTime(range.max), this.totalMin, this.totalMax));\n\n        return {\n            min: min,\n            max: max\n        };\n    }\n});\n\nfunction timeUnits(delta) {\n    var unit = HOURS;\n\n    if (delta >= TIME_PER_YEAR) {\n        unit = YEARS;\n    } else if (delta >= TIME_PER_MONTH) {\n        unit = MONTHS;\n    } else if (delta >= TIME_PER_WEEK) {\n        unit = WEEKS;\n    } else if (delta >= TIME_PER_DAY) {\n        unit = DAYS;\n    }\n\n    return unit;\n}\n\nfunction applyDefaults(seriesMin, seriesMax, options) {\n    var min = options.min || seriesMin;\n    var max = options.max || seriesMax;\n    var baseUnit = options.baseUnit || (max && min ? timeUnits(absoluteDateDiff(max, min)) : HOURS);\n    var baseUnitTime = TIME_PER_UNIT[baseUnit];\n    var weekStartDay = options.weekStartDay || 0;\n    var autoMin = floorDate(toTime(min) - 1, baseUnit, weekStartDay) || toDate(max);\n    var autoMax = ceilDate(toTime(max) + 1, baseUnit, weekStartDay);\n    var userMajorUnit = options.majorUnit ? options.majorUnit : undefined;\n    var majorUnit = userMajorUnit || ceil(\n                        autoMajorUnit(autoMin.getTime(), autoMax.getTime()),\n                        baseUnitTime\n                    ) / baseUnitTime;\n    var actualUnits = duration(autoMin, autoMax, baseUnit);\n    var totalUnits = ceil(actualUnits, majorUnit);\n    var unitsToAdd = totalUnits - actualUnits;\n    var head = Math.floor(unitsToAdd / 2);\n    var tail = unitsToAdd - head;\n\n    if (!options.baseUnit) {\n        delete options.baseUnit;\n    }\n\n    options.baseUnit = options.baseUnit || baseUnit;\n    options.min = options.min || addDuration(autoMin, -head, baseUnit, weekStartDay);\n    options.max = options.max || addDuration(autoMax, tail, baseUnit, weekStartDay);\n    options.minorUnit = options.minorUnit || majorUnit / 5;\n    options.majorUnit = majorUnit;\n\n    return options;\n}\n\nsetDefaultOptions(DateValueAxis, {\n    type: DATE,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        dateFormats: DateLabelFormats\n    }\n});\n\nvar DEFAULT_MAJOR_UNIT = 10;\nvar MIN_VALUE_RANGE$2 = 1e-6;\n\nvar LogarithmicAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, options, chartService) {\n\n        var axisOptions = deepExtend({ majorUnit: DEFAULT_MAJOR_UNIT, min: seriesMin, max: seriesMax }, options);\n        var base = axisOptions.majorUnit;\n        var autoMax = autoAxisMax$1(seriesMax, base);\n        var autoMin = autoAxisMin$1(seriesMin, seriesMax, axisOptions);\n        var range = initRange(autoMin, autoMax, axisOptions, options);\n\n        axisOptions.max = range.max;\n        axisOptions.min = range.min;\n        axisOptions.minorUnit = options.minorUnit || round(base - 1, DEFAULT_PRECISION);\n\n        Axis.fn.init.call(this, axisOptions, chartService);\n\n        this.totalMin = defined(options.min) ? Math.min(autoMin, options.min) : autoMin;\n        this.totalMax = defined(options.max) ? Math.max(autoMax, options.max) : autoMax;\n        this.logMin = round(log(range.min, base), DEFAULT_PRECISION);\n        this.logMax = round(log(range.max, base), DEFAULT_PRECISION);\n        this.seriesMin = seriesMin;\n        this.seriesMax = seriesMax;\n\n        this.createLabels();\n    },\n\n    clone: function() {\n        return new LogarithmicAxis(\n            this.seriesMin,\n            this.seriesMax,\n            $.extend({}, this.options),\n            this.chartService\n        );\n    },\n\n    startValue: function() {\n        return this.options.min;\n    },\n\n    getSlot: function(a, b, limit) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var base = options.majorUnit;\n        var min = options.min;\n        var max = options.max;\n        var ref$1 = this.lineInfo();\n        var axis = ref$1.axis;\n        var axisDir = ref$1.axisDir;\n        var lineBox = ref$1.lineBox;\n        var lineSize = ref$1.lineSize;\n        var lineStart = ref$1.lineStart;\n        var step = axisDir * (lineSize / (logMax - logMin));\n        var start = valueOrDefault(a, b || 1);\n        var end = valueOrDefault(b, a || 1);\n\n        if (start <= 0 || end <= 0) {\n            return null;\n        }\n\n        if (limit) {\n            start = limitValue(start, min, max);\n            end = limitValue(end, min, max);\n        }\n\n        start = log(start, base);\n        end = log(end, base);\n\n        var p1 = Math.min(start, end) - logMin;\n        var p2 = Math.max(start, end) - logMin;\n\n        var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n        slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n        slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n        return slotBox;\n    },\n\n    getValue: function(point) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var base = options.majorUnit;\n        var ref$1 = this.lineInfo();\n        var axis = ref$1.axis;\n        var axisDir = ref$1.axisDir;\n        var lineStart = ref$1.lineStart;\n        var lineSize = ref$1.lineSize;\n        var step = ((logMax - logMin) / lineSize);\n        var offset = axisDir * (point[axis] - lineStart);\n        var valueOffset = offset * step;\n\n        if (offset < 0 || offset > lineSize) {\n            return null;\n        }\n\n        var value = logMin + valueOffset;\n\n        return round(Math.pow(base, value), DEFAULT_PRECISION);\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    translateRange: function(delta) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var reverse = options.reverse;\n        var vertical = options.vertical;\n        var base = options.majorUnit;\n        var lineBox = this.lineBox();\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var scale = size / (logMax - logMin);\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        return {\n            min: Math.pow(base, logMin + offset),\n            max: Math.pow(base, logMax + offset),\n            offset: offset\n        };\n    },\n\n    labelsCount: function() {\n        var floorMax = Math.floor(this.logMax);\n        var count = Math.floor(floorMax - this.logMin) + 1;\n\n        return count;\n    },\n\n    getMajorTickPositions: function() {\n        var ticks = [];\n\n        this.traverseMajorTicksPositions(function (position) {\n            ticks.push(position);\n        }, { step: 1, skip: 0 });\n\n        return ticks;\n    },\n\n    createTicks: function(lineGroup) {\n        var options = this.options;\n        var majorTicks = options.majorTicks;\n        var minorTicks = options.minorTicks;\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var lineBox = this.lineBox();\n        var ticks = [];\n        var tickLineOptions = {\n            // TODO\n            // _alignLines: options._alignLines,\n            vertical: vertical\n        };\n\n        function render(tickPosition, tickOptions) {\n            tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n            tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n            tickLineOptions.position = tickPosition;\n\n            lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n        }\n\n        if (majorTicks.visible) {\n            this.traverseMajorTicksPositions(render, majorTicks);\n        }\n\n        if (minorTicks.visible) {\n            this.traverseMinorTicksPositions(render, minorTicks);\n        }\n\n        return ticks;\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var vertical = options.vertical;\n        var lineBox = altAxis.lineBox();\n        var lineOptions = {\n            lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n            lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n            vertical: vertical\n        };\n        var majorTicks = [];\n\n        var container = this.gridLinesVisual();\n        function render(tickPosition, gridLine) {\n            if (!inArray(tickPosition, majorTicks)) {\n                lineOptions.position = tickPosition;\n                container.append(createAxisGridLine(lineOptions, gridLine));\n\n                majorTicks.push(tickPosition);\n            }\n        }\n\n        if (majorGridLines.visible) {\n            this.traverseMajorTicksPositions(render, majorGridLines);\n        }\n\n        if (minorGridLines.visible) {\n            this.traverseMinorTicksPositions(render, minorGridLines);\n        }\n\n        return container.children;\n    },\n\n    traverseMajorTicksPositions: function(callback, tickOptions) {\n        var ref = this.lineInfo();\n        var lineStart = ref.lineStart;\n        var step = ref.step;\n        var ref$1 = this;\n        var logMin = ref$1.logMin;\n        var logMax = ref$1.logMax;\n\n        for (var power = Math.ceil(logMin) + tickOptions.skip; power <= logMax; power += tickOptions.step) {\n            var position = round(lineStart + step * (power - logMin), DEFAULT_PRECISION);\n            callback(position, tickOptions);\n        }\n    },\n\n    traverseMinorTicksPositions: function(callback, tickOptions) {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var min = ref.min;\n        var max = ref.max;\n        var minorUnit = ref.minorUnit;\n        var base = ref.majorUnit;\n        var ref$1 = this.lineInfo();\n        var lineStart = ref$1.lineStart;\n        var step = ref$1.step;\n        var ref$2 = this;\n        var logMin = ref$2.logMin;\n        var logMax = ref$2.logMax;\n        var start = Math.floor(logMin);\n\n        for (var power = start; power < logMax; power++) {\n            var minorOptions = this$1$1._minorIntervalOptions(power);\n            for (var idx = tickOptions.skip; idx < minorUnit; idx += tickOptions.step) {\n                var value = minorOptions.value + idx * minorOptions.minorStep;\n                if (value > max) {\n                    break;\n                }\n                if (value >= min) {\n                    var position = round(lineStart + step * (log(value, base) - logMin), DEFAULT_PRECISION);\n                    callback(position, tickOptions);\n                }\n            }\n        }\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var power = Math.ceil(this.logMin + index);\n        var value = Math.pow(this.options.majorUnit, power);\n        var text = this.axisLabelText(value, labelOptions, labelContext);\n\n        return new AxisLabel(value, text, index, null, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        return range.min <= value && value <= range.max;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta);\n        return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var ref = this.options;\n        var base = ref.majorUnit;\n        var logMin = log(this.options.min, base);\n        var logMax = log(this.options.max, base);\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = logMax - logMin;\n        var delta = this.scaleToDelta(scale, range);\n        var min = Math.pow(base, logMin + position * delta);\n        var max = Math.pow(base, logMax - (1 - position) * delta);\n\n        if (max - min < MIN_VALUE_RANGE$2) {\n            max = min + MIN_VALUE_RANGE$2;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var range = this.scaleRange(scale, cursor);\n        var ref = this;\n        var totalMin = ref.totalMin;\n        var totalMax = ref.totalMax;\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax)\n        };\n    },\n\n    _minorIntervalOptions: function(power) {\n        var ref = this.options;\n        var minorUnit = ref.minorUnit;\n        var base = ref.majorUnit;\n        var value = Math.pow(base, power);\n        var nextValue = Math.pow(base, power + 1);\n        var difference = nextValue - value;\n        var minorStep = difference / minorUnit;\n\n        return {\n            value: value,\n            minorStep: minorStep\n        };\n    },\n\n    lineInfo: function() {\n        var info = Axis.fn.lineInfo.call(this);\n        info.step = info.axisDir * (info.lineSize / (this.logMax - this.logMin));\n\n        return info;\n    }\n});\n\nfunction initRange(autoMin, autoMax, axisOptions, options) {\n    var min = axisOptions.min;\n    var max = axisOptions.max;\n\n    if (defined(axisOptions.axisCrossingValue) && axisOptions.axisCrossingValue <= 0) {\n        throwNegativeValuesError();\n    }\n\n    if (!defined(options.max)) {\n        max = autoMax;\n    } else if (options.max <= 0) {\n        throwNegativeValuesError();\n    }\n\n    if (!defined(options.min)) {\n        min = autoMin;\n    } else if (options.min <= 0) {\n        throwNegativeValuesError();\n    }\n\n    return {\n        min: min,\n        max: max\n    };\n}\n\nfunction autoAxisMin$1(min, max, options) {\n    var base = options.majorUnit;\n    var autoMin = min;\n    if (min <= 0) {\n        autoMin = max <= 1 ? Math.pow(base, -2) : 1;\n    } else if (!options.narrowRange) {\n        autoMin = Math.pow(base, Math.floor(log(min, base)));\n    }\n    return autoMin;\n}\n\nfunction autoAxisMax$1(max, base) {\n    var logMaxRemainder = round(log(max, base), DEFAULT_PRECISION) % 1;\n    var autoMax;\n    if (max <= 0) {\n        autoMax = base;\n    } else if (logMaxRemainder !== 0 && (logMaxRemainder < 0.3 || logMaxRemainder > 0.9)) {\n        autoMax = Math.pow(base, log(max, base) + 0.2);\n    } else {\n        autoMax = Math.pow(base, Math.ceil(log(max, base)));\n    }\n\n    return autoMax;\n}\n\nfunction throwNegativeValuesError() {\n    throw new Error(\"Non positive values cannot be used for a logarithmic axis\");\n}\n\nfunction log(x, base) {\n    return Math.log(x) / Math.log(base);\n}\n\nsetDefaultOptions(LogarithmicAxis, {\n    type: \"log\",\n    majorUnit: DEFAULT_MAJOR_UNIT,\n    minorUnit: 1,\n    axisCrossingValue: 1,\n    vertical: true,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    zIndex: 1,\n    _deferLabels: true\n});\n\nvar GridLinesMixin = {\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var radius = Math.abs(this.box.center().y - altAxis.lineBox().y1);\n        var gridLines = [];\n        var skipMajor = false;\n        var majorAngles, minorAngles;\n\n        if (options.majorGridLines.visible) {\n            majorAngles = this.majorGridLineAngles(altAxis);\n            skipMajor = true;\n\n            gridLines = this.renderMajorGridLines(\n                majorAngles, radius, options.majorGridLines\n            );\n        }\n\n        if (options.minorGridLines.visible) {\n            minorAngles = this.minorGridLineAngles(altAxis, skipMajor);\n\n            append(gridLines, this.renderMinorGridLines(\n                minorAngles, radius, options.minorGridLines, altAxis, skipMajor\n            ));\n        }\n\n        return gridLines;\n    },\n\n    renderMajorGridLines: function(angles, radius, options) {\n        return this.renderGridLines(angles, radius, options);\n    },\n\n    renderMinorGridLines: function(angles, radius, options, altAxis, skipMajor) {\n        var radiusCallback = this.radiusCallback && this.radiusCallback(radius, altAxis, skipMajor);\n        return this.renderGridLines(angles, radius, options, radiusCallback);\n    },\n\n    renderGridLines: function(angles, radius, options, radiusCallback) {\n        var style = {\n            stroke: {\n                width: options.width,\n                color: options.color,\n                dashType: options.dashType\n            }\n        };\n\n        var center = this.box.center();\n        var circle = new Circle([ center.x, center.y ], radius);\n        var container = this.gridLinesVisual();\n\n        for (var i = 0; i < angles.length; i++) {\n            var line = new Path(style);\n            if (radiusCallback) {\n                circle.radius = radiusCallback(angles[i]);\n            }\n\n            line.moveTo(circle.center)\n                .lineTo(circle.pointAt(angles[i] + 180));\n\n            container.append(line);\n        }\n\n        return container.children;\n    },\n\n    gridLineAngles: function(altAxis, size, skip, step, skipAngles) {\n        var this$1$1 = this;\n\n        var divs = this.intervals(size, skip, step, skipAngles);\n        var options = altAxis.options;\n        var altAxisVisible = options.visible && (options.line || {}).visible !== false;\n\n        return map(divs, function (d) {\n            var alpha = this$1$1.intervalAngle(d);\n\n            if (!altAxisVisible || alpha !== 90) {\n                return alpha;\n            }\n        });\n    }\n};\n\nvar RadarCategoryAxis = CategoryAxis.extend({\n    range: function() {\n        return { min: 0, max: this.options.categories.length };\n    },\n\n    reflow: function(box) {\n        this.box = box;\n        this.reflowLabels();\n    },\n\n    lineBox: function() {\n        return this.box;\n    },\n\n    reflowLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var labels = ref.labels;\n        var labelOptions = ref.options.labels;\n        var skip = labelOptions.skip || 0;\n        var step = labelOptions.step || 1;\n        var measureBox = new Box();\n\n        for (var i = 0; i < labels.length; i++) {\n            labels[i].reflow(measureBox);\n            var labelBox = labels[i].box;\n\n            labels[i].reflow(this$1$1.getSlot(skip + i * step).adjacentBox(\n                0, labelBox.width(), labelBox.height()\n            ));\n        }\n    },\n\n    intervals: function(size, skipOption, stepOption, skipAngles) {\n        if (skipAngles === void 0) { skipAngles = false; }\n\n        var options = this.options;\n        var categories = options.categories.length;\n        var divCount = categories / size || 1;\n        var divAngle = 360 / divCount;\n        var skip = skipOption || 0;\n        var step = stepOption || 1;\n        var divs = [];\n        var angle = 0;\n\n        for (var i = skip; i < divCount; i += step) {\n            if (options.reverse) {\n                angle = 360 - i * divAngle;\n            } else {\n                angle = i * divAngle;\n            }\n\n            angle = round(angle, COORD_PRECISION) % 360;\n\n            if (!(skipAngles && inArray(angle, skipAngles))) {\n                divs.push(angle);\n            }\n        }\n\n        return divs;\n    },\n\n    majorIntervals: function() {\n        return this.intervals(1);\n    },\n\n    minorIntervals: function() {\n        return this.intervals(0.5);\n    },\n\n    intervalAngle: function(interval) {\n        return (360 + interval + this.options.startAngle) % 360;\n    },\n\n    majorAngles: function() {\n        var this$1$1 = this;\n\n        return map(this.majorIntervals(), function (interval) { return this$1$1.intervalAngle(interval); });\n    },\n\n    createLine: function() {\n        return [];\n    },\n\n    majorGridLineAngles: function(altAxis) {\n        var majorGridLines = this.options.majorGridLines;\n        return this.gridLineAngles(altAxis, 1, majorGridLines.skip, majorGridLines.step);\n    },\n\n    minorGridLineAngles: function(altAxis, skipMajor) {\n        var ref = this.options;\n        var minorGridLines = ref.minorGridLines;\n        var majorGridLines = ref.majorGridLines;\n        var majorGridLineAngles = skipMajor ? this.intervals(1, majorGridLines.skip, majorGridLines.step) : null;\n\n        return this.gridLineAngles(altAxis, 0.5, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n    },\n\n    radiusCallback: function(radius, altAxis, skipMajor) {\n        if (altAxis.options.type !== ARC) {\n            var minorAngle = rad(360 / (this.options.categories.length * 2));\n            var minorRadius = Math.cos(minorAngle) * radius;\n            var majorAngles = this.majorAngles();\n\n            var radiusCallback = function(angle) {\n                if (!skipMajor && inArray(angle, majorAngles)) {\n                    return radius;\n                }\n\n                return minorRadius;\n            };\n            return radiusCallback;\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1$1 = this;\n\n        var plotBands = this.options.plotBands || [];\n\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        for (var i = 0; i < plotBands.length; i++) {\n            var band = plotBands[i];\n            var slot = this$1$1.plotBandSlot(band);\n            var singleSlot = this$1$1.getSlot(band.from);\n\n            var head = band.from - Math.floor(band.from);\n            slot.startAngle += head * singleSlot.angle;\n\n            var tail = Math.ceil(band.to) - band.to;\n            slot.angle -= (tail + head) * singleSlot.angle;\n\n            var ring = ShapeBuilder.current.createRing(slot, {\n                fill: {\n                    color: band.color,\n                    opacity: band.opacity\n                },\n                stroke: {\n                    opacity: band.opacity\n                }\n            });\n            group.append(ring);\n        }\n\n        this.appendVisual(group);\n    },\n\n    plotBandSlot: function(band) {\n        return this.getSlot(band.from, band.to - 1);\n    },\n\n    getSlot: function(from, to) {\n        var options = this.options;\n        var justified = options.justified;\n        var box = this.box;\n        var divs = this.majorAngles();\n        var totalDivs = divs.length;\n        var slotAngle = 360 / totalDivs;\n        var fromValue = from;\n\n        if (options.reverse && !justified) {\n            fromValue = (fromValue + 1) % totalDivs;\n        }\n\n        fromValue = limitValue(Math.floor(fromValue), 0, totalDivs - 1);\n        var slotStart = divs[fromValue];\n\n        if (justified) {\n            slotStart = slotStart - slotAngle / 2;\n\n            if (slotStart < 0) {\n                slotStart += 360;\n            }\n        }\n\n        var toValue = limitValue(Math.ceil(to || fromValue), fromValue, totalDivs - 1);\n        var slots = toValue - fromValue + 1;\n        var angle = slotAngle * slots;\n\n        return new Ring(box.center(), 0, box.height() / 2, slotStart, angle);\n    },\n\n    slot: function(from, to) {\n        var slot = this.getSlot(from, to);\n        var startAngle = slot.startAngle + 180;\n        var endAngle = startAngle + slot.angle;\n\n        return new geometry.Arc([ slot.center.x, slot.center.y ], {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: slot.radius,\n            radiusY: slot.radius\n        });\n    },\n\n    pointCategoryIndex: function(point) {\n        var this$1$1 = this;\n\n        var length = this.options.categories.length;\n        var index = null;\n\n        for (var i = 0; i < length; i++) {\n            var slot = this$1$1.getSlot(i);\n            if (slot.containsPoint(point)) {\n                index = i;\n                break;\n            }\n        }\n\n        return index;\n    }\n});\n\nsetDefaultOptions(RadarCategoryAxis, {\n    startAngle: 90,\n    labels: {\n        margin: getSpacing(10)\n    },\n    majorGridLines: {\n        visible: true\n    },\n    justified: true\n});\ndeepExtend(RadarCategoryAxis.prototype, GridLinesMixin);\n\nvar PolarAxis = Axis.extend({\n    init: function(options, chartService) {\n        Axis.fn.init.call(this, options, chartService);\n\n        var instanceOptions = this.options;\n\n        instanceOptions.minorUnit = instanceOptions.minorUnit || instanceOptions.majorUnit / 2;\n    },\n\n    getDivisions: function(stepValue) {\n        return NumericAxis.prototype.getDivisions.call(this, stepValue) - 1;\n    },\n\n    reflow: function(box) {\n        this.box = box;\n        this.reflowLabels();\n    },\n\n    reflowLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var labelOptions = ref.options.labels;\n        var skip = labelOptions.skip || 0;\n        var step = labelOptions.step || 1;\n\n        var measureBox = new Box();\n        var divs = this.intervals(options.majorUnit, skip, step);\n\n        for (var i = 0; i < labels.length; i++) {\n            labels[i].reflow(measureBox);\n            var labelBox = labels[i].box;\n\n            labels[i].reflow(this$1$1.getSlot(divs[i]).adjacentBox(0, labelBox.width(), labelBox.height()));\n        }\n    },\n\n    lineBox: function() {\n        return this.box;\n    },\n\n    intervals: function(size, skipOption, stepOption, skipAngles) {\n        if (skipAngles === void 0) { skipAngles = false; }\n\n        var min = this.options.min;\n        var divisions = this.getDivisions(size);\n        var divs = [];\n        var skip = skipOption || 0;\n        var step = stepOption || 1;\n\n        for (var i = skip; i < divisions; i += step) {\n            var current = (360 + min + i * size) % 360;\n            if (!(skipAngles && inArray(current, skipAngles))) {\n                divs.push(current);\n            }\n        }\n\n        return divs;\n    },\n\n    majorIntervals: function() {\n        return this.intervals(this.options.majorUnit);\n    },\n\n    minorIntervals: function() {\n        return this.intervals(this.options.minorUnit);\n    },\n\n    intervalAngle: function(i) {\n        return (540 - i - this.options.startAngle) % 360;\n    },\n\n    createLine: function() {\n        return [];\n    },\n\n    majorGridLineAngles: function(altAxis) {\n        var majorGridLines = this.options.majorGridLines;\n        return this.gridLineAngles(altAxis, this.options.majorUnit, majorGridLines.skip, majorGridLines.step);\n    },\n\n    minorGridLineAngles: function(altAxis, skipMajor) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var majorGridLineAngles = skipMajor ? this.intervals(options.majorUnit, majorGridLines.skip, majorGridLines.step) : null;\n\n        return this.gridLineAngles(altAxis, options.minorUnit, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n    },\n\n    plotBandSlot: function(band) {\n        return this.getSlot(band.from, band.to);\n    },\n\n    getSlot: function(a, b) {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var startAngle = options.startAngle;\n        var start = limitValue(a, options.min, options.max);\n        var end = limitValue(b || start, start, options.max);\n\n        if (options.reverse) {\n            start *= -1;\n            end *= -1;\n        }\n\n        start = (540 - start - startAngle) % 360;\n        end = (540 - end - startAngle) % 360;\n\n        if (end < start) {\n            var tmp = start;\n            start = end;\n            end = tmp;\n        }\n\n        return new Ring(box.center(), 0, box.height() / 2, start, end - start);\n    },\n\n    slot: function(from, to) {\n        if (to === void 0) { to = from; }\n\n        var options = this.options;\n        var start = 360 - options.startAngle;\n        var slot = this.getSlot(from, to);\n        var min = Math.min(from, to);\n        var max = Math.max(from, to);\n        var startAngle, endAngle;\n\n        if (options.reverse) {\n            startAngle = min;\n            endAngle = max;\n        } else {\n            startAngle = 360 - max;\n            endAngle = 360 - min;\n        }\n\n        startAngle = (startAngle + start) % 360;\n        endAngle = (endAngle + start) % 360;\n\n        return new geometry.Arc([ slot.center.x, slot.center.y ], {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: slot.radius,\n            radiusY: slot.radius\n        });\n    },\n\n    getValue: function(point) {\n        var options = this.options;\n        var center = this.box.center();\n        var dx = point.x - center.x;\n        var dy = point.y - center.y;\n        var theta = Math.round(deg(Math.atan2(dy, dx)));\n        var start = options.startAngle;\n\n        if (!options.reverse) {\n            theta *= -1;\n            start *= -1;\n        }\n\n        return (theta + start + 360) % 360;\n    },\n\n    valueRange: function() {\n        return {\n            min: 0,\n            max: Math.PI * 2\n        };\n    }\n});\n\nsetDefaultOptions(PolarAxis, {\n    type: \"polar\",\n    startAngle: 0,\n    reverse: false,\n    majorUnit: 60,\n    min: 0,\n    max: 360,\n    labels: {\n        margin: getSpacing(10)\n    },\n    majorGridLines: {\n        color: BLACK,\n        visible: true,\n        width: 1\n    },\n    minorGridLines: {\n        color: \"#aaa\"\n    }\n});\n\ndeepExtend(PolarAxis.prototype, GridLinesMixin, {\n    createPlotBands: RadarCategoryAxis.prototype.createPlotBands,\n    majorAngles: RadarCategoryAxis.prototype.majorAngles,\n    range: NumericAxis.prototype.range,\n    labelsCount: NumericAxis.prototype.labelsCount,\n    createAxisLabel: NumericAxis.prototype.createAxisLabel\n});\n\nvar RadarNumericAxisMixin = {\n    options: {\n        majorGridLines: {\n            visible: true\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var type = ref.majorGridLines.type;\n        var plotBands = ref.plotBands; if (plotBands === void 0) { plotBands = []; }\n        var altAxis = this.plotArea.polarAxis;\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        for (var i = 0; i < plotBands.length; i++) {\n            var band = plotBands[i];\n            var bandStyle = {\n                fill: {\n                    color: band.color,\n                    opacity: band.opacity\n                },\n                stroke: {\n                    opacity: band.opacity\n                }\n            };\n\n            var slot = this$1$1.getSlot(band.from, band.to, true);\n            var ring = new Ring(center, center.y - slot.y2, center.y - slot.y1, 0, 360);\n\n            var shape = (void 0);\n            if (type === ARC) {\n                shape = ShapeBuilder.current.createRing(ring, bandStyle);\n            } else {\n                shape = Path.fromPoints(this$1$1.plotBandPoints(ring, majorAngles), bandStyle).close();\n            }\n\n            group.append(shape);\n        }\n\n        this.appendVisual(group);\n    },\n\n    plotBandPoints: function(ring, angles) {\n        var innerPoints = [];\n        var outerPoints = [];\n        var center = [ ring.center.x, ring.center.y ];\n        var innerCircle = new Circle(center, ring.innerRadius);\n        var outerCircle = new Circle(center, ring.radius);\n\n        for (var i = 0; i < angles.length; i++) {\n            innerPoints.push(innerCircle.pointAt(angles[i] + 180));\n            outerPoints.push(outerCircle.pointAt(angles[i] + 180));\n        }\n\n        innerPoints.reverse();\n        innerPoints.push(innerPoints[0]);\n        outerPoints.push(outerPoints[0]);\n\n        return outerPoints.concat(innerPoints);\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var majorTicks = this.radarMajorGridLinePositions();\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var gridLines = [];\n\n        if (options.majorGridLines.visible) {\n            gridLines = this.renderGridLines(\n                center, majorTicks, majorAngles, options.majorGridLines\n            );\n        }\n\n        if (options.minorGridLines.visible) {\n            var minorTicks = this.radarMinorGridLinePositions();\n            append(gridLines, this.renderGridLines(\n                center, minorTicks, majorAngles, options.minorGridLines\n            ));\n        }\n\n        return gridLines;\n    },\n\n    renderGridLines: function(center, ticks, angles, options) {\n        var style = {\n            stroke: {\n                width: options.width,\n                color: options.color,\n                dashType: options.dashType\n            }\n        };\n        var skip = options.skip; if (skip === void 0) { skip = 0; }\n        var step = options.step; if (step === void 0) { step = 0; }\n        var container = this.gridLinesVisual();\n\n        for (var tickIx = skip; tickIx < ticks.length; tickIx += step) {\n            var tickRadius = center.y - ticks[tickIx];\n            if (tickRadius > 0) {\n                var circle = new Circle([ center.x, center.y ], tickRadius);\n                if (options.type === ARC) {\n                    container.append(new drawing.Circle(circle, style));\n                } else {\n                    var line = new Path(style);\n                    for (var angleIx = 0; angleIx < angles.length; angleIx++) {\n                        line.lineTo(circle.pointAt(angles[angleIx] + 180));\n                    }\n\n                    line.close();\n                    container.append(line);\n                }\n            }\n        }\n\n        return container.children;\n    },\n\n    getValue: function(point) {\n        var lineBox = this.lineBox();\n        var altAxis = this.plotArea.polarAxis;\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var radius = point.distanceTo(center);\n        var distance = radius;\n\n        if (this.options.majorGridLines.type !== ARC && majorAngles.length > 1) {\n            var dx = point.x - center.x;\n            var dy = point.y - center.y;\n            var theta = (deg(Math.atan2(dy, dx)) + 540) % 360;\n\n            majorAngles.sort(function(a, b) {\n                return angularDistance(a, theta) - angularDistance(b, theta);\n            });\n\n            // Solve triangle (center, point, axis X) using one side (radius) and two angles.\n            // Angles are derived from triangle (center, point, gridline X)\n            var midAngle = angularDistance(majorAngles[0], majorAngles[1]) / 2;\n            var alpha = angularDistance(theta, majorAngles[0]);\n            var gamma = 90 - midAngle;\n            var beta = 180 - alpha - gamma;\n\n            distance = radius * (Math.sin(rad(beta)) / Math.sin(rad(gamma)));\n        }\n\n        return this.axisType().prototype.getValue.call(\n            this, new Point(lineBox.x1, lineBox.y2 - distance)\n        );\n    }\n};\n\nfunction angularDistance(a, b) {\n    return 180 - Math.abs(Math.abs(a - b) - 180);\n}\n\nvar RadarNumericAxis = NumericAxis.extend({\n    radarMajorGridLinePositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    radarMinorGridLinePositions: function() {\n        var options = this.options;\n        var minorSkipStep = 0;\n\n        if (options.majorGridLines.visible) {\n            minorSkipStep = options.majorUnit;\n        }\n        return this.getTickPositions(options.minorUnit, minorSkipStep);\n    },\n\n    axisType: function() {\n        return NumericAxis;\n    }\n});\n\ndeepExtend(RadarNumericAxis.prototype, RadarNumericAxisMixin);\n\nvar RadarLogarithmicAxis = LogarithmicAxis.extend({\n    radarMajorGridLinePositions: function() {\n        var positions = [];\n\n        this.traverseMajorTicksPositions(function(position) {\n            positions.push(position);\n        }, this.options.majorGridLines);\n\n        return positions;\n    },\n\n    radarMinorGridLinePositions: function() {\n        var positions = [];\n\n        this.traverseMinorTicksPositions(function(position) {\n            positions.push(position);\n        }, this.options.minorGridLines);\n\n        return positions;\n    },\n\n    axisType: function() {\n        return LogarithmicAxis;\n    }\n});\n\ndeepExtend(RadarLogarithmicAxis.prototype, RadarNumericAxisMixin);\n\nvar WEIGHT = 0.333;\nvar EXTREMUM_ALLOWED_DEVIATION = 0.01;\n\nvar CurveProcessor = Class.extend({\n    init: function(closed) {\n\n        this.closed = closed;\n    },\n\n    process: function(dataPoints) {\n        var this$1$1 = this;\n\n        var points = dataPoints.slice(0);\n        var segments = [];\n        var closed = this.closed;\n        var length = points.length;\n\n        if (length > 2) {\n            this.removeDuplicates(0, points);\n            length = points.length;\n        }\n\n        if (length < 2 || (length === 2 && points[0].equals(points[1]))) {\n            return segments;\n        }\n\n        var p0 = points[0];\n        var p1 = points[1];\n        var p2 = points[2];\n\n        segments.push(new Segment(p0));\n\n        while (p0.equals(points[length - 1])) {\n            closed = true;\n            points.pop();\n            length--;\n        }\n\n        if (length === 2) {\n            var tangent = this.tangent(p0,p1, X, Y);\n\n            last(segments).controlOut(\n                this.firstControlPoint(tangent, p0, p1, X, Y)\n            );\n\n            segments.push(new Segment(\n                p1,\n                this.secondControlPoint(tangent, p0, p1, X, Y)\n            ));\n\n            return segments;\n        }\n\n        var initialControlPoint, lastControlPoint;\n\n        if (closed) {\n            p0 = points[length - 1]; p1 = points[0]; p2 = points[1];\n            var controlPoints = this.controlPoints(p0, p1, p2);\n            initialControlPoint = controlPoints[1];\n            lastControlPoint = controlPoints[0];\n        } else {\n            var tangent$1 = this.tangent(p0, p1, X,Y);\n            initialControlPoint = this.firstControlPoint(tangent$1, p0, p1, X, Y);\n        }\n\n        var cp0 = initialControlPoint;\n        for (var idx = 0; idx <= length - 3; idx++) {\n            this$1$1.removeDuplicates(idx, points);\n            length = points.length;\n            if (idx + 3 <= length) {\n                p0 = points[idx]; p1 = points[idx + 1]; p2 = points[idx + 2];\n                var controlPoints$1 = this$1$1.controlPoints(p0,p1,p2);\n\n                last(segments).controlOut(cp0);\n                cp0 = controlPoints$1[1];\n\n                var cp1 = controlPoints$1[0];\n                segments.push(new Segment(p1, cp1));\n            }\n        }\n\n        if (closed) {\n            p0 = points[length - 2]; p1 = points[length - 1]; p2 = points[0];\n            var controlPoints$2 = this.controlPoints(p0, p1, p2);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p1,\n                controlPoints$2[0]\n            ));\n\n            last(segments).controlOut(controlPoints$2[1]);\n            segments.push(new Segment(\n                p2,\n                lastControlPoint\n            ));\n        } else {\n            var tangent$2 = this.tangent(p1, p2, X, Y);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p2,\n                this.secondControlPoint(tangent$2, p1, p2, X, Y)\n            ));\n        }\n\n        return segments;\n    },\n\n    removeDuplicates: function(idx, points) {\n        while (points[idx + 1] && (points[idx].equals(points[idx + 1]) || points[idx + 1].equals(points[idx + 2]))) {\n            points.splice(idx + 1, 1);\n        }\n    },\n\n    invertAxis: function(p0, p1, p2) {\n        var invertAxis = false;\n\n        if (p0.x === p1.x) {\n            invertAxis = true;\n        } else if (p1.x === p2.x) {\n            if ((p1.y < p2.y && p0.y <= p1.y) || (p2.y < p1.y && p1.y <= p0.y)) {\n                invertAxis = true;\n            }\n        } else {\n            var fn = this.lineFunction(p0,p1);\n            var y2 = this.calculateFunction(fn, p2.x);\n            if (!(p0.y <= p1.y && p2.y <= y2) &&\n                !(p1.y <= p0.y && p2.y >= y2)) {\n                invertAxis = true;\n            }\n        }\n\n        return invertAxis;\n    },\n\n    isLine: function(p0, p1, p2) {\n        var fn = this.lineFunction(p0, p1);\n        var y2 = this.calculateFunction(fn, p2.x);\n\n        return (p0.x === p1.x && p1.x === p2.x) || round(y2, 1) === round(p2.y, 1);\n    },\n\n    lineFunction: function(p1, p2) {\n        var a = (p2.y - p1.y) / (p2.x - p1.x);\n        var b = p1.y - a * p1.x;\n\n        return [ b, a ];\n    },\n\n    controlPoints: function(p0, p1, p2) {\n        var xField = X;\n        var yField = Y;\n        var restrict = false;\n        var switchOrientation = false;\n        var tangent;\n\n        if (this.isLine(p0, p1, p2)) {\n            tangent = this.tangent(p0, p1, X, Y);\n        } else {\n            var monotonic = {\n                x: this.isMonotonicByField(p0, p1, p2, X),\n                y: this.isMonotonicByField(p0, p1, p2, Y)\n            };\n\n            if (monotonic.x && monotonic.y) {\n                tangent = this.tangent(p0, p2, X, Y);\n                restrict = true;\n            } else {\n                if (this.invertAxis(p0, p1, p2)) {\n                    xField = Y;\n                    yField = X;\n                }\n\n                if (monotonic[xField]) {\n                    tangent = 0;\n                } else {\n                    var sign;\n                    if ((p2[yField] < p0[yField] && p0[yField] <= p1[yField]) ||\n                        (p0[yField] < p2[yField] && p1[yField] <= p0[yField])) {\n                        sign = numberSign((p2[yField] - p0[yField]) * (p1[xField] - p0[xField]));\n                    } else {\n                        sign = -numberSign((p2[xField] - p0[xField]) * (p1[yField] - p0[yField]));\n                    }\n\n                    tangent = EXTREMUM_ALLOWED_DEVIATION * sign;\n                    switchOrientation = true;\n                }\n            }\n        }\n\n        var secondControlPoint = this.secondControlPoint(tangent, p0, p1, xField, yField);\n\n        if (switchOrientation) {\n            var oldXField = xField;\n            xField = yField;\n            yField = oldXField;\n        }\n\n        var firstControlPoint = this.firstControlPoint(tangent, p1, p2, xField, yField);\n\n        if (restrict) {\n            this.restrictControlPoint(p0, p1, secondControlPoint, tangent);\n            this.restrictControlPoint(p1, p2, firstControlPoint, tangent);\n        }\n\n        return [ secondControlPoint, firstControlPoint ];\n    },\n\n    restrictControlPoint: function(p1, p2, cp, tangent) {\n        if (p1.y < p2.y) {\n            if (p2.y < cp.y) {\n                cp.x = p1.x + (p2.y - p1.y) / tangent;\n                cp.y = p2.y;\n            } else if (cp.y < p1.y) {\n                cp.x = p2.x - (p2.y - p1.y) / tangent;\n                cp.y = p1.y;\n            }\n        } else {\n            if (cp.y < p2.y) {\n                cp.x = p1.x - (p1.y - p2.y) / tangent;\n                cp.y = p2.y;\n            } else if (p1.y < cp.y) {\n                cp.x = p2.x + (p1.y - p2.y) / tangent;\n                cp.y = p1.y;\n            }\n        }\n    },\n\n    tangent: function(p0, p1, xField, yField) {\n        var x = p1[xField] - p0[xField];\n        var y = p1[yField] - p0[yField];\n        var tangent;\n\n        if (x === 0) {\n            tangent = 0;\n        } else {\n            tangent = y / x;\n        }\n\n        return tangent;\n    },\n\n    isMonotonicByField: function(p0, p1, p2, field) {\n        return (p2[field] > p1[field] && p1[field] > p0[field]) ||\n                    (p2[field] < p1[field] && p1[field] < p0[field]);\n    },\n\n    firstControlPoint: function(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return this.point(t1 + distance, p0[yField] + distance * tangent, xField, yField);\n    },\n\n    secondControlPoint: function(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return this.point(t2 - distance, p3[yField] - distance * tangent, xField, yField);\n    },\n\n    point: function(xValue, yValue, xField, yField) {\n        var controlPoint = new geometry.Point();\n        controlPoint[xField] = xValue;\n        controlPoint[yField] = yValue;\n\n        return controlPoint;\n    },\n\n    calculateFunction: function(fn, x) {\n        var length = fn.length;\n        var result = 0;\n\n        for (var i = 0; i < length; i++) {\n            result += Math.pow(x,i) * fn[i];\n        }\n        return result;\n    }\n});\n\nfunction numberSign(value) {\n    return value <= 0 ? -1 : 1;\n}\n\ndataviz.Gradients = GRADIENTS;\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    services: services,\n    autoMajorUnit: autoMajorUnit,\n    Point: Point,\n    Box: Box,\n    Ring: Ring,\n    Sector: Sector,\n    ShapeBuilder: ShapeBuilder,\n    ShapeElement: ShapeElement,\n    ChartElement: ChartElement,\n    BoxElement: BoxElement,\n    RootElement: RootElement,\n    FloatElement: FloatElement,\n    Text: Text,\n    TextBox: TextBox,\n    Title: Title,\n    AxisLabel: AxisLabel,\n    Axis: Axis,\n    Note: Note,\n    CategoryAxis: CategoryAxis,\n    DateCategoryAxis: DateCategoryAxis,\n    DateValueAxis: DateValueAxis,\n    NumericAxis: NumericAxis,\n    LogarithmicAxis: LogarithmicAxis,\n    PolarAxis: PolarAxis,\n    RadarCategoryAxis: RadarCategoryAxis,\n    RadarNumericAxis: RadarNumericAxis,\n    RadarLogarithmicAxis: RadarLogarithmicAxis,\n    CurveProcessor: CurveProcessor,\n    rectToBox: rectToBox,\n    addClass: addClass,\n    removeClass: removeClass,\n    alignPathToPixel: alignPathToPixel,\n    clockwise: clockwise,\n    convertableToNumber: convertableToNumber,\n    deepExtend: deepExtend,\n    elementStyles: elementStyles,\n    getSpacing: getSpacing,\n    getTemplate: getTemplate,\n    getter: __common_getter_js,\n    grep: grep,\n    hasClasses: hasClasses,\n    HashMap: HashMap,\n    inArray: inArray,\n    interpolateValue: interpolateValue,\n    InstanceObserver: InstanceObserver,\n    isArray: isArray,\n    isFunction: isFunction,\n    isNumber: isNumber,\n    isObject: isObject,\n    isString: isString,\n    map: map,\n    mousewheelDelta: mousewheelDelta,\n    FontLoader: FontLoader,\n    setDefaultOptions: setDefaultOptions,\n    sparseArrayLimits: sparseArrayLimits,\n    styleValue: styleValue,\n    find: find,\n    elementScale: elementScale,\n    autoTextColor: autoTextColor,\n    createHashSet: createHashSet,\n    defaultErrorHandler: defaultErrorHandler,\n    keys: keys,\n    append: append,\n    bindEvents: bindEvents,\n    Class: Class,\n    defined: defined,\n    deg: deg,\n    elementOffset: elementOffset,\n    elementSize: elementSize,\n    eventCoordinates: eventCoordinates,\n    eventElement: eventElement,\n    hashKey: hashKey,\n    last: last,\n    limitValue: limitValue,\n    logToConsole: kendo.logToConsole,\n    objectKey: objectKey,\n    rad: rad,\n    round: round,\n    unbindEvents: unbindEvents,\n    valueOrDefault: valueOrDefault,\n    absoluteDateDiff: absoluteDateDiff,\n    addDuration: addDuration,\n    addTicks: addTicks,\n    ceilDate: ceilDate,\n    dateComparer: dateComparer,\n    dateDiff: dateDiff,\n    dateEquals: dateEquals,\n    dateIndex: dateIndex,\n    duration: duration,\n    floorDate: floorDate,\n    lteDateIndex: lteDateIndex,\n    startOfWeek: startOfWeek,\n    toDate: toDate,\n    parseDate: parseDate,\n    parseDates: parseDates,\n    toTime: toTime,\n    firstDay: firstDay\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    var dataviz = kendo.dataviz;\n    var services = dataviz.services;\n    var draw = kendo.drawing;\n\n    dataviz.SASS_THEMES = [\"sass\", \"default-v2\", \"bootstrap-v4\", \"material-v2\"];\n\n    dataviz.ExportMixin = {\n        extend: function(proto, skipLegacy) {\n            if (!proto.exportVisual) {\n                throw new Error(\"Mixin target has no exportVisual method defined.\");\n            }\n\n            proto.exportSVG = this.exportSVG;\n            proto.exportImage = this.exportImage;\n            proto.exportPDF = this.exportPDF;\n\n            if (!skipLegacy) {\n                proto.svg = this.svg;\n                proto.imageDataURL = this.imageDataURL;\n            }\n        },\n\n        exportSVG: function(options) {\n            return draw.exportSVG(this.exportVisual(), options);\n        },\n\n        exportImage: function(options) {\n            return draw.exportImage(this.exportVisual(options), options);\n        },\n\n        exportPDF: function(options) {\n            return draw.exportPDF(this.exportVisual(), options);\n        },\n\n        svg: function() {\n            if (draw.svg.Surface) {\n                return draw.svg.exportGroup(this.exportVisual());\n            } else {\n                throw new Error(\"SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface\");\n            }\n        },\n\n        imageDataURL: function() {\n            if (!kendo.support.canvas) {\n                return null;\n            }\n\n            if (draw.canvas.Surface) {\n                var container = $(\"<div />\").css({\n                    display: \"none\",\n                    width: this.element.width(),\n                    height: this.element.height()\n                }).appendTo(document.body);\n\n                var surface = new draw.canvas.Surface(container[0]);\n                surface.draw(this.exportVisual());\n                var image = surface._rootElement.toDataURL();\n\n                surface.destroy();\n                container.remove();\n\n                return image;\n            } else {\n                throw new Error(\"Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface\");\n            }\n        }\n    };\n\n    services.IntlService.register({\n       format: function(format) {\n           return kendo.format.apply(null, [format].concat(Array.prototype.slice.call(arguments, 1)));\n       },\n       toString: kendo.toString,\n       parseDate: kendo.parseDate,\n       firstDay: function() {\n           return kendo.culture().calendars.standard.firstDay;\n       }\n    });\n\n    services.TemplateService.register({\n       compile: kendo.template\n    });\n\n    dataviz.Point2D = dataviz.Point;\n    dataviz.Box2D = dataviz.Box;\n    dataviz.mwDelta = function(e) {\n        return dataviz.mousewheelDelta(e.originalEvent);\n    };\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"dataviz.core\",\n    name: \"Core\",\n    description: \"The DataViz core functions\",\n    category: \"dataviz\",\n    depends: [ \"core\", \"drawing\" ],\n    hidden: true\n};\n"]}