<?php
/**
 * Generated by Haxe 4.2.2
 */

namespace nMorph\framework\orm\common\sources;

use \nMorph\framework\orm\lang\SQL;
use \php\Boot;
use \nMorph\framework\orm\interfaces\ISource;
use \nMorph\framework\orm\configuration\Configuration;
use \nMorph\framework\orm\interfaces\ILang;

class TableSource implements ISource {
	/**
	 * @var string
	 */
	static public $__rtti = "<class path=\"nMorph.framework.orm.common.sources.TableSource\" params=\"\">\x0A\x09<implements path=\"nMorph.framework.orm.interfaces.ISource\"/>\x0A\x09<TableName><c path=\"String\"/></TableName>\x0A\x09<CurrentSQL><c path=\"nMorph.framework.orm.lang.SQL\"/></CurrentSQL>\x0A\x09<Module><c path=\"String\"/></Module>\x0A\x09<RegisterQuery public=\"1\" set=\"method\" line=\"22\"><f a=\"CurrentSQL\">\x0A\x09<c path=\"nMorph.framework.orm.interfaces.ILang\"/>\x0A\x09<x path=\"Void\"/>\x0A</f></RegisterQuery>\x0A\x09<SCRIPT_PART public=\"1\" set=\"method\" line=\"27\"><f a=\"?args\">\x0A\x09<c path=\"String\"/>\x0A\x09<x path=\"Void\"/>\x0A</f></SCRIPT_PART>\x0A\x09<new public=\"1\" set=\"method\" line=\"17\"><f a=\"TableName\">\x0A\x09<c path=\"String\"/>\x0A\x09<x path=\"Void\"/>\x0A</f></new>\x0A\x09<meta>\x0A\x09\x09<m n=\":directlyUsed\"/>\x0A\x09\x09<m n=\":keepSub\"/>\x0A\x09\x09<m n=\":rtti\"/>\x0A\x09</meta>\x0A</class>";

	/**
	 * @var SQL
	 */
	public $CurrentSQL;
	/**
	 * @var string
	 */
	public $Module;
	/**
	 * @var string
	 */
	public $TableName;

	/**
	 * @param string $TableName
	 * 
	 * @return void
	 */
	public function __construct ($TableName) {
		#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:18: characters 3-39
		$this->TableName = "\"" . ($TableName??'null') . "\"";
	}

	/**
	 * @param ILang $CurrentSQL
	 * 
	 * @return void
	 */
	public function RegisterQuery ($CurrentSQL) {
		#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:23: characters 3-42
		$this->CurrentSQL = Boot::typedCast(Boot::getClass(SQL::class), $CurrentSQL);
	}

	/**
	 * @param string $args
	 * 
	 * @return void
	 */
	public function SCRIPT_PART ($args = null) {
		#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:28: characters 3-26
		$WithScheme = false;
		#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:31: characters 3-81
		$CurrentSchema = Configuration::$Data->get_CurrentDatabaseConnection()->get_Schema();
		#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:32: lines 32-33
		if (($CurrentSchema !== null) && ($CurrentSchema !== "")) {
			#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:33: characters 4-21
			$WithScheme = true;
		}
		#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:35: characters 11-40
		$__hx__switch = ($this->CurrentSQL->getCurrentEngine()->index);
		if ($__hx__switch === 0) {
			#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:58: lines 58-61
			if ($WithScheme) {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:59: characters 6-58
				$this->CurrentSQL->AddBlock(($CurrentSchema??'null') . "." . ($this->TableName??'null'));
			} else {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:61: characters 6-36
				$this->CurrentSQL->AddBlock($this->TableName);
			}
		} else if ($__hx__switch === 1) {
			#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:48: lines 48-51
			if ($WithScheme) {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:49: characters 6-58
				$this->CurrentSQL->AddBlock(($CurrentSchema??'null') . "." . ($this->TableName??'null'));
			} else {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:51: characters 6-36
				$this->CurrentSQL->AddBlock($this->TableName);
			}
		} else if ($__hx__switch === 2) {
			#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:43: lines 43-46
			if ($WithScheme) {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:44: characters 6-58
				$this->CurrentSQL->AddBlock(($CurrentSchema??'null') . "." . ($this->TableName??'null'));
			} else {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:46: characters 6-36
				$this->CurrentSQL->AddBlock($this->TableName);
			}
		} else if ($__hx__switch === 3) {
			#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:53: lines 53-56
			if ($WithScheme) {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:54: characters 6-58
				$this->CurrentSQL->AddBlock(($CurrentSchema??'null') . "." . ($this->TableName??'null'));
			} else {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:56: characters 6-36
				$this->CurrentSQL->AddBlock($this->TableName);
			}
		} else if ($__hx__switch === 4) {
			#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:38: lines 38-41
			if ($WithScheme) {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:39: characters 6-58
				$this->CurrentSQL->AddBlock(($CurrentSchema??'null') . "." . ($this->TableName??'null'));
			} else {
				#5_framework\orm\src/nMorph/framework/orm/common/sources/TableSource.hx:41: characters 6-36
				$this->CurrentSQL->AddBlock($this->TableName);
			}
		}
	}
}

Boot::registerClass(TableSource::class, 'nMorph.framework.orm.common.sources.TableSource');
