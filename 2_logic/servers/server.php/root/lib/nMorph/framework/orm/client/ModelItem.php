<?php
/**
 * Generated by Haxe 4.2.2
 */

namespace nMorph\framework\orm\client;

use \nMorph\framework\orm\common\enums\ObjectSourceTypeEnum;
use \php\Boot;
use \nMorph\framework\orm\interfaces\IClause;
use \nMorph\framework\common\exceptions\ExceptionHelper;
use \nMorph\framework\orm\common\enums\ObjectEditTypeEnum;
use \nMorph\framework\orm\tools\Context;

class ModelItem {
	/**
	 * @var string
	 */
	static public $__rtti = "<class path=\"nMorph.framework.orm.client.ModelItem\" params=\"T\">\x0A\x09<it public=\"1\" get=\"accessor\" set=\"accessor\">\x0A\x09\x09<c path=\"nMorph.framework.orm.client.ModelItem.T\"/>\x0A\x09\x09<meta><m n=\":isVar\"/></meta>\x0A\x09</it>\x0A\x09<set_it set=\"method\" line=\"17\"><f a=\"value\">\x0A\x09<c path=\"nMorph.framework.orm.client.ModelItem.T\"/>\x0A\x09<c path=\"nMorph.framework.orm.client.ModelItem.T\"/>\x0A</f></set_it>\x0A\x09<get_it set=\"method\" line=\"21\"><f a=\"\"><c path=\"nMorph.framework.orm.client.ModelItem.T\"/></f></get_it>\x0A\x09<Include public=\"1\" set=\"method\" line=\"26\"><f a=\"clause:laClase:context\">\x0A\x09<c path=\"nMorph.framework.orm.interfaces.IClause\"/>\x0A\x09<d/>\x0A\x09<c path=\"nMorph.framework.orm.tools.Context\"/>\x0A\x09<x path=\"Void\"/>\x0A</f></Include>\x0A\x09<Save public=\"1\" set=\"method\" line=\"49\"><f a=\"queue\">\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.QueueItem\"/></c>\x0A\x09<c path=\"Array\"><c path=\"nMorph.framework.orm.client.QueueItem\"/></c>\x0A</f></Save>\x0A\x09<Clear public=\"1\" set=\"method\" line=\"58\"><f a=\"\"><x path=\"Void\"/></f></Clear>\x0A\x09<new public=\"1\" set=\"method\" line=\"66\"><f a=\"\"><x path=\"Void\"/></f></new>\x0A\x09<meta>\x0A\x09\x09<m n=\":directlyUsed\"/>\x0A\x09\x09<m n=\":keepSub\"/>\x0A\x09\x09<m n=\":rtti\"/>\x0A\x09</meta>\x0A</class>";

	/**
	 * @var mixed
	 */
	public $it;

	/**
	 * @return void
	 */
	public function __construct () {
	}

	/**
	 * @return void
	 */
	public function Clear () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:59: characters 9-31
		if ($this->get_it() === null) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:59: characters 25-31
			return;
		}
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:60: lines 60-63
		if (($this->get_it() instanceof ModelObject)) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:61: characters 13-56
			$mo = Boot::typedCast(Boot::getClass(ModelObject::class), $this->get_it());
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:62: characters 13-23
			$mo->Clear();
		}
	}

	/**
	 * @param IClause $clause
	 * @param mixed $laClase
	 * @param Context $context
	 * 
	 * @return void
	 */
	public function Include ($clause, $laClase, $context) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:28: characters 9-46
		$clase = \Type::getClass($laClase);
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:29: characters 9-49
		$name = \Type::getClassName($clase);
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:31: characters 9-48
		$type = \Type::resolveClass($name);
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:32: characters 9-51
		$item = $clause->ReadOne($type, $context);
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:35: characters 9-18
		$this->set_it($item);
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:38: lines 38-46
		if (($this->get_it() instanceof ModelObject)) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:39: characters 13-56
			$mo = Boot::typedCast(Boot::getClass(ModelObject::class), $this->get_it());
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:40: characters 13-35
			$mo->set_TrackChanges(true);
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:41: characters 13-60
			$mo->set_ObjectEditType(ObjectEditTypeEnum::NOCHANGE());
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:42: characters 13-54
			$mo->set_ObjectSource(ObjectSourceTypeEnum::DB());
		} else {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:45: characters 13-80
			ExceptionHelper::LogicException(1, "Objects should be ModelObjects");
		}
	}

	/**
	 * @param QueueItem[]|\Array_hx $queue
	 * 
	 * @return QueueItem[]|\Array_hx
	 */
	public function Save ($queue) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:50: characters 9-37
		if ($this->get_it() === null) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:50: characters 25-37
			return $queue;
		}
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:51: lines 51-54
		if (($this->get_it() instanceof ModelObject)) {
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:52: characters 13-56
			$mo = Boot::typedCast(Boot::getClass(ModelObject::class), $this->get_it());
			#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:53: characters 13-35
			$queue = $mo->Save($queue);
		}
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:55: characters 9-21
		return $queue;
	}

	/**
	 * @return mixed
	 */
	public function get_it () {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:22: characters 9-18
		return $this->it;
	}

	/**
	 * @param mixed $value
	 * 
	 * @return mixed
	 */
	public function set_it ($value) {
		#5_framework\orm\src/nMorph/framework/orm/client/ModelItem.hx:18: characters 9-31
		return $this->it = $value;
	}
}

Boot::registerClass(ModelItem::class, 'nMorph.framework.orm.client.ModelItem');
Boot::registerGetters('nMorph\\framework\\orm\\client\\ModelItem', [
	'it' => true
]);
Boot::registerSetters('nMorph\\framework\\orm\\client\\ModelItem', [
	'it' => true
]);
