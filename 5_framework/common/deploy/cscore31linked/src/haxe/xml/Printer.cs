// Generated by Haxe 4.2.2

#pragma warning disable 109, 114, 219, 429, 168, 162
namespace haxe.xml {
	public class Printer : global::haxe.lang.HxObject {
		
		public Printer(global::haxe.lang.EmptyObject empty) {
		}
		
		
		public Printer(bool pretty) {
			global::haxe.xml.Printer.__hx_ctor_haxe_xml_Printer(this, pretty);
		}
		
		
		protected static void __hx_ctor_haxe_xml_Printer(global::haxe.xml.Printer __hx_this, bool pretty) {
			__hx_this.output = new global::StringBuf();
			__hx_this.pretty = pretty;
		}
		
		
		public static string print(global::Xml xml, global::haxe.lang.Null<bool> pretty) {
			global::haxe.lang.Null<bool> pretty1 = ( ( ! (pretty.hasValue) ) ? (new global::haxe.lang.Null<bool>(false, true)) : (pretty) );
			global::haxe.xml.Printer printer = new global::haxe.xml.Printer((pretty1).@value);
			printer.writeNode(xml, "");
			return printer.output.b.ToString();
		}
		
		
		public global::StringBuf output;
		
		public bool pretty;
		
		public virtual void writeNode(global::Xml @value, string tabs) {
			unchecked {
				switch (@value.nodeType) {
					case 0:
					{
						this.output.b.Append(((string) (global::Std.@string(global::haxe.lang.Runtime.concat(tabs, "<"))) ));
						{
							if (( @value.nodeType != global::Xml.Element )) {
								throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, expected Element but found ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
							}
							
							this.output.b.Append(((string) (global::Std.@string(@value.nodeName)) ));
						}
						
						{
							object attribute = @value.attributes();
							while (global::haxe.lang.Runtime.toBool(global::haxe.lang.Runtime.callField(attribute, "hasNext", 407283053, null))) {
								string attribute1 = global::haxe.lang.Runtime.toString(global::haxe.lang.Runtime.callField(attribute, "next", 1224901875, null));
								this.output.b.Append(((string) (global::Std.@string(global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat(" ", attribute1), "=\""))) ));
								{
									string input = global::StringTools.htmlEscape(@value.@get(attribute1), new global::haxe.lang.Null<bool>(true, true));
									this.output.b.Append(((string) (global::Std.@string(input)) ));
								}
								
								this.output.b.Append(((string) ("\"") ));
							}
							
						}
						
						if (this.hasChildren(@value)) {
							this.output.b.Append(((string) (">") ));
							if (this.pretty) {
								this.output.b.Append(((string) ("\n") ));
							}
							
							{
								if (( ( @value.nodeType != global::Xml.Document ) && ( @value.nodeType != global::Xml.Element ) )) {
									throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, expected Element or Document but found ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
								}
								
								int _g_current = 0;
								global::Array<object> _g_array = @value.children;
								while (( _g_current < _g_array.length )) {
									global::Xml child = ((global::Xml) (_g_array[_g_current++]) );
									this.writeNode(child, ( (this.pretty) ? (global::haxe.lang.Runtime.concat(tabs, "\t")) : (tabs) ));
								}
								
							}
							
							this.output.b.Append(((string) (global::Std.@string(global::haxe.lang.Runtime.concat(tabs, "</"))) ));
							{
								if (( @value.nodeType != global::Xml.Element )) {
									throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, expected Element but found ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
								}
								
								this.output.b.Append(((string) (global::Std.@string(@value.nodeName)) ));
							}
							
							this.output.b.Append(((string) (">") ));
							if (this.pretty) {
								this.output.b.Append(((string) ("\n") ));
							}
							
						}
						else {
							this.output.b.Append(((string) ("/>") ));
							if (this.pretty) {
								this.output.b.Append(((string) ("\n") ));
							}
							
						}
						
						break;
					}
					
					
					case 1:
					{
						if (( ( @value.nodeType == global::Xml.Document ) || ( @value.nodeType == global::Xml.Element ) )) {
							throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, unexpected ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
						}
						
						string nodeValue = @value.nodeValue;
						if (( nodeValue.Length != 0 )) {
							{
								string input1 = global::haxe.lang.Runtime.concat(tabs, global::StringTools.htmlEscape(nodeValue, default(global::haxe.lang.Null<bool>)));
								this.output.b.Append(((string) (global::Std.@string(input1)) ));
							}
							
							if (this.pretty) {
								this.output.b.Append(((string) ("\n") ));
							}
							
						}
						
						break;
					}
					
					
					case 2:
					{
						this.output.b.Append(((string) (global::Std.@string(global::haxe.lang.Runtime.concat(tabs, "<![CDATA["))) ));
						{
							if (( ( @value.nodeType == global::Xml.Document ) || ( @value.nodeType == global::Xml.Element ) )) {
								throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, unexpected ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
							}
							
							this.output.b.Append(((string) (global::Std.@string(@value.nodeValue)) ));
						}
						
						this.output.b.Append(((string) ("]]>") ));
						if (this.pretty) {
							this.output.b.Append(((string) ("\n") ));
						}
						
						break;
					}
					
					
					case 3:
					{
						if (( ( @value.nodeType == global::Xml.Document ) || ( @value.nodeType == global::Xml.Element ) )) {
							throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, unexpected ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
						}
						
						string commentContent = @value.nodeValue;
						commentContent = new global::EReg(((string) ("[\n\r\t]+") ), ((string) ("g") )).replace(commentContent, "");
						commentContent = global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat("<!--", commentContent), "-->");
						this.output.b.Append(((string) (global::Std.@string(tabs)) ));
						{
							string input2 = commentContent.Trim();
							this.output.b.Append(((string) (global::Std.@string(input2)) ));
						}
						
						if (this.pretty) {
							this.output.b.Append(((string) ("\n") ));
						}
						
						break;
					}
					
					
					case 4:
					{
						{
							if (( ( @value.nodeType == global::Xml.Document ) || ( @value.nodeType == global::Xml.Element ) )) {
								throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, unexpected ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
							}
							
							this.output.b.Append(((string) (global::Std.@string(global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat("<!DOCTYPE ", @value.nodeValue), ">"))) ));
						}
						
						if (this.pretty) {
							this.output.b.Append(((string) ("\n") ));
						}
						
						break;
					}
					
					
					case 5:
					{
						{
							if (( ( @value.nodeType == global::Xml.Document ) || ( @value.nodeType == global::Xml.Element ) )) {
								throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, unexpected ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
							}
							
							this.output.b.Append(((string) (global::Std.@string(global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat("<?", @value.nodeValue), "?>"))) ));
						}
						
						if (this.pretty) {
							this.output.b.Append(((string) ("\n") ));
						}
						
						break;
					}
					
					
					case 6:
					{
						if (( ( @value.nodeType != global::Xml.Document ) && ( @value.nodeType != global::Xml.Element ) )) {
							throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, expected Element or Document but found ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
						}
						
						int _g_current1 = 0;
						global::Array<object> _g_array1 = @value.children;
						while (( _g_current1 < _g_array1.length )) {
							global::Xml child1 = ((global::Xml) (_g_array1[_g_current1++]) );
							this.writeNode(child1, tabs);
						}
						
						break;
					}
					
					
				}
				
			}
		}
		
		
		public void write(string input) {
			this.output.b.Append(((string) (global::Std.@string(input)) ));
		}
		
		
		public void newline() {
			if (this.pretty) {
				this.output.b.Append(((string) ("\n") ));
			}
			
		}
		
		
		public virtual bool hasChildren(global::Xml @value) {
			unchecked {
				{
					if (( ( @value.nodeType != global::Xml.Document ) && ( @value.nodeType != global::Xml.Element ) )) {
						throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, expected Element or Document but found ", global::_Xml.XmlType_Impl_.toString(@value.nodeType)))) );
					}
					
					int _g_current = 0;
					global::Array<object> _g_array = @value.children;
					while (( _g_current < _g_array.length )) {
						global::Xml child = ((global::Xml) (_g_array[_g_current++]) );
						switch (child.nodeType) {
							case 0:
							case 1:
							{
								return true;
							}
							
							
							case 2:
							case 3:
							{
								if (( ( child.nodeType == global::Xml.Document ) || ( child.nodeType == global::Xml.Element ) )) {
									throw ((global::System.Exception) (global::haxe.Exception.thrown(global::haxe.lang.Runtime.concat("Bad node type, unexpected ", global::_Xml.XmlType_Impl_.toString(child.nodeType)))) );
								}
								
								if (( child.nodeValue.TrimStart().Length != 0 )) {
									return true;
								}
								
								break;
							}
							
							
							default:
							{
								break;
							}
							
						}
						
					}
					
				}
				
				return false;
			}
		}
		
		
		public override object __hx_setField(string field, int hash, object @value, bool handleProperties) {
			unchecked {
				switch (hash) {
					case 784433846:
					{
						this.pretty = global::haxe.lang.Runtime.toBool(@value);
						return @value;
					}
					
					
					case 209784577:
					{
						this.output = ((global::StringBuf) (@value) );
						return @value;
					}
					
					
					default:
					{
						return base.__hx_setField(field, hash, @value, handleProperties);
					}
					
				}
				
			}
		}
		
		
		public override object __hx_getField(string field, int hash, bool throwErrors, bool isCheck, bool handleProperties) {
			unchecked {
				switch (hash) {
					case 1126235833:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "hasChildren", 1126235833)) );
					}
					
					
					case 212244564:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "newline", 212244564)) );
					}
					
					
					case 1348037855:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "write", 1348037855)) );
					}
					
					
					case 1371405953:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "writeNode", 1371405953)) );
					}
					
					
					case 784433846:
					{
						return this.pretty;
					}
					
					
					case 209784577:
					{
						return this.output;
					}
					
					
					default:
					{
						return base.__hx_getField(field, hash, throwErrors, isCheck, handleProperties);
					}
					
				}
				
			}
		}
		
		
		public override object __hx_invokeField(string field, int hash, object[] dynargs) {
			unchecked {
				switch (hash) {
					case 1126235833:
					{
						return this.hasChildren(((global::Xml) (dynargs[0]) ));
					}
					
					
					case 212244564:
					{
						this.newline();
						break;
					}
					
					
					case 1348037855:
					{
						this.write(global::haxe.lang.Runtime.toString(dynargs[0]));
						break;
					}
					
					
					case 1371405953:
					{
						this.writeNode(((global::Xml) (dynargs[0]) ), global::haxe.lang.Runtime.toString(dynargs[1]));
						break;
					}
					
					
					default:
					{
						return base.__hx_invokeField(field, hash, dynargs);
					}
					
				}
				
				return null;
			}
		}
		
		
		public override void __hx_getFields(global::Array<string> baseArr) {
			baseArr.push("pretty");
			baseArr.push("output");
			base.__hx_getFields(baseArr);
		}
		
		
	}
}


