// Generated by Haxe 4.2.2
package nMorph.framework.svc.exceptions;

import haxe.root.*;

@SuppressWarnings(value={"rawtypes", "unchecked"})
public class ExceptionManager extends haxe.lang.HxObject
{
	public ExceptionManager(haxe.lang.EmptyObject empty)
	{
	}
	
	
	public ExceptionManager()
	{
		//line 16 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		nMorph.framework.svc.exceptions.ExceptionManager.__hx_ctor_nMorph_framework_svc_exceptions_ExceptionManager(this);
	}
	
	
	protected static void __hx_ctor_nMorph_framework_svc_exceptions_ExceptionManager(nMorph.framework.svc.exceptions.ExceptionManager __hx_this)
	{
	}
	
	
	public static java.lang.String HandleException(haxe.Exception ex, java.lang.String DecryptedString, nMorph.framework.svc.msg.RequestMessage req, java.lang.String LogicModule, java.lang.String LogicClass, java.lang.String LogicMethod, java.lang.String Name)
	{
		//line 18 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		nMorph.framework.svc.msg.ResponseMessage res = new nMorph.framework.svc.msg.ResponseMessage();
		//line 19 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		java.lang.String cc = haxe.root.Type.getClassName(((java.lang.Class) (haxe.root.Type.getClass(((haxe.Exception) (ex) ))) ));
		//line 20 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		if (haxe.lang.Runtime.valEq(cc, "nMorph.framework.common.exceptions.LogicException")) 
		{
			//line 22 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
			nMorph.framework.common.exceptions.LogicException le = ((nMorph.framework.common.exceptions.LogicException) (ex) );
			//line 23 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
			res.set_AttentionCode(( "" + le.get_Code() ));
			//line 24 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
			res.set_Message(le.get_message());
			//line 25 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
			res.set_RequestSeq(-1);
			//line 26 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
			res.set_Results(null);
		}
		else
		{
			//line 29 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
			if (haxe.lang.Runtime.valEq(cc, "nMorph.framework.common.exceptions.SecurityException")) 
			{
				//line 31 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				nMorph.framework.common.exceptions.SecurityException le1 = ((nMorph.framework.common.exceptions.SecurityException) (ex) );
				//line 32 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_AttentionCode(( "" + le1.get_Code() ));
				//line 33 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_Message(le1.get_message());
				//line 34 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_RequestSeq(-2);
				//line 35 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_Results(null);
			}
			else
			{
				//line 40 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				java.lang.String AttentionCode = ( ( ( ( ( ( ( haxe.root.Std.string(haxe.root.Std.random(99)) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) );
				//line 42 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				while (sys.FileSystem.exists(( ( nMorph.framework.common.configuration.Configuration.Data.get_LogFolder() + AttentionCode ) + ".txt" )))
				{
					//line 45 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
					AttentionCode = ( ( ( ( ( ( ( haxe.root.Std.string(haxe.root.Std.random(99)) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) ) + haxe.root.Std.string(haxe.root.Std.random(99)) );
				}
				
				//line 48 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				java.lang.String logContent = "";
				//line 49 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				logContent += ( ( "Message: " + ex.get_message() ) + "\r\n" );
				//line 50 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				haxe.root.Array<haxe.StackItem> tmp = ex.get_stack();
				//line 50 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				logContent += ( ( "StackTrace: " + (( (( tmp == null )) ? ("null") : (haxe._CallStack.CallStack_Impl_.toString(tmp)) )) ) + "\r\n" );
				//line 51 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				logContent += ( ( "Details: " + ex.details() ) + "\r\n" );
				//line 52 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				boolean tmp1 = ( ex.get_previous() != null );
				//line 62 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				logContent += ( ( "Date: " + haxe.root.Date.now().toString() ) + "\r\n" );
				//line 65 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				if (( DecryptedString != null )) 
				{
					//line 66 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
					logContent += ( ( "SerializedData: " + DecryptedString ) + "\r\n" );
				}
				
				//line 67 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				if (( req != null )) 
				{
					//line 68 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
					logContent += ( ( "RequestSeq: " + req.get_RequestSeq() ) + "\r\n" );
					//line 69 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
					logContent += ( ( "SessionID: " + req.get_SessionID() ) + "\r\n" );
					//line 70 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
					{
						//line 70 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
						int _g = 0;
						//line 70 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
						haxe.root.Array<nMorph.framework.svc.transport.MethodCall> _g1 = req.get_Calls();
						//line 70 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
						while (( _g < _g1.length ))
						{
							//line 70 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							nMorph.framework.svc.transport.MethodCall call = _g1.__get(_g);
							//line 70 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							 ++ _g;
							//line 71 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							logContent += ( "-------------------" + "\r\n" );
							//line 72 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							logContent += ( ( "Name: " + call.get_Name() ) + "\r\n" );
							//line 73 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							logContent += ( ( "LogicModule: " + call.get_LogicModule() ) + "\r\n" );
							//line 74 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							logContent += ( ( "LogicClass: " + call.get_LogicClass() ) + "\r\n" );
							//line 75 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							logContent += ( ( "LogicMethod: " + call.get_LogicMethod() ) + "\r\n" );
							//line 76 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							int pcount = 1;
							//line 77 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
							{
								//line 77 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
								int _g2 = 0;
								//line 77 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
								haxe.root.Array _g3 = call.get_LogicParams();
								//line 77 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
								while (( _g2 < _g3.length ))
								{
									//line 77 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
									java.lang.Object p = _g3.__get(_g2);
									//line 77 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
									 ++ _g2;
									//line 78 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
									logContent += ( ( ( ( "Param" + pcount ) + ": " ) + haxe.root.Std.string(p) ) + "\r\n" );
									//line 79 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
									 ++ pcount;
								}
								
							}
							
						}
						
					}
					
				}
				
				//line 83 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				logContent += ( "-------------------" + "\r\n" );
				//line 84 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				logContent += ( ( "Localhost: " + sys.net.Host.localhost() ) + "\r\n" );
				//line 86 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				sys.io.File.saveContent(( ( nMorph.framework.common.configuration.Configuration.Data.get_LogFolder() + AttentionCode ) + ".txt" ), logContent);
				//line 88 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_AttentionCode(AttentionCode);
				//line 89 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_Message(AttentionCode);
				//line 90 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_RequestSeq(-3);
				//line 91 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
				res.set_Results(null);
			}
			
		}
		
		//line 96 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		haxe.Serializer serializer = new haxe.Serializer();
		//line 97 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		serializer.serialize(res);
		//line 99 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		java.lang.String ResponseString = serializer.toString();
		//line 101 "C:\\TodoList\\nMorph\\5_framework\\svc\\src\\nMorph\\framework\\svc\\exceptions\\ExceptionManager.hx"
		return ResponseString;
	}
	
	
}


